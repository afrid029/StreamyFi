var Tw=Object.defineProperty;var ww=(r,e,t)=>e in r?Tw(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var wa=(r,e,t)=>ww(r,typeof e!="symbol"?e+"":e,t);function Rw(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function Aw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Hf={exports:{}},Ra={},Vf={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function Lw(){if(X0)return Ke;X0=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,S={};function T(F,H,me){this.props=F,this.context=H,this.refs=S,this.updater=me||x}T.prototype.isReactComponent={},T.prototype.setState=function(F,H){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,H,"setState")},T.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function R(){}R.prototype=T.prototype;function k(F,H,me){this.props=F,this.context=H,this.refs=S,this.updater=me||x}var C=k.prototype=new R;C.constructor=k,y(C,T.prototype),C.isPureReactComponent=!0;var I=Array.isArray,w=Object.prototype.hasOwnProperty,P={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function U(F,H,me){var ve,Se={},be=null,Me=null;if(H!=null)for(ve in H.ref!==void 0&&(Me=H.ref),H.key!==void 0&&(be=""+H.key),H)w.call(H,ve)&&!D.hasOwnProperty(ve)&&(Se[ve]=H[ve]);var Be=arguments.length-2;if(Be===1)Se.children=me;else if(1<Be){for(var De=Array(Be),ot=0;ot<Be;ot++)De[ot]=arguments[ot+2];Se.children=De}if(F&&F.defaultProps)for(ve in Be=F.defaultProps,Be)Se[ve]===void 0&&(Se[ve]=Be[ve]);return{$$typeof:r,type:F,key:be,ref:Me,props:Se,_owner:P.current}}function Q(F,H){return{$$typeof:r,type:F.type,key:H,ref:F.ref,props:F.props,_owner:F._owner}}function A(F){return typeof F=="object"&&F!==null&&F.$$typeof===r}function $(F){var H={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(me){return H[me]})}var ie=/\/+/g;function te(F,H){return typeof F=="object"&&F!==null&&F.key!=null?$(""+F.key):H.toString(36)}function fe(F,H,me,ve,Se){var be=typeof F;(be==="undefined"||be==="boolean")&&(F=null);var Me=!1;if(F===null)Me=!0;else switch(be){case"string":case"number":Me=!0;break;case"object":switch(F.$$typeof){case r:case e:Me=!0}}if(Me)return Me=F,Se=Se(Me),F=ve===""?"."+te(Me,0):ve,I(Se)?(me="",F!=null&&(me=F.replace(ie,"$&/")+"/"),fe(Se,H,me,"",function(ot){return ot})):Se!=null&&(A(Se)&&(Se=Q(Se,me+(!Se.key||Me&&Me.key===Se.key?"":(""+Se.key).replace(ie,"$&/")+"/")+F)),H.push(Se)),1;if(Me=0,ve=ve===""?".":ve+":",I(F))for(var Be=0;Be<F.length;Be++){be=F[Be];var De=ve+te(be,Be);Me+=fe(be,H,me,De,Se)}else if(De=g(F),typeof De=="function")for(F=De.call(F),Be=0;!(be=F.next()).done;)be=be.value,De=ve+te(be,Be++),Me+=fe(be,H,me,De,Se);else if(be==="object")throw H=String(F),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Me}function de(F,H,me){if(F==null)return F;var ve=[],Se=0;return fe(F,ve,"","",function(be){return H.call(me,be,Se++)}),ve}function pe(F){if(F._status===-1){var H=F._result;H=H(),H.then(function(me){(F._status===0||F._status===-1)&&(F._status=1,F._result=me)},function(me){(F._status===0||F._status===-1)&&(F._status=2,F._result=me)}),F._status===-1&&(F._status=0,F._result=H)}if(F._status===1)return F._result.default;throw F._result}var ge={current:null},ne={transition:null},Y={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:ne,ReactCurrentOwner:P};function q(){throw Error("act(...) is not supported in production builds of React.")}return Ke.Children={map:de,forEach:function(F,H,me){de(F,function(){H.apply(this,arguments)},me)},count:function(F){var H=0;return de(F,function(){H++}),H},toArray:function(F){return de(F,function(H){return H})||[]},only:function(F){if(!A(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ke.Component=T,Ke.Fragment=t,Ke.Profiler=i,Ke.PureComponent=k,Ke.StrictMode=n,Ke.Suspense=c,Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Ke.act=q,Ke.cloneElement=function(F,H,me){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var ve=y({},F.props),Se=F.key,be=F.ref,Me=F._owner;if(H!=null){if(H.ref!==void 0&&(be=H.ref,Me=P.current),H.key!==void 0&&(Se=""+H.key),F.type&&F.type.defaultProps)var Be=F.type.defaultProps;for(De in H)w.call(H,De)&&!D.hasOwnProperty(De)&&(ve[De]=H[De]===void 0&&Be!==void 0?Be[De]:H[De])}var De=arguments.length-2;if(De===1)ve.children=me;else if(1<De){Be=Array(De);for(var ot=0;ot<De;ot++)Be[ot]=arguments[ot+2];ve.children=Be}return{$$typeof:r,type:F.type,key:Se,ref:be,props:ve,_owner:Me}},Ke.createContext=function(F){return F={$$typeof:a,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:o,_context:F},F.Consumer=F},Ke.createElement=U,Ke.createFactory=function(F){var H=U.bind(null,F);return H.type=F,H},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(F){return{$$typeof:u,render:F}},Ke.isValidElement=A,Ke.lazy=function(F){return{$$typeof:h,_payload:{_status:-1,_result:F},_init:pe}},Ke.memo=function(F,H){return{$$typeof:f,type:F,compare:H===void 0?null:H}},Ke.startTransition=function(F){var H=ne.transition;ne.transition={};try{F()}finally{ne.transition=H}},Ke.unstable_act=q,Ke.useCallback=function(F,H){return ge.current.useCallback(F,H)},Ke.useContext=function(F){return ge.current.useContext(F)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(F){return ge.current.useDeferredValue(F)},Ke.useEffect=function(F,H){return ge.current.useEffect(F,H)},Ke.useId=function(){return ge.current.useId()},Ke.useImperativeHandle=function(F,H,me){return ge.current.useImperativeHandle(F,H,me)},Ke.useInsertionEffect=function(F,H){return ge.current.useInsertionEffect(F,H)},Ke.useLayoutEffect=function(F,H){return ge.current.useLayoutEffect(F,H)},Ke.useMemo=function(F,H){return ge.current.useMemo(F,H)},Ke.useReducer=function(F,H,me){return ge.current.useReducer(F,H,me)},Ke.useRef=function(F){return ge.current.useRef(F)},Ke.useState=function(F){return ge.current.useState(F)},Ke.useSyncExternalStore=function(F,H,me){return ge.current.useSyncExternalStore(F,H,me)},Ke.useTransition=function(){return ge.current.useTransition()},Ke.version="18.3.1",Ke}var Q0;function Tp(){return Q0||(Q0=1,Vf.exports=Lw()),Vf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function bw(){if(J0)return Ra;J0=1;var r=Tp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(u,c,f){var h,p={},g=null,x=null;f!==void 0&&(g=""+f),c.key!==void 0&&(g=""+c.key),c.ref!==void 0&&(x=c.ref);for(h in c)n.call(c,h)&&!o.hasOwnProperty(h)&&(p[h]=c[h]);if(u&&u.defaultProps)for(h in c=u.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:e,type:u,key:g,ref:x,props:p,_owner:i.current}}return Ra.Fragment=t,Ra.jsx=a,Ra.jsxs=a,Ra}var Z0;function Cw(){return Z0||(Z0=1,Hf.exports=bw()),Hf.exports}var W=Cw(),O=Tp();const Sn=Aw(O),ey=Rw({__proto__:null,default:Sn},[O]);var yu={},zf={exports:{}},xr={},Kf={exports:{}},Wf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ty;function kw(){return ty||(ty=1,function(r){function e(ne,Y){var q=ne.length;ne.push(Y);e:for(;0<q;){var F=q-1>>>1,H=ne[F];if(0<i(H,Y))ne[F]=Y,ne[q]=H,q=F;else break e}}function t(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var Y=ne[0],q=ne.pop();if(q!==Y){ne[0]=q;e:for(var F=0,H=ne.length,me=H>>>1;F<me;){var ve=2*(F+1)-1,Se=ne[ve],be=ve+1,Me=ne[be];if(0>i(Se,q))be<H&&0>i(Me,Se)?(ne[F]=Me,ne[be]=q,F=be):(ne[F]=Se,ne[ve]=q,F=ve);else if(be<H&&0>i(Me,q))ne[F]=Me,ne[be]=q,F=be;else break e}}return Y}function i(ne,Y){var q=ne.sortIndex-Y.sortIndex;return q!==0?q:ne.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();r.unstable_now=function(){return a.now()-u}}var c=[],f=[],h=1,p=null,g=3,x=!1,y=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ne){for(var Y=t(f);Y!==null;){if(Y.callback===null)n(f);else if(Y.startTime<=ne)n(f),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=t(f)}}function I(ne){if(S=!1,C(ne),!y)if(t(c)!==null)y=!0,pe(w);else{var Y=t(f);Y!==null&&ge(I,Y.startTime-ne)}}function w(ne,Y){y=!1,S&&(S=!1,R(U),U=-1),x=!0;var q=g;try{for(C(Y),p=t(c);p!==null&&(!(p.expirationTime>Y)||ne&&!$());){var F=p.callback;if(typeof F=="function"){p.callback=null,g=p.priorityLevel;var H=F(p.expirationTime<=Y);Y=r.unstable_now(),typeof H=="function"?p.callback=H:p===t(c)&&n(c),C(Y)}else n(c);p=t(c)}if(p!==null)var me=!0;else{var ve=t(f);ve!==null&&ge(I,ve.startTime-Y),me=!1}return me}finally{p=null,g=q,x=!1}}var P=!1,D=null,U=-1,Q=5,A=-1;function $(){return!(r.unstable_now()-A<Q)}function ie(){if(D!==null){var ne=r.unstable_now();A=ne;var Y=!0;try{Y=D(!0,ne)}finally{Y?te():(P=!1,D=null)}}else P=!1}var te;if(typeof k=="function")te=function(){k(ie)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,de=fe.port2;fe.port1.onmessage=ie,te=function(){de.postMessage(null)}}else te=function(){T(ie,0)};function pe(ne){D=ne,P||(P=!0,te())}function ge(ne,Y){U=T(function(){ne(r.unstable_now())},Y)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_continueExecution=function(){y||x||(y=!0,pe(w))},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return g},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(ne){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var q=g;g=Y;try{return ne()}finally{g=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ne,Y){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var q=g;g=ne;try{return Y()}finally{g=q}},r.unstable_scheduleCallback=function(ne,Y,q){var F=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?F+q:F):q=F,ne){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=q+H,ne={id:h++,callback:Y,priorityLevel:ne,startTime:q,expirationTime:H,sortIndex:-1},q>F?(ne.sortIndex=q,e(f,ne),t(c)===null&&ne===t(f)&&(S?(R(U),U=-1):S=!0,ge(I,q-F))):(ne.sortIndex=H,e(c,ne),y||x||(y=!0,pe(w))),ne},r.unstable_shouldYield=$,r.unstable_wrapCallback=function(ne){var Y=g;return function(){var q=g;g=Y;try{return ne.apply(this,arguments)}finally{g=q}}}}(Wf)),Wf}var ry;function Iw(){return ry||(ry=1,Kf.exports=kw()),Kf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ny;function Dw(){if(ny)return xr;ny=1;var r=Tp(),e=Iw();function t(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(s,l){a(s,l),a(s+"Capture",l)}function a(s,l){for(i[s]=l,s=0;s<l.length;s++)n.add(l[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function g(s){return c.call(p,s)?!0:c.call(h,s)?!1:f.test(s)?p[s]=!0:(h[s]=!0,!1)}function x(s,l,d,m){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function y(s,l,d,m){if(l===null||typeof l>"u"||x(s,l,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function S(s,l,d,m,v,E,b){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=m,this.attributeNamespace=v,this.mustUseProperty=d,this.propertyName=s,this.type=l,this.sanitizeURL=E,this.removeEmptyString=b}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){T[s]=new S(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];T[l]=new S(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){T[s]=new S(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){T[s]=new S(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){T[s]=new S(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){T[s]=new S(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){T[s]=new S(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){T[s]=new S(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){T[s]=new S(s,5,!1,s.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function k(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(R,k);T[l]=new S(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(R,k);T[l]=new S(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(R,k);T[l]=new S(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){T[s]=new S(s,1,!1,s.toLowerCase(),null,!1,!1)}),T.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){T[s]=new S(s,1,!1,s.toLowerCase(),null,!0,!0)});function C(s,l,d,m){var v=T.hasOwnProperty(l)?T[l]:null;(v!==null?v.type!==0:m||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(y(l,d,v,m)&&(d=null),m||v===null?g(l)&&(d===null?s.removeAttribute(l):s.setAttribute(l,""+d)):v.mustUseProperty?s[v.propertyName]=d===null?v.type===3?!1:"":d:(l=v.attributeName,m=v.attributeNamespace,d===null?s.removeAttribute(l):(v=v.type,d=v===3||v===4&&d===!0?"":""+d,m?s.setAttributeNS(m,l,d):s.setAttribute(l,d))))}var I=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),P=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),$=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),ne=Symbol.iterator;function Y(s){return s===null||typeof s!="object"?null:(s=ne&&s[ne]||s["@@iterator"],typeof s=="function"?s:null)}var q=Object.assign,F;function H(s){if(F===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);F=l&&l[1]||""}return`
`+F+s}var me=!1;function ve(s,l){if(!s||me)return"";me=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(X){var m=X}Reflect.construct(s,[],l)}else{try{l.call()}catch(X){m=X}s.call(l.prototype)}else{try{throw Error()}catch(X){m=X}s()}}catch(X){if(X&&m&&typeof X.stack=="string"){for(var v=X.stack.split(`
`),E=m.stack.split(`
`),b=v.length-1,_=E.length-1;1<=b&&0<=_&&v[b]!==E[_];)_--;for(;1<=b&&0<=_;b--,_--)if(v[b]!==E[_]){if(b!==1||_!==1)do if(b--,_--,0>_||v[b]!==E[_]){var M=`
`+v[b].replace(" at new "," at ");return s.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",s.displayName)),M}while(1<=b&&0<=_);break}}}finally{me=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?H(s):""}function Se(s){switch(s.tag){case 5:return H(s.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return s=ve(s.type,!1),s;case 11:return s=ve(s.type.render,!1),s;case 1:return s=ve(s.type,!0),s;default:return""}}function be(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case P:return"Portal";case Q:return"Profiler";case U:return"StrictMode";case te:return"Suspense";case fe:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case $:return(s.displayName||"Context")+".Consumer";case A:return(s._context.displayName||"Context")+".Provider";case ie:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case de:return l=s.displayName||null,l!==null?l:be(s.type)||"Memo";case pe:l=s._payload,s=s._init;try{return be(s(l))}catch{}}return null}function Me(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(l);case 8:return l===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Be(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function De(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ot(s){var l=De(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),m=""+s[l];if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,E=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return v.call(this)},set:function(b){m=""+b,E.call(this,b)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(b){m=""+b},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function rr(s){s._valueTracker||(s._valueTracker=ot(s))}function qt(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return s&&(m=De(s)?s.checked?"true":"false":s.value),s=m,s!==d?(l.setValue(s),!0):!1}function nr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function on(s,l){var d=l.checked;return q({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function yi(s,l){var d=l.defaultValue==null?"":l.defaultValue,m=l.checked!=null?l.checked:l.defaultChecked;d=Be(l.value!=null?l.value:d),s._wrapperState={initialChecked:m,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Rn(s,l){l=l.checked,l!=null&&C(s,"checked",l,!1)}function Ur(s,l){Rn(s,l);var d=Be(l.value),m=l.type;if(d!=null)m==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(m==="submit"||m==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?Kn(s,l.type,d):l.hasOwnProperty("defaultValue")&&Kn(s,l.type,Be(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function Gr(s,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var m=l.type;if(!(m!=="submit"&&m!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,d||l===s.value||(s.value=l),s.defaultValue=l}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function Kn(s,l,d){(l!=="number"||nr(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var jr=Array.isArray;function Gt(s,l,d,m){if(s=s.options,l){l={};for(var v=0;v<d.length;v++)l["$"+d[v]]=!0;for(d=0;d<s.length;d++)v=l.hasOwnProperty("$"+s[d].value),s[d].selected!==v&&(s[d].selected=v),v&&m&&(s[d].defaultSelected=!0)}else{for(d=""+Be(d),l=null,v=0;v<s.length;v++){if(s[v].value===d){s[v].selected=!0,m&&(s[v].defaultSelected=!0);return}l!==null||s[v].disabled||(l=s[v])}l!==null&&(l.selected=!0)}}function ue(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return q({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Qe(s,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(t(92));if(jr(d)){if(1<d.length)throw Error(t(93));d=d[0]}l=d}l==null&&(l=""),d=l}s._wrapperState={initialValue:Be(d)}}function vi(s,l){var d=Be(l.value),m=Be(l.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),l.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),m!=null&&(s.defaultValue=""+m)}function an(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function Hr(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fs(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?Hr(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var xi,ll=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,m,v){MSApp.execUnsafeLocalFunction(function(){return s(l,d,m,v)})}:s}(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(xi=xi||document.createElement("div"),xi.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=xi.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function hr(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var Si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ul=["Webkit","ms","Moz","O"];Object.keys(Si).forEach(function(s){ul.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),Si[l]=Si[s]})});function jo(s,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||Si.hasOwnProperty(s)&&Si[s]?(""+l).trim():l+"px"}function cl(s,l){s=s.style;for(var d in l)if(l.hasOwnProperty(d)){var m=d.indexOf("--")===0,v=jo(d,l[d],m);d==="float"&&(d="cssFloat"),m?s.setProperty(d,v):s[d]=v}}var dl=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ei(s,l){if(l){if(dl[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Ms(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var es=null;function Ho(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ns=null,Ti=null,Wn=null;function ts(s){if(s=la(s)){if(typeof Ns!="function")throw Error(t(280));var l=s.stateNode;l&&(l=Pl(l),Ns(s.stateNode,s.type,l))}}function rs(s){Ti?Wn?Wn.push(s):Wn=[s]:Ti=s}function fl(){if(Ti){var s=Ti,l=Wn;if(Wn=Ti=null,ts(s),l)for(s=0;s<l.length;s++)ts(l[s])}}function hl(s,l){return s(l)}function N(){}var G=!1;function Z(s,l,d){if(G)return s(l,d);G=!0;try{return hl(s,l,d)}finally{G=!1,(Ti!==null||Wn!==null)&&(N(),fl())}}function ae(s,l){var d=s.stateNode;if(d===null)return null;var m=Pl(d);if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(t(231,l,typeof d));return d}var Te=!1;if(u)try{var ke={};Object.defineProperty(ke,"passive",{get:function(){Te=!0}}),window.addEventListener("test",ke,ke),window.removeEventListener("test",ke,ke)}catch{Te=!1}function $e(s,l,d,m,v,E,b,_,M){var X=Array.prototype.slice.call(arguments,3);try{l.apply(d,X)}catch(le){this.onError(le)}}var Ee=!1,Le=null,ye=!1,Ue=null,Ve={onError:function(s){Ee=!0,Le=s}};function ct(s,l,d,m,v,E,b,_,M){Ee=!1,Le=null,$e.apply(Ve,arguments)}function Mt(s,l,d,m,v,E,b,_,M){if(ct.apply(this,arguments),Ee){if(Ee){var X=Le;Ee=!1,Le=null}else throw Error(t(198));ye||(ye=!0,Ue=X)}}function Je(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,l.flags&4098&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function at(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function Rt(s){if(Je(s)!==s)throw Error(t(188))}function wi(s){var l=s.alternate;if(!l){if(l=Je(s),l===null)throw Error(t(188));return l!==s?null:s}for(var d=s,m=l;;){var v=d.return;if(v===null)break;var E=v.alternate;if(E===null){if(m=v.return,m!==null){d=m;continue}break}if(v.child===E.child){for(E=v.child;E;){if(E===d)return Rt(v),s;if(E===m)return Rt(v),l;E=E.sibling}throw Error(t(188))}if(d.return!==m.return)d=v,m=E;else{for(var b=!1,_=v.child;_;){if(_===d){b=!0,d=v,m=E;break}if(_===m){b=!0,m=v,d=E;break}_=_.sibling}if(!b){for(_=E.child;_;){if(_===d){b=!0,d=E,m=v;break}if(_===m){b=!0,m=E,d=v;break}_=_.sibling}if(!b)throw Error(t(189))}}if(d.alternate!==m)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?s:l}function Ri(s){return s=wi(s),s!==null?Vr(s):null}function Vr(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=Vr(s);if(l!==null)return l;s=s.sibling}return null}var Lr=e.unstable_scheduleCallback,Bs=e.unstable_cancelCallback,ns=e.unstable_shouldYield,Yn=e.unstable_requestPaint,dt=e.unstable_now,$s=e.unstable_getCurrentPriorityLevel,tt=e.unstable_ImmediatePriority,Nt=e.unstable_UserBlockingPriority,qn=e.unstable_NormalPriority,is=e.unstable_LowPriority,St=e.unstable_IdlePriority,ln=null,br=null;function ld(s){if(br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(ln,s,void 0,(s.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:UE,BE=Math.log,$E=Math.LN2;function UE(s){return s>>>=0,s===0?32:31-(BE(s)/$E|0)|0}var pl=64,ml=4194304;function Vo(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function gl(s,l){var d=s.pendingLanes;if(d===0)return 0;var m=0,v=s.suspendedLanes,E=s.pingedLanes,b=d&268435455;if(b!==0){var _=b&~v;_!==0?m=Vo(_):(E&=b,E!==0&&(m=Vo(E)))}else b=d&~v,b!==0?m=Vo(b):E!==0&&(m=Vo(E));if(m===0)return 0;if(l!==0&&l!==m&&!(l&v)&&(v=m&-m,E=l&-l,v>=E||v===16&&(E&4194240)!==0))return l;if(m&4&&(m|=d&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=m;0<l;)d=31-un(l),v=1<<d,m|=s[d],l&=~v;return m}function GE(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jE(s,l){for(var d=s.suspendedLanes,m=s.pingedLanes,v=s.expirationTimes,E=s.pendingLanes;0<E;){var b=31-un(E),_=1<<b,M=v[b];M===-1?(!(_&d)||_&m)&&(v[b]=GE(_,l)):M<=l&&(s.expiredLanes|=_),E&=~_}}function ud(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function bm(){var s=pl;return pl<<=1,!(pl&4194240)&&(pl=64),s}function cd(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function zo(s,l,d){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-un(l),s[l]=d}function HE(s,l){var d=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var m=s.eventTimes;for(s=s.expirationTimes;0<d;){var v=31-un(d),E=1<<v;l[v]=0,m[v]=-1,s[v]=-1,d&=~E}}function dd(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var m=31-un(d),v=1<<m;v&l|s[m]&l&&(s[m]|=l),d&=~v}}var it=0;function Cm(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var km,fd,Im,Dm,Pm,hd=!1,yl=[],Ai=null,Li=null,bi=null,Ko=new Map,Wo=new Map,Ci=[],VE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _m(s,l){switch(s){case"focusin":case"focusout":Ai=null;break;case"dragenter":case"dragleave":Li=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":Ko.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(l.pointerId)}}function Yo(s,l,d,m,v,E){return s===null||s.nativeEvent!==E?(s={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:E,targetContainers:[v]},l!==null&&(l=la(l),l!==null&&fd(l)),s):(s.eventSystemFlags|=m,l=s.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),s)}function zE(s,l,d,m,v){switch(l){case"focusin":return Ai=Yo(Ai,s,l,d,m,v),!0;case"dragenter":return Li=Yo(Li,s,l,d,m,v),!0;case"mouseover":return bi=Yo(bi,s,l,d,m,v),!0;case"pointerover":var E=v.pointerId;return Ko.set(E,Yo(Ko.get(E)||null,s,l,d,m,v)),!0;case"gotpointercapture":return E=v.pointerId,Wo.set(E,Yo(Wo.get(E)||null,s,l,d,m,v)),!0}return!1}function Om(s){var l=ss(s.target);if(l!==null){var d=Je(l);if(d!==null){if(l=d.tag,l===13){if(l=at(d),l!==null){s.blockedOn=l,Pm(s.priority,function(){Im(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function vl(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=md(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var m=new d.constructor(d.type,d);es=m,d.target.dispatchEvent(m),es=null}else return l=la(d),l!==null&&fd(l),s.blockedOn=d,!1;l.shift()}return!0}function Fm(s,l,d){vl(s)&&d.delete(l)}function KE(){hd=!1,Ai!==null&&vl(Ai)&&(Ai=null),Li!==null&&vl(Li)&&(Li=null),bi!==null&&vl(bi)&&(bi=null),Ko.forEach(Fm),Wo.forEach(Fm)}function qo(s,l){s.blockedOn===l&&(s.blockedOn=null,hd||(hd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,KE)))}function Xo(s){function l(v){return qo(v,s)}if(0<yl.length){qo(yl[0],s);for(var d=1;d<yl.length;d++){var m=yl[d];m.blockedOn===s&&(m.blockedOn=null)}}for(Ai!==null&&qo(Ai,s),Li!==null&&qo(Li,s),bi!==null&&qo(bi,s),Ko.forEach(l),Wo.forEach(l),d=0;d<Ci.length;d++)m=Ci[d],m.blockedOn===s&&(m.blockedOn=null);for(;0<Ci.length&&(d=Ci[0],d.blockedOn===null);)Om(d),d.blockedOn===null&&Ci.shift()}var Us=I.ReactCurrentBatchConfig,xl=!0;function WE(s,l,d,m){var v=it,E=Us.transition;Us.transition=null;try{it=1,pd(s,l,d,m)}finally{it=v,Us.transition=E}}function YE(s,l,d,m){var v=it,E=Us.transition;Us.transition=null;try{it=4,pd(s,l,d,m)}finally{it=v,Us.transition=E}}function pd(s,l,d,m){if(xl){var v=md(s,l,d,m);if(v===null)Pd(s,l,m,Sl,d),_m(s,m);else if(zE(v,s,l,d,m))m.stopPropagation();else if(_m(s,m),l&4&&-1<VE.indexOf(s)){for(;v!==null;){var E=la(v);if(E!==null&&km(E),E=md(s,l,d,m),E===null&&Pd(s,l,m,Sl,d),E===v)break;v=E}v!==null&&m.stopPropagation()}else Pd(s,l,m,null,d)}}var Sl=null;function md(s,l,d,m){if(Sl=null,s=Ho(m),s=ss(s),s!==null)if(l=Je(s),l===null)s=null;else if(d=l.tag,d===13){if(s=at(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return Sl=s,null}function Mm(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($s()){case tt:return 1;case Nt:return 4;case qn:case is:return 16;case St:return 536870912;default:return 16}default:return 16}}var ki=null,gd=null,El=null;function Nm(){if(El)return El;var s,l=gd,d=l.length,m,v="value"in ki?ki.value:ki.textContent,E=v.length;for(s=0;s<d&&l[s]===v[s];s++);var b=d-s;for(m=1;m<=b&&l[d-m]===v[E-m];m++);return El=v.slice(s,1<m?1-m:void 0)}function Tl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function wl(){return!0}function Bm(){return!1}function Cr(s){function l(d,m,v,E,b){this._reactName=d,this._targetInst=v,this.type=m,this.nativeEvent=E,this.target=b,this.currentTarget=null;for(var _ in s)s.hasOwnProperty(_)&&(d=s[_],this[_]=d?d(E):E[_]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?wl:Bm,this.isPropagationStopped=Bm,this}return q(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),l}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yd=Cr(Gs),Qo=q({},Gs,{view:0,detail:0}),qE=Cr(Qo),vd,xd,Jo,Rl=q({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ed,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Jo&&(Jo&&s.type==="mousemove"?(vd=s.screenX-Jo.screenX,xd=s.screenY-Jo.screenY):xd=vd=0,Jo=s),vd)},movementY:function(s){return"movementY"in s?s.movementY:xd}}),$m=Cr(Rl),XE=q({},Rl,{dataTransfer:0}),QE=Cr(XE),JE=q({},Qo,{relatedTarget:0}),Sd=Cr(JE),ZE=q({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),eT=Cr(ZE),tT=q({},Gs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),rT=Cr(tT),nT=q({},Gs,{data:0}),Um=Cr(nT),iT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aT(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=oT[s])?!!l[s]:!1}function Ed(){return aT}var lT=q({},Qo,{key:function(s){if(s.key){var l=iT[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Tl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?sT[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ed,charCode:function(s){return s.type==="keypress"?Tl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Tl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),uT=Cr(lT),cT=q({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gm=Cr(cT),dT=q({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ed}),fT=Cr(dT),hT=q({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),pT=Cr(hT),mT=q({},Rl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),gT=Cr(mT),yT=[9,13,27,32],Td=u&&"CompositionEvent"in window,Zo=null;u&&"documentMode"in document&&(Zo=document.documentMode);var vT=u&&"TextEvent"in window&&!Zo,jm=u&&(!Td||Zo&&8<Zo&&11>=Zo),Hm=" ",Vm=!1;function zm(s,l){switch(s){case"keyup":return yT.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Km(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var js=!1;function xT(s,l){switch(s){case"compositionend":return Km(l);case"keypress":return l.which!==32?null:(Vm=!0,Hm);case"textInput":return s=l.data,s===Hm&&Vm?null:s;default:return null}}function ST(s,l){if(js)return s==="compositionend"||!Td&&zm(s,l)?(s=Nm(),El=gd=ki=null,js=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return jm&&l.locale!=="ko"?null:l.data;default:return null}}var ET={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wm(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!ET[s.type]:l==="textarea"}function Ym(s,l,d,m){rs(m),l=kl(l,"onChange"),0<l.length&&(d=new yd("onChange","change",null,d,m),s.push({event:d,listeners:l}))}var ea=null,ta=null;function TT(s){fg(s,0)}function Al(s){var l=Ws(s);if(qt(l))return s}function wT(s,l){if(s==="change")return l}var qm=!1;if(u){var wd;if(u){var Rd="oninput"in document;if(!Rd){var Xm=document.createElement("div");Xm.setAttribute("oninput","return;"),Rd=typeof Xm.oninput=="function"}wd=Rd}else wd=!1;qm=wd&&(!document.documentMode||9<document.documentMode)}function Qm(){ea&&(ea.detachEvent("onpropertychange",Jm),ta=ea=null)}function Jm(s){if(s.propertyName==="value"&&Al(ta)){var l=[];Ym(l,ta,s,Ho(s)),Z(TT,l)}}function RT(s,l,d){s==="focusin"?(Qm(),ea=l,ta=d,ea.attachEvent("onpropertychange",Jm)):s==="focusout"&&Qm()}function AT(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Al(ta)}function LT(s,l){if(s==="click")return Al(l)}function bT(s,l){if(s==="input"||s==="change")return Al(l)}function CT(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var cn=typeof Object.is=="function"?Object.is:CT;function ra(s,l){if(cn(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var v=d[m];if(!c.call(l,v)||!cn(s[v],l[v]))return!1}return!0}function Zm(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function eg(s,l){var d=Zm(s);s=0;for(var m;d;){if(d.nodeType===3){if(m=s+d.textContent.length,s<=l&&m>=l)return{node:d,offset:l-s};s=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Zm(d)}}function tg(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?tg(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function rg(){for(var s=window,l=nr();l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=nr(s.document)}return l}function Ad(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function kT(s){var l=rg(),d=s.focusedElem,m=s.selectionRange;if(l!==d&&d&&d.ownerDocument&&tg(d.ownerDocument.documentElement,d)){if(m!==null&&Ad(d)){if(l=m.start,s=m.end,s===void 0&&(s=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(s,d.value.length);else if(s=(l=d.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var v=d.textContent.length,E=Math.min(m.start,v);m=m.end===void 0?E:Math.min(m.end,v),!s.extend&&E>m&&(v=m,m=E,E=v),v=eg(d,E);var b=eg(d,m);v&&b&&(s.rangeCount!==1||s.anchorNode!==v.node||s.anchorOffset!==v.offset||s.focusNode!==b.node||s.focusOffset!==b.offset)&&(l=l.createRange(),l.setStart(v.node,v.offset),s.removeAllRanges(),E>m?(s.addRange(l),s.extend(b.node,b.offset)):(l.setEnd(b.node,b.offset),s.addRange(l)))}}for(l=[],s=d;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)s=l[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var IT=u&&"documentMode"in document&&11>=document.documentMode,Hs=null,Ld=null,na=null,bd=!1;function ng(s,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;bd||Hs==null||Hs!==nr(m)||(m=Hs,"selectionStart"in m&&Ad(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),na&&ra(na,m)||(na=m,m=kl(Ld,"onSelect"),0<m.length&&(l=new yd("onSelect","select",null,l,d),s.push({event:l,listeners:m}),l.target=Hs)))}function Ll(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var Vs={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionend:Ll("Transition","TransitionEnd")},Cd={},ig={};u&&(ig=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function bl(s){if(Cd[s])return Cd[s];if(!Vs[s])return s;var l=Vs[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in ig)return Cd[s]=l[d];return s}var sg=bl("animationend"),og=bl("animationiteration"),ag=bl("animationstart"),lg=bl("transitionend"),ug=new Map,cg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(s,l){ug.set(s,l),o(l,[s])}for(var kd=0;kd<cg.length;kd++){var Id=cg[kd],DT=Id.toLowerCase(),PT=Id[0].toUpperCase()+Id.slice(1);Ii(DT,"on"+PT)}Ii(sg,"onAnimationEnd"),Ii(og,"onAnimationIteration"),Ii(ag,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(lg,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_T=new Set("cancel close invalid load scroll toggle".split(" ").concat(ia));function dg(s,l,d){var m=s.type||"unknown-event";s.currentTarget=d,Mt(m,l,void 0,s),s.currentTarget=null}function fg(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var m=s[d],v=m.event;m=m.listeners;e:{var E=void 0;if(l)for(var b=m.length-1;0<=b;b--){var _=m[b],M=_.instance,X=_.currentTarget;if(_=_.listener,M!==E&&v.isPropagationStopped())break e;dg(v,_,X),E=M}else for(b=0;b<m.length;b++){if(_=m[b],M=_.instance,X=_.currentTarget,_=_.listener,M!==E&&v.isPropagationStopped())break e;dg(v,_,X),E=M}}}if(ye)throw s=Ue,ye=!1,Ue=null,s}function mt(s,l){var d=l[Bd];d===void 0&&(d=l[Bd]=new Set);var m=s+"__bubble";d.has(m)||(hg(l,s,2,!1),d.add(m))}function Dd(s,l,d){var m=0;l&&(m|=4),hg(d,s,m,l)}var Cl="_reactListening"+Math.random().toString(36).slice(2);function sa(s){if(!s[Cl]){s[Cl]=!0,n.forEach(function(d){d!=="selectionchange"&&(_T.has(d)||Dd(d,!1,s),Dd(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Cl]||(l[Cl]=!0,Dd("selectionchange",!1,l))}}function hg(s,l,d,m){switch(Mm(l)){case 1:var v=WE;break;case 4:v=YE;break;default:v=pd}d=v.bind(null,l,d,s),v=void 0,!Te||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),m?v!==void 0?s.addEventListener(l,d,{capture:!0,passive:v}):s.addEventListener(l,d,!0):v!==void 0?s.addEventListener(l,d,{passive:v}):s.addEventListener(l,d,!1)}function Pd(s,l,d,m,v){var E=m;if(!(l&1)&&!(l&2)&&m!==null)e:for(;;){if(m===null)return;var b=m.tag;if(b===3||b===4){var _=m.stateNode.containerInfo;if(_===v||_.nodeType===8&&_.parentNode===v)break;if(b===4)for(b=m.return;b!==null;){var M=b.tag;if((M===3||M===4)&&(M=b.stateNode.containerInfo,M===v||M.nodeType===8&&M.parentNode===v))return;b=b.return}for(;_!==null;){if(b=ss(_),b===null)return;if(M=b.tag,M===5||M===6){m=E=b;continue e}_=_.parentNode}}m=m.return}Z(function(){var X=E,le=Ho(d),ce=[];e:{var oe=ug.get(s);if(oe!==void 0){var xe=yd,Ae=s;switch(s){case"keypress":if(Tl(d)===0)break e;case"keydown":case"keyup":xe=uT;break;case"focusin":Ae="focus",xe=Sd;break;case"focusout":Ae="blur",xe=Sd;break;case"beforeblur":case"afterblur":xe=Sd;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=$m;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=QE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=fT;break;case sg:case og:case ag:xe=eT;break;case lg:xe=pT;break;case"scroll":xe=qE;break;case"wheel":xe=gT;break;case"copy":case"cut":case"paste":xe=rT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=Gm}var Ce=(l&4)!==0,Ct=!Ce&&s==="scroll",V=Ce?oe!==null?oe+"Capture":null:oe;Ce=[];for(var B=X,K;B!==null;){K=B;var he=K.stateNode;if(K.tag===5&&he!==null&&(K=he,V!==null&&(he=ae(B,V),he!=null&&Ce.push(oa(B,he,K)))),Ct)break;B=B.return}0<Ce.length&&(oe=new xe(oe,Ae,null,d,le),ce.push({event:oe,listeners:Ce}))}}if(!(l&7)){e:{if(oe=s==="mouseover"||s==="pointerover",xe=s==="mouseout"||s==="pointerout",oe&&d!==es&&(Ae=d.relatedTarget||d.fromElement)&&(ss(Ae)||Ae[Xn]))break e;if((xe||oe)&&(oe=le.window===le?le:(oe=le.ownerDocument)?oe.defaultView||oe.parentWindow:window,xe?(Ae=d.relatedTarget||d.toElement,xe=X,Ae=Ae?ss(Ae):null,Ae!==null&&(Ct=Je(Ae),Ae!==Ct||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(xe=null,Ae=X),xe!==Ae)){if(Ce=$m,he="onMouseLeave",V="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Ce=Gm,he="onPointerLeave",V="onPointerEnter",B="pointer"),Ct=xe==null?oe:Ws(xe),K=Ae==null?oe:Ws(Ae),oe=new Ce(he,B+"leave",xe,d,le),oe.target=Ct,oe.relatedTarget=K,he=null,ss(le)===X&&(Ce=new Ce(V,B+"enter",Ae,d,le),Ce.target=K,Ce.relatedTarget=Ct,he=Ce),Ct=he,xe&&Ae)t:{for(Ce=xe,V=Ae,B=0,K=Ce;K;K=zs(K))B++;for(K=0,he=V;he;he=zs(he))K++;for(;0<B-K;)Ce=zs(Ce),B--;for(;0<K-B;)V=zs(V),K--;for(;B--;){if(Ce===V||V!==null&&Ce===V.alternate)break t;Ce=zs(Ce),V=zs(V)}Ce=null}else Ce=null;xe!==null&&pg(ce,oe,xe,Ce,!1),Ae!==null&&Ct!==null&&pg(ce,Ct,Ae,Ce,!0)}}e:{if(oe=X?Ws(X):window,xe=oe.nodeName&&oe.nodeName.toLowerCase(),xe==="select"||xe==="input"&&oe.type==="file")var Ie=wT;else if(Wm(oe))if(qm)Ie=bT;else{Ie=AT;var Pe=RT}else(xe=oe.nodeName)&&xe.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Ie=LT);if(Ie&&(Ie=Ie(s,X))){Ym(ce,Ie,d,le);break e}Pe&&Pe(s,oe,X),s==="focusout"&&(Pe=oe._wrapperState)&&Pe.controlled&&oe.type==="number"&&Kn(oe,"number",oe.value)}switch(Pe=X?Ws(X):window,s){case"focusin":(Wm(Pe)||Pe.contentEditable==="true")&&(Hs=Pe,Ld=X,na=null);break;case"focusout":na=Ld=Hs=null;break;case"mousedown":bd=!0;break;case"contextmenu":case"mouseup":case"dragend":bd=!1,ng(ce,d,le);break;case"selectionchange":if(IT)break;case"keydown":case"keyup":ng(ce,d,le)}var _e;if(Td)e:{switch(s){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else js?zm(s,d)&&(Ge="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Ge="onCompositionStart");Ge&&(jm&&d.locale!=="ko"&&(js||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&js&&(_e=Nm()):(ki=le,gd="value"in ki?ki.value:ki.textContent,js=!0)),Pe=kl(X,Ge),0<Pe.length&&(Ge=new Um(Ge,s,null,d,le),ce.push({event:Ge,listeners:Pe}),_e?Ge.data=_e:(_e=Km(d),_e!==null&&(Ge.data=_e)))),(_e=vT?xT(s,d):ST(s,d))&&(X=kl(X,"onBeforeInput"),0<X.length&&(le=new Um("onBeforeInput","beforeinput",null,d,le),ce.push({event:le,listeners:X}),le.data=_e))}fg(ce,l)})}function oa(s,l,d){return{instance:s,listener:l,currentTarget:d}}function kl(s,l){for(var d=l+"Capture",m=[];s!==null;){var v=s,E=v.stateNode;v.tag===5&&E!==null&&(v=E,E=ae(s,d),E!=null&&m.unshift(oa(s,E,v)),E=ae(s,l),E!=null&&m.push(oa(s,E,v))),s=s.return}return m}function zs(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function pg(s,l,d,m,v){for(var E=l._reactName,b=[];d!==null&&d!==m;){var _=d,M=_.alternate,X=_.stateNode;if(M!==null&&M===m)break;_.tag===5&&X!==null&&(_=X,v?(M=ae(d,E),M!=null&&b.unshift(oa(d,M,_))):v||(M=ae(d,E),M!=null&&b.push(oa(d,M,_)))),d=d.return}b.length!==0&&s.push({event:l,listeners:b})}var OT=/\r\n?/g,FT=/\u0000|\uFFFD/g;function mg(s){return(typeof s=="string"?s:""+s).replace(OT,`
`).replace(FT,"")}function Il(s,l,d){if(l=mg(l),mg(s)!==l&&d)throw Error(t(425))}function Dl(){}var _d=null,Od=null;function Fd(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Md=typeof setTimeout=="function"?setTimeout:void 0,MT=typeof clearTimeout=="function"?clearTimeout:void 0,gg=typeof Promise=="function"?Promise:void 0,NT=typeof queueMicrotask=="function"?queueMicrotask:typeof gg<"u"?function(s){return gg.resolve(null).then(s).catch(BT)}:Md;function BT(s){setTimeout(function(){throw s})}function Nd(s,l){var d=l,m=0;do{var v=d.nextSibling;if(s.removeChild(d),v&&v.nodeType===8)if(d=v.data,d==="/$"){if(m===0){s.removeChild(v),Xo(l);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=v}while(d);Xo(l)}function Di(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function yg(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return s;l--}else d==="/$"&&l++}s=s.previousSibling}return null}var Ks=Math.random().toString(36).slice(2),An="__reactFiber$"+Ks,aa="__reactProps$"+Ks,Xn="__reactContainer$"+Ks,Bd="__reactEvents$"+Ks,$T="__reactListeners$"+Ks,UT="__reactHandles$"+Ks;function ss(s){var l=s[An];if(l)return l;for(var d=s.parentNode;d;){if(l=d[Xn]||d[An]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=yg(s);s!==null;){if(d=s[An])return d;s=yg(s)}return l}s=d,d=s.parentNode}return null}function la(s){return s=s[An]||s[Xn],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Ws(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Pl(s){return s[aa]||null}var $d=[],Ys=-1;function Pi(s){return{current:s}}function gt(s){0>Ys||(s.current=$d[Ys],$d[Ys]=null,Ys--)}function ft(s,l){Ys++,$d[Ys]=s.current,s.current=l}var _i={},ir=Pi(_i),pr=Pi(!1),os=_i;function qs(s,l){var d=s.type.contextTypes;if(!d)return _i;var m=s.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===l)return m.__reactInternalMemoizedMaskedChildContext;var v={},E;for(E in d)v[E]=l[E];return m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=v),v}function mr(s){return s=s.childContextTypes,s!=null}function _l(){gt(pr),gt(ir)}function vg(s,l,d){if(ir.current!==_i)throw Error(t(168));ft(ir,l),ft(pr,d)}function xg(s,l,d){var m=s.stateNode;if(l=l.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var v in m)if(!(v in l))throw Error(t(108,Me(s)||"Unknown",v));return q({},d,m)}function Ol(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||_i,os=ir.current,ft(ir,s),ft(pr,pr.current),!0}function Sg(s,l,d){var m=s.stateNode;if(!m)throw Error(t(169));d?(s=xg(s,l,os),m.__reactInternalMemoizedMergedChildContext=s,gt(pr),gt(ir),ft(ir,s)):gt(pr),ft(pr,d)}var Qn=null,Fl=!1,Ud=!1;function Eg(s){Qn===null?Qn=[s]:Qn.push(s)}function GT(s){Fl=!0,Eg(s)}function Oi(){if(!Ud&&Qn!==null){Ud=!0;var s=0,l=it;try{var d=Qn;for(it=1;s<d.length;s++){var m=d[s];do m=m(!0);while(m!==null)}Qn=null,Fl=!1}catch(v){throw Qn!==null&&(Qn=Qn.slice(s+1)),Lr(tt,Oi),v}finally{it=l,Ud=!1}}return null}var Xs=[],Qs=0,Ml=null,Nl=0,zr=[],Kr=0,as=null,Jn=1,Zn="";function ls(s,l){Xs[Qs++]=Nl,Xs[Qs++]=Ml,Ml=s,Nl=l}function Tg(s,l,d){zr[Kr++]=Jn,zr[Kr++]=Zn,zr[Kr++]=as,as=s;var m=Jn;s=Zn;var v=32-un(m)-1;m&=~(1<<v),d+=1;var E=32-un(l)+v;if(30<E){var b=v-v%5;E=(m&(1<<b)-1).toString(32),m>>=b,v-=b,Jn=1<<32-un(l)+v|d<<v|m,Zn=E+s}else Jn=1<<E|d<<v|m,Zn=s}function Gd(s){s.return!==null&&(ls(s,1),Tg(s,1,0))}function jd(s){for(;s===Ml;)Ml=Xs[--Qs],Xs[Qs]=null,Nl=Xs[--Qs],Xs[Qs]=null;for(;s===as;)as=zr[--Kr],zr[Kr]=null,Zn=zr[--Kr],zr[Kr]=null,Jn=zr[--Kr],zr[Kr]=null}var kr=null,Ir=null,vt=!1,dn=null;function wg(s,l){var d=Xr(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=s,l=s.deletions,l===null?(s.deletions=[d],s.flags|=16):l.push(d)}function Rg(s,l){switch(s.tag){case 5:var d=s.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,kr=s,Ir=Di(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,kr=s,Ir=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=as!==null?{id:Jn,overflow:Zn}:null,s.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=Xr(18,null,null,0),d.stateNode=l,d.return=s,s.child=d,kr=s,Ir=null,!0):!1;default:return!1}}function Hd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Vd(s){if(vt){var l=Ir;if(l){var d=l;if(!Rg(s,l)){if(Hd(s))throw Error(t(418));l=Di(d.nextSibling);var m=kr;l&&Rg(s,l)?wg(m,d):(s.flags=s.flags&-4097|2,vt=!1,kr=s)}}else{if(Hd(s))throw Error(t(418));s.flags=s.flags&-4097|2,vt=!1,kr=s}}}function Ag(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;kr=s}function Bl(s){if(s!==kr)return!1;if(!vt)return Ag(s),vt=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!Fd(s.type,s.memoizedProps)),l&&(l=Ir)){if(Hd(s))throw Lg(),Error(t(418));for(;l;)wg(s,l),l=Di(l.nextSibling)}if(Ag(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(l===0){Ir=Di(s.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}s=s.nextSibling}Ir=null}}else Ir=kr?Di(s.stateNode.nextSibling):null;return!0}function Lg(){for(var s=Ir;s;)s=Di(s.nextSibling)}function Js(){Ir=kr=null,vt=!1}function zd(s){dn===null?dn=[s]:dn.push(s)}var jT=I.ReactCurrentBatchConfig;function ua(s,l,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var m=d.stateNode}if(!m)throw Error(t(147,s));var v=m,E=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===E?l.ref:(l=function(b){var _=v.refs;b===null?delete _[E]:_[E]=b},l._stringRef=E,l)}if(typeof s!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,s))}return s}function $l(s,l){throw s=Object.prototype.toString.call(l),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function bg(s){var l=s._init;return l(s._payload)}function Cg(s){function l(V,B){if(s){var K=V.deletions;K===null?(V.deletions=[B],V.flags|=16):K.push(B)}}function d(V,B){if(!s)return null;for(;B!==null;)l(V,B),B=B.sibling;return null}function m(V,B){for(V=new Map;B!==null;)B.key!==null?V.set(B.key,B):V.set(B.index,B),B=B.sibling;return V}function v(V,B){return V=ji(V,B),V.index=0,V.sibling=null,V}function E(V,B,K){return V.index=K,s?(K=V.alternate,K!==null?(K=K.index,K<B?(V.flags|=2,B):K):(V.flags|=2,B)):(V.flags|=1048576,B)}function b(V){return s&&V.alternate===null&&(V.flags|=2),V}function _(V,B,K,he){return B===null||B.tag!==6?(B=Nf(K,V.mode,he),B.return=V,B):(B=v(B,K),B.return=V,B)}function M(V,B,K,he){var Ie=K.type;return Ie===D?le(V,B,K.props.children,he,K.key):B!==null&&(B.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===pe&&bg(Ie)===B.type)?(he=v(B,K.props),he.ref=ua(V,B,K),he.return=V,he):(he=uu(K.type,K.key,K.props,null,V.mode,he),he.ref=ua(V,B,K),he.return=V,he)}function X(V,B,K,he){return B===null||B.tag!==4||B.stateNode.containerInfo!==K.containerInfo||B.stateNode.implementation!==K.implementation?(B=Bf(K,V.mode,he),B.return=V,B):(B=v(B,K.children||[]),B.return=V,B)}function le(V,B,K,he,Ie){return B===null||B.tag!==7?(B=gs(K,V.mode,he,Ie),B.return=V,B):(B=v(B,K),B.return=V,B)}function ce(V,B,K){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Nf(""+B,V.mode,K),B.return=V,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return K=uu(B.type,B.key,B.props,null,V.mode,K),K.ref=ua(V,null,B),K.return=V,K;case P:return B=Bf(B,V.mode,K),B.return=V,B;case pe:var he=B._init;return ce(V,he(B._payload),K)}if(jr(B)||Y(B))return B=gs(B,V.mode,K,null),B.return=V,B;$l(V,B)}return null}function oe(V,B,K,he){var Ie=B!==null?B.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return Ie!==null?null:_(V,B,""+K,he);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case w:return K.key===Ie?M(V,B,K,he):null;case P:return K.key===Ie?X(V,B,K,he):null;case pe:return Ie=K._init,oe(V,B,Ie(K._payload),he)}if(jr(K)||Y(K))return Ie!==null?null:le(V,B,K,he,null);$l(V,K)}return null}function xe(V,B,K,he,Ie){if(typeof he=="string"&&he!==""||typeof he=="number")return V=V.get(K)||null,_(B,V,""+he,Ie);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case w:return V=V.get(he.key===null?K:he.key)||null,M(B,V,he,Ie);case P:return V=V.get(he.key===null?K:he.key)||null,X(B,V,he,Ie);case pe:var Pe=he._init;return xe(V,B,K,Pe(he._payload),Ie)}if(jr(he)||Y(he))return V=V.get(K)||null,le(B,V,he,Ie,null);$l(B,he)}return null}function Ae(V,B,K,he){for(var Ie=null,Pe=null,_e=B,Ge=B=0,Vt=null;_e!==null&&Ge<K.length;Ge++){_e.index>Ge?(Vt=_e,_e=null):Vt=_e.sibling;var Xe=oe(V,_e,K[Ge],he);if(Xe===null){_e===null&&(_e=Vt);break}s&&_e&&Xe.alternate===null&&l(V,_e),B=E(Xe,B,Ge),Pe===null?Ie=Xe:Pe.sibling=Xe,Pe=Xe,_e=Vt}if(Ge===K.length)return d(V,_e),vt&&ls(V,Ge),Ie;if(_e===null){for(;Ge<K.length;Ge++)_e=ce(V,K[Ge],he),_e!==null&&(B=E(_e,B,Ge),Pe===null?Ie=_e:Pe.sibling=_e,Pe=_e);return vt&&ls(V,Ge),Ie}for(_e=m(V,_e);Ge<K.length;Ge++)Vt=xe(_e,V,Ge,K[Ge],he),Vt!==null&&(s&&Vt.alternate!==null&&_e.delete(Vt.key===null?Ge:Vt.key),B=E(Vt,B,Ge),Pe===null?Ie=Vt:Pe.sibling=Vt,Pe=Vt);return s&&_e.forEach(function(Hi){return l(V,Hi)}),vt&&ls(V,Ge),Ie}function Ce(V,B,K,he){var Ie=Y(K);if(typeof Ie!="function")throw Error(t(150));if(K=Ie.call(K),K==null)throw Error(t(151));for(var Pe=Ie=null,_e=B,Ge=B=0,Vt=null,Xe=K.next();_e!==null&&!Xe.done;Ge++,Xe=K.next()){_e.index>Ge?(Vt=_e,_e=null):Vt=_e.sibling;var Hi=oe(V,_e,Xe.value,he);if(Hi===null){_e===null&&(_e=Vt);break}s&&_e&&Hi.alternate===null&&l(V,_e),B=E(Hi,B,Ge),Pe===null?Ie=Hi:Pe.sibling=Hi,Pe=Hi,_e=Vt}if(Xe.done)return d(V,_e),vt&&ls(V,Ge),Ie;if(_e===null){for(;!Xe.done;Ge++,Xe=K.next())Xe=ce(V,Xe.value,he),Xe!==null&&(B=E(Xe,B,Ge),Pe===null?Ie=Xe:Pe.sibling=Xe,Pe=Xe);return vt&&ls(V,Ge),Ie}for(_e=m(V,_e);!Xe.done;Ge++,Xe=K.next())Xe=xe(_e,V,Ge,Xe.value,he),Xe!==null&&(s&&Xe.alternate!==null&&_e.delete(Xe.key===null?Ge:Xe.key),B=E(Xe,B,Ge),Pe===null?Ie=Xe:Pe.sibling=Xe,Pe=Xe);return s&&_e.forEach(function(Ew){return l(V,Ew)}),vt&&ls(V,Ge),Ie}function Ct(V,B,K,he){if(typeof K=="object"&&K!==null&&K.type===D&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case w:e:{for(var Ie=K.key,Pe=B;Pe!==null;){if(Pe.key===Ie){if(Ie=K.type,Ie===D){if(Pe.tag===7){d(V,Pe.sibling),B=v(Pe,K.props.children),B.return=V,V=B;break e}}else if(Pe.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===pe&&bg(Ie)===Pe.type){d(V,Pe.sibling),B=v(Pe,K.props),B.ref=ua(V,Pe,K),B.return=V,V=B;break e}d(V,Pe);break}else l(V,Pe);Pe=Pe.sibling}K.type===D?(B=gs(K.props.children,V.mode,he,K.key),B.return=V,V=B):(he=uu(K.type,K.key,K.props,null,V.mode,he),he.ref=ua(V,B,K),he.return=V,V=he)}return b(V);case P:e:{for(Pe=K.key;B!==null;){if(B.key===Pe)if(B.tag===4&&B.stateNode.containerInfo===K.containerInfo&&B.stateNode.implementation===K.implementation){d(V,B.sibling),B=v(B,K.children||[]),B.return=V,V=B;break e}else{d(V,B);break}else l(V,B);B=B.sibling}B=Bf(K,V.mode,he),B.return=V,V=B}return b(V);case pe:return Pe=K._init,Ct(V,B,Pe(K._payload),he)}if(jr(K))return Ae(V,B,K,he);if(Y(K))return Ce(V,B,K,he);$l(V,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,B!==null&&B.tag===6?(d(V,B.sibling),B=v(B,K),B.return=V,V=B):(d(V,B),B=Nf(K,V.mode,he),B.return=V,V=B),b(V)):d(V,B)}return Ct}var Zs=Cg(!0),kg=Cg(!1),Ul=Pi(null),Gl=null,eo=null,Kd=null;function Wd(){Kd=eo=Gl=null}function Yd(s){var l=Ul.current;gt(Ul),s._currentValue=l}function qd(s,l,d){for(;s!==null;){var m=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),s===d)break;s=s.return}}function to(s,l){Gl=s,Kd=eo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&l&&(gr=!0),s.firstContext=null)}function Wr(s){var l=s._currentValue;if(Kd!==s)if(s={context:s,memoizedValue:l,next:null},eo===null){if(Gl===null)throw Error(t(308));eo=s,Gl.dependencies={lanes:0,firstContext:s}}else eo=eo.next=s;return l}var us=null;function Xd(s){us===null?us=[s]:us.push(s)}function Ig(s,l,d,m){var v=l.interleaved;return v===null?(d.next=d,Xd(l)):(d.next=v.next,v.next=d),l.interleaved=d,ei(s,m)}function ei(s,l){s.lanes|=l;var d=s.alternate;for(d!==null&&(d.lanes|=l),d=s,s=s.return;s!==null;)s.childLanes|=l,d=s.alternate,d!==null&&(d.childLanes|=l),d=s,s=s.return;return d.tag===3?d.stateNode:null}var Fi=!1;function Qd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dg(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ti(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function Mi(s,l,d){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,qe&2){var v=m.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),m.pending=l,ei(s,d)}return v=m.interleaved,v===null?(l.next=l,Xd(m)):(l.next=v.next,v.next=l),m.interleaved=l,ei(s,d)}function jl(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var m=l.lanes;m&=s.pendingLanes,d|=m,l.lanes=d,dd(s,d)}}function Pg(s,l){var d=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var v=null,E=null;if(d=d.firstBaseUpdate,d!==null){do{var b={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};E===null?v=E=b:E=E.next=b,d=d.next}while(d!==null);E===null?v=E=l:E=E.next=l}else v=E=l;d={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:E,shared:m.shared,effects:m.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}function Hl(s,l,d,m){var v=s.updateQueue;Fi=!1;var E=v.firstBaseUpdate,b=v.lastBaseUpdate,_=v.shared.pending;if(_!==null){v.shared.pending=null;var M=_,X=M.next;M.next=null,b===null?E=X:b.next=X,b=M;var le=s.alternate;le!==null&&(le=le.updateQueue,_=le.lastBaseUpdate,_!==b&&(_===null?le.firstBaseUpdate=X:_.next=X,le.lastBaseUpdate=M))}if(E!==null){var ce=v.baseState;b=0,le=X=M=null,_=E;do{var oe=_.lane,xe=_.eventTime;if((m&oe)===oe){le!==null&&(le=le.next={eventTime:xe,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var Ae=s,Ce=_;switch(oe=l,xe=d,Ce.tag){case 1:if(Ae=Ce.payload,typeof Ae=="function"){ce=Ae.call(xe,ce,oe);break e}ce=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Ce.payload,oe=typeof Ae=="function"?Ae.call(xe,ce,oe):Ae,oe==null)break e;ce=q({},ce,oe);break e;case 2:Fi=!0}}_.callback!==null&&_.lane!==0&&(s.flags|=64,oe=v.effects,oe===null?v.effects=[_]:oe.push(_))}else xe={eventTime:xe,lane:oe,tag:_.tag,payload:_.payload,callback:_.callback,next:null},le===null?(X=le=xe,M=ce):le=le.next=xe,b|=oe;if(_=_.next,_===null){if(_=v.shared.pending,_===null)break;oe=_,_=oe.next,oe.next=null,v.lastBaseUpdate=oe,v.shared.pending=null}}while(!0);if(le===null&&(M=ce),v.baseState=M,v.firstBaseUpdate=X,v.lastBaseUpdate=le,l=v.shared.interleaved,l!==null){v=l;do b|=v.lane,v=v.next;while(v!==l)}else E===null&&(v.shared.lanes=0);fs|=b,s.lanes=b,s.memoizedState=ce}}function _g(s,l,d){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var m=s[l],v=m.callback;if(v!==null){if(m.callback=null,m=d,typeof v!="function")throw Error(t(191,v));v.call(m)}}}var ca={},Ln=Pi(ca),da=Pi(ca),fa=Pi(ca);function cs(s){if(s===ca)throw Error(t(174));return s}function Jd(s,l){switch(ft(fa,l),ft(da,s),ft(Ln,ca),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Fs(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=Fs(l,s)}gt(Ln),ft(Ln,l)}function ro(){gt(Ln),gt(da),gt(fa)}function Og(s){cs(fa.current);var l=cs(Ln.current),d=Fs(l,s.type);l!==d&&(ft(da,s),ft(Ln,d))}function Zd(s){da.current===s&&(gt(Ln),gt(da))}var Et=Pi(0);function Vl(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ef=[];function tf(){for(var s=0;s<ef.length;s++)ef[s]._workInProgressVersionPrimary=null;ef.length=0}var zl=I.ReactCurrentDispatcher,rf=I.ReactCurrentBatchConfig,ds=0,Tt=null,Bt=null,jt=null,Kl=!1,ha=!1,pa=0,HT=0;function sr(){throw Error(t(321))}function nf(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!cn(s[d],l[d]))return!1;return!0}function sf(s,l,d,m,v,E){if(ds=E,Tt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,zl.current=s===null||s.memoizedState===null?WT:YT,s=d(m,v),ha){E=0;do{if(ha=!1,pa=0,25<=E)throw Error(t(301));E+=1,jt=Bt=null,l.updateQueue=null,zl.current=qT,s=d(m,v)}while(ha)}if(zl.current=ql,l=Bt!==null&&Bt.next!==null,ds=0,jt=Bt=Tt=null,Kl=!1,l)throw Error(t(300));return s}function of(){var s=pa!==0;return pa=0,s}function bn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Tt.memoizedState=jt=s:jt=jt.next=s,jt}function Yr(){if(Bt===null){var s=Tt.alternate;s=s!==null?s.memoizedState:null}else s=Bt.next;var l=jt===null?Tt.memoizedState:jt.next;if(l!==null)jt=l,Bt=s;else{if(s===null)throw Error(t(310));Bt=s,s={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},jt===null?Tt.memoizedState=jt=s:jt=jt.next=s}return jt}function ma(s,l){return typeof l=="function"?l(s):l}function af(s){var l=Yr(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=s;var m=Bt,v=m.baseQueue,E=d.pending;if(E!==null){if(v!==null){var b=v.next;v.next=E.next,E.next=b}m.baseQueue=v=E,d.pending=null}if(v!==null){E=v.next,m=m.baseState;var _=b=null,M=null,X=E;do{var le=X.lane;if((ds&le)===le)M!==null&&(M=M.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),m=X.hasEagerState?X.eagerState:s(m,X.action);else{var ce={lane:le,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};M===null?(_=M=ce,b=m):M=M.next=ce,Tt.lanes|=le,fs|=le}X=X.next}while(X!==null&&X!==E);M===null?b=m:M.next=_,cn(m,l.memoizedState)||(gr=!0),l.memoizedState=m,l.baseState=b,l.baseQueue=M,d.lastRenderedState=m}if(s=d.interleaved,s!==null){v=s;do E=v.lane,Tt.lanes|=E,fs|=E,v=v.next;while(v!==s)}else v===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function lf(s){var l=Yr(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=s;var m=d.dispatch,v=d.pending,E=l.memoizedState;if(v!==null){d.pending=null;var b=v=v.next;do E=s(E,b.action),b=b.next;while(b!==v);cn(E,l.memoizedState)||(gr=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),d.lastRenderedState=E}return[E,m]}function Fg(){}function Mg(s,l){var d=Tt,m=Yr(),v=l(),E=!cn(m.memoizedState,v);if(E&&(m.memoizedState=v,gr=!0),m=m.queue,uf($g.bind(null,d,m,s),[s]),m.getSnapshot!==l||E||jt!==null&&jt.memoizedState.tag&1){if(d.flags|=2048,ga(9,Bg.bind(null,d,m,v,l),void 0,null),Ht===null)throw Error(t(349));ds&30||Ng(d,l,v)}return v}function Ng(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=Tt.updateQueue,l===null?(l={lastEffect:null,stores:null},Tt.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function Bg(s,l,d,m){l.value=d,l.getSnapshot=m,Ug(l)&&Gg(s)}function $g(s,l,d){return d(function(){Ug(l)&&Gg(s)})}function Ug(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!cn(s,d)}catch{return!0}}function Gg(s){var l=ei(s,1);l!==null&&mn(l,s,1,-1)}function jg(s){var l=bn();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:s},l.queue=s,s=s.dispatch=KT.bind(null,Tt,s),[l.memoizedState,s]}function ga(s,l,d,m){return s={tag:s,create:l,destroy:d,deps:m,next:null},l=Tt.updateQueue,l===null?(l={lastEffect:null,stores:null},Tt.updateQueue=l,l.lastEffect=s.next=s):(d=l.lastEffect,d===null?l.lastEffect=s.next=s:(m=d.next,d.next=s,s.next=m,l.lastEffect=s)),s}function Hg(){return Yr().memoizedState}function Wl(s,l,d,m){var v=bn();Tt.flags|=s,v.memoizedState=ga(1|l,d,void 0,m===void 0?null:m)}function Yl(s,l,d,m){var v=Yr();m=m===void 0?null:m;var E=void 0;if(Bt!==null){var b=Bt.memoizedState;if(E=b.destroy,m!==null&&nf(m,b.deps)){v.memoizedState=ga(l,d,E,m);return}}Tt.flags|=s,v.memoizedState=ga(1|l,d,E,m)}function Vg(s,l){return Wl(8390656,8,s,l)}function uf(s,l){return Yl(2048,8,s,l)}function zg(s,l){return Yl(4,2,s,l)}function Kg(s,l){return Yl(4,4,s,l)}function Wg(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Yg(s,l,d){return d=d!=null?d.concat([s]):null,Yl(4,4,Wg.bind(null,l,s),d)}function cf(){}function qg(s,l){var d=Yr();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&nf(l,m[1])?m[0]:(d.memoizedState=[s,l],s)}function Xg(s,l){var d=Yr();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&nf(l,m[1])?m[0]:(s=s(),d.memoizedState=[s,l],s)}function Qg(s,l,d){return ds&21?(cn(d,l)||(d=bm(),Tt.lanes|=d,fs|=d,s.baseState=!0),l):(s.baseState&&(s.baseState=!1,gr=!0),s.memoizedState=d)}function VT(s,l){var d=it;it=d!==0&&4>d?d:4,s(!0);var m=rf.transition;rf.transition={};try{s(!1),l()}finally{it=d,rf.transition=m}}function Jg(){return Yr().memoizedState}function zT(s,l,d){var m=Ui(s);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},Zg(s))e0(l,d);else if(d=Ig(s,l,d,m),d!==null){var v=fr();mn(d,s,m,v),t0(d,l,m)}}function KT(s,l,d){var m=Ui(s),v={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(Zg(s))e0(l,v);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var b=l.lastRenderedState,_=E(b,d);if(v.hasEagerState=!0,v.eagerState=_,cn(_,b)){var M=l.interleaved;M===null?(v.next=v,Xd(l)):(v.next=M.next,M.next=v),l.interleaved=v;return}}catch{}finally{}d=Ig(s,l,v,m),d!==null&&(v=fr(),mn(d,s,m,v),t0(d,l,m))}}function Zg(s){var l=s.alternate;return s===Tt||l!==null&&l===Tt}function e0(s,l){ha=Kl=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function t0(s,l,d){if(d&4194240){var m=l.lanes;m&=s.pendingLanes,d|=m,l.lanes=d,dd(s,d)}}var ql={readContext:Wr,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useInsertionEffect:sr,useLayoutEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useMutableSource:sr,useSyncExternalStore:sr,useId:sr,unstable_isNewReconciler:!1},WT={readContext:Wr,useCallback:function(s,l){return bn().memoizedState=[s,l===void 0?null:l],s},useContext:Wr,useEffect:Vg,useImperativeHandle:function(s,l,d){return d=d!=null?d.concat([s]):null,Wl(4194308,4,Wg.bind(null,l,s),d)},useLayoutEffect:function(s,l){return Wl(4194308,4,s,l)},useInsertionEffect:function(s,l){return Wl(4,2,s,l)},useMemo:function(s,l){var d=bn();return l=l===void 0?null:l,s=s(),d.memoizedState=[s,l],s},useReducer:function(s,l,d){var m=bn();return l=d!==void 0?d(l):l,m.memoizedState=m.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},m.queue=s,s=s.dispatch=zT.bind(null,Tt,s),[m.memoizedState,s]},useRef:function(s){var l=bn();return s={current:s},l.memoizedState=s},useState:jg,useDebugValue:cf,useDeferredValue:function(s){return bn().memoizedState=s},useTransition:function(){var s=jg(!1),l=s[0];return s=VT.bind(null,s[1]),bn().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,d){var m=Tt,v=bn();if(vt){if(d===void 0)throw Error(t(407));d=d()}else{if(d=l(),Ht===null)throw Error(t(349));ds&30||Ng(m,l,d)}v.memoizedState=d;var E={value:d,getSnapshot:l};return v.queue=E,Vg($g.bind(null,m,E,s),[s]),m.flags|=2048,ga(9,Bg.bind(null,m,E,d,l),void 0,null),d},useId:function(){var s=bn(),l=Ht.identifierPrefix;if(vt){var d=Zn,m=Jn;d=(m&~(1<<32-un(m)-1)).toString(32)+d,l=":"+l+"R"+d,d=pa++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=HT++,l=":"+l+"r"+d.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},YT={readContext:Wr,useCallback:qg,useContext:Wr,useEffect:uf,useImperativeHandle:Yg,useInsertionEffect:zg,useLayoutEffect:Kg,useMemo:Xg,useReducer:af,useRef:Hg,useState:function(){return af(ma)},useDebugValue:cf,useDeferredValue:function(s){var l=Yr();return Qg(l,Bt.memoizedState,s)},useTransition:function(){var s=af(ma)[0],l=Yr().memoizedState;return[s,l]},useMutableSource:Fg,useSyncExternalStore:Mg,useId:Jg,unstable_isNewReconciler:!1},qT={readContext:Wr,useCallback:qg,useContext:Wr,useEffect:uf,useImperativeHandle:Yg,useInsertionEffect:zg,useLayoutEffect:Kg,useMemo:Xg,useReducer:lf,useRef:Hg,useState:function(){return lf(ma)},useDebugValue:cf,useDeferredValue:function(s){var l=Yr();return Bt===null?l.memoizedState=s:Qg(l,Bt.memoizedState,s)},useTransition:function(){var s=lf(ma)[0],l=Yr().memoizedState;return[s,l]},useMutableSource:Fg,useSyncExternalStore:Mg,useId:Jg,unstable_isNewReconciler:!1};function fn(s,l){if(s&&s.defaultProps){l=q({},l),s=s.defaultProps;for(var d in s)l[d]===void 0&&(l[d]=s[d]);return l}return l}function df(s,l,d,m){l=s.memoizedState,d=d(m,l),d=d==null?l:q({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Xl={isMounted:function(s){return(s=s._reactInternals)?Je(s)===s:!1},enqueueSetState:function(s,l,d){s=s._reactInternals;var m=fr(),v=Ui(s),E=ti(m,v);E.payload=l,d!=null&&(E.callback=d),l=Mi(s,E,v),l!==null&&(mn(l,s,v,m),jl(l,s,v))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var m=fr(),v=Ui(s),E=ti(m,v);E.tag=1,E.payload=l,d!=null&&(E.callback=d),l=Mi(s,E,v),l!==null&&(mn(l,s,v,m),jl(l,s,v))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=fr(),m=Ui(s),v=ti(d,m);v.tag=2,l!=null&&(v.callback=l),l=Mi(s,v,m),l!==null&&(mn(l,s,m,d),jl(l,s,m))}};function r0(s,l,d,m,v,E,b){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,E,b):l.prototype&&l.prototype.isPureReactComponent?!ra(d,m)||!ra(v,E):!0}function n0(s,l,d){var m=!1,v=_i,E=l.contextType;return typeof E=="object"&&E!==null?E=Wr(E):(v=mr(l)?os:ir.current,m=l.contextTypes,E=(m=m!=null)?qs(s,v):_i),l=new l(d,E),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Xl,s.stateNode=l,l._reactInternals=s,m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=v,s.__reactInternalMemoizedMaskedChildContext=E),l}function i0(s,l,d,m){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==s&&Xl.enqueueReplaceState(l,l.state,null)}function ff(s,l,d,m){var v=s.stateNode;v.props=d,v.state=s.memoizedState,v.refs={},Qd(s);var E=l.contextType;typeof E=="object"&&E!==null?v.context=Wr(E):(E=mr(l)?os:ir.current,v.context=qs(s,E)),v.state=s.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(df(s,l,E,d),v.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&Xl.enqueueReplaceState(v,v.state,null),Hl(s,d,v,m),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308)}function no(s,l){try{var d="",m=l;do d+=Se(m),m=m.return;while(m);var v=d}catch(E){v=`
Error generating stack: `+E.message+`
`+E.stack}return{value:s,source:l,stack:v,digest:null}}function hf(s,l,d){return{value:s,source:null,stack:d??null,digest:l??null}}function pf(s,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var XT=typeof WeakMap=="function"?WeakMap:Map;function s0(s,l,d){d=ti(-1,d),d.tag=3,d.payload={element:null};var m=l.value;return d.callback=function(){nu||(nu=!0,kf=m),pf(s,l)},d}function o0(s,l,d){d=ti(-1,d),d.tag=3;var m=s.type.getDerivedStateFromError;if(typeof m=="function"){var v=l.value;d.payload=function(){return m(v)},d.callback=function(){pf(s,l)}}var E=s.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(d.callback=function(){pf(s,l),typeof m!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})}),d}function a0(s,l,d){var m=s.pingCache;if(m===null){m=s.pingCache=new XT;var v=new Set;m.set(l,v)}else v=m.get(l),v===void 0&&(v=new Set,m.set(l,v));v.has(d)||(v.add(d),s=cw.bind(null,s,l,d),l.then(s,s))}function l0(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function u0(s,l,d,m,v){return s.mode&1?(s.flags|=65536,s.lanes=v,s):(s===l?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=ti(-1,1),l.tag=2,Mi(d,l,1))),d.lanes|=1),s)}var QT=I.ReactCurrentOwner,gr=!1;function dr(s,l,d,m){l.child=s===null?kg(l,null,d,m):Zs(l,s.child,d,m)}function c0(s,l,d,m,v){d=d.render;var E=l.ref;return to(l,v),m=sf(s,l,d,m,E,v),d=of(),s!==null&&!gr?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~v,ri(s,l,v)):(vt&&d&&Gd(l),l.flags|=1,dr(s,l,m,v),l.child)}function d0(s,l,d,m,v){if(s===null){var E=d.type;return typeof E=="function"&&!Mf(E)&&E.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=E,f0(s,l,E,m,v)):(s=uu(d.type,null,m,l,l.mode,v),s.ref=l.ref,s.return=l,l.child=s)}if(E=s.child,!(s.lanes&v)){var b=E.memoizedProps;if(d=d.compare,d=d!==null?d:ra,d(b,m)&&s.ref===l.ref)return ri(s,l,v)}return l.flags|=1,s=ji(E,m),s.ref=l.ref,s.return=l,l.child=s}function f0(s,l,d,m,v){if(s!==null){var E=s.memoizedProps;if(ra(E,m)&&s.ref===l.ref)if(gr=!1,l.pendingProps=m=E,(s.lanes&v)!==0)s.flags&131072&&(gr=!0);else return l.lanes=s.lanes,ri(s,l,v)}return mf(s,l,d,m,v)}function h0(s,l,d){var m=l.pendingProps,v=m.children,E=s!==null?s.memoizedState:null;if(m.mode==="hidden")if(!(l.mode&1))l.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(so,Dr),Dr|=d;else{if(!(d&1073741824))return s=E!==null?E.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,ft(so,Dr),Dr|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=E!==null?E.baseLanes:d,ft(so,Dr),Dr|=m}else E!==null?(m=E.baseLanes|d,l.memoizedState=null):m=d,ft(so,Dr),Dr|=m;return dr(s,l,v,d),l.child}function p0(s,l){var d=l.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function mf(s,l,d,m,v){var E=mr(d)?os:ir.current;return E=qs(l,E),to(l,v),d=sf(s,l,d,m,E,v),m=of(),s!==null&&!gr?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~v,ri(s,l,v)):(vt&&m&&Gd(l),l.flags|=1,dr(s,l,d,v),l.child)}function m0(s,l,d,m,v){if(mr(d)){var E=!0;Ol(l)}else E=!1;if(to(l,v),l.stateNode===null)Jl(s,l),n0(l,d,m),ff(l,d,m,v),m=!0;else if(s===null){var b=l.stateNode,_=l.memoizedProps;b.props=_;var M=b.context,X=d.contextType;typeof X=="object"&&X!==null?X=Wr(X):(X=mr(d)?os:ir.current,X=qs(l,X));var le=d.getDerivedStateFromProps,ce=typeof le=="function"||typeof b.getSnapshotBeforeUpdate=="function";ce||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_!==m||M!==X)&&i0(l,b,m,X),Fi=!1;var oe=l.memoizedState;b.state=oe,Hl(l,m,b,v),M=l.memoizedState,_!==m||oe!==M||pr.current||Fi?(typeof le=="function"&&(df(l,d,le,m),M=l.memoizedState),(_=Fi||r0(l,d,_,m,oe,M,X))?(ce||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(l.flags|=4194308)):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=M),b.props=m,b.state=M,b.context=X,m=_):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{b=l.stateNode,Dg(s,l),_=l.memoizedProps,X=l.type===l.elementType?_:fn(l.type,_),b.props=X,ce=l.pendingProps,oe=b.context,M=d.contextType,typeof M=="object"&&M!==null?M=Wr(M):(M=mr(d)?os:ir.current,M=qs(l,M));var xe=d.getDerivedStateFromProps;(le=typeof xe=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_!==ce||oe!==M)&&i0(l,b,m,M),Fi=!1,oe=l.memoizedState,b.state=oe,Hl(l,m,b,v);var Ae=l.memoizedState;_!==ce||oe!==Ae||pr.current||Fi?(typeof xe=="function"&&(df(l,d,xe,m),Ae=l.memoizedState),(X=Fi||r0(l,d,X,m,oe,Ae,M)||!1)?(le||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(m,Ae,M),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(m,Ae,M)),typeof b.componentDidUpdate=="function"&&(l.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof b.componentDidUpdate!="function"||_===s.memoizedProps&&oe===s.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&oe===s.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=Ae),b.props=m,b.state=Ae,b.context=M,m=X):(typeof b.componentDidUpdate!="function"||_===s.memoizedProps&&oe===s.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&oe===s.memoizedState||(l.flags|=1024),m=!1)}return gf(s,l,d,m,E,v)}function gf(s,l,d,m,v,E){p0(s,l);var b=(l.flags&128)!==0;if(!m&&!b)return v&&Sg(l,d,!1),ri(s,l,E);m=l.stateNode,QT.current=l;var _=b&&typeof d.getDerivedStateFromError!="function"?null:m.render();return l.flags|=1,s!==null&&b?(l.child=Zs(l,s.child,null,E),l.child=Zs(l,null,_,E)):dr(s,l,_,E),l.memoizedState=m.state,v&&Sg(l,d,!0),l.child}function g0(s){var l=s.stateNode;l.pendingContext?vg(s,l.pendingContext,l.pendingContext!==l.context):l.context&&vg(s,l.context,!1),Jd(s,l.containerInfo)}function y0(s,l,d,m,v){return Js(),zd(v),l.flags|=256,dr(s,l,d,m),l.child}var yf={dehydrated:null,treeContext:null,retryLane:0};function vf(s){return{baseLanes:s,cachePool:null,transitions:null}}function v0(s,l,d){var m=l.pendingProps,v=Et.current,E=!1,b=(l.flags&128)!==0,_;if((_=b)||(_=s!==null&&s.memoizedState===null?!1:(v&2)!==0),_?(E=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(v|=1),ft(Et,v&1),s===null)return Vd(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(l.mode&1?s.data==="$!"?l.lanes=8:l.lanes=1073741824:l.lanes=1,null):(b=m.children,s=m.fallback,E?(m=l.mode,E=l.child,b={mode:"hidden",children:b},!(m&1)&&E!==null?(E.childLanes=0,E.pendingProps=b):E=cu(b,m,0,null),s=gs(s,m,d,null),E.return=l,s.return=l,E.sibling=s,l.child=E,l.child.memoizedState=vf(d),l.memoizedState=yf,s):xf(l,b));if(v=s.memoizedState,v!==null&&(_=v.dehydrated,_!==null))return JT(s,l,b,m,_,v,d);if(E){E=m.fallback,b=l.mode,v=s.child,_=v.sibling;var M={mode:"hidden",children:m.children};return!(b&1)&&l.child!==v?(m=l.child,m.childLanes=0,m.pendingProps=M,l.deletions=null):(m=ji(v,M),m.subtreeFlags=v.subtreeFlags&14680064),_!==null?E=ji(_,E):(E=gs(E,b,d,null),E.flags|=2),E.return=l,m.return=l,m.sibling=E,l.child=m,m=E,E=l.child,b=s.child.memoizedState,b=b===null?vf(d):{baseLanes:b.baseLanes|d,cachePool:null,transitions:b.transitions},E.memoizedState=b,E.childLanes=s.childLanes&~d,l.memoizedState=yf,m}return E=s.child,s=E.sibling,m=ji(E,{mode:"visible",children:m.children}),!(l.mode&1)&&(m.lanes=d),m.return=l,m.sibling=null,s!==null&&(d=l.deletions,d===null?(l.deletions=[s],l.flags|=16):d.push(s)),l.child=m,l.memoizedState=null,m}function xf(s,l){return l=cu({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function Ql(s,l,d,m){return m!==null&&zd(m),Zs(l,s.child,null,d),s=xf(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function JT(s,l,d,m,v,E,b){if(d)return l.flags&256?(l.flags&=-257,m=hf(Error(t(422))),Ql(s,l,b,m)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(E=m.fallback,v=l.mode,m=cu({mode:"visible",children:m.children},v,0,null),E=gs(E,v,b,null),E.flags|=2,m.return=l,E.return=l,m.sibling=E,l.child=m,l.mode&1&&Zs(l,s.child,null,b),l.child.memoizedState=vf(b),l.memoizedState=yf,E);if(!(l.mode&1))return Ql(s,l,b,null);if(v.data==="$!"){if(m=v.nextSibling&&v.nextSibling.dataset,m)var _=m.dgst;return m=_,E=Error(t(419)),m=hf(E,m,void 0),Ql(s,l,b,m)}if(_=(b&s.childLanes)!==0,gr||_){if(m=Ht,m!==null){switch(b&-b){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=v&(m.suspendedLanes|b)?0:v,v!==0&&v!==E.retryLane&&(E.retryLane=v,ei(s,v),mn(m,s,v,-1))}return Ff(),m=hf(Error(t(421))),Ql(s,l,b,m)}return v.data==="$?"?(l.flags|=128,l.child=s.child,l=dw.bind(null,s),v._reactRetry=l,null):(s=E.treeContext,Ir=Di(v.nextSibling),kr=l,vt=!0,dn=null,s!==null&&(zr[Kr++]=Jn,zr[Kr++]=Zn,zr[Kr++]=as,Jn=s.id,Zn=s.overflow,as=l),l=xf(l,m.children),l.flags|=4096,l)}function x0(s,l,d){s.lanes|=l;var m=s.alternate;m!==null&&(m.lanes|=l),qd(s.return,l,d)}function Sf(s,l,d,m,v){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:v}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=d,E.tailMode=v)}function S0(s,l,d){var m=l.pendingProps,v=m.revealOrder,E=m.tail;if(dr(s,l,m.children,d),m=Et.current,m&2)m=m&1|2,l.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&x0(s,d,l);else if(s.tag===19)x0(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}if(ft(Et,m),!(l.mode&1))l.memoizedState=null;else switch(v){case"forwards":for(d=l.child,v=null;d!==null;)s=d.alternate,s!==null&&Vl(s)===null&&(v=d),d=d.sibling;d=v,d===null?(v=l.child,l.child=null):(v=d.sibling,d.sibling=null),Sf(l,!1,v,d,E);break;case"backwards":for(d=null,v=l.child,l.child=null;v!==null;){if(s=v.alternate,s!==null&&Vl(s)===null){l.child=v;break}s=v.sibling,v.sibling=d,d=v,v=s}Sf(l,!0,d,null,E);break;case"together":Sf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Jl(s,l){!(l.mode&1)&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function ri(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),fs|=l.lanes,!(d&l.childLanes))return null;if(s!==null&&l.child!==s.child)throw Error(t(153));if(l.child!==null){for(s=l.child,d=ji(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=ji(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function ZT(s,l,d){switch(l.tag){case 3:g0(l),Js();break;case 5:Og(l);break;case 1:mr(l.type)&&Ol(l);break;case 4:Jd(l,l.stateNode.containerInfo);break;case 10:var m=l.type._context,v=l.memoizedProps.value;ft(Ul,m._currentValue),m._currentValue=v;break;case 13:if(m=l.memoizedState,m!==null)return m.dehydrated!==null?(ft(Et,Et.current&1),l.flags|=128,null):d&l.child.childLanes?v0(s,l,d):(ft(Et,Et.current&1),s=ri(s,l,d),s!==null?s.sibling:null);ft(Et,Et.current&1);break;case 19:if(m=(d&l.childLanes)!==0,s.flags&128){if(m)return S0(s,l,d);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ft(Et,Et.current),m)break;return null;case 22:case 23:return l.lanes=0,h0(s,l,d)}return ri(s,l,d)}var E0,Ef,T0,w0;E0=function(s,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Ef=function(){},T0=function(s,l,d,m){var v=s.memoizedProps;if(v!==m){s=l.stateNode,cs(Ln.current);var E=null;switch(d){case"input":v=on(s,v),m=on(s,m),E=[];break;case"select":v=q({},v,{value:void 0}),m=q({},m,{value:void 0}),E=[];break;case"textarea":v=ue(s,v),m=ue(s,m),E=[];break;default:typeof v.onClick!="function"&&typeof m.onClick=="function"&&(s.onclick=Dl)}Ei(d,m);var b;d=null;for(X in v)if(!m.hasOwnProperty(X)&&v.hasOwnProperty(X)&&v[X]!=null)if(X==="style"){var _=v[X];for(b in _)_.hasOwnProperty(b)&&(d||(d={}),d[b]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(i.hasOwnProperty(X)?E||(E=[]):(E=E||[]).push(X,null));for(X in m){var M=m[X];if(_=v!=null?v[X]:void 0,m.hasOwnProperty(X)&&M!==_&&(M!=null||_!=null))if(X==="style")if(_){for(b in _)!_.hasOwnProperty(b)||M&&M.hasOwnProperty(b)||(d||(d={}),d[b]="");for(b in M)M.hasOwnProperty(b)&&_[b]!==M[b]&&(d||(d={}),d[b]=M[b])}else d||(E||(E=[]),E.push(X,d)),d=M;else X==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,_=_?_.__html:void 0,M!=null&&_!==M&&(E=E||[]).push(X,M)):X==="children"?typeof M!="string"&&typeof M!="number"||(E=E||[]).push(X,""+M):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(i.hasOwnProperty(X)?(M!=null&&X==="onScroll"&&mt("scroll",s),E||_===M||(E=[])):(E=E||[]).push(X,M))}d&&(E=E||[]).push("style",d);var X=E;(l.updateQueue=X)&&(l.flags|=4)}},w0=function(s,l,d,m){d!==m&&(l.flags|=4)};function ya(s,l){if(!vt)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function or(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,m=0;if(l)for(var v=s.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags&14680064,m|=v.flags&14680064,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=m,s.childLanes=d,l}function ew(s,l,d){var m=l.pendingProps;switch(jd(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return or(l),null;case 1:return mr(l.type)&&_l(),or(l),null;case 3:return m=l.stateNode,ro(),gt(pr),gt(ir),tf(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(Bl(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024,dn!==null&&(Pf(dn),dn=null))),Ef(s,l),or(l),null;case 5:Zd(l);var v=cs(fa.current);if(d=l.type,s!==null&&l.stateNode!=null)T0(s,l,d,m,v),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!m){if(l.stateNode===null)throw Error(t(166));return or(l),null}if(s=cs(Ln.current),Bl(l)){m=l.stateNode,d=l.type;var E=l.memoizedProps;switch(m[An]=l,m[aa]=E,s=(l.mode&1)!==0,d){case"dialog":mt("cancel",m),mt("close",m);break;case"iframe":case"object":case"embed":mt("load",m);break;case"video":case"audio":for(v=0;v<ia.length;v++)mt(ia[v],m);break;case"source":mt("error",m);break;case"img":case"image":case"link":mt("error",m),mt("load",m);break;case"details":mt("toggle",m);break;case"input":yi(m,E),mt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!E.multiple},mt("invalid",m);break;case"textarea":Qe(m,E),mt("invalid",m)}Ei(d,E),v=null;for(var b in E)if(E.hasOwnProperty(b)){var _=E[b];b==="children"?typeof _=="string"?m.textContent!==_&&(E.suppressHydrationWarning!==!0&&Il(m.textContent,_,s),v=["children",_]):typeof _=="number"&&m.textContent!==""+_&&(E.suppressHydrationWarning!==!0&&Il(m.textContent,_,s),v=["children",""+_]):i.hasOwnProperty(b)&&_!=null&&b==="onScroll"&&mt("scroll",m)}switch(d){case"input":rr(m),Gr(m,E,!0);break;case"textarea":rr(m),an(m);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(m.onclick=Dl)}m=v,l.updateQueue=m,m!==null&&(l.flags|=4)}else{b=v.nodeType===9?v:v.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Hr(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=b.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof m.is=="string"?s=b.createElement(d,{is:m.is}):(s=b.createElement(d),d==="select"&&(b=s,m.multiple?b.multiple=!0:m.size&&(b.size=m.size))):s=b.createElementNS(s,d),s[An]=l,s[aa]=m,E0(s,l,!1,!1),l.stateNode=s;e:{switch(b=Ms(d,m),d){case"dialog":mt("cancel",s),mt("close",s),v=m;break;case"iframe":case"object":case"embed":mt("load",s),v=m;break;case"video":case"audio":for(v=0;v<ia.length;v++)mt(ia[v],s);v=m;break;case"source":mt("error",s),v=m;break;case"img":case"image":case"link":mt("error",s),mt("load",s),v=m;break;case"details":mt("toggle",s),v=m;break;case"input":yi(s,m),v=on(s,m),mt("invalid",s);break;case"option":v=m;break;case"select":s._wrapperState={wasMultiple:!!m.multiple},v=q({},m,{value:void 0}),mt("invalid",s);break;case"textarea":Qe(s,m),v=ue(s,m),mt("invalid",s);break;default:v=m}Ei(d,v),_=v;for(E in _)if(_.hasOwnProperty(E)){var M=_[E];E==="style"?cl(s,M):E==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&ll(s,M)):E==="children"?typeof M=="string"?(d!=="textarea"||M!=="")&&hr(s,M):typeof M=="number"&&hr(s,""+M):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(i.hasOwnProperty(E)?M!=null&&E==="onScroll"&&mt("scroll",s):M!=null&&C(s,E,M,b))}switch(d){case"input":rr(s),Gr(s,m,!1);break;case"textarea":rr(s),an(s);break;case"option":m.value!=null&&s.setAttribute("value",""+Be(m.value));break;case"select":s.multiple=!!m.multiple,E=m.value,E!=null?Gt(s,!!m.multiple,E,!1):m.defaultValue!=null&&Gt(s,!!m.multiple,m.defaultValue,!0);break;default:typeof v.onClick=="function"&&(s.onclick=Dl)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return or(l),null;case 6:if(s&&l.stateNode!=null)w0(s,l,s.memoizedProps,m);else{if(typeof m!="string"&&l.stateNode===null)throw Error(t(166));if(d=cs(fa.current),cs(Ln.current),Bl(l)){if(m=l.stateNode,d=l.memoizedProps,m[An]=l,(E=m.nodeValue!==d)&&(s=kr,s!==null))switch(s.tag){case 3:Il(m.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Il(m.nodeValue,d,(s.mode&1)!==0)}E&&(l.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[An]=l,l.stateNode=m}return or(l),null;case 13:if(gt(Et),m=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(vt&&Ir!==null&&l.mode&1&&!(l.flags&128))Lg(),Js(),l.flags|=98560,E=!1;else if(E=Bl(l),m!==null&&m.dehydrated!==null){if(s===null){if(!E)throw Error(t(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(t(317));E[An]=l}else Js(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;or(l),E=!1}else dn!==null&&(Pf(dn),dn=null),E=!0;if(!E)return l.flags&65536?l:null}return l.flags&128?(l.lanes=d,l):(m=m!==null,m!==(s!==null&&s.memoizedState!==null)&&m&&(l.child.flags|=8192,l.mode&1&&(s===null||Et.current&1?$t===0&&($t=3):Ff())),l.updateQueue!==null&&(l.flags|=4),or(l),null);case 4:return ro(),Ef(s,l),s===null&&sa(l.stateNode.containerInfo),or(l),null;case 10:return Yd(l.type._context),or(l),null;case 17:return mr(l.type)&&_l(),or(l),null;case 19:if(gt(Et),E=l.memoizedState,E===null)return or(l),null;if(m=(l.flags&128)!==0,b=E.rendering,b===null)if(m)ya(E,!1);else{if($t!==0||s!==null&&s.flags&128)for(s=l.child;s!==null;){if(b=Vl(s),b!==null){for(l.flags|=128,ya(E,!1),m=b.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),l.subtreeFlags=0,m=d,d=l.child;d!==null;)E=d,s=m,E.flags&=14680066,b=E.alternate,b===null?(E.childLanes=0,E.lanes=s,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=b.childLanes,E.lanes=b.lanes,E.child=b.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=b.memoizedProps,E.memoizedState=b.memoizedState,E.updateQueue=b.updateQueue,E.type=b.type,s=b.dependencies,E.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return ft(Et,Et.current&1|2),l.child}s=s.sibling}E.tail!==null&&dt()>oo&&(l.flags|=128,m=!0,ya(E,!1),l.lanes=4194304)}else{if(!m)if(s=Vl(b),s!==null){if(l.flags|=128,m=!0,d=s.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),ya(E,!0),E.tail===null&&E.tailMode==="hidden"&&!b.alternate&&!vt)return or(l),null}else 2*dt()-E.renderingStartTime>oo&&d!==1073741824&&(l.flags|=128,m=!0,ya(E,!1),l.lanes=4194304);E.isBackwards?(b.sibling=l.child,l.child=b):(d=E.last,d!==null?d.sibling=b:l.child=b,E.last=b)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=dt(),l.sibling=null,d=Et.current,ft(Et,m?d&1|2:d&1),l):(or(l),null);case 22:case 23:return Of(),m=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==m&&(l.flags|=8192),m&&l.mode&1?Dr&1073741824&&(or(l),l.subtreeFlags&6&&(l.flags|=8192)):or(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function tw(s,l){switch(jd(l),l.tag){case 1:return mr(l.type)&&_l(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return ro(),gt(pr),gt(ir),tf(),s=l.flags,s&65536&&!(s&128)?(l.flags=s&-65537|128,l):null;case 5:return Zd(l),null;case 13:if(gt(Et),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Js()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return gt(Et),null;case 4:return ro(),null;case 10:return Yd(l.type._context),null;case 22:case 23:return Of(),null;case 24:return null;default:return null}}var Zl=!1,ar=!1,rw=typeof WeakSet=="function"?WeakSet:Set,we=null;function io(s,l){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){At(s,l,m)}else d.current=null}function Tf(s,l,d){try{d()}catch(m){At(s,l,m)}}var R0=!1;function nw(s,l){if(_d=xl,s=rg(),Ad(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var v=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{d.nodeType,E.nodeType}catch{d=null;break e}var b=0,_=-1,M=-1,X=0,le=0,ce=s,oe=null;t:for(;;){for(var xe;ce!==d||v!==0&&ce.nodeType!==3||(_=b+v),ce!==E||m!==0&&ce.nodeType!==3||(M=b+m),ce.nodeType===3&&(b+=ce.nodeValue.length),(xe=ce.firstChild)!==null;)oe=ce,ce=xe;for(;;){if(ce===s)break t;if(oe===d&&++X===v&&(_=b),oe===E&&++le===m&&(M=b),(xe=ce.nextSibling)!==null)break;ce=oe,oe=ce.parentNode}ce=xe}d=_===-1||M===-1?null:{start:_,end:M}}else d=null}d=d||{start:0,end:0}}else d=null;for(Od={focusedElem:s,selectionRange:d},xl=!1,we=l;we!==null;)if(l=we,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,we=s;else for(;we!==null;){l=we;try{var Ae=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Ce=Ae.memoizedProps,Ct=Ae.memoizedState,V=l.stateNode,B=V.getSnapshotBeforeUpdate(l.elementType===l.type?Ce:fn(l.type,Ce),Ct);V.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var K=l.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(he){At(l,l.return,he)}if(s=l.sibling,s!==null){s.return=l.return,we=s;break}we=l.return}return Ae=R0,R0=!1,Ae}function va(s,l,d){var m=l.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var v=m=m.next;do{if((v.tag&s)===s){var E=v.destroy;v.destroy=void 0,E!==void 0&&Tf(l,d,E)}v=v.next}while(v!==m)}}function eu(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&s)===s){var m=d.create;d.destroy=m()}d=d.next}while(d!==l)}}function wf(s){var l=s.ref;if(l!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof l=="function"?l(s):l.current=s}}function A0(s){var l=s.alternate;l!==null&&(s.alternate=null,A0(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[An],delete l[aa],delete l[Bd],delete l[$T],delete l[UT])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function L0(s){return s.tag===5||s.tag===3||s.tag===4}function b0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||L0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Rf(s,l,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(s,l):d.insertBefore(s,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(s,d)):(l=d,l.appendChild(s)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Dl));else if(m!==4&&(s=s.child,s!==null))for(Rf(s,l,d),s=s.sibling;s!==null;)Rf(s,l,d),s=s.sibling}function Af(s,l,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(m!==4&&(s=s.child,s!==null))for(Af(s,l,d),s=s.sibling;s!==null;)Af(s,l,d),s=s.sibling}var Xt=null,hn=!1;function Ni(s,l,d){for(d=d.child;d!==null;)C0(s,l,d),d=d.sibling}function C0(s,l,d){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(ln,d)}catch{}switch(d.tag){case 5:ar||io(d,l);case 6:var m=Xt,v=hn;Xt=null,Ni(s,l,d),Xt=m,hn=v,Xt!==null&&(hn?(s=Xt,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):Xt.removeChild(d.stateNode));break;case 18:Xt!==null&&(hn?(s=Xt,d=d.stateNode,s.nodeType===8?Nd(s.parentNode,d):s.nodeType===1&&Nd(s,d),Xo(s)):Nd(Xt,d.stateNode));break;case 4:m=Xt,v=hn,Xt=d.stateNode.containerInfo,hn=!0,Ni(s,l,d),Xt=m,hn=v;break;case 0:case 11:case 14:case 15:if(!ar&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){v=m=m.next;do{var E=v,b=E.destroy;E=E.tag,b!==void 0&&(E&2||E&4)&&Tf(d,l,b),v=v.next}while(v!==m)}Ni(s,l,d);break;case 1:if(!ar&&(io(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(_){At(d,l,_)}Ni(s,l,d);break;case 21:Ni(s,l,d);break;case 22:d.mode&1?(ar=(m=ar)||d.memoizedState!==null,Ni(s,l,d),ar=m):Ni(s,l,d);break;default:Ni(s,l,d)}}function k0(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new rw),l.forEach(function(m){var v=fw.bind(null,s,m);d.has(m)||(d.add(m),m.then(v,v))})}}function pn(s,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var v=d[m];try{var E=s,b=l,_=b;e:for(;_!==null;){switch(_.tag){case 5:Xt=_.stateNode,hn=!1;break e;case 3:Xt=_.stateNode.containerInfo,hn=!0;break e;case 4:Xt=_.stateNode.containerInfo,hn=!0;break e}_=_.return}if(Xt===null)throw Error(t(160));C0(E,b,v),Xt=null,hn=!1;var M=v.alternate;M!==null&&(M.return=null),v.return=null}catch(X){At(v,l,X)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)I0(l,s),l=l.sibling}function I0(s,l){var d=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(pn(l,s),Cn(s),m&4){try{va(3,s,s.return),eu(3,s)}catch(Ce){At(s,s.return,Ce)}try{va(5,s,s.return)}catch(Ce){At(s,s.return,Ce)}}break;case 1:pn(l,s),Cn(s),m&512&&d!==null&&io(d,d.return);break;case 5:if(pn(l,s),Cn(s),m&512&&d!==null&&io(d,d.return),s.flags&32){var v=s.stateNode;try{hr(v,"")}catch(Ce){At(s,s.return,Ce)}}if(m&4&&(v=s.stateNode,v!=null)){var E=s.memoizedProps,b=d!==null?d.memoizedProps:E,_=s.type,M=s.updateQueue;if(s.updateQueue=null,M!==null)try{_==="input"&&E.type==="radio"&&E.name!=null&&Rn(v,E),Ms(_,b);var X=Ms(_,E);for(b=0;b<M.length;b+=2){var le=M[b],ce=M[b+1];le==="style"?cl(v,ce):le==="dangerouslySetInnerHTML"?ll(v,ce):le==="children"?hr(v,ce):C(v,le,ce,X)}switch(_){case"input":Ur(v,E);break;case"textarea":vi(v,E);break;case"select":var oe=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!E.multiple;var xe=E.value;xe!=null?Gt(v,!!E.multiple,xe,!1):oe!==!!E.multiple&&(E.defaultValue!=null?Gt(v,!!E.multiple,E.defaultValue,!0):Gt(v,!!E.multiple,E.multiple?[]:"",!1))}v[aa]=E}catch(Ce){At(s,s.return,Ce)}}break;case 6:if(pn(l,s),Cn(s),m&4){if(s.stateNode===null)throw Error(t(162));v=s.stateNode,E=s.memoizedProps;try{v.nodeValue=E}catch(Ce){At(s,s.return,Ce)}}break;case 3:if(pn(l,s),Cn(s),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Xo(l.containerInfo)}catch(Ce){At(s,s.return,Ce)}break;case 4:pn(l,s),Cn(s);break;case 13:pn(l,s),Cn(s),v=s.child,v.flags&8192&&(E=v.memoizedState!==null,v.stateNode.isHidden=E,!E||v.alternate!==null&&v.alternate.memoizedState!==null||(Cf=dt())),m&4&&k0(s);break;case 22:if(le=d!==null&&d.memoizedState!==null,s.mode&1?(ar=(X=ar)||le,pn(l,s),ar=X):pn(l,s),Cn(s),m&8192){if(X=s.memoizedState!==null,(s.stateNode.isHidden=X)&&!le&&s.mode&1)for(we=s,le=s.child;le!==null;){for(ce=we=le;we!==null;){switch(oe=we,xe=oe.child,oe.tag){case 0:case 11:case 14:case 15:va(4,oe,oe.return);break;case 1:io(oe,oe.return);var Ae=oe.stateNode;if(typeof Ae.componentWillUnmount=="function"){m=oe,d=oe.return;try{l=m,Ae.props=l.memoizedProps,Ae.state=l.memoizedState,Ae.componentWillUnmount()}catch(Ce){At(m,d,Ce)}}break;case 5:io(oe,oe.return);break;case 22:if(oe.memoizedState!==null){_0(ce);continue}}xe!==null?(xe.return=oe,we=xe):_0(ce)}le=le.sibling}e:for(le=null,ce=s;;){if(ce.tag===5){if(le===null){le=ce;try{v=ce.stateNode,X?(E=v.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(_=ce.stateNode,M=ce.memoizedProps.style,b=M!=null&&M.hasOwnProperty("display")?M.display:null,_.style.display=jo("display",b))}catch(Ce){At(s,s.return,Ce)}}}else if(ce.tag===6){if(le===null)try{ce.stateNode.nodeValue=X?"":ce.memoizedProps}catch(Ce){At(s,s.return,Ce)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===s)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===s)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===s)break e;le===ce&&(le=null),ce=ce.return}le===ce&&(le=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:pn(l,s),Cn(s),m&4&&k0(s);break;case 21:break;default:pn(l,s),Cn(s)}}function Cn(s){var l=s.flags;if(l&2){try{e:{for(var d=s.return;d!==null;){if(L0(d)){var m=d;break e}d=d.return}throw Error(t(160))}switch(m.tag){case 5:var v=m.stateNode;m.flags&32&&(hr(v,""),m.flags&=-33);var E=b0(s);Af(s,E,v);break;case 3:case 4:var b=m.stateNode.containerInfo,_=b0(s);Rf(s,_,b);break;default:throw Error(t(161))}}catch(M){At(s,s.return,M)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function iw(s,l,d){we=s,D0(s)}function D0(s,l,d){for(var m=(s.mode&1)!==0;we!==null;){var v=we,E=v.child;if(v.tag===22&&m){var b=v.memoizedState!==null||Zl;if(!b){var _=v.alternate,M=_!==null&&_.memoizedState!==null||ar;_=Zl;var X=ar;if(Zl=b,(ar=M)&&!X)for(we=v;we!==null;)b=we,M=b.child,b.tag===22&&b.memoizedState!==null?O0(v):M!==null?(M.return=b,we=M):O0(v);for(;E!==null;)we=E,D0(E),E=E.sibling;we=v,Zl=_,ar=X}P0(s)}else v.subtreeFlags&8772&&E!==null?(E.return=v,we=E):P0(s)}}function P0(s){for(;we!==null;){var l=we;if(l.flags&8772){var d=l.alternate;try{if(l.flags&8772)switch(l.tag){case 0:case 11:case 15:ar||eu(5,l);break;case 1:var m=l.stateNode;if(l.flags&4&&!ar)if(d===null)m.componentDidMount();else{var v=l.elementType===l.type?d.memoizedProps:fn(l.type,d.memoizedProps);m.componentDidUpdate(v,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var E=l.updateQueue;E!==null&&_g(l,E,m);break;case 3:var b=l.updateQueue;if(b!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}_g(l,b,d)}break;case 5:var _=l.stateNode;if(d===null&&l.flags&4){d=_;var M=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&d.focus();break;case"img":M.src&&(d.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var X=l.alternate;if(X!==null){var le=X.memoizedState;if(le!==null){var ce=le.dehydrated;ce!==null&&Xo(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ar||l.flags&512&&wf(l)}catch(oe){At(l,l.return,oe)}}if(l===s){we=null;break}if(d=l.sibling,d!==null){d.return=l.return,we=d;break}we=l.return}}function _0(s){for(;we!==null;){var l=we;if(l===s){we=null;break}var d=l.sibling;if(d!==null){d.return=l.return,we=d;break}we=l.return}}function O0(s){for(;we!==null;){var l=we;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{eu(4,l)}catch(M){At(l,d,M)}break;case 1:var m=l.stateNode;if(typeof m.componentDidMount=="function"){var v=l.return;try{m.componentDidMount()}catch(M){At(l,v,M)}}var E=l.return;try{wf(l)}catch(M){At(l,E,M)}break;case 5:var b=l.return;try{wf(l)}catch(M){At(l,b,M)}}}catch(M){At(l,l.return,M)}if(l===s){we=null;break}var _=l.sibling;if(_!==null){_.return=l.return,we=_;break}we=l.return}}var sw=Math.ceil,tu=I.ReactCurrentDispatcher,Lf=I.ReactCurrentOwner,qr=I.ReactCurrentBatchConfig,qe=0,Ht=null,It=null,Qt=0,Dr=0,so=Pi(0),$t=0,xa=null,fs=0,ru=0,bf=0,Sa=null,yr=null,Cf=0,oo=1/0,ni=null,nu=!1,kf=null,Bi=null,iu=!1,$i=null,su=0,Ea=0,If=null,ou=-1,au=0;function fr(){return qe&6?dt():ou!==-1?ou:ou=dt()}function Ui(s){return s.mode&1?qe&2&&Qt!==0?Qt&-Qt:jT.transition!==null?(au===0&&(au=bm()),au):(s=it,s!==0||(s=window.event,s=s===void 0?16:Mm(s.type)),s):1}function mn(s,l,d,m){if(50<Ea)throw Ea=0,If=null,Error(t(185));zo(s,d,m),(!(qe&2)||s!==Ht)&&(s===Ht&&(!(qe&2)&&(ru|=d),$t===4&&Gi(s,Qt)),vr(s,m),d===1&&qe===0&&!(l.mode&1)&&(oo=dt()+500,Fl&&Oi()))}function vr(s,l){var d=s.callbackNode;jE(s,l);var m=gl(s,s===Ht?Qt:0);if(m===0)d!==null&&Bs(d),s.callbackNode=null,s.callbackPriority=0;else if(l=m&-m,s.callbackPriority!==l){if(d!=null&&Bs(d),l===1)s.tag===0?GT(M0.bind(null,s)):Eg(M0.bind(null,s)),NT(function(){!(qe&6)&&Oi()}),d=null;else{switch(Cm(m)){case 1:d=tt;break;case 4:d=Nt;break;case 16:d=qn;break;case 536870912:d=St;break;default:d=qn}d=V0(d,F0.bind(null,s))}s.callbackPriority=l,s.callbackNode=d}}function F0(s,l){if(ou=-1,au=0,qe&6)throw Error(t(327));var d=s.callbackNode;if(ao()&&s.callbackNode!==d)return null;var m=gl(s,s===Ht?Qt:0);if(m===0)return null;if(m&30||m&s.expiredLanes||l)l=lu(s,m);else{l=m;var v=qe;qe|=2;var E=B0();(Ht!==s||Qt!==l)&&(ni=null,oo=dt()+500,ps(s,l));do try{lw();break}catch(_){N0(s,_)}while(!0);Wd(),tu.current=E,qe=v,It!==null?l=0:(Ht=null,Qt=0,l=$t)}if(l!==0){if(l===2&&(v=ud(s),v!==0&&(m=v,l=Df(s,v))),l===1)throw d=xa,ps(s,0),Gi(s,m),vr(s,dt()),d;if(l===6)Gi(s,m);else{if(v=s.current.alternate,!(m&30)&&!ow(v)&&(l=lu(s,m),l===2&&(E=ud(s),E!==0&&(m=E,l=Df(s,E))),l===1))throw d=xa,ps(s,0),Gi(s,m),vr(s,dt()),d;switch(s.finishedWork=v,s.finishedLanes=m,l){case 0:case 1:throw Error(t(345));case 2:ms(s,yr,ni);break;case 3:if(Gi(s,m),(m&130023424)===m&&(l=Cf+500-dt(),10<l)){if(gl(s,0)!==0)break;if(v=s.suspendedLanes,(v&m)!==m){fr(),s.pingedLanes|=s.suspendedLanes&v;break}s.timeoutHandle=Md(ms.bind(null,s,yr,ni),l);break}ms(s,yr,ni);break;case 4:if(Gi(s,m),(m&4194240)===m)break;for(l=s.eventTimes,v=-1;0<m;){var b=31-un(m);E=1<<b,b=l[b],b>v&&(v=b),m&=~E}if(m=v,m=dt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*sw(m/1960))-m,10<m){s.timeoutHandle=Md(ms.bind(null,s,yr,ni),m);break}ms(s,yr,ni);break;case 5:ms(s,yr,ni);break;default:throw Error(t(329))}}}return vr(s,dt()),s.callbackNode===d?F0.bind(null,s):null}function Df(s,l){var d=Sa;return s.current.memoizedState.isDehydrated&&(ps(s,l).flags|=256),s=lu(s,l),s!==2&&(l=yr,yr=d,l!==null&&Pf(l)),s}function Pf(s){yr===null?yr=s:yr.push.apply(yr,s)}function ow(s){for(var l=s;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var v=d[m],E=v.getSnapshot;v=v.value;try{if(!cn(E(),v))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Gi(s,l){for(l&=~bf,l&=~ru,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var d=31-un(l),m=1<<d;s[d]=-1,l&=~m}}function M0(s){if(qe&6)throw Error(t(327));ao();var l=gl(s,0);if(!(l&1))return vr(s,dt()),null;var d=lu(s,l);if(s.tag!==0&&d===2){var m=ud(s);m!==0&&(l=m,d=Df(s,m))}if(d===1)throw d=xa,ps(s,0),Gi(s,l),vr(s,dt()),d;if(d===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,ms(s,yr,ni),vr(s,dt()),null}function _f(s,l){var d=qe;qe|=1;try{return s(l)}finally{qe=d,qe===0&&(oo=dt()+500,Fl&&Oi())}}function hs(s){$i!==null&&$i.tag===0&&!(qe&6)&&ao();var l=qe;qe|=1;var d=qr.transition,m=it;try{if(qr.transition=null,it=1,s)return s()}finally{it=m,qr.transition=d,qe=l,!(qe&6)&&Oi()}}function Of(){Dr=so.current,gt(so)}function ps(s,l){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,MT(d)),It!==null)for(d=It.return;d!==null;){var m=d;switch(jd(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&_l();break;case 3:ro(),gt(pr),gt(ir),tf();break;case 5:Zd(m);break;case 4:ro();break;case 13:gt(Et);break;case 19:gt(Et);break;case 10:Yd(m.type._context);break;case 22:case 23:Of()}d=d.return}if(Ht=s,It=s=ji(s.current,null),Qt=Dr=l,$t=0,xa=null,bf=ru=fs=0,yr=Sa=null,us!==null){for(l=0;l<us.length;l++)if(d=us[l],m=d.interleaved,m!==null){d.interleaved=null;var v=m.next,E=d.pending;if(E!==null){var b=E.next;E.next=v,m.next=b}d.pending=m}us=null}return s}function N0(s,l){do{var d=It;try{if(Wd(),zl.current=ql,Kl){for(var m=Tt.memoizedState;m!==null;){var v=m.queue;v!==null&&(v.pending=null),m=m.next}Kl=!1}if(ds=0,jt=Bt=Tt=null,ha=!1,pa=0,Lf.current=null,d===null||d.return===null){$t=1,xa=l,It=null;break}e:{var E=s,b=d.return,_=d,M=l;if(l=Qt,_.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var X=M,le=_,ce=le.tag;if(!(le.mode&1)&&(ce===0||ce===11||ce===15)){var oe=le.alternate;oe?(le.updateQueue=oe.updateQueue,le.memoizedState=oe.memoizedState,le.lanes=oe.lanes):(le.updateQueue=null,le.memoizedState=null)}var xe=l0(b);if(xe!==null){xe.flags&=-257,u0(xe,b,_,E,l),xe.mode&1&&a0(E,X,l),l=xe,M=X;var Ae=l.updateQueue;if(Ae===null){var Ce=new Set;Ce.add(M),l.updateQueue=Ce}else Ae.add(M);break e}else{if(!(l&1)){a0(E,X,l),Ff();break e}M=Error(t(426))}}else if(vt&&_.mode&1){var Ct=l0(b);if(Ct!==null){!(Ct.flags&65536)&&(Ct.flags|=256),u0(Ct,b,_,E,l),zd(no(M,_));break e}}E=M=no(M,_),$t!==4&&($t=2),Sa===null?Sa=[E]:Sa.push(E),E=b;do{switch(E.tag){case 3:E.flags|=65536,l&=-l,E.lanes|=l;var V=s0(E,M,l);Pg(E,V);break e;case 1:_=M;var B=E.type,K=E.stateNode;if(!(E.flags&128)&&(typeof B.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Bi===null||!Bi.has(K)))){E.flags|=65536,l&=-l,E.lanes|=l;var he=o0(E,_,l);Pg(E,he);break e}}E=E.return}while(E!==null)}U0(d)}catch(Ie){l=Ie,It===d&&d!==null&&(It=d=d.return);continue}break}while(!0)}function B0(){var s=tu.current;return tu.current=ql,s===null?ql:s}function Ff(){($t===0||$t===3||$t===2)&&($t=4),Ht===null||!(fs&268435455)&&!(ru&268435455)||Gi(Ht,Qt)}function lu(s,l){var d=qe;qe|=2;var m=B0();(Ht!==s||Qt!==l)&&(ni=null,ps(s,l));do try{aw();break}catch(v){N0(s,v)}while(!0);if(Wd(),qe=d,tu.current=m,It!==null)throw Error(t(261));return Ht=null,Qt=0,$t}function aw(){for(;It!==null;)$0(It)}function lw(){for(;It!==null&&!ns();)$0(It)}function $0(s){var l=H0(s.alternate,s,Dr);s.memoizedProps=s.pendingProps,l===null?U0(s):It=l,Lf.current=null}function U0(s){var l=s;do{var d=l.alternate;if(s=l.return,l.flags&32768){if(d=tw(d,l),d!==null){d.flags&=32767,It=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{$t=6,It=null;return}}else if(d=ew(d,l,Dr),d!==null){It=d;return}if(l=l.sibling,l!==null){It=l;return}It=l=s}while(l!==null);$t===0&&($t=5)}function ms(s,l,d){var m=it,v=qr.transition;try{qr.transition=null,it=1,uw(s,l,d,m)}finally{qr.transition=v,it=m}return null}function uw(s,l,d,m){do ao();while($i!==null);if(qe&6)throw Error(t(327));d=s.finishedWork;var v=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var E=d.lanes|d.childLanes;if(HE(s,E),s===Ht&&(It=Ht=null,Qt=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||iu||(iu=!0,V0(qn,function(){return ao(),null})),E=(d.flags&15990)!==0,d.subtreeFlags&15990||E){E=qr.transition,qr.transition=null;var b=it;it=1;var _=qe;qe|=4,Lf.current=null,nw(s,d),I0(d,s),kT(Od),xl=!!_d,Od=_d=null,s.current=d,iw(d),Yn(),qe=_,it=b,qr.transition=E}else s.current=d;if(iu&&(iu=!1,$i=s,su=v),E=s.pendingLanes,E===0&&(Bi=null),ld(d.stateNode),vr(s,dt()),l!==null)for(m=s.onRecoverableError,d=0;d<l.length;d++)v=l[d],m(v.value,{componentStack:v.stack,digest:v.digest});if(nu)throw nu=!1,s=kf,kf=null,s;return su&1&&s.tag!==0&&ao(),E=s.pendingLanes,E&1?s===If?Ea++:(Ea=0,If=s):Ea=0,Oi(),null}function ao(){if($i!==null){var s=Cm(su),l=qr.transition,d=it;try{if(qr.transition=null,it=16>s?16:s,$i===null)var m=!1;else{if(s=$i,$i=null,su=0,qe&6)throw Error(t(331));var v=qe;for(qe|=4,we=s.current;we!==null;){var E=we,b=E.child;if(we.flags&16){var _=E.deletions;if(_!==null){for(var M=0;M<_.length;M++){var X=_[M];for(we=X;we!==null;){var le=we;switch(le.tag){case 0:case 11:case 15:va(8,le,E)}var ce=le.child;if(ce!==null)ce.return=le,we=ce;else for(;we!==null;){le=we;var oe=le.sibling,xe=le.return;if(A0(le),le===X){we=null;break}if(oe!==null){oe.return=xe,we=oe;break}we=xe}}}var Ae=E.alternate;if(Ae!==null){var Ce=Ae.child;if(Ce!==null){Ae.child=null;do{var Ct=Ce.sibling;Ce.sibling=null,Ce=Ct}while(Ce!==null)}}we=E}}if(E.subtreeFlags&2064&&b!==null)b.return=E,we=b;else e:for(;we!==null;){if(E=we,E.flags&2048)switch(E.tag){case 0:case 11:case 15:va(9,E,E.return)}var V=E.sibling;if(V!==null){V.return=E.return,we=V;break e}we=E.return}}var B=s.current;for(we=B;we!==null;){b=we;var K=b.child;if(b.subtreeFlags&2064&&K!==null)K.return=b,we=K;else e:for(b=B;we!==null;){if(_=we,_.flags&2048)try{switch(_.tag){case 0:case 11:case 15:eu(9,_)}}catch(Ie){At(_,_.return,Ie)}if(_===b){we=null;break e}var he=_.sibling;if(he!==null){he.return=_.return,we=he;break e}we=_.return}}if(qe=v,Oi(),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(ln,s)}catch{}m=!0}return m}finally{it=d,qr.transition=l}}return!1}function G0(s,l,d){l=no(d,l),l=s0(s,l,1),s=Mi(s,l,1),l=fr(),s!==null&&(zo(s,1,l),vr(s,l))}function At(s,l,d){if(s.tag===3)G0(s,s,d);else for(;l!==null;){if(l.tag===3){G0(l,s,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Bi===null||!Bi.has(m))){s=no(d,s),s=o0(l,s,1),l=Mi(l,s,1),s=fr(),l!==null&&(zo(l,1,s),vr(l,s));break}}l=l.return}}function cw(s,l,d){var m=s.pingCache;m!==null&&m.delete(l),l=fr(),s.pingedLanes|=s.suspendedLanes&d,Ht===s&&(Qt&d)===d&&($t===4||$t===3&&(Qt&130023424)===Qt&&500>dt()-Cf?ps(s,0):bf|=d),vr(s,l)}function j0(s,l){l===0&&(s.mode&1?(l=ml,ml<<=1,!(ml&130023424)&&(ml=4194304)):l=1);var d=fr();s=ei(s,l),s!==null&&(zo(s,l,d),vr(s,d))}function dw(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),j0(s,d)}function fw(s,l){var d=0;switch(s.tag){case 13:var m=s.stateNode,v=s.memoizedState;v!==null&&(d=v.retryLane);break;case 19:m=s.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(l),j0(s,d)}var H0;H0=function(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps||pr.current)gr=!0;else{if(!(s.lanes&d)&&!(l.flags&128))return gr=!1,ZT(s,l,d);gr=!!(s.flags&131072)}else gr=!1,vt&&l.flags&1048576&&Tg(l,Nl,l.index);switch(l.lanes=0,l.tag){case 2:var m=l.type;Jl(s,l),s=l.pendingProps;var v=qs(l,ir.current);to(l,d),v=sf(null,l,m,s,v,d);var E=of();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,mr(m)?(E=!0,Ol(l)):E=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Qd(l),v.updater=Xl,l.stateNode=v,v._reactInternals=l,ff(l,m,s,d),l=gf(null,l,m,!0,E,d)):(l.tag=0,vt&&E&&Gd(l),dr(null,l,v,d),l=l.child),l;case 16:m=l.elementType;e:{switch(Jl(s,l),s=l.pendingProps,v=m._init,m=v(m._payload),l.type=m,v=l.tag=pw(m),s=fn(m,s),v){case 0:l=mf(null,l,m,s,d);break e;case 1:l=m0(null,l,m,s,d);break e;case 11:l=c0(null,l,m,s,d);break e;case 14:l=d0(null,l,m,fn(m.type,s),d);break e}throw Error(t(306,m,""))}return l;case 0:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:fn(m,v),mf(s,l,m,v,d);case 1:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:fn(m,v),m0(s,l,m,v,d);case 3:e:{if(g0(l),s===null)throw Error(t(387));m=l.pendingProps,E=l.memoizedState,v=E.element,Dg(s,l),Hl(l,m,null,d);var b=l.memoizedState;if(m=b.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){v=no(Error(t(423)),l),l=y0(s,l,m,d,v);break e}else if(m!==v){v=no(Error(t(424)),l),l=y0(s,l,m,d,v);break e}else for(Ir=Di(l.stateNode.containerInfo.firstChild),kr=l,vt=!0,dn=null,d=kg(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Js(),m===v){l=ri(s,l,d);break e}dr(s,l,m,d)}l=l.child}return l;case 5:return Og(l),s===null&&Vd(l),m=l.type,v=l.pendingProps,E=s!==null?s.memoizedProps:null,b=v.children,Fd(m,v)?b=null:E!==null&&Fd(m,E)&&(l.flags|=32),p0(s,l),dr(s,l,b,d),l.child;case 6:return s===null&&Vd(l),null;case 13:return v0(s,l,d);case 4:return Jd(l,l.stateNode.containerInfo),m=l.pendingProps,s===null?l.child=Zs(l,null,m,d):dr(s,l,m,d),l.child;case 11:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:fn(m,v),c0(s,l,m,v,d);case 7:return dr(s,l,l.pendingProps,d),l.child;case 8:return dr(s,l,l.pendingProps.children,d),l.child;case 12:return dr(s,l,l.pendingProps.children,d),l.child;case 10:e:{if(m=l.type._context,v=l.pendingProps,E=l.memoizedProps,b=v.value,ft(Ul,m._currentValue),m._currentValue=b,E!==null)if(cn(E.value,b)){if(E.children===v.children&&!pr.current){l=ri(s,l,d);break e}}else for(E=l.child,E!==null&&(E.return=l);E!==null;){var _=E.dependencies;if(_!==null){b=E.child;for(var M=_.firstContext;M!==null;){if(M.context===m){if(E.tag===1){M=ti(-1,d&-d),M.tag=2;var X=E.updateQueue;if(X!==null){X=X.shared;var le=X.pending;le===null?M.next=M:(M.next=le.next,le.next=M),X.pending=M}}E.lanes|=d,M=E.alternate,M!==null&&(M.lanes|=d),qd(E.return,d,l),_.lanes|=d;break}M=M.next}}else if(E.tag===10)b=E.type===l.type?null:E.child;else if(E.tag===18){if(b=E.return,b===null)throw Error(t(341));b.lanes|=d,_=b.alternate,_!==null&&(_.lanes|=d),qd(b,d,l),b=E.sibling}else b=E.child;if(b!==null)b.return=E;else for(b=E;b!==null;){if(b===l){b=null;break}if(E=b.sibling,E!==null){E.return=b.return,b=E;break}b=b.return}E=b}dr(s,l,v.children,d),l=l.child}return l;case 9:return v=l.type,m=l.pendingProps.children,to(l,d),v=Wr(v),m=m(v),l.flags|=1,dr(s,l,m,d),l.child;case 14:return m=l.type,v=fn(m,l.pendingProps),v=fn(m.type,v),d0(s,l,m,v,d);case 15:return f0(s,l,l.type,l.pendingProps,d);case 17:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:fn(m,v),Jl(s,l),l.tag=1,mr(m)?(s=!0,Ol(l)):s=!1,to(l,d),n0(l,m,v),ff(l,m,v,d),gf(null,l,m,!0,s,d);case 19:return S0(s,l,d);case 22:return h0(s,l,d)}throw Error(t(156,l.tag))};function V0(s,l){return Lr(s,l)}function hw(s,l,d,m){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(s,l,d,m){return new hw(s,l,d,m)}function Mf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function pw(s){if(typeof s=="function")return Mf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===ie)return 11;if(s===de)return 14}return 2}function ji(s,l){var d=s.alternate;return d===null?(d=Xr(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function uu(s,l,d,m,v,E){var b=2;if(m=s,typeof s=="function")Mf(s)&&(b=1);else if(typeof s=="string")b=5;else e:switch(s){case D:return gs(d.children,v,E,l);case U:b=8,v|=8;break;case Q:return s=Xr(12,d,l,v|2),s.elementType=Q,s.lanes=E,s;case te:return s=Xr(13,d,l,v),s.elementType=te,s.lanes=E,s;case fe:return s=Xr(19,d,l,v),s.elementType=fe,s.lanes=E,s;case ge:return cu(d,v,E,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case A:b=10;break e;case $:b=9;break e;case ie:b=11;break e;case de:b=14;break e;case pe:b=16,m=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return l=Xr(b,d,l,v),l.elementType=s,l.type=m,l.lanes=E,l}function gs(s,l,d,m){return s=Xr(7,s,m,l),s.lanes=d,s}function cu(s,l,d,m){return s=Xr(22,s,m,l),s.elementType=ge,s.lanes=d,s.stateNode={isHidden:!1},s}function Nf(s,l,d){return s=Xr(6,s,null,l),s.lanes=d,s}function Bf(s,l,d){return l=Xr(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function mw(s,l,d,m,v){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cd(0),this.expirationTimes=cd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cd(0),this.identifierPrefix=m,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function $f(s,l,d,m,v,E,b,_,M){return s=new mw(s,l,d,_,M),l===1?(l=1,E===!0&&(l|=8)):l=0,E=Xr(3,null,null,l),s.current=E,E.stateNode=s,E.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qd(E),s}function gw(s,l,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:m==null?null:""+m,children:s,containerInfo:l,implementation:d}}function z0(s){if(!s)return _i;s=s._reactInternals;e:{if(Je(s)!==s||s.tag!==1)throw Error(t(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(mr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(s.tag===1){var d=s.type;if(mr(d))return xg(s,d,l)}return l}function K0(s,l,d,m,v,E,b,_,M){return s=$f(d,m,!0,s,v,E,b,_,M),s.context=z0(null),d=s.current,m=fr(),v=Ui(d),E=ti(m,v),E.callback=l??null,Mi(d,E,v),s.current.lanes=v,zo(s,v,m),vr(s,m),s}function du(s,l,d,m){var v=l.current,E=fr(),b=Ui(v);return d=z0(d),l.context===null?l.context=d:l.pendingContext=d,l=ti(E,b),l.payload={element:s},m=m===void 0?null:m,m!==null&&(l.callback=m),s=Mi(v,l,b),s!==null&&(mn(s,v,b,E),jl(s,v,b)),b}function fu(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function W0(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function Uf(s,l){W0(s,l),(s=s.alternate)&&W0(s,l)}function yw(){return null}var Y0=typeof reportError=="function"?reportError:function(s){console.error(s)};function Gf(s){this._internalRoot=s}hu.prototype.render=Gf.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(t(409));du(s,l,null,null)},hu.prototype.unmount=Gf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;hs(function(){du(null,s,null,null)}),l[Xn]=null}};function hu(s){this._internalRoot=s}hu.prototype.unstable_scheduleHydration=function(s){if(s){var l=Dm();s={blockedOn:null,target:s,priority:l};for(var d=0;d<Ci.length&&l!==0&&l<Ci[d].priority;d++);Ci.splice(d,0,s),d===0&&Om(s)}};function jf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function pu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function q0(){}function vw(s,l,d,m,v){if(v){if(typeof m=="function"){var E=m;m=function(){var X=fu(b);E.call(X)}}var b=K0(l,m,s,0,null,!1,!1,"",q0);return s._reactRootContainer=b,s[Xn]=b.current,sa(s.nodeType===8?s.parentNode:s),hs(),b}for(;v=s.lastChild;)s.removeChild(v);if(typeof m=="function"){var _=m;m=function(){var X=fu(M);_.call(X)}}var M=$f(s,0,!1,null,null,!1,!1,"",q0);return s._reactRootContainer=M,s[Xn]=M.current,sa(s.nodeType===8?s.parentNode:s),hs(function(){du(l,M,d,m)}),M}function mu(s,l,d,m,v){var E=d._reactRootContainer;if(E){var b=E;if(typeof v=="function"){var _=v;v=function(){var M=fu(b);_.call(M)}}du(l,b,s,v)}else b=vw(d,l,s,v,m);return fu(b)}km=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var d=Vo(l.pendingLanes);d!==0&&(dd(l,d|1),vr(l,dt()),!(qe&6)&&(oo=dt()+500,Oi()))}break;case 13:hs(function(){var m=ei(s,1);if(m!==null){var v=fr();mn(m,s,1,v)}}),Uf(s,1)}},fd=function(s){if(s.tag===13){var l=ei(s,134217728);if(l!==null){var d=fr();mn(l,s,134217728,d)}Uf(s,134217728)}},Im=function(s){if(s.tag===13){var l=Ui(s),d=ei(s,l);if(d!==null){var m=fr();mn(d,s,l,m)}Uf(s,l)}},Dm=function(){return it},Pm=function(s,l){var d=it;try{return it=s,l()}finally{it=d}},Ns=function(s,l,d){switch(l){case"input":if(Ur(s,d),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==s&&m.form===s.form){var v=Pl(m);if(!v)throw Error(t(90));qt(m),Ur(m,v)}}}break;case"textarea":vi(s,d);break;case"select":l=d.value,l!=null&&Gt(s,!!d.multiple,l,!1)}},hl=_f,N=hs;var xw={usingClientEntryPoint:!1,Events:[la,Ws,Pl,rs,fl,_f]},Ta={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Sw={bundleType:Ta.bundleType,version:Ta.version,rendererPackageName:Ta.rendererPackageName,rendererConfig:Ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Ri(s),s===null?null:s.stateNode},findFiberByHostInstance:Ta.findFiberByHostInstance||yw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gu.isDisabled&&gu.supportsFiber)try{ln=gu.inject(Sw),br=gu}catch{}}return xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xw,xr.createPortal=function(s,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jf(l))throw Error(t(200));return gw(s,l,null,d)},xr.createRoot=function(s,l){if(!jf(s))throw Error(t(299));var d=!1,m="",v=Y0;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),l=$f(s,1,!1,null,null,d,!1,m,v),s[Xn]=l.current,sa(s.nodeType===8?s.parentNode:s),new Gf(l)},xr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Ri(l),s=s===null?null:s.stateNode,s},xr.flushSync=function(s){return hs(s)},xr.hydrate=function(s,l,d){if(!pu(l))throw Error(t(200));return mu(null,s,l,!0,d)},xr.hydrateRoot=function(s,l,d){if(!jf(s))throw Error(t(405));var m=d!=null&&d.hydratedSources||null,v=!1,E="",b=Y0;if(d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onRecoverableError!==void 0&&(b=d.onRecoverableError)),l=K0(l,null,s,1,d??null,v,!1,E,b),s[Xn]=l.current,sa(s),m)for(s=0;s<m.length;s++)d=m[s],v=d._getVersion,v=v(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,v]:l.mutableSourceEagerHydrationData.push(d,v);return new hu(l)},xr.render=function(s,l,d){if(!pu(l))throw Error(t(200));return mu(null,s,l,!1,d)},xr.unmountComponentAtNode=function(s){if(!pu(s))throw Error(t(40));return s._reactRootContainer?(hs(function(){mu(null,null,s,!1,function(){s._reactRootContainer=null,s[Xn]=null})}),!0):!1},xr.unstable_batchedUpdates=_f,xr.unstable_renderSubtreeIntoContainer=function(s,l,d,m){if(!pu(d))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return mu(s,l,d,!1,m)},xr.version="18.3.1-next-f1338f8080-20240426",xr}var iy;function Ox(){if(iy)return zf.exports;iy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),zf.exports=Dw(),zf.exports}var sy;function Pw(){if(sy)return yu;sy=1;var r=Ox();return yu.createRoot=r.createRoot,yu.hydrateRoot=r.hydrateRoot,yu}var _w=Pw(),Aa={},oy;function Ow(){if(oy)return Aa;oy=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.parse=a,Aa.serialize=f;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function a(g,x){const y=new o,S=g.length;if(S<2)return y;const T=(x==null?void 0:x.decode)||h;let R=0;do{const k=g.indexOf("=",R);if(k===-1)break;const C=g.indexOf(";",R),I=C===-1?S:C;if(k>I){R=g.lastIndexOf(";",k-1)+1;continue}const w=u(g,R,k),P=c(g,k,w),D=g.slice(w,P);if(y[D]===void 0){let U=u(g,k+1,I),Q=c(g,I,U);const A=T(g.slice(U,Q));y[D]=A}R=I+1}while(R<S);return y}function u(g,x,y){do{const S=g.charCodeAt(x);if(S!==32&&S!==9)return x}while(++x<y);return y}function c(g,x,y){for(;x>y;){const S=g.charCodeAt(--x);if(S!==32&&S!==9)return x+1}return y}function f(g,x,y){const S=(y==null?void 0:y.encode)||encodeURIComponent;if(!r.test(g))throw new TypeError(`argument name is invalid: ${g}`);const T=S(x);if(!e.test(T))throw new TypeError(`argument val is invalid: ${x}`);let R=g+"="+T;if(!y)return R;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);R+="; Max-Age="+y.maxAge}if(y.domain){if(!t.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);R+="; Domain="+y.domain}if(y.path){if(!n.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);R+="; Path="+y.path}if(y.expires){if(!p(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);R+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(R+="; HttpOnly"),y.secure&&(R+="; Secure"),y.partitioned&&(R+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":R+="; Priority=Low";break;case"medium":R+="; Priority=Medium";break;case"high":R+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":R+="; SameSite=Strict";break;case"lax":R+="; SameSite=Lax";break;case"none":R+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return R}function h(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return i.call(g)==="[object Date]"}return Aa}Ow();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ay="popstate";function Fw(r={}){function e(n,i){let{pathname:o,search:a,hash:u}=n.location;return Ga("",{pathname:o,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:Xi(i)}return Nw(e,t,null,r)}function We(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function tr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Mw(){return Math.random().toString(36).substring(2,10)}function ly(r,e){return{usr:r.state,key:r.key,idx:e}}function Ga(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Ji(e):e,state:t,key:e&&e.key||n||Mw()}}function Xi({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Ji(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function Nw(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,u="POP",c=null,f=h();f==null&&(f=0,a.replaceState({...a.state,idx:f},""));function h(){return(a.state||{idx:null}).idx}function p(){u="POP";let T=h(),R=T==null?null:T-f;f=T,c&&c({action:u,location:S.location,delta:R})}function g(T,R){u="PUSH";let k=Ga(S.location,T,R);f=h()+1;let C=ly(k,f),I=S.createHref(k);try{a.pushState(C,"",I)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(I)}o&&c&&c({action:u,location:S.location,delta:1})}function x(T,R){u="REPLACE";let k=Ga(S.location,T,R);f=h();let C=ly(k,f),I=S.createHref(k);a.replaceState(C,"",I),o&&c&&c({action:u,location:S.location,delta:0})}function y(T){let R=i.location.origin!=="null"?i.location.origin:i.location.href,k=typeof T=="string"?T:Xi(T);return k=k.replace(/ $/,"%20"),We(R,`No window.location.(origin|href) available to create URL for href: ${k}`),new URL(k,R)}let S={get action(){return u},get location(){return r(i,a)},listen(T){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(ay,p),c=T,()=>{i.removeEventListener(ay,p),c=null}},createHref(T){return e(i,T)},createURL:y,encodeLocation(T){let R=y(T);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:g,replace:x,go(T){return a.go(T)}};return S}var Bw=new Set(["lazy","caseSensitive","path","id","index","children"]);function $w(r){return r.index===!0}function oc(r,e,t=[],n={}){return r.map((i,o)=>{let a=[...t,String(o)],u=typeof i.id=="string"?i.id:a.join("-");if(We(i.index!==!0||!i.children,"Cannot specify children on an index route"),We(!n[u],`Found a route id collision on id "${u}".  Route id's must be globally unique within Data Router usages`),$w(i)){let c={...i,...e(i),id:u};return n[u]=c,c}else{let c={...i,...e(i),id:u,children:void 0};return n[u]=c,i.children&&(c.children=oc(i.children,e,a,n)),c}})}function Yi(r,e,t="/"){return Mu(r,e,t,!1)}function Mu(r,e,t,n){let i=typeof e=="string"?Ji(e):e,o=Tn(i.pathname||"/",t);if(o==null)return null;let a=Fx(r);Gw(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let f=Jw(o);u=Xw(a[c],f,n)}return u}function Uw(r,e){let{route:t,pathname:n,params:i}=r;return{id:t.id,pathname:n,params:i,data:e[t.id],handle:t.handle}}function Fx(r,e=[],t=[],n=""){let i=(o,a,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(We(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let f=Un([n,c.relativePath]),h=t.concat(c);o.children&&o.children.length>0&&(We(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Fx(o.children,e,h,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:Yw(f,o.index),routesMeta:h})};return r.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,a);else for(let c of Mx(o.path))i(o,a,c)}),e}function Mx(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let a=Mx(n.join("/")),u=[];return u.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&u.push(...a),u.map(c=>r.startsWith("/")&&c===""?"/":c)}function Gw(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:qw(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var jw=/^:[\w-]+$/,Hw=3,Vw=2,zw=1,Kw=10,Ww=-2,uy=r=>r==="*";function Yw(r,e){let t=r.split("/"),n=t.length;return t.some(uy)&&(n+=Ww),e&&(n+=Vw),t.filter(i=>!uy(i)).reduce((i,o)=>i+(jw.test(o)?Hw:o===""?zw:Kw),n)}function qw(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function Xw(r,e,t=!1){let{routesMeta:n}=r,i={},o="/",a=[];for(let u=0;u<n.length;++u){let c=n[u],f=u===n.length-1,h=o==="/"?e:e.slice(o.length)||"/",p=ac({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),g=c.route;if(!p&&f&&t&&!n[n.length-1].route.index&&(p=ac({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Un([o,p.pathname]),pathnameBase:tR(Un([o,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(o=Un([o,p.pathnameBase]))}return a}function ac(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=Qw(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((f,{paramName:h,isOptional:p},g)=>{if(h==="*"){let y=u[g]||"";a=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const x=u[g];return p&&!x?f[h]=void 0:f[h]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:r}}function Qw(r,e=!1,t=!0){tr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(n.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Jw(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tr(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Tn(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function Zw(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?Ji(r):r;return{pathname:t?t.startsWith("/")?t:eR(t,e):e,search:rR(n),hash:nR(i)}}function eR(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Yf(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Nx(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function wp(r){let e=Nx(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function Rp(r,e,t,n=!1){let i;typeof r=="string"?i=Ji(r):(i={...r},We(!i.pathname||!i.pathname.includes("?"),Yf("?","pathname","search",i)),We(!i.pathname||!i.pathname.includes("#"),Yf("#","pathname","hash",i)),We(!i.search||!i.search.includes("#"),Yf("#","search","hash",i)));let o=r===""||i.pathname==="",a=o?"/":i.pathname,u;if(a==null)u=t;else{let p=e.length-1;if(!n&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}u=p>=0?e[p]:"/"}let c=Zw(i,u),f=a&&a!=="/"&&a.endsWith("/"),h=(o||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}var Un=r=>r.join("/").replace(/\/\/+/g,"/"),tR=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),rR=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,nR=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,qf=(r,e=302)=>{let t=e;typeof t=="number"?t={status:t}:typeof t.status>"u"&&(t.status=302);let n=new Headers(t.headers);return n.set("Location",r),new Response(null,{...t,headers:n})},lc=class{constructor(r,e,t,n=!1){this.status=r,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Pc(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Bx=["POST","PUT","PATCH","DELETE"],iR=new Set(Bx),sR=["GET",...Bx],oR=new Set(sR),aR=new Set([301,302,303,307,308]),lR=new Set([307,308]),Xf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},uR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},La={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Ap=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cR=r=>({hasErrorBoundary:!!r.hasErrorBoundary}),$x="remix-router-transitions",Ux=Symbol("ResetLoaderData");function dR(r){const e=r.window?r.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";We(r.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=r.mapRouteProperties||cR,i={},o=oc(r.routes,n,void 0,i),a,u=r.basename||"/",c=r.dataStrategy||gR,f=r.patchRoutesOnNavigation,h={...r.future},p=null,g=new Set,x=null,y=null,S=null,T=r.hydrationData!=null,R=Yi(o,r.history.location,u),k=null;if(R==null&&!f){let N=Jr(404,{pathname:r.history.location.pathname}),{matches:G,route:Z}=Sy(o);R=G,k={[Z.id]:N}}R&&!r.hydrationData&&ts(R,o,r.history.location.pathname).active&&(R=null);let C;if(R)if(R.some(N=>N.route.lazy))C=!1;else if(!R.some(N=>N.route.loader))C=!0;else{let N=r.hydrationData?r.hydrationData.loaderData:null,G=r.hydrationData?r.hydrationData.errors:null;if(G){let Z=R.findIndex(ae=>G[ae.route.id]!==void 0);C=R.slice(0,Z+1).every(ae=>!Mh(ae.route,N,G))}else C=R.every(Z=>!Mh(Z.route,N,G))}else{C=!1,R=[];let N=ts(null,o,r.history.location.pathname);N.active&&N.matches&&(R=N.matches)}let I,w={historyAction:r.history.action,location:r.history.location,matches:R,initialized:C,navigation:Xf,restoreScrollPosition:r.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:r.hydrationData&&r.hydrationData.loaderData||{},actionData:r.hydrationData&&r.hydrationData.actionData||null,errors:r.hydrationData&&r.hydrationData.errors||k,fetchers:new Map,blockers:new Map},P="POP",D=!1,U,Q=!1,A=new Map,$=null,ie=!1,te=!1,fe=new Set,de=new Map,pe=0,ge=-1,ne=new Map,Y=new Set,q=new Map,F=new Map,H=new Set,me=new Map,ve,Se=null;function be(){if(p=r.history.listen(({action:N,location:G,delta:Z})=>{if(ve){ve(),ve=void 0;return}tr(me.size===0||Z!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ae=Ms({currentLocation:w.location,nextLocation:G,historyAction:N});if(ae&&Z!=null){let Te=new Promise(ke=>{ve=ke});r.history.go(Z*-1),Ei(ae,{state:"blocked",location:G,proceed(){Ei(ae,{state:"proceeding",proceed:void 0,reset:void 0,location:G}),Te.then(()=>r.history.go(Z))},reset(){let ke=new Map(w.blockers);ke.set(ae,La),De({blockers:ke})}});return}return nr(N,G)}),t){bR(e,A);let N=()=>CR(e,A);e.addEventListener("pagehide",N),$=()=>e.removeEventListener("pagehide",N)}return w.initialized||nr("POP",w.location,{initialHydration:!0}),I}function Me(){p&&p(),$&&$(),g.clear(),U&&U.abort(),w.fetchers.forEach((N,G)=>xi(G)),w.blockers.forEach((N,G)=>dl(G))}function Be(N){return g.add(N),()=>g.delete(N)}function De(N,G={}){w={...w,...N};let Z=[],ae=[];w.fetchers.forEach((Te,ke)=>{Te.state==="idle"&&(H.has(ke)?Z.push(ke):ae.push(ke))}),[...g].forEach(Te=>Te(w,{deletedFetchers:Z,viewTransitionOpts:G.viewTransitionOpts,flushSync:G.flushSync===!0})),Z.forEach(Te=>xi(Te)),ae.forEach(Te=>w.fetchers.delete(Te))}function ot(N,G,{flushSync:Z}={}){var ye,Ue;let ae=w.actionData!=null&&w.navigation.formMethod!=null&&vn(w.navigation.formMethod)&&w.navigation.state==="loading"&&((ye=N.state)==null?void 0:ye._isRedirect)!==!0,Te;G.actionData?Object.keys(G.actionData).length>0?Te=G.actionData:Te=null:ae?Te=w.actionData:Te=null;let ke=G.loaderData?vy(w.loaderData,G.loaderData,G.matches||[],G.errors):w.loaderData,$e=w.blockers;$e.size>0&&($e=new Map($e),$e.forEach((Ve,ct)=>$e.set(ct,La)));let Ee=D===!0||w.navigation.formMethod!=null&&vn(w.navigation.formMethod)&&((Ue=N.state)==null?void 0:Ue._isRedirect)!==!0;a&&(o=a,a=void 0),ie||P==="POP"||(P==="PUSH"?r.history.push(N,N.state):P==="REPLACE"&&r.history.replace(N,N.state));let Le;if(P==="POP"){let Ve=A.get(w.location.pathname);Ve&&Ve.has(N.pathname)?Le={currentLocation:w.location,nextLocation:N}:A.has(N.pathname)&&(Le={currentLocation:N,nextLocation:w.location})}else if(Q){let Ve=A.get(w.location.pathname);Ve?Ve.add(N.pathname):(Ve=new Set([N.pathname]),A.set(w.location.pathname,Ve)),Le={currentLocation:w.location,nextLocation:N}}De({...G,actionData:Te,loaderData:ke,historyAction:P,location:N,initialized:!0,navigation:Xf,revalidation:"idle",restoreScrollPosition:Wn(N,G.matches||w.matches),preventScrollReset:Ee,blockers:$e},{viewTransitionOpts:Le,flushSync:Z===!0}),P="POP",D=!1,Q=!1,ie=!1,te=!1,Se==null||Se.resolve(),Se=null}async function rr(N,G){if(typeof N=="number"){r.history.go(N);return}let Z=Fh(w.location,w.matches,u,N,G==null?void 0:G.fromRouteId,G==null?void 0:G.relative),{path:ae,submission:Te,error:ke}=cy(!1,Z,G),$e=w.location,Ee=Ga(w.location,ae,G&&G.state);Ee={...Ee,...r.history.encodeLocation(Ee)};let Le=G&&G.replace!=null?G.replace:void 0,ye="PUSH";Le===!0?ye="REPLACE":Le===!1||Te!=null&&vn(Te.formMethod)&&Te.formAction===w.location.pathname+w.location.search&&(ye="REPLACE");let Ue=G&&"preventScrollReset"in G?G.preventScrollReset===!0:void 0,Ve=(G&&G.flushSync)===!0,ct=Ms({currentLocation:$e,nextLocation:Ee,historyAction:ye});if(ct){Ei(ct,{state:"blocked",location:Ee,proceed(){Ei(ct,{state:"proceeding",proceed:void 0,reset:void 0,location:Ee}),rr(N,G)},reset(){let Mt=new Map(w.blockers);Mt.set(ct,La),De({blockers:Mt})}});return}await nr(ye,Ee,{submission:Te,pendingError:ke,preventScrollReset:Ue,replace:G&&G.replace,enableViewTransition:G&&G.viewTransition,flushSync:Ve})}function qt(){Se||(Se=kR()),vi(),De({revalidation:"loading"});let N=Se.promise;return w.navigation.state==="submitting"?N:w.navigation.state==="idle"?(nr(w.historyAction,w.location,{startUninterruptedRevalidation:!0}),N):(nr(P||w.historyAction,w.navigation.location,{overrideNavigation:w.navigation,enableViewTransition:Q===!0}),N)}async function nr(N,G,Z){U&&U.abort(),U=null,P=N,ie=(Z&&Z.startUninterruptedRevalidation)===!0,Ti(w.location,w.matches),D=(Z&&Z.preventScrollReset)===!0,Q=(Z&&Z.enableViewTransition)===!0;let ae=a||o,Te=Z&&Z.overrideNavigation,ke=Yi(ae,G,u),$e=(Z&&Z.flushSync)===!0,Ee=ts(ke,ae,G.pathname);if(Ee.active&&Ee.matches&&(ke=Ee.matches),!ke){let{error:Je,notFoundMatches:at,route:Rt}=es(G.pathname);ot(G,{matches:at,loaderData:{},errors:{[Rt.id]:Je}},{flushSync:$e});return}if(w.initialized&&!te&&TR(w.location,G)&&!(Z&&Z.submission&&vn(Z.submission.formMethod))){ot(G,{matches:ke},{flushSync:$e});return}U=new AbortController;let Le=lo(r.history,G,U.signal,Z&&Z.submission),ye;if(Z&&Z.pendingError)ye=[xs(ke).route.id,{type:"error",error:Z.pendingError}];else if(Z&&Z.submission&&vn(Z.submission.formMethod)){let Je=await on(Le,G,Z.submission,ke,Ee.active,{replace:Z.replace,flushSync:$e});if(Je.shortCircuited)return;if(Je.pendingActionResult){let[at,Rt]=Je.pendingActionResult;if(_r(Rt)&&Pc(Rt.error)&&Rt.error.status===404){U=null,ot(G,{matches:Je.matches,loaderData:{},errors:{[at]:Rt.error}});return}}ke=Je.matches||ke,ye=Je.pendingActionResult,Te=Qf(G,Z.submission),$e=!1,Ee.active=!1,Le=lo(r.history,Le.url,Le.signal)}let{shortCircuited:Ue,matches:Ve,loaderData:ct,errors:Mt}=await yi(Le,G,ke,Ee.active,Te,Z&&Z.submission,Z&&Z.fetcherSubmission,Z&&Z.replace,Z&&Z.initialHydration===!0,$e,ye);Ue||(U=null,ot(G,{matches:Ve||ke,...xy(ye),loaderData:ct,errors:Mt}))}async function on(N,G,Z,ae,Te,ke={}){vi();let $e=AR(G,Z);if(De({navigation:$e},{flushSync:ke.flushSync===!0}),Te){let ye=await rs(ae,G.pathname,N.signal);if(ye.type==="aborted")return{shortCircuited:!0};if(ye.type==="error"){let Ue=xs(ye.partialMatches).route.id;return{matches:ye.partialMatches,pendingActionResult:[Ue,{type:"error",error:ye.error}]}}else if(ye.matches)ae=ye.matches;else{let{notFoundMatches:Ue,error:Ve,route:ct}=es(G.pathname);return{matches:Ue,pendingActionResult:[ct.id,{type:"error",error:Ve}]}}}let Ee,Le=_a(ae,G);if(!Le.route.action&&!Le.route.lazy)Ee={type:"error",error:Jr(405,{method:N.method,pathname:G.pathname,routeId:Le.route.id})};else if(Ee=(await ue("action",w,N,[Le],ae,null))[Le.route.id],N.signal.aborted)return{shortCircuited:!0};if(Ss(Ee)){let ye;return ke&&ke.replace!=null?ye=ke.replace:ye=my(Ee.response.headers.get("Location"),new URL(N.url),u)===w.location.pathname+w.location.search,await Gt(N,Ee,!0,{submission:Z,replace:ye}),{shortCircuited:!0}}if(_r(Ee)){let ye=xs(ae,Le.route.id);return(ke&&ke.replace)!==!0&&(P="PUSH"),{matches:ae,pendingActionResult:[ye.route.id,Ee]}}return{matches:ae,pendingActionResult:[Le.route.id,Ee]}}async function yi(N,G,Z,ae,Te,ke,$e,Ee,Le,ye,Ue){let Ve=Te||Qf(G,ke),ct=ke||$e||Ty(Ve),Mt=!ie&&!Le;if(ae){if(Mt){let Nt=Rn(Ue);De({navigation:Ve,...Nt!==void 0?{actionData:Nt}:{}},{flushSync:ye})}let tt=await rs(Z,G.pathname,N.signal);if(tt.type==="aborted")return{shortCircuited:!0};if(tt.type==="error"){let Nt=xs(tt.partialMatches).route.id;return{matches:tt.partialMatches,loaderData:{},errors:{[Nt]:tt.error}}}else if(tt.matches)Z=tt.matches;else{let{error:Nt,notFoundMatches:qn,route:is}=es(G.pathname);return{matches:qn,loaderData:{},errors:{[is.id]:Nt}}}}let Je=a||o,[at,Rt]=fy(r.history,w,Z,ct,G,Le===!0,te,fe,H,q,Y,Je,u,Ue);if(ge=++pe,at.length===0&&Rt.length===0){let tt=ul();return ot(G,{matches:Z,loaderData:{},errors:Ue&&_r(Ue[1])?{[Ue[0]]:Ue[1].error}:null,...xy(Ue),...tt?{fetchers:new Map(w.fetchers)}:{}},{flushSync:ye}),{shortCircuited:!0}}if(Mt){let tt={};if(!ae){tt.navigation=Ve;let Nt=Rn(Ue);Nt!==void 0&&(tt.actionData=Nt)}Rt.length>0&&(tt.fetchers=Ur(Rt)),De(tt,{flushSync:ye})}Rt.forEach(tt=>{hr(tt.key),tt.controller&&de.set(tt.key,tt.controller)});let wi=()=>Rt.forEach(tt=>hr(tt.key));U&&U.signal.addEventListener("abort",wi);let{loaderResults:Ri,fetcherResults:Vr}=await Qe(w,Z,at,Rt,N);if(N.signal.aborted)return{shortCircuited:!0};U&&U.signal.removeEventListener("abort",wi),Rt.forEach(tt=>de.delete(tt.key));let Lr=vu(Ri);if(Lr)return await Gt(N,Lr.result,!0,{replace:Ee}),{shortCircuited:!0};if(Lr=vu(Vr),Lr)return Y.add(Lr.key),await Gt(N,Lr.result,!0,{replace:Ee}),{shortCircuited:!0};let{loaderData:Bs,errors:ns}=yy(w,Z,Ri,Ue,Rt,Vr);Le&&w.errors&&(ns={...w.errors,...ns});let Yn=ul(),dt=jo(ge),$s=Yn||dt||Rt.length>0;return{matches:Z,loaderData:Bs,errors:ns,...$s?{fetchers:new Map(w.fetchers)}:{}}}function Rn(N){if(N&&!_r(N[1]))return{[N[0]]:N[1].data};if(w.actionData)return Object.keys(w.actionData).length===0?null:w.actionData}function Ur(N){return N.forEach(G=>{let Z=w.fetchers.get(G.key),ae=ba(void 0,Z?Z.data:void 0);w.fetchers.set(G.key,ae)}),new Map(w.fetchers)}async function Gr(N,G,Z,ae){hr(N);let Te=(ae&&ae.flushSync)===!0,ke=a||o,$e=Fh(w.location,w.matches,u,Z,G,ae==null?void 0:ae.relative),Ee=Yi(ke,$e,u),Le=ts(Ee,ke,$e);if(Le.active&&Le.matches&&(Ee=Le.matches),!Ee){Hr(N,G,Jr(404,{pathname:$e}),{flushSync:Te});return}let{path:ye,submission:Ue,error:Ve}=cy(!0,$e,ae);if(Ve){Hr(N,G,Ve,{flushSync:Te});return}let ct=_a(Ee,ye),Mt=(ae&&ae.preventScrollReset)===!0;if(Ue&&vn(Ue.formMethod)){await Kn(N,G,ye,ct,Ee,Le.active,Te,Mt,Ue);return}q.set(N,{routeId:G,path:ye}),await jr(N,G,ye,ct,Ee,Le.active,Te,Mt,Ue)}async function Kn(N,G,Z,ae,Te,ke,$e,Ee,Le){vi(),q.delete(N);function ye(St){if(!St.route.action&&!St.route.lazy){let ln=Jr(405,{method:Le.formMethod,pathname:Z,routeId:G});return Hr(N,G,ln,{flushSync:$e}),!0}return!1}if(!ke&&ye(ae))return;let Ue=w.fetchers.get(N);an(N,LR(Le,Ue),{flushSync:$e});let Ve=new AbortController,ct=lo(r.history,Z,Ve.signal,Le);if(ke){let St=await rs(Te,Z,ct.signal);if(St.type==="aborted")return;if(St.type==="error"){Hr(N,G,St.error,{flushSync:$e});return}else if(St.matches){if(Te=St.matches,ae=_a(Te,Z),ye(ae))return}else{Hr(N,G,Jr(404,{pathname:Z}),{flushSync:$e});return}}de.set(N,Ve);let Mt=pe,at=(await ue("action",w,ct,[ae],Te,N))[ae.route.id];if(ct.signal.aborted){de.get(N)===Ve&&de.delete(N);return}if(H.has(N)){if(Ss(at)||_r(at)){an(N,zi(void 0));return}}else{if(Ss(at))if(de.delete(N),ge>Mt){an(N,zi(void 0));return}else return Y.add(N),an(N,ba(Le)),Gt(ct,at,!1,{fetcherSubmission:Le,preventScrollReset:Ee});if(_r(at)){Hr(N,G,at.error);return}}let Rt=w.navigation.location||w.location,wi=lo(r.history,Rt,Ve.signal),Ri=a||o,Vr=w.navigation.state!=="idle"?Yi(Ri,w.navigation.location,u):w.matches;We(Vr,"Didn't find any matches after fetcher action");let Lr=++pe;ne.set(N,Lr);let Bs=ba(Le,at.data);w.fetchers.set(N,Bs);let[ns,Yn]=fy(r.history,w,Vr,Le,Rt,!1,te,fe,H,q,Y,Ri,u,[ae.route.id,at]);Yn.filter(St=>St.key!==N).forEach(St=>{let ln=St.key,br=w.fetchers.get(ln),ld=ba(void 0,br?br.data:void 0);w.fetchers.set(ln,ld),hr(ln),St.controller&&de.set(ln,St.controller)}),De({fetchers:new Map(w.fetchers)});let dt=()=>Yn.forEach(St=>hr(St.key));Ve.signal.addEventListener("abort",dt);let{loaderResults:$s,fetcherResults:tt}=await Qe(w,Vr,ns,Yn,wi);if(Ve.signal.aborted)return;Ve.signal.removeEventListener("abort",dt),ne.delete(N),de.delete(N),Yn.forEach(St=>de.delete(St.key));let Nt=vu($s);if(Nt)return Gt(wi,Nt.result,!1,{preventScrollReset:Ee});if(Nt=vu(tt),Nt)return Y.add(Nt.key),Gt(wi,Nt.result,!1,{preventScrollReset:Ee});let{loaderData:qn,errors:is}=yy(w,Vr,$s,void 0,Yn,tt);if(w.fetchers.has(N)){let St=zi(at.data);w.fetchers.set(N,St)}jo(Lr),w.navigation.state==="loading"&&Lr>ge?(We(P,"Expected pending action"),U&&U.abort(),ot(w.navigation.location,{matches:Vr,loaderData:qn,errors:is,fetchers:new Map(w.fetchers)})):(De({errors:is,loaderData:vy(w.loaderData,qn,Vr,is),fetchers:new Map(w.fetchers)}),te=!1)}async function jr(N,G,Z,ae,Te,ke,$e,Ee,Le){let ye=w.fetchers.get(N);an(N,ba(Le,ye?ye.data:void 0),{flushSync:$e});let Ue=new AbortController,Ve=lo(r.history,Z,Ue.signal);if(ke){let at=await rs(Te,Z,Ve.signal);if(at.type==="aborted")return;if(at.type==="error"){Hr(N,G,at.error,{flushSync:$e});return}else if(at.matches)Te=at.matches,ae=_a(Te,Z);else{Hr(N,G,Jr(404,{pathname:Z}),{flushSync:$e});return}}de.set(N,Ue);let ct=pe,Je=(await ue("loader",w,Ve,[ae],Te,N))[ae.route.id];if(de.get(N)===Ue&&de.delete(N),!Ve.signal.aborted){if(H.has(N)){an(N,zi(void 0));return}if(Ss(Je))if(ge>ct){an(N,zi(void 0));return}else{Y.add(N),await Gt(Ve,Je,!1,{preventScrollReset:Ee});return}if(_r(Je)){Hr(N,G,Je.error);return}an(N,zi(Je.data))}}async function Gt(N,G,Z,{submission:ae,fetcherSubmission:Te,preventScrollReset:ke,replace:$e}={}){G.response.headers.has("X-Remix-Revalidate")&&(te=!0);let Ee=G.response.headers.get("Location");We(Ee,"Expected a Location header on the redirect Response"),Ee=my(Ee,new URL(N.url),u);let Le=Ga(w.location,Ee,{_isRedirect:!0});if(t){let Je=!1;if(G.response.headers.has("X-Remix-Reload-Document"))Je=!0;else if(Ap.test(Ee)){const at=r.history.createURL(Ee);Je=at.origin!==e.location.origin||Tn(at.pathname,u)==null}if(Je){$e?e.location.replace(Ee):e.location.assign(Ee);return}}U=null;let ye=$e===!0||G.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ue,formAction:Ve,formEncType:ct}=w.navigation;!ae&&!Te&&Ue&&Ve&&ct&&(ae=Ty(w.navigation));let Mt=ae||Te;if(lR.has(G.response.status)&&Mt&&vn(Mt.formMethod))await nr(ye,Le,{submission:{...Mt,formAction:Ee},preventScrollReset:ke||D,enableViewTransition:Z?Q:void 0});else{let Je=Qf(Le,ae);await nr(ye,Le,{overrideNavigation:Je,fetcherSubmission:Te,preventScrollReset:ke||D,enableViewTransition:Z?Q:void 0})}}async function ue(N,G,Z,ae,Te,ke){let $e,Ee={};try{$e=await yR(c,N,G,Z,ae,Te,ke,i,n)}catch(Le){return ae.forEach(ye=>{Ee[ye.route.id]={type:"error",error:Le}}),Ee}for(let[Le,ye]of Object.entries($e))if(wR(ye)){let Ue=ye.result;Ee[Le]={type:"redirect",response:SR(Ue,Z,Le,Te,u)}}else Ee[Le]=await xR(ye);return Ee}async function Qe(N,G,Z,ae,Te){let ke=ue("loader",N,Te,Z,G,null),$e=Promise.all(ae.map(async ye=>{if(ye.matches&&ye.match&&ye.controller){let Ve=(await ue("loader",N,lo(r.history,ye.path,ye.controller.signal),[ye.match],ye.matches,ye.key))[ye.match.route.id];return{[ye.key]:Ve}}else return Promise.resolve({[ye.key]:{type:"error",error:Jr(404,{pathname:ye.path})}})})),Ee=await ke,Le=(await $e).reduce((ye,Ue)=>Object.assign(ye,Ue),{});return{loaderResults:Ee,fetcherResults:Le}}function vi(){te=!0,q.forEach((N,G)=>{de.has(G)&&fe.add(G),hr(G)})}function an(N,G,Z={}){w.fetchers.set(N,G),De({fetchers:new Map(w.fetchers)},{flushSync:(Z&&Z.flushSync)===!0})}function Hr(N,G,Z,ae={}){let Te=xs(w.matches,G);xi(N),De({errors:{[Te.route.id]:Z},fetchers:new Map(w.fetchers)},{flushSync:(ae&&ae.flushSync)===!0})}function Fs(N){return F.set(N,(F.get(N)||0)+1),H.has(N)&&H.delete(N),w.fetchers.get(N)||uR}function xi(N){let G=w.fetchers.get(N);de.has(N)&&!(G&&G.state==="loading"&&ne.has(N))&&hr(N),q.delete(N),ne.delete(N),Y.delete(N),H.delete(N),fe.delete(N),w.fetchers.delete(N)}function ll(N){let G=(F.get(N)||0)-1;G<=0?(F.delete(N),H.add(N)):F.set(N,G),De({fetchers:new Map(w.fetchers)})}function hr(N){let G=de.get(N);G&&(G.abort(),de.delete(N))}function Si(N){for(let G of N){let Z=Fs(G),ae=zi(Z.data);w.fetchers.set(G,ae)}}function ul(){let N=[],G=!1;for(let Z of Y){let ae=w.fetchers.get(Z);We(ae,`Expected fetcher: ${Z}`),ae.state==="loading"&&(Y.delete(Z),N.push(Z),G=!0)}return Si(N),G}function jo(N){let G=[];for(let[Z,ae]of ne)if(ae<N){let Te=w.fetchers.get(Z);We(Te,`Expected fetcher: ${Z}`),Te.state==="loading"&&(hr(Z),ne.delete(Z),G.push(Z))}return Si(G),G.length>0}function cl(N,G){let Z=w.blockers.get(N)||La;return me.get(N)!==G&&me.set(N,G),Z}function dl(N){w.blockers.delete(N),me.delete(N)}function Ei(N,G){let Z=w.blockers.get(N)||La;We(Z.state==="unblocked"&&G.state==="blocked"||Z.state==="blocked"&&G.state==="blocked"||Z.state==="blocked"&&G.state==="proceeding"||Z.state==="blocked"&&G.state==="unblocked"||Z.state==="proceeding"&&G.state==="unblocked",`Invalid blocker state transition: ${Z.state} -> ${G.state}`);let ae=new Map(w.blockers);ae.set(N,G),De({blockers:ae})}function Ms({currentLocation:N,nextLocation:G,historyAction:Z}){if(me.size===0)return;me.size>1&&tr(!1,"A router only supports one blocker at a time");let ae=Array.from(me.entries()),[Te,ke]=ae[ae.length-1],$e=w.blockers.get(Te);if(!($e&&$e.state==="proceeding")&&ke({currentLocation:N,nextLocation:G,historyAction:Z}))return Te}function es(N){let G=Jr(404,{pathname:N}),Z=a||o,{matches:ae,route:Te}=Sy(Z);return{notFoundMatches:ae,route:Te,error:G}}function Ho(N,G,Z){if(x=N,S=G,y=Z||null,!T&&w.navigation===Xf){T=!0;let ae=Wn(w.location,w.matches);ae!=null&&De({restoreScrollPosition:ae})}return()=>{x=null,S=null,y=null}}function Ns(N,G){return y&&y(N,G.map(ae=>Uw(ae,w.loaderData)))||N.key}function Ti(N,G){if(x&&S){let Z=Ns(N,G);x[Z]=S()}}function Wn(N,G){if(x){let Z=Ns(N,G),ae=x[Z];if(typeof ae=="number")return ae}return null}function ts(N,G,Z){if(f)if(N){if(Object.keys(N[0].params).length>0)return{active:!0,matches:Mu(G,Z,u,!0)}}else return{active:!0,matches:Mu(G,Z,u,!0)||[]};return{active:!1,matches:null}}async function rs(N,G,Z){if(!f)return{type:"success",matches:N};let ae=N;for(;;){let Te=a==null,ke=a||o,$e=i;try{await f({path:G,matches:ae,patch:(ye,Ue)=>{Z.aborted||py(ye,Ue,ke,$e,n)}})}catch(ye){return{type:"error",error:ye,partialMatches:ae}}finally{Te&&!Z.aborted&&(o=[...o])}if(Z.aborted)return{type:"aborted"};let Ee=Yi(ke,G,u);if(Ee)return{type:"success",matches:Ee};let Le=Mu(ke,G,u,!0);if(!Le||ae.length===Le.length&&ae.every((ye,Ue)=>ye.route.id===Le[Ue].route.id))return{type:"success",matches:null};ae=Le}}function fl(N){i={},a=oc(N,n,void 0,i)}function hl(N,G){let Z=a==null;py(N,G,a||o,i,n),Z&&(o=[...o],De({}))}return I={get basename(){return u},get future(){return h},get state(){return w},get routes(){return o},get window(){return e},initialize:be,subscribe:Be,enableScrollRestoration:Ho,navigate:rr,fetch:Gr,revalidate:qt,createHref:N=>r.history.createHref(N),encodeLocation:N=>r.history.encodeLocation(N),getFetcher:Fs,deleteFetcher:ll,dispose:Me,getBlocker:cl,deleteBlocker:dl,patchRoutes:hl,_internalFetchControllers:de,_internalSetRoutes:fl},I}function fR(r){return r!=null&&("formData"in r&&r.formData!=null||"body"in r&&r.body!==void 0)}function Fh(r,e,t,n,i,o){let a,u;if(i){a=[];for(let f of e)if(a.push(f),f.route.id===i){u=f;break}}else a=e,u=e[e.length-1];let c=Rp(n||".",wp(a),Tn(r.pathname,t)||r.pathname,o==="path");if(n==null&&(c.search=r.search,c.hash=r.hash),(n==null||n===""||n===".")&&u){let f=Lp(c.search);if(u.route.index&&!f)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&f){let h=new URLSearchParams(c.search),p=h.getAll("index");h.delete("index"),p.filter(x=>x).forEach(x=>h.append("index",x));let g=h.toString();c.search=g?`?${g}`:""}}return t!=="/"&&(c.pathname=c.pathname==="/"?t:Un([t,c.pathname])),Xi(c)}function cy(r,e,t){if(!t||!fR(t))return{path:e};if(t.formMethod&&!RR(t.formMethod))return{path:e,error:Jr(405,{method:t.formMethod})};let n=()=>({path:e,error:Jr(400,{type:"invalid-body"})}),o=(t.formMethod||"get").toUpperCase(),a=jx(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!vn(o))return n();let p=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((g,[x,y])=>`${g}${x}=${y}
`,""):String(t.body);return{path:e,submission:{formMethod:o,formAction:a,formEncType:t.formEncType,formData:void 0,json:void 0,text:p}}}else if(t.formEncType==="application/json"){if(!vn(o))return n();try{let p=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:o,formAction:a,formEncType:t.formEncType,formData:void 0,json:p,text:void 0}}}catch{return n()}}}We(typeof FormData=="function","FormData is not available in this environment");let u,c;if(t.formData)u=Nh(t.formData),c=t.formData;else if(t.body instanceof FormData)u=Nh(t.body),c=t.body;else if(t.body instanceof URLSearchParams)u=t.body,c=gy(u);else if(t.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(t.body),c=gy(u)}catch{return n()}let f={formMethod:o,formAction:a,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(vn(f.formMethod))return{path:e,submission:f};let h=Ji(e);return r&&h.search&&Lp(h.search)&&u.append("index",""),h.search=`?${u}`,{path:Xi(h),submission:f}}function dy(r,e,t=!1){let n=r.findIndex(i=>i.route.id===e);return n>=0?r.slice(0,t?n+1:n):r}function fy(r,e,t,n,i,o,a,u,c,f,h,p,g,x){let y=x?_r(x[1])?x[1].error:x[1].data:void 0,S=r.createURL(e.location),T=r.createURL(i),R=t;o&&e.errors?R=dy(t,Object.keys(e.errors)[0],!0):x&&_r(x[1])&&(R=dy(t,x[0]));let k=x?x[1].statusCode:void 0,C=k&&k>=400,I=R.filter((P,D)=>{let{route:U}=P;if(U.lazy)return!0;if(U.loader==null)return!1;if(o)return Mh(U,e.loaderData,e.errors);if(hR(e.loaderData,e.matches[D],P))return!0;let Q=e.matches[D],A=P;return hy(P,{currentUrl:S,currentParams:Q.params,nextUrl:T,nextParams:A.params,...n,actionResult:y,actionStatus:k,defaultShouldRevalidate:C?!1:a||S.pathname+S.search===T.pathname+T.search||S.search!==T.search||pR(Q,A)})}),w=[];return f.forEach((P,D)=>{if(o||!t.some(ie=>ie.route.id===P.routeId)||c.has(D))return;let U=Yi(p,P.path,g);if(!U){w.push({key:D,routeId:P.routeId,path:P.path,matches:null,match:null,controller:null});return}let Q=e.fetchers.get(D),A=_a(U,P.path),$=!1;h.has(D)?$=!1:u.has(D)?(u.delete(D),$=!0):Q&&Q.state!=="idle"&&Q.data===void 0?$=a:$=hy(A,{currentUrl:S,currentParams:e.matches[e.matches.length-1].params,nextUrl:T,nextParams:t[t.length-1].params,...n,actionResult:y,actionStatus:k,defaultShouldRevalidate:C?!1:a}),$&&w.push({key:D,routeId:P.routeId,path:P.path,matches:U,match:A,controller:new AbortController})}),[I,w]}function Mh(r,e,t){if(r.lazy)return!0;if(!r.loader)return!1;let n=e!=null&&e[r.id]!==void 0,i=t!=null&&t[r.id]!==void 0;return!n&&i?!1:typeof r.loader=="function"&&r.loader.hydrate===!0?!0:!n&&!i}function hR(r,e,t){let n=!e||t.route.id!==e.route.id,i=!r.hasOwnProperty(t.route.id);return n||i}function pR(r,e){let t=r.route.path;return r.pathname!==e.pathname||t!=null&&t.endsWith("*")&&r.params["*"]!==e.params["*"]}function hy(r,e){if(r.route.shouldRevalidate){let t=r.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function py(r,e,t,n,i){let o;if(r){let c=n[r];We(c,`No route found to patch children into: routeId = ${r}`),c.children||(c.children=[]),o=c.children}else o=t;let a=e.filter(c=>!o.some(f=>Gx(c,f))),u=oc(a,i,[r||"_","patch",String((o==null?void 0:o.length)||"0")],n);o.push(...u)}function Gx(r,e){return"id"in r&&"id"in e&&r.id===e.id?!0:r.index===e.index&&r.path===e.path&&r.caseSensitive===e.caseSensitive?(!r.children||r.children.length===0)&&(!e.children||e.children.length===0)?!0:r.children.every((t,n)=>{var i;return(i=e.children)==null?void 0:i.some(o=>Gx(t,o))}):!1}async function mR(r,e,t){if(!r.lazy)return;let n=await r.lazy();if(!r.lazy)return;let i=t[r.id];We(i,"No route found in manifest");let o={};for(let a in n){let c=i[a]!==void 0&&a!=="hasErrorBoundary";tr(!c,`Route "${i.id}" has a static property "${a}" defined but its lazy function is also returning a value for this property. The lazy route property "${a}" will be ignored.`),!c&&!Bw.has(a)&&(o[a]=n[a])}Object.assign(i,o),Object.assign(i,{...e(i),lazy:void 0})}async function gR({matches:r}){let e=r.filter(n=>n.shouldLoad);return(await Promise.all(e.map(n=>n.resolve()))).reduce((n,i,o)=>Object.assign(n,{[e[o].route.id]:i}),{})}async function yR(r,e,t,n,i,o,a,u,c,f){let h=o.map(x=>x.route.lazy?mR(x.route,c,u):void 0),p=o.map((x,y)=>{let S=h[y],T=i.some(k=>k.route.id===x.route.id);return{...x,shouldLoad:T,resolve:async k=>(k&&n.method==="GET"&&(x.route.lazy||x.route.loader)&&(T=!0),T?vR(e,n,x,S,k,f):Promise.resolve({type:"data",result:void 0}))}}),g=await r({matches:p,request:n,params:o[0].params,fetcherKey:a,context:f});try{await Promise.all(h)}catch{}return g}async function vR(r,e,t,n,i,o){let a,u,c=f=>{let h,p=new Promise((y,S)=>h=S);u=()=>h(),e.signal.addEventListener("abort",u);let g=y=>typeof f!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${r}" [routeId: ${t.route.id}]`)):f({request:e,params:t.params,context:o},...y!==void 0?[y]:[]),x=(async()=>{try{return{type:"data",result:await(i?i(S=>g(S)):g())}}catch(y){return{type:"error",result:y}}})();return Promise.race([x,p])};try{let f=t.route[r];if(n)if(f){let h,[p]=await Promise.all([c(f).catch(g=>{h=g}),n]);if(h!==void 0)throw h;a=p}else if(await n,f=t.route[r],f)a=await c(f);else if(r==="action"){let h=new URL(e.url),p=h.pathname+h.search;throw Jr(405,{method:e.method,pathname:p,routeId:t.route.id})}else return{type:"data",result:void 0};else if(f)a=await c(f);else{let h=new URL(e.url),p=h.pathname+h.search;throw Jr(404,{pathname:p})}}catch(f){return{type:"error",result:f}}finally{u&&e.signal.removeEventListener("abort",u)}return a}async function xR(r){var n,i,o,a;let{result:e,type:t}=r;if(Hx(e)){let u;try{let c=e.headers.get("Content-Type");c&&/\bapplication\/json\b/.test(c)?e.body==null?u=null:u=await e.json():u=await e.text()}catch(c){return{type:"error",error:c}}return t==="error"?{type:"error",error:new lc(e.status,e.statusText,u),statusCode:e.status,headers:e.headers}:{type:"data",data:u,statusCode:e.status,headers:e.headers}}if(t==="error"){if(Ey(e)){if(e.data instanceof Error)return{type:"error",error:e.data,statusCode:(n=e.init)==null?void 0:n.status};e=new lc(((i=e.init)==null?void 0:i.status)||500,void 0,e.data)}return{type:"error",error:e,statusCode:Pc(e)?e.status:void 0}}return Ey(e)?{type:"data",data:e.data,statusCode:(o=e.init)==null?void 0:o.status,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function SR(r,e,t,n,i){let o=r.headers.get("Location");if(We(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Ap.test(o)){let a=n.slice(0,n.findIndex(u=>u.route.id===t)+1);o=Fh(new URL(e.url),a,i,o),r.headers.set("Location",o)}return r}function my(r,e,t){if(Ap.test(r)){let n=r,i=n.startsWith("//")?new URL(e.protocol+n):new URL(n),o=Tn(i.pathname,t)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return r}function lo(r,e,t,n){let i=r.createURL(jx(e)).toString(),o={signal:t};if(n&&vn(n.formMethod)){let{formMethod:a,formEncType:u}=n;o.method=a.toUpperCase(),u==="application/json"?(o.headers=new Headers({"Content-Type":u}),o.body=JSON.stringify(n.json)):u==="text/plain"?o.body=n.text:u==="application/x-www-form-urlencoded"&&n.formData?o.body=Nh(n.formData):o.body=n.formData}return new Request(i,o)}function Nh(r){let e=new URLSearchParams;for(let[t,n]of r.entries())e.append(t,typeof n=="string"?n:n.name);return e}function gy(r){let e=new FormData;for(let[t,n]of r.entries())e.append(t,n);return e}function ER(r,e,t,n=!1,i=!1){let o={},a=null,u,c=!1,f={},h=t&&_r(t[1])?t[1].error:void 0;return r.forEach(p=>{if(!(p.route.id in e))return;let g=p.route.id,x=e[g];if(We(!Ss(x),"Cannot handle redirect results in processLoaderData"),_r(x)){let y=x.error;if(h!==void 0&&(y=h,h=void 0),a=a||{},i)a[g]=y;else{let S=xs(r,g);a[S.route.id]==null&&(a[S.route.id]=y)}n||(o[g]=Ux),c||(c=!0,u=Pc(x.error)?x.error.status:500),x.headers&&(f[g]=x.headers)}else o[g]=x.data,x.statusCode&&x.statusCode!==200&&!c&&(u=x.statusCode),x.headers&&(f[g]=x.headers)}),h!==void 0&&t&&(a={[t[0]]:h},o[t[0]]=void 0),{loaderData:o,errors:a,statusCode:u||200,loaderHeaders:f}}function yy(r,e,t,n,i,o){let{loaderData:a,errors:u}=ER(e,t,n);return i.forEach(c=>{let{key:f,match:h,controller:p}=c,g=o[f];if(We(g,"Did not find corresponding fetcher result"),!(p&&p.signal.aborted))if(_r(g)){let x=xs(r.matches,h==null?void 0:h.route.id);u&&u[x.route.id]||(u={...u,[x.route.id]:g.error}),r.fetchers.delete(f)}else if(Ss(g))We(!1,"Unhandled fetcher revalidation redirect");else{let x=zi(g.data);r.fetchers.set(f,x)}}),{loaderData:a,errors:u}}function vy(r,e,t,n){let i=Object.entries(e).filter(([,o])=>o!==Ux).reduce((o,[a,u])=>(o[a]=u,o),{});for(let o of t){let a=o.route.id;if(!e.hasOwnProperty(a)&&r.hasOwnProperty(a)&&o.route.loader&&(i[a]=r[a]),n&&n.hasOwnProperty(a))break}return i}function xy(r){return r?_r(r[1])?{actionData:{}}:{actionData:{[r[0]]:r[1].data}}:{}}function xs(r,e){return(e?r.slice(0,r.findIndex(n=>n.route.id===e)+1):[...r]).reverse().find(n=>n.route.hasErrorBoundary===!0)||r[0]}function Sy(r){let e=r.length===1?r[0]:r.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Jr(r,{pathname:e,routeId:t,method:n,type:i,message:o}={}){let a="Unknown Server Error",u="Unknown @remix-run/router error";return r===400?(a="Bad Request",n&&e&&t?u=`You made a ${n} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:i==="invalid-body"&&(u="Unable to encode submission body")):r===403?(a="Forbidden",u=`Route "${t}" does not match URL "${e}"`):r===404?(a="Not Found",u=`No route matches URL "${e}"`):r===405&&(a="Method Not Allowed",n&&e&&t?u=`You made a ${n.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:n&&(u=`Invalid request method "${n.toUpperCase()}"`)),new lc(r||500,a,new Error(u),!0)}function vu(r){let e=Object.entries(r);for(let t=e.length-1;t>=0;t--){let[n,i]=e[t];if(Ss(i))return{key:n,result:i}}}function jx(r){let e=typeof r=="string"?Ji(r):r;return Xi({...e,hash:""})}function TR(r,e){return r.pathname!==e.pathname||r.search!==e.search?!1:r.hash===""?e.hash!=="":r.hash===e.hash?!0:e.hash!==""}function wR(r){return Hx(r.result)&&aR.has(r.result.status)}function _r(r){return r.type==="error"}function Ss(r){return(r&&r.type)==="redirect"}function Ey(r){return typeof r=="object"&&r!=null&&"type"in r&&"data"in r&&"init"in r&&r.type==="DataWithResponseInit"}function Hx(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.headers=="object"&&typeof r.body<"u"}function RR(r){return oR.has(r.toUpperCase())}function vn(r){return iR.has(r.toUpperCase())}function Lp(r){return new URLSearchParams(r).getAll("index").some(e=>e==="")}function _a(r,e){let t=typeof e=="string"?Ji(e).search:e.search;if(r[r.length-1].route.index&&Lp(t||""))return r[r.length-1];let n=Nx(r);return n[n.length-1]}function Ty(r){let{formMethod:e,formAction:t,formEncType:n,text:i,formData:o,json:a}=r;if(!(!e||!t||!n)){if(i!=null)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:t,formEncType:n,formData:o,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:a,text:void 0}}}function Qf(r,e){return e?{state:"loading",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:r,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function AR(r,e){return{state:"submitting",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function ba(r,e){return r?{state:"loading",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function LR(r,e){return{state:"submitting",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e?e.data:void 0}}function zi(r){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function bR(r,e){try{let t=r.sessionStorage.getItem($x);if(t){let n=JSON.parse(t);for(let[i,o]of Object.entries(n||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function CR(r,e){if(e.size>0){let t={};for(let[n,i]of e)t[n]=[...i];try{r.sessionStorage.setItem($x,JSON.stringify(t))}catch(n){tr(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function kR(){let r,e,t=new Promise((n,i)=>{r=async o=>{n(o);try{await t}catch{}},e=async o=>{i(o);try{await t}catch{}}});return{promise:t,resolve:r,reject:e}}var _s=O.createContext(null);_s.displayName="DataRouter";var Qa=O.createContext(null);Qa.displayName="DataRouterState";var bp=O.createContext({isTransitioning:!1});bp.displayName="ViewTransition";var Vx=O.createContext(new Map);Vx.displayName="Fetchers";var IR=O.createContext(null);IR.displayName="Await";var Vn=O.createContext(null);Vn.displayName="Navigation";var _c=O.createContext(null);_c.displayName="Location";var hi=O.createContext({outlet:null,matches:[],isDataRoute:!1});hi.displayName="Route";var Cp=O.createContext(null);Cp.displayName="RouteError";function DR(r,{relative:e}={}){We(Ja(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=O.useContext(Vn),{hash:i,pathname:o,search:a}=Za(r,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:Un([t,o])),n.createHref({pathname:u,search:a,hash:i})}function Ja(){return O.useContext(_c)!=null}function Os(){return We(Ja(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(_c).location}var zx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Kx(r){O.useContext(Vn).static||O.useLayoutEffect(r)}function Wx(){let{isDataRoute:r}=O.useContext(hi);return r?VR():PR()}function PR(){We(Ja(),"useNavigate() may be used only in the context of a <Router> component.");let r=O.useContext(_s),{basename:e,navigator:t}=O.useContext(Vn),{matches:n}=O.useContext(hi),{pathname:i}=Os(),o=JSON.stringify(wp(n)),a=O.useRef(!1);return Kx(()=>{a.current=!0}),O.useCallback((c,f={})=>{if(tr(a.current,zx),!a.current)return;if(typeof c=="number"){t.go(c);return}let h=Rp(c,JSON.parse(o),i,f.relative==="path");r==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Un([e,h.pathname])),(f.replace?t.replace:t.push)(h,f.state,f)},[e,t,o,i,r])}O.createContext(null);function Za(r,{relative:e}={}){let{matches:t}=O.useContext(hi),{pathname:n}=Os(),i=JSON.stringify(wp(t));return O.useMemo(()=>Rp(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function _R(r,e,t,n){We(Ja(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=O.useContext(Vn),{matches:o}=O.useContext(hi),a=o[o.length-1],u=a?a.params:{},c=a?a.pathname:"/",f=a?a.pathnameBase:"/",h=a&&a.route;{let R=h&&h.path||"";qx(c,!h||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let p=Os(),g;g=p;let x=g.pathname||"/",y=x;if(f!=="/"){let R=f.replace(/^\//,"").split("/");y="/"+x.replace(/^\//,"").split("/").slice(R.length).join("/")}let S=Yi(r,{pathname:y});return tr(h||S!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),tr(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),BR(S&&S.map(R=>Object.assign({},R,{params:Object.assign({},u,R.params),pathname:Un([f,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:Un([f,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),o,t,n)}function OR(){let r=HR(),e=Pc(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",r),a=O.createElement(O.Fragment,null,O.createElement("p",null,"💿 Hey developer 👋"),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:o},"ErrorBoundary")," or"," ",O.createElement("code",{style:o},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:i},t):null,a)}var FR=O.createElement(OR,null),MR=class extends O.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?O.createElement(hi.Provider,{value:this.props.routeContext},O.createElement(Cp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function NR({routeContext:r,match:e,children:t}){let n=O.useContext(_s);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(hi.Provider,{value:r},t)}function BR(r,e=[],t=null,n=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,o=t==null?void 0:t.errors;if(o!=null){let c=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);We(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,u=-1;if(t)for(let c=0;c<i.length;c++){let f=i[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:h,errors:p}=t,g=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){a=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((c,f,h)=>{let p,g=!1,x=null,y=null;t&&(p=o&&f.route.id?o[f.route.id]:void 0,x=f.route.errorElement||FR,a&&(u<0&&h===0?(qx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,y=null):u===h&&(g=!0,y=f.route.hydrateFallbackElement||null)));let S=e.concat(i.slice(0,h+1)),T=()=>{let R;return p?R=x:g?R=y:f.route.Component?R=O.createElement(f.route.Component,null):f.route.element?R=f.route.element:R=c,O.createElement(NR,{match:f,routeContext:{outlet:c,matches:S,isDataRoute:t!=null},children:R})};return t&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?O.createElement(MR,{location:t.location,revalidation:t.revalidation,component:x,error:p,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):T()},null)}function kp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $R(r){let e=O.useContext(_s);return We(e,kp(r)),e}function Yx(r){let e=O.useContext(Qa);return We(e,kp(r)),e}function UR(r){let e=O.useContext(hi);return We(e,kp(r)),e}function Oc(r){let e=UR(r),t=e.matches[e.matches.length-1];return We(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function GR(){return Oc("useRouteId")}function jR(){let r=Yx("useLoaderData"),e=Oc("useLoaderData");return r.loaderData[e]}function HR(){var n;let r=O.useContext(Cp),e=Yx("useRouteError"),t=Oc("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function VR(){let{router:r}=$R("useNavigate"),e=Oc("useNavigate"),t=O.useRef(!1);return Kx(()=>{t.current=!0}),O.useCallback(async(i,o={})=>{tr(t.current,zx),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...o}))},[r,e])}var wy={};function qx(r,e,t){!e&&!wy[r]&&(wy[r]=!0,tr(!1,t))}var Ry={};function Ay(r,e){!r&&!Ry[e]&&(Ry[e]=!0,console.warn(e))}function zR(r){let e={hasErrorBoundary:r.hasErrorBoundary||r.ErrorBoundary!=null||r.errorElement!=null};return r.Component&&(r.element&&tr(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:O.createElement(r.Component),Component:void 0})),r.HydrateFallback&&(r.hydrateFallbackElement&&tr(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:O.createElement(r.HydrateFallback),HydrateFallback:void 0})),r.ErrorBoundary&&(r.errorElement&&tr(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:O.createElement(r.ErrorBoundary),ErrorBoundary:void 0})),e}var KR=class{constructor(){this.status="pending",this.promise=new Promise((r,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",r(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function WR({router:r,flushSync:e}){let[t,n]=O.useState(r.state),[i,o]=O.useState(),[a,u]=O.useState({isTransitioning:!1}),[c,f]=O.useState(),[h,p]=O.useState(),[g,x]=O.useState(),y=O.useRef(new Map),S=O.useCallback((C,{deletedFetchers:I,flushSync:w,viewTransitionOpts:P})=>{I.forEach(U=>y.current.delete(U)),C.fetchers.forEach((U,Q)=>{U.data!==void 0&&y.current.set(Q,U.data)}),Ay(w===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let D=r.window!=null&&r.window.document!=null&&typeof r.window.document.startViewTransition=="function";if(Ay(P==null||D,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!P||!D){e&&w?e(()=>n(C)):O.startTransition(()=>n(C));return}if(e&&w){e(()=>{h&&(c&&c.resolve(),h.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let U=r.window.document.startViewTransition(()=>{e(()=>n(C))});U.finished.finally(()=>{e(()=>{f(void 0),p(void 0),o(void 0),u({isTransitioning:!1})})}),e(()=>p(U));return}h?(c&&c.resolve(),h.skipTransition(),x({state:C,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(o(C),u({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[r.window,e,h,c]);O.useLayoutEffect(()=>r.subscribe(S),[r,S]),O.useEffect(()=>{a.isTransitioning&&!a.flushSync&&f(new KR)},[a]),O.useEffect(()=>{if(c&&i&&r.window){let C=i,I=c.promise,w=r.window.document.startViewTransition(async()=>{O.startTransition(()=>n(C)),await I});w.finished.finally(()=>{f(void 0),p(void 0),o(void 0),u({isTransitioning:!1})}),p(w)}},[i,c,r.window]),O.useEffect(()=>{c&&i&&t.location.key===i.location.key&&c.resolve()},[c,h,t.location,i]),O.useEffect(()=>{!a.isTransitioning&&g&&(o(g.state),u({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),x(void 0))},[a.isTransitioning,g]);let T=O.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:C=>r.navigate(C),push:(C,I,w)=>r.navigate(C,{state:I,preventScrollReset:w==null?void 0:w.preventScrollReset}),replace:(C,I,w)=>r.navigate(C,{replace:!0,state:I,preventScrollReset:w==null?void 0:w.preventScrollReset})}),[r]),R=r.basename||"/",k=O.useMemo(()=>({router:r,navigator:T,static:!1,basename:R}),[r,T,R]);return O.createElement(O.Fragment,null,O.createElement(_s.Provider,{value:k},O.createElement(Qa.Provider,{value:t},O.createElement(Vx.Provider,{value:y.current},O.createElement(bp.Provider,{value:a},O.createElement(XR,{basename:R,location:t.location,navigationType:t.historyAction,navigator:T},O.createElement(YR,{routes:r.routes,future:r.future,state:t})))))),null)}var YR=O.memo(qR);function qR({routes:r,future:e,state:t}){return _R(r,void 0,t,e)}function XR({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:o=!1}){We(!Ja(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=r.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:a,navigator:i,static:o,future:{}}),[a,i,o]);typeof t=="string"&&(t=Ji(t));let{pathname:c="/",search:f="",hash:h="",state:p=null,key:g="default"}=t,x=O.useMemo(()=>{let y=Tn(c,a);return y==null?null:{location:{pathname:y,search:f,hash:h,state:p,key:g},navigationType:n}},[a,c,f,h,p,g,n]);return tr(x!=null,`<Router basename="${a}"> is not able to match the URL "${c}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:O.createElement(Vn.Provider,{value:u},O.createElement(_c.Provider,{children:e,value:x}))}var Nu="get",Bu="application/x-www-form-urlencoded";function Fc(r){return r!=null&&typeof r.tagName=="string"}function QR(r){return Fc(r)&&r.tagName.toLowerCase()==="button"}function JR(r){return Fc(r)&&r.tagName.toLowerCase()==="form"}function ZR(r){return Fc(r)&&r.tagName.toLowerCase()==="input"}function eA(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function tA(r,e){return r.button===0&&(!e||e==="_self")&&!eA(r)}var xu=null;function rA(){if(xu===null)try{new FormData(document.createElement("form"),0),xu=!1}catch{xu=!0}return xu}var nA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jf(r){return r!=null&&!nA.has(r)?(tr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bu}"`),null):r}function iA(r,e){let t,n,i,o,a;if(JR(r)){let u=r.getAttribute("action");n=u?Tn(u,e):null,t=r.getAttribute("method")||Nu,i=Jf(r.getAttribute("enctype"))||Bu,o=new FormData(r)}else if(QR(r)||ZR(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=r.getAttribute("formaction")||u.getAttribute("action");if(n=c?Tn(c,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||Nu,i=Jf(r.getAttribute("formenctype"))||Jf(u.getAttribute("enctype"))||Bu,o=new FormData(u,r),!rA()){let{name:f,type:h,value:p}=r;if(h==="image"){let g=f?`${f}.`:"";o.append(`${g}x`,"0"),o.append(`${g}y`,"0")}else f&&o.append(f,p)}}else{if(Fc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Nu,n=null,i=Bu,a=r}return o&&i==="text/plain"&&(a=o,o=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:o,body:a}}function Ip(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function sA(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oA(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function aA(r,e,t){let n=await Promise.all(r.map(async i=>{let o=e.routes[i.route.id];if(o){let a=await sA(o,t);return a.links?a.links():[]}return[]}));return dA(n.flat(1).filter(oA).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Ly(r,e,t,n,i,o){let a=(c,f)=>t[f]?c.route.id!==t[f].route.id:!0,u=(c,f)=>{var h;return t[f].pathname!==c.pathname||((h=t[f].route.path)==null?void 0:h.endsWith("*"))&&t[f].params["*"]!==c.params["*"]};return o==="assets"?e.filter((c,f)=>a(c,f)||u(c,f)):o==="data"?e.filter((c,f)=>{var p;let h=n.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(a(c,f)||u(c,f))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(r,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function lA(r,e){return uA(r.map(t=>{let n=e.routes[t.route.id];if(!n)return[];let i=[n.module];return n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function uA(r){return[...new Set(r)]}function cA(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function dA(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let o=JSON.stringify(cA(i));return t.has(o)||(t.add(o),n.push({key:o,link:i})),n},[])}function fA(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function hA(){let r=O.useContext(_s);return Ip(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function pA(){let r=O.useContext(Qa);return Ip(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Dp=O.createContext(void 0);Dp.displayName="FrameworkContext";function Xx(){let r=O.useContext(Dp);return Ip(r,"You must render this element inside a <HydratedRouter> element"),r}function mA(r,e){let t=O.useContext(Dp),[n,i]=O.useState(!1),[o,a]=O.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:f,onMouseLeave:h,onTouchStart:p}=e,g=O.useRef(null);O.useEffect(()=>{if(r==="render"&&a(!0),r==="viewport"){let S=R=>{R.forEach(k=>{a(k.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return g.current&&T.observe(g.current),()=>{T.disconnect()}}},[r]),O.useEffect(()=>{if(n){let S=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(S)}}},[n]);let x=()=>{i(!0)},y=()=>{i(!1),a(!1)};return t?r!=="intent"?[o,g,{}]:[o,g,{onFocus:Ca(u,x),onBlur:Ca(c,y),onMouseEnter:Ca(f,x),onMouseLeave:Ca(h,y),onTouchStart:Ca(p,x)}]:[!1,g,{}]}function Ca(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function gA({page:r,...e}){let{router:t}=hA(),n=O.useMemo(()=>Yi(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?O.createElement(vA,{page:r,matches:n,...e}):(console.warn(`Tried to prefetch ${r} but no routes matched.`),null)}function yA(r){let{manifest:e,routeModules:t}=Xx(),[n,i]=O.useState([]);return O.useEffect(()=>{let o=!1;return aA(r,e,t).then(a=>{o||i(a)}),()=>{o=!0}},[r,e,t]),n}function vA({page:r,matches:e,...t}){let n=Os(),{manifest:i,routeModules:o}=Xx(),{loaderData:a,matches:u}=pA(),c=O.useMemo(()=>Ly(r,e,u,i,n,"data"),[r,e,u,i,n]),f=O.useMemo(()=>Ly(r,e,u,i,n,"assets"),[r,e,u,i,n]),h=O.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let x=new Set,y=!1;if(e.forEach(T=>{var k;let R=i.routes[T.route.id];!R||!R.hasLoader||(!c.some(C=>C.route.id===T.route.id)&&T.route.id in a&&((k=o[T.route.id])!=null&&k.shouldRevalidate)||R.hasClientLoader?y=!0:x.add(T.route.id))}),x.size===0)return[];let S=fA(r);return y&&x.size>0&&S.searchParams.set("_routes",e.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[a,n,i,c,e,r,o]),p=O.useMemo(()=>lA(f,i),[f,i]),g=yA(f);return O.createElement(O.Fragment,null,h.map(x=>O.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),p.map(x=>O.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),g.map(({key:x,link:y})=>O.createElement("link",{key:x,...y})))}function xA(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Qx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Qx&&(window.__reactRouterVersion="7.0.2")}catch{}function SA(r,e){return dR({basename:e==null?void 0:e.basename,future:e==null?void 0:e.future,history:Fw({window:e==null?void 0:e.window}),hydrationData:EA(),routes:r,mapRouteProperties:zR,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function EA(){let r=window==null?void 0:window.__staticRouterHydrationData;return r&&r.errors&&(r={...r,errors:TA(r.errors)}),r}function TA(r){if(!r)return null;let e=Object.entries(r),t={};for(let[n,i]of e)if(i&&i.__type==="RouteErrorResponse")t[n]=new lc(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let a=new o(i.message);a.stack="",t[n]=a}catch{}}if(t[n]==null){let o=new Error(i.message);o.stack="",t[n]=o}}else t[n]=i;return t}var Jx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zx=O.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:o,replace:a,state:u,target:c,to:f,preventScrollReset:h,viewTransition:p,...g},x){let{basename:y}=O.useContext(Vn),S=typeof f=="string"&&Jx.test(f),T,R=!1;if(typeof f=="string"&&S&&(T=f,Qx))try{let Q=new URL(window.location.href),A=f.startsWith("//")?new URL(Q.protocol+f):new URL(f),$=Tn(A.pathname,y);A.origin===Q.origin&&$!=null?f=$+A.search+A.hash:R=!0}catch{tr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=DR(f,{relative:i}),[C,I,w]=mA(n,g),P=LA(f,{replace:a,state:u,target:c,preventScrollReset:h,relative:i,viewTransition:p});function D(Q){e&&e(Q),Q.defaultPrevented||P(Q)}let U=O.createElement("a",{...g,...w,href:T||k,onClick:R||o?e:D,ref:xA(x,I),target:c,"data-discover":!S&&t==="render"?"true":void 0});return C&&!S?O.createElement(O.Fragment,null,U,O.createElement(gA,{page:k})):U});Zx.displayName="Link";var wA=O.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:o,to:a,viewTransition:u,children:c,...f},h){let p=Za(a,{relative:f.relative}),g=Os(),x=O.useContext(Qa),{navigator:y,basename:S}=O.useContext(Vn),T=x!=null&&DA(p)&&u===!0,R=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,k=g.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(k=k.toLowerCase(),C=C?C.toLowerCase():null,R=R.toLowerCase()),C&&S&&(C=Tn(C,S)||C);const I=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let w=k===R||!i&&k.startsWith(R)&&k.charAt(I)==="/",P=C!=null&&(C===R||!i&&C.startsWith(R)&&C.charAt(R.length)==="/"),D={isActive:w,isPending:P,isTransitioning:T},U=w?e:void 0,Q;typeof n=="function"?Q=n(D):Q=[n,w?"active":null,P?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let A=typeof o=="function"?o(D):o;return O.createElement(Zx,{...f,"aria-current":U,className:Q,ref:h,style:A,to:a,viewTransition:u},typeof c=="function"?c(D):c)});wA.displayName="NavLink";var RA=O.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:o,method:a=Nu,action:u,onSubmit:c,relative:f,preventScrollReset:h,viewTransition:p,...g},x)=>{let y=kA(),S=IA(u,{relative:f}),T=a.toLowerCase()==="get"?"get":"post",R=typeof u=="string"&&Jx.test(u),k=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let I=C.nativeEvent.submitter,w=(I==null?void 0:I.getAttribute("formmethod"))||a;y(I||C.currentTarget,{fetcherKey:e,method:w,navigate:t,replace:i,state:o,relative:f,preventScrollReset:h,viewTransition:p})};return O.createElement("form",{ref:x,method:T,action:S,onSubmit:n?c:k,...g,"data-discover":!R&&r==="render"?"true":void 0})});RA.displayName="Form";function AA(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eS(r){let e=O.useContext(_s);return We(e,AA(r)),e}function LA(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:o,viewTransition:a}={}){let u=Wx(),c=Os(),f=Za(r,{relative:o});return O.useCallback(h=>{if(tA(h,e)){h.preventDefault();let p=t!==void 0?t:Xi(c)===Xi(f);u(r,{replace:p,state:n,preventScrollReset:i,relative:o,viewTransition:a})}},[c,u,f,t,n,e,r,i,o,a])}var bA=0,CA=()=>`__${String(++bA)}__`;function kA(){let{router:r}=eS("useSubmit"),{basename:e}=O.useContext(Vn),t=GR();return O.useCallback(async(n,i={})=>{let{action:o,method:a,encType:u,formData:c,body:f}=iA(n,e);if(i.navigate===!1){let h=i.fetcherKey||CA();await r.fetch(h,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||a,formEncType:i.encType||u,flushSync:i.flushSync})}else await r.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||a,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function IA(r,{relative:e}={}){let{basename:t}=O.useContext(Vn),n=O.useContext(hi);We(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),o={...Za(r||".",{relative:e})},a=Os();if(r==null){o.search=a.search;let u=new URLSearchParams(o.search),c=u.getAll("index");if(c.some(h=>h==="")){u.delete("index"),c.filter(p=>p).forEach(p=>u.append("index",p));let h=u.toString();o.search=h?`?${h}`:""}}return(!r||r===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Un([t,o.pathname])),Xi(o)}function DA(r,e={}){let t=O.useContext(bp);We(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=eS("useViewTransitionState"),i=Za(r,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Tn(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=Tn(t.nextLocation.pathname,n)||t.nextLocation.pathname;return ac(i.pathname,a)!=null||ac(i.pathname,o)!=null}new TextEncoder;var PA=Ox();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _A(r){return O.createElement(WR,{flushSync:PA.flushSync,...r})}var Tr=function(){return Tr=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Tr.apply(this,arguments)};function uc(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))}var yt="-ms-",Ba="-moz-",nt="-webkit-",tS="comm",Mc="rule",Pp="decl",OA="@import",rS="@keyframes",FA="@layer",nS=Math.abs,_p=String.fromCharCode,Bh=Object.assign;function MA(r,e){return Kt(r,0)^45?(((e<<2^Kt(r,0))<<2^Kt(r,1))<<2^Kt(r,2))<<2^Kt(r,3):0}function iS(r){return r.trim()}function li(r,e){return(r=e.exec(r))?r[0]:r}function ze(r,e,t){return r.replace(e,t)}function $u(r,e,t){return r.indexOf(e,t)}function Kt(r,e){return r.charCodeAt(e)|0}function Co(r,e,t){return r.slice(e,t)}function _n(r){return r.length}function sS(r){return r.length}function Oa(r,e){return e.push(r),r}function NA(r,e){return r.map(e).join("")}function by(r,e){return r.filter(function(t){return!li(t,e)})}var Nc=1,ko=1,oS=0,rn=0,Pt=0,Bo="";function Bc(r,e,t,n,i,o,a,u){return{value:r,root:e,parent:t,type:n,props:i,children:o,line:Nc,column:ko,length:a,return:"",siblings:u}}function Ki(r,e){return Bh(Bc("",null,null,"",null,null,0,r.siblings),r,{length:-r.length},e)}function uo(r){for(;r.root;)r=Ki(r.root,{children:[r]});Oa(r,r.siblings)}function BA(){return Pt}function $A(){return Pt=rn>0?Kt(Bo,--rn):0,ko--,Pt===10&&(ko=1,Nc--),Pt}function En(){return Pt=rn<oS?Kt(Bo,rn++):0,ko++,Pt===10&&(ko=1,Nc++),Pt}function As(){return Kt(Bo,rn)}function Uu(){return rn}function $c(r,e){return Co(Bo,r,e)}function $h(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function UA(r){return Nc=ko=1,oS=_n(Bo=r),rn=0,[]}function GA(r){return Bo="",r}function Zf(r){return iS($c(rn-1,Uh(r===91?r+2:r===40?r+1:r)))}function jA(r){for(;(Pt=As())&&Pt<33;)En();return $h(r)>2||$h(Pt)>3?"":" "}function HA(r,e){for(;--e&&En()&&!(Pt<48||Pt>102||Pt>57&&Pt<65||Pt>70&&Pt<97););return $c(r,Uu()+(e<6&&As()==32&&En()==32))}function Uh(r){for(;En();)switch(Pt){case r:return rn;case 34:case 39:r!==34&&r!==39&&Uh(Pt);break;case 40:r===41&&Uh(r);break;case 92:En();break}return rn}function VA(r,e){for(;En()&&r+Pt!==57;)if(r+Pt===84&&As()===47)break;return"/*"+$c(e,rn-1)+"*"+_p(r===47?r:En())}function zA(r){for(;!$h(As());)En();return $c(r,rn)}function KA(r){return GA(Gu("",null,null,null,[""],r=UA(r),0,[0],r))}function Gu(r,e,t,n,i,o,a,u,c){for(var f=0,h=0,p=a,g=0,x=0,y=0,S=1,T=1,R=1,k=0,C="",I=i,w=o,P=n,D=C;T;)switch(y=k,k=En()){case 40:if(y!=108&&Kt(D,p-1)==58){$u(D+=ze(Zf(k),"&","&\f"),"&\f",nS(f?u[f-1]:0))!=-1&&(R=-1);break}case 34:case 39:case 91:D+=Zf(k);break;case 9:case 10:case 13:case 32:D+=jA(y);break;case 92:D+=HA(Uu()-1,7);continue;case 47:switch(As()){case 42:case 47:Oa(WA(VA(En(),Uu()),e,t,c),c);break;default:D+="/"}break;case 123*S:u[f++]=_n(D)*R;case 125*S:case 59:case 0:switch(k){case 0:case 125:T=0;case 59+h:R==-1&&(D=ze(D,/\f/g,"")),x>0&&_n(D)-p&&Oa(x>32?ky(D+";",n,t,p-1,c):ky(ze(D," ","")+";",n,t,p-2,c),c);break;case 59:D+=";";default:if(Oa(P=Cy(D,e,t,f,h,i,u,C,I=[],w=[],p,o),o),k===123)if(h===0)Gu(D,e,P,P,I,o,p,u,w);else switch(g===99&&Kt(D,3)===110?100:g){case 100:case 108:case 109:case 115:Gu(r,P,P,n&&Oa(Cy(r,P,P,0,0,i,u,C,i,I=[],p,w),w),i,w,p,u,n?I:w);break;default:Gu(D,P,P,P,[""],w,0,u,w)}}f=h=x=0,S=R=1,C=D="",p=a;break;case 58:p=1+_n(D),x=y;default:if(S<1){if(k==123)--S;else if(k==125&&S++==0&&$A()==125)continue}switch(D+=_p(k),k*S){case 38:R=h>0?1:(D+="\f",-1);break;case 44:u[f++]=(_n(D)-1)*R,R=1;break;case 64:As()===45&&(D+=Zf(En())),g=As(),h=p=_n(C=D+=zA(Uu())),k++;break;case 45:y===45&&_n(D)==2&&(S=0)}}return o}function Cy(r,e,t,n,i,o,a,u,c,f,h,p){for(var g=i-1,x=i===0?o:[""],y=sS(x),S=0,T=0,R=0;S<n;++S)for(var k=0,C=Co(r,g+1,g=nS(T=a[S])),I=r;k<y;++k)(I=iS(T>0?x[k]+" "+C:ze(C,/&\f/g,x[k])))&&(c[R++]=I);return Bc(r,e,t,i===0?Mc:u,c,f,h,p)}function WA(r,e,t,n){return Bc(r,e,t,tS,_p(BA()),Co(r,2,-2),0,n)}function ky(r,e,t,n,i){return Bc(r,e,t,Pp,Co(r,0,n),Co(r,n+1,-1),n,i)}function aS(r,e,t){switch(MA(r,e)){case 5103:return nt+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return nt+r+r;case 4789:return Ba+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return nt+r+Ba+r+yt+r+r;case 5936:switch(Kt(r,e+11)){case 114:return nt+r+yt+ze(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return nt+r+yt+ze(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return nt+r+yt+ze(r,/[svh]\w+-[tblr]{2}/,"lr")+r}case 6828:case 4268:case 2903:return nt+r+yt+r+r;case 6165:return nt+r+yt+"flex-"+r+r;case 5187:return nt+r+ze(r,/(\w+).+(:[^]+)/,nt+"box-$1$2"+yt+"flex-$1$2")+r;case 5443:return nt+r+yt+"flex-item-"+ze(r,/flex-|-self/g,"")+(li(r,/flex-|baseline/)?"":yt+"grid-row-"+ze(r,/flex-|-self/g,""))+r;case 4675:return nt+r+yt+"flex-line-pack"+ze(r,/align-content|flex-|-self/g,"")+r;case 5548:return nt+r+yt+ze(r,"shrink","negative")+r;case 5292:return nt+r+yt+ze(r,"basis","preferred-size")+r;case 6060:return nt+"box-"+ze(r,"-grow","")+nt+r+yt+ze(r,"grow","positive")+r;case 4554:return nt+ze(r,/([^-])(transform)/g,"$1"+nt+"$2")+r;case 6187:return ze(ze(ze(r,/(zoom-|grab)/,nt+"$1"),/(image-set)/,nt+"$1"),r,"")+r;case 5495:case 3959:return ze(r,/(image-set\([^]*)/,nt+"$1$`$1");case 4968:return ze(ze(r,/(.+:)(flex-)?(.*)/,nt+"box-pack:$3"+yt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+nt+r+r;case 4200:if(!li(r,/flex-|baseline/))return yt+"grid-column-align"+Co(r,e)+r;break;case 2592:case 3360:return yt+ze(r,"template-","")+r;case 4384:case 3616:return t&&t.some(function(n,i){return e=i,li(n.props,/grid-\w+-end/)})?~$u(r+(t=t[e].value),"span",0)?r:yt+ze(r,"-start","")+r+yt+"grid-row-span:"+(~$u(t,"span",0)?li(t,/\d+/):+li(t,/\d+/)-+li(r,/\d+/))+";":yt+ze(r,"-start","")+r;case 4896:case 4128:return t&&t.some(function(n){return li(n.props,/grid-\w+-start/)})?r:yt+ze(ze(r,"-end","-span"),"span ","")+r;case 4095:case 3583:case 4068:case 2532:return ze(r,/(.+)-inline(.+)/,nt+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(_n(r)-1-e>6)switch(Kt(r,e+1)){case 109:if(Kt(r,e+4)!==45)break;case 102:return ze(r,/(.+:)(.+)-([^]+)/,"$1"+nt+"$2-$3$1"+Ba+(Kt(r,e+3)==108?"$3":"$2-$3"))+r;case 115:return~$u(r,"stretch",0)?aS(ze(r,"stretch","fill-available"),e,t)+r:r}break;case 5152:case 5920:return ze(r,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,i,o,a,u,c,f){return yt+i+":"+o+f+(a?yt+i+"-span:"+(u?c:+c-+o)+f:"")+r});case 4949:if(Kt(r,e+6)===121)return ze(r,":",":"+nt)+r;break;case 6444:switch(Kt(r,Kt(r,14)===45?18:11)){case 120:return ze(r,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+nt+(Kt(r,14)===45?"inline-":"")+"box$3$1"+nt+"$2$3$1"+yt+"$2box$3")+r;case 100:return ze(r,":",":"+yt)+r}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ze(r,"scroll-","scroll-snap-")+r}return r}function cc(r,e){for(var t="",n=0;n<r.length;n++)t+=e(r[n],n,r,e)||"";return t}function YA(r,e,t,n){switch(r.type){case FA:if(r.children.length)break;case OA:case Pp:return r.return=r.return||r.value;case tS:return"";case rS:return r.return=r.value+"{"+cc(r.children,n)+"}";case Mc:if(!_n(r.value=r.props.join(",")))return""}return _n(t=cc(r.children,n))?r.return=r.value+"{"+t+"}":""}function qA(r){var e=sS(r);return function(t,n,i,o){for(var a="",u=0;u<e;u++)a+=r[u](t,n,i,o)||"";return a}}function XA(r){return function(e){e.root||(e=e.return)&&r(e)}}function QA(r,e,t,n){if(r.length>-1&&!r.return)switch(r.type){case Pp:r.return=aS(r.value,r.length,t);return;case rS:return cc([Ki(r,{value:ze(r.value,"@","@"+nt)})],n);case Mc:if(r.length)return NA(t=r.props,function(i){switch(li(i,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":uo(Ki(r,{props:[ze(i,/:(read-\w+)/,":"+Ba+"$1")]})),uo(Ki(r,{props:[i]})),Bh(r,{props:by(t,n)});break;case"::placeholder":uo(Ki(r,{props:[ze(i,/:(plac\w+)/,":"+nt+"input-$1")]})),uo(Ki(r,{props:[ze(i,/:(plac\w+)/,":"+Ba+"$1")]})),uo(Ki(r,{props:[ze(i,/:(plac\w+)/,yt+"input-$1")]})),uo(Ki(r,{props:[i]})),Bh(r,{props:by(t,n)});break}return""})}}var JA={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Pr={},Io=typeof process<"u"&&Pr!==void 0&&(Pr.REACT_APP_SC_ATTR||Pr.SC_ATTR)||"data-styled",lS="active",uS="data-styled-version",Uc="6.1.13",Op=`/*!sc*/
`,dc=typeof window<"u"&&"HTMLElement"in window,ZA=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Pr!==void 0&&Pr.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Pr.REACT_APP_SC_DISABLE_SPEEDY!==""?Pr.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Pr.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Pr!==void 0&&Pr.SC_DISABLE_SPEEDY!==void 0&&Pr.SC_DISABLE_SPEEDY!==""&&Pr.SC_DISABLE_SPEEDY!=="false"&&Pr.SC_DISABLE_SPEEDY),Gc=Object.freeze([]),Do=Object.freeze({});function eL(r,e,t){return t===void 0&&(t=Do),r.theme!==t.theme&&r.theme||e||t.theme}var cS=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),tL=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,rL=/(^-|-$)/g;function Iy(r){return r.replace(tL,"-").replace(rL,"")}var nL=/(a)(d)/gi,Su=52,Dy=function(r){return String.fromCharCode(r+(r>25?39:97))};function Gh(r){var e,t="";for(e=Math.abs(r);e>Su;e=e/Su|0)t=Dy(e%Su)+t;return(Dy(e%Su)+t).replace(nL,"$1-$2")}var eh,dS=5381,To=function(r,e){for(var t=e.length;t;)r=33*r^e.charCodeAt(--t);return r},fS=function(r){return To(dS,r)};function iL(r){return Gh(fS(r)>>>0)}function sL(r){return r.displayName||r.name||"Component"}function th(r){return typeof r=="string"&&!0}var hS=typeof Symbol=="function"&&Symbol.for,pS=hS?Symbol.for("react.memo"):60115,oL=hS?Symbol.for("react.forward_ref"):60112,aL={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},lL={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},mS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},uL=((eh={})[oL]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},eh[pS]=mS,eh);function Py(r){return("type"in(e=r)&&e.type.$$typeof)===pS?mS:"$$typeof"in r?uL[r.$$typeof]:aL;var e}var cL=Object.defineProperty,dL=Object.getOwnPropertyNames,_y=Object.getOwnPropertySymbols,fL=Object.getOwnPropertyDescriptor,hL=Object.getPrototypeOf,Oy=Object.prototype;function gS(r,e,t){if(typeof e!="string"){if(Oy){var n=hL(e);n&&n!==Oy&&gS(r,n,t)}var i=dL(e);_y&&(i=i.concat(_y(e)));for(var o=Py(r),a=Py(e),u=0;u<i.length;++u){var c=i[u];if(!(c in lL||t&&t[c]||a&&c in a||o&&c in o)){var f=fL(e,c);try{cL(r,c,f)}catch{}}}}return r}function Po(r){return typeof r=="function"}function Fp(r){return typeof r=="object"&&"styledComponentId"in r}function Es(r,e){return r&&e?"".concat(r," ").concat(e):r||e||""}function Fy(r,e){if(r.length===0)return"";for(var t=r[0],n=1;n<r.length;n++)t+=r[n];return t}function ja(r){return r!==null&&typeof r=="object"&&r.constructor.name===Object.name&&!("props"in r&&r.$$typeof)}function jh(r,e,t){if(t===void 0&&(t=!1),!t&&!ja(r)&&!Array.isArray(r))return e;if(Array.isArray(e))for(var n=0;n<e.length;n++)r[n]=jh(r[n],e[n]);else if(ja(e))for(var n in e)r[n]=jh(r[n],e[n]);return r}function Mp(r,e){Object.defineProperty(r,"toString",{value:e})}function el(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(r," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var pL=function(){function r(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return r.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},r.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,o=i;e>=o;)if((o<<=1)<0)throw el(16,"".concat(e));this.groupSizes=new Uint32Array(o),this.groupSizes.set(n),this.length=o;for(var a=i;a<o;a++)this.groupSizes[a]=0}for(var u=this.indexOfGroup(e+1),c=(a=0,t.length);a<c;a++)this.tag.insertRule(u,t[a])&&(this.groupSizes[e]++,u++)},r.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),i=n+t;this.groupSizes[e]=0;for(var o=n;o<i;o++)this.tag.deleteRule(n)}},r.prototype.getGroup=function(e){var t="";if(e>=this.length||this.groupSizes[e]===0)return t;for(var n=this.groupSizes[e],i=this.indexOfGroup(e),o=i+n,a=i;a<o;a++)t+="".concat(this.tag.getRule(a)).concat(Op);return t},r}(),ju=new Map,fc=new Map,Hu=1,Eu=function(r){if(ju.has(r))return ju.get(r);for(;fc.has(Hu);)Hu++;var e=Hu++;return ju.set(r,e),fc.set(e,r),e},mL=function(r,e){Hu=e+1,ju.set(r,e),fc.set(e,r)},gL="style[".concat(Io,"][").concat(uS,'="').concat(Uc,'"]'),yL=new RegExp("^".concat(Io,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),vL=function(r,e,t){for(var n,i=t.split(","),o=0,a=i.length;o<a;o++)(n=i[o])&&r.registerName(e,n)},xL=function(r,e){for(var t,n=((t=e.textContent)!==null&&t!==void 0?t:"").split(Op),i=[],o=0,a=n.length;o<a;o++){var u=n[o].trim();if(u){var c=u.match(yL);if(c){var f=0|parseInt(c[1],10),h=c[2];f!==0&&(mL(h,f),vL(r,h,c[3]),r.getTag().insertRules(f,i)),i.length=0}else i.push(u)}}},My=function(r){for(var e=document.querySelectorAll(gL),t=0,n=e.length;t<n;t++){var i=e[t];i&&i.getAttribute(Io)!==lS&&(xL(r,i),i.parentNode&&i.parentNode.removeChild(i))}};function SL(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var yS=function(r){var e=document.head,t=r||e,n=document.createElement("style"),i=function(u){var c=Array.from(u.querySelectorAll("style[".concat(Io,"]")));return c[c.length-1]}(t),o=i!==void 0?i.nextSibling:null;n.setAttribute(Io,lS),n.setAttribute(uS,Uc);var a=SL();return a&&n.setAttribute("nonce",a),t.insertBefore(n,o),n},EL=function(){function r(e){this.element=yS(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var n=document.styleSheets,i=0,o=n.length;i<o;i++){var a=n[i];if(a.ownerNode===t)return a}throw el(17)}(this.element),this.length=0}return r.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},r.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},r.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},r}(),TL=function(){function r(e){this.element=yS(e),this.nodes=this.element.childNodes,this.length=0}return r.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},r.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},r.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},r}(),wL=function(){function r(e){this.rules=[],this.length=0}return r.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},r.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},r.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},r}(),Ny=dc,RL={isServer:!dc,useCSSOMInjection:!ZA},vS=function(){function r(e,t,n){e===void 0&&(e=Do),t===void 0&&(t={});var i=this;this.options=Tr(Tr({},RL),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&dc&&Ny&&(Ny=!1,My(this)),Mp(this,function(){return function(o){for(var a=o.getTag(),u=a.length,c="",f=function(p){var g=function(R){return fc.get(R)}(p);if(g===void 0)return"continue";var x=o.names.get(g),y=a.getGroup(p);if(x===void 0||!x.size||y.length===0)return"continue";var S="".concat(Io,".g").concat(p,'[id="').concat(g,'"]'),T="";x!==void 0&&x.forEach(function(R){R.length>0&&(T+="".concat(R,","))}),c+="".concat(y).concat(S,'{content:"').concat(T,'"}').concat(Op)},h=0;h<u;h++)f(h);return c}(i)})}return r.registerId=function(e){return Eu(e)},r.prototype.rehydrate=function(){!this.server&&dc&&My(this)},r.prototype.reconstructWithOptions=function(e,t){return t===void 0&&(t=!0),new r(Tr(Tr({},this.options),e),this.gs,t&&this.names||void 0)},r.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},r.prototype.getTag=function(){return this.tag||(this.tag=(e=function(t){var n=t.useCSSOMInjection,i=t.target;return t.isServer?new wL(i):n?new EL(i):new TL(i)}(this.options),new pL(e)));var e},r.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},r.prototype.registerName=function(e,t){if(Eu(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},r.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Eu(e),n)},r.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},r.prototype.clearRules=function(e){this.getTag().clearGroup(Eu(e)),this.clearNames(e)},r.prototype.clearTag=function(){this.tag=void 0},r}(),AL=/&/g,LL=/^\s*\/\/.*$/gm;function xS(r,e){return r.map(function(t){return t.type==="rule"&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(n){return"".concat(e," ").concat(n)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=xS(t.children,e)),t})}function bL(r){var e,t,n,i=Do,o=i.options,a=o===void 0?Do:o,u=i.plugins,c=u===void 0?Gc:u,f=function(g,x,y){return y.startsWith(t)&&y.endsWith(t)&&y.replaceAll(t,"").length>0?".".concat(e):g},h=c.slice();h.push(function(g){g.type===Mc&&g.value.includes("&")&&(g.props[0]=g.props[0].replace(AL,t).replace(n,f))}),a.prefix&&h.push(QA),h.push(YA);var p=function(g,x,y,S){x===void 0&&(x=""),y===void 0&&(y=""),S===void 0&&(S="&"),e=S,t=x,n=new RegExp("\\".concat(t,"\\b"),"g");var T=g.replace(LL,""),R=KA(y||x?"".concat(y," ").concat(x," { ").concat(T," }"):T);a.namespace&&(R=xS(R,a.namespace));var k=[];return cc(R,qA(h.concat(XA(function(C){return k.push(C)})))),k};return p.hash=c.length?c.reduce(function(g,x){return x.name||el(15),To(g,x.name)},dS).toString():"",p}var CL=new vS,Hh=bL(),SS=Sn.createContext({shouldForwardProp:void 0,styleSheet:CL,stylis:Hh});SS.Consumer;Sn.createContext(void 0);function By(){return O.useContext(SS)}var kL=function(){function r(e,t){var n=this;this.inject=function(i,o){o===void 0&&(o=Hh);var a=n.name+o.hash;i.hasNameForId(n.id,a)||i.insertRules(n.id,a,o(n.rules,a,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,Mp(this,function(){throw el(12,String(n.name))})}return r.prototype.getName=function(e){return e===void 0&&(e=Hh),this.name+e.hash},r}(),IL=function(r){return r>="A"&&r<="Z"};function $y(r){for(var e="",t=0;t<r.length;t++){var n=r[t];if(t===1&&n==="-"&&r[0]==="-")return r;IL(n)?e+="-"+n.toLowerCase():e+=n}return e.startsWith("ms-")?"-"+e:e}var ES=function(r){return r==null||r===!1||r===""},TS=function(r){var e,t,n=[];for(var i in r){var o=r[i];r.hasOwnProperty(i)&&!ES(o)&&(Array.isArray(o)&&o.isCss||Po(o)?n.push("".concat($y(i),":"),o,";"):ja(o)?n.push.apply(n,uc(uc(["".concat(i," {")],TS(o),!1),["}"],!1)):n.push("".concat($y(i),": ").concat((e=i,(t=o)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||e in JA||e.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return n};function Ls(r,e,t,n){if(ES(r))return[];if(Fp(r))return[".".concat(r.styledComponentId)];if(Po(r)){if(!Po(o=r)||o.prototype&&o.prototype.isReactComponent||!e)return[r];var i=r(e);return Ls(i,e,t,n)}var o;return r instanceof kL?t?(r.inject(t,n),[r.getName(n)]):[r]:ja(r)?TS(r):Array.isArray(r)?Array.prototype.concat.apply(Gc,r.map(function(a){return Ls(a,e,t,n)})):[r.toString()]}function DL(r){for(var e=0;e<r.length;e+=1){var t=r[e];if(Po(t)&&!Fp(t))return!1}return!0}var PL=fS(Uc),_L=function(){function r(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&DL(e),this.componentId=t,this.baseHash=To(PL,t),this.baseStyle=n,vS.registerId(t)}return r.prototype.generateAndInjectStyles=function(e,t,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))i=Es(i,this.staticRulesId);else{var o=Fy(Ls(this.rules,e,t,n)),a=Gh(To(this.baseHash,o)>>>0);if(!t.hasNameForId(this.componentId,a)){var u=n(o,".".concat(a),void 0,this.componentId);t.insertRules(this.componentId,a,u)}i=Es(i,a),this.staticRulesId=a}else{for(var c=To(this.baseHash,n.hash),f="",h=0;h<this.rules.length;h++){var p=this.rules[h];if(typeof p=="string")f+=p;else if(p){var g=Fy(Ls(p,e,t,n));c=To(c,g+h),f+=g}}if(f){var x=Gh(c>>>0);t.hasNameForId(this.componentId,x)||t.insertRules(this.componentId,x,n(f,".".concat(x),void 0,this.componentId)),i=Es(i,x)}}return i},r}(),wS=Sn.createContext(void 0);wS.Consumer;var rh={};function OL(r,e,t){var n=Fp(r),i=r,o=!th(r),a=e.attrs,u=a===void 0?Gc:a,c=e.componentId,f=c===void 0?function(I,w){var P=typeof I!="string"?"sc":Iy(I);rh[P]=(rh[P]||0)+1;var D="".concat(P,"-").concat(iL(Uc+P+rh[P]));return w?"".concat(w,"-").concat(D):D}(e.displayName,e.parentComponentId):c,h=e.displayName,p=h===void 0?function(I){return th(I)?"styled.".concat(I):"Styled(".concat(sL(I),")")}(r):h,g=e.displayName&&e.componentId?"".concat(Iy(e.displayName),"-").concat(e.componentId):e.componentId||f,x=n&&i.attrs?i.attrs.concat(u).filter(Boolean):u,y=e.shouldForwardProp;if(n&&i.shouldForwardProp){var S=i.shouldForwardProp;if(e.shouldForwardProp){var T=e.shouldForwardProp;y=function(I,w){return S(I,w)&&T(I,w)}}else y=S}var R=new _L(t,g,n?i.componentStyle:void 0);function k(I,w){return function(P,D,U){var Q=P.attrs,A=P.componentStyle,$=P.defaultProps,ie=P.foldedComponentIds,te=P.styledComponentId,fe=P.target,de=Sn.useContext(wS),pe=By(),ge=P.shouldForwardProp||pe.shouldForwardProp,ne=eL(D,de,$)||Do,Y=function(Se,be,Me){for(var Be,De=Tr(Tr({},be),{className:void 0,theme:Me}),ot=0;ot<Se.length;ot+=1){var rr=Po(Be=Se[ot])?Be(De):Be;for(var qt in rr)De[qt]=qt==="className"?Es(De[qt],rr[qt]):qt==="style"?Tr(Tr({},De[qt]),rr[qt]):rr[qt]}return be.className&&(De.className=Es(De.className,be.className)),De}(Q,D,ne),q=Y.as||fe,F={};for(var H in Y)Y[H]===void 0||H[0]==="$"||H==="as"||H==="theme"&&Y.theme===ne||(H==="forwardedAs"?F.as=Y.forwardedAs:ge&&!ge(H,q)||(F[H]=Y[H]));var me=function(Se,be){var Me=By(),Be=Se.generateAndInjectStyles(be,Me.styleSheet,Me.stylis);return Be}(A,Y),ve=Es(ie,te);return me&&(ve+=" "+me),Y.className&&(ve+=" "+Y.className),F[th(q)&&!cS.has(q)?"class":"className"]=ve,F.ref=U,O.createElement(q,F)}(C,I,w)}k.displayName=p;var C=Sn.forwardRef(k);return C.attrs=x,C.componentStyle=R,C.displayName=p,C.shouldForwardProp=y,C.foldedComponentIds=n?Es(i.foldedComponentIds,i.styledComponentId):"",C.styledComponentId=g,C.target=n?i.target:r,Object.defineProperty(C,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(I){this._foldedDefaultProps=n?function(w){for(var P=[],D=1;D<arguments.length;D++)P[D-1]=arguments[D];for(var U=0,Q=P;U<Q.length;U++)jh(w,Q[U],!0);return w}({},i.defaultProps,I):I}}),Mp(C,function(){return".".concat(C.styledComponentId)}),o&&gS(C,r,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),C}function Uy(r,e){for(var t=[r[0]],n=0,i=e.length;n<i;n+=1)t.push(e[n],r[n+1]);return t}var Gy=function(r){return Object.assign(r,{isCss:!0})};function FL(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(Po(r)||ja(r))return Gy(Ls(Uy(Gc,uc([r],e,!0))));var n=r;return e.length===0&&n.length===1&&typeof n[0]=="string"?Ls(n):Gy(Ls(Uy(n,e)))}function Vh(r,e,t){if(t===void 0&&(t=Do),!e)throw el(1,e);var n=function(i){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];return r(e,t,FL.apply(void 0,uc([i],o,!1)))};return n.attrs=function(i){return Vh(r,e,Tr(Tr({},t),{attrs:Array.prototype.concat(t.attrs,i).filter(Boolean)}))},n.withConfig=function(i){return Vh(r,e,Tr(Tr({},t),i))},n}var RS=function(r){return Vh(OL,r)},Ar=RS;cS.forEach(function(r){Ar[r]=RS(r)});const ML="/assets/custom-C20UssCa.ttf",NL="/assets/ArgentumSans-Bold-ckeH8El4.ttf",BL=Ar.div`
  @font-face {
    font-family: "MyCustomFont";
    src: url(${ML}) format("truetype");
    font-weight: normal;
    font-style: normal;
  }

  @font-face {
    font-family: "mass";
    src: url(${NL}) format("truetype");
    font-weight: normal;
    font-style: normal;
  }

  .jumbotron {
    background-color: #eceeef;
    border-radius: 0.3rem;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  @media (max-width: 1600px) {
    .jumbotron {
      height: 60vh;
    }
  }

  @media (max-width: 1200px) {
    .jumbotron {
      height: 50vh;
    }
  }
  @media (max-width: 1024px) {
    .jumbotron {
      height: 50vh;
    }
  }
  @media (max-width: 768px) {
    .jumbotron {
      height: 45vh;
    }
  }
  @media (max-width: 600px) {
    .jumbotron {
      height: 45vh;
    }
  }

  .header {
    animation: fromLeft 1s linear;
  }

  @keyframes fromLeft {
    0% {
      transform: translateX(-100%);
      opacity: 0;
    }

    100% {
      transform: translateX(0%);
      opacity: 1;
    }
  }

  @media (max-width: 1600px) {
    .header {
      margin-left: 20px;
      align-items: center;
    }
  }

  @media (max-width: 1200px) {
    .header {
      margin-left: 20px;
      align-items: center;
    }
  }

  @media (max-width: 1024px) {
    .header {
      margin-left: 20px;
      align-items: center;
    }
  }

  @media (max-width: 768px) {
    .header {
      margin-left: 20px;
      align-items: center;
    }
  }

  @media (max-width: 600px) {
    .header {
      margin-left: 20px;
      align-items: center;
    }
  }

  .row {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    padding: 10px;
    .col-2 {
      display: inline-flex;
      justify-content: center;
    }
  }

  .col-2 {
    position: relative;
    width: 100%;
    min-height: 1px;
    -webkit-box-flex: 0;
    -webkit-flex: 0 0 16.666667%;
    -ms-flex: 0 0 16.666667%;
    flex: 0 0 16.666667%;
    max-width: 16.666667%;
  }

  @media (max-width: 1024px) {
    .col-2 {
      Button {
        font-size: 12px;
      }
    }
  }

  @media (max-width: 768px) {
    .col-2 {
      Button {
        font-size: 12px;
      }
    }
  }

  @media (max-width: 600px) {
    .col-2 {
      Button {
        font-size: 10px;
      }
    }
  }

  @media (max-width: 480px) {
    .col-2 {
      Button {
        font-size: 8px;
      }
    }
  }
    

  #banner {
    background-size: cover;
  }

  /********** banner **********/
  #banner header {
    overflow: hidden;
    position: fixed;
    width: 100vw;
    z-index: 10;
    background-color: white;
    top: 0px;
  }

  #banner header img {
    max-width: 120px;
  }

  .align-center {
    display: flex;
    align-items: center;
    animation: fromRight 1s linear;
    margin-right: 20px;
  }

  @keyframes fromRight {
    0% {
      transform: translateX(100%);
      opacity: 0;
    }

    100% {
      transform: translateX(0%);
      opacity: 1;
    }
  }

  h5 {
    font-family: MyCustomFont, sans-serif;
    font-size: 1rem;
  }

  .live {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    position: relative;
    margin: 15px;
    h5 {
      margin: 0px;
    }
  }

  @media (max-width: 1600px) {
    .live {
      top: 180px;
      left: 50px;
    }
  }

  @media (max-width: 1200px) {
    .live {
      top: 180px;
      left: 30px;
    }
  }

  @media (max-width: 1024px) {
    .live {
      top: 173px;
      left: 24px;
    }
  }

  @media (max-width: 768px) {
    .live {
      top: 175px;
      left: 15px;
    }
  }

  @media (max-width: 600px) {
    .live {
      top: 170px;
      left: 15px;
    }
  }

  .liveIcon {
    animation: blink 0.6s linear infinite alternate;
  }

  @keyframes blink {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }

  .mass {
    color: white;
    position: absolute;
    margin: auto;
    display: flex;
    align-content: flex-start;
    flex-wrap: wrap;
    top: 16vh;
    animation: dropdown 2s ease-out forwards;
    transition: filter 0.3s ease;
  }

  .mass: hover {
    filter: drop-shadow(0px 0px 20px #c7c9af);
  }

  @keyframes dropdown {
    0% {
      opacity: 0;
      transform: translateY(-50%); /* Start smaller */
      color: white;
    }
    100% {
      opacity: 1;
      transform: translateY(0%); /* Full size */
      color: red;
    }
  }
  @media (max-width: 1600px) {
    .mass {
      font-size: 60px;
      font-family: mass, serif;
      letter-spacing: 2rem;
      font-weight: 600;
      top: 11vh;
    }

    .isLoggedIn {
      top: 9vh !important;
    }
  }

  @media (max-width: 1200px) {
    .mass {
      font-size: 60px;
      font-family: mass, serif;
      letter-spacing: 1.8rem;
      font-weight: 600;
      top: 11.5vh;
    }
    .isLoggedIn {
      top: 10vh !important;
    }
  }

  @media (max-width: 1024px) {
    .mass {
      font-size: 50px;
      font-family: mass, serif;
      letter-spacing: 1.5rem;
      font-weight: 600;
      top: 11.5vh;
    }
    .isLoggedIn {
      top: 10vh !important;
    }
  }

  @media (max-width: 768px) {
    .mass {
      font-size: 50px;
      font-family: mass, serif;
      letter-spacing: 1.2rem;
      font-weight: 600;
      top: 12vh;
    }
    .isLoggedIn {
      top: 10vh !important;
    }
  }

  @media (max-width: 600px) {
    .mass {
      font-size: 35px;
      font-family: mass, serif;
      letter-spacing: 0.8rem;
      font-weight: 500;
      top: 13vh;
    }
    .isLoggedIn {
      top: 11vh !important;
    }
  }

  @media (max-width: 450px) {
    .mass {
      font-size: 30px;
      font-family: mass, serif;
      letter-spacing: 0.5rem;
      font-weight: 400;
      top: 12vh;
    }
    .isLoggedIn {
      top: 11vh !important;
    }
  }

  @media (max-width: 320px) {
    .mass {
      font-size: 20px;
      font-family: mass, serif;
      letter-spacing: 0.4rem;
      font-weight: 300;
      top: 12vh;
    }

    .isLoggedIn {
      top: 11vh !important;
    }
  }
`,$L=Ar.div`
display: flex;
justify-content: center;
.hls-player {
  width: 60vw;
  height: 45vh;
  animation: popup 1s ease;
}

@media (max-width: 1600px){
    .hls-player {
       height: 60vh;
       width: 90vw;
       position: relative;
       top: 190px;
    }
}

@media (max-width: 1200px){
    .hls-player {
      height: 50vh;
       width: 90vw;
       position: relative;
       top: 192px;
    }
}

@media (max-width: 1024px){
    .hls-player {
       height: 50vh;
       width: 90vw;
       position: relative;
       top: 186px;
    }
}

@media (max-width: 768px){
    .hls-player {
       height: 45vh;
       width: 90vw;
       position: relative;
       top: 183px;
    }
}

@media (max-width: 600px){
    .hls-player {
       height: 45vh;
       width: 90vw;
       position: relative;
       top: 179px;
    }
}



@keyframes popup {
  0% {
    opacity: 0.4;
    transform: scale(0.4);
  }

  90% {
     opacity: 1;
    transform: scale(1.1);
  }

  100% {
    opacity: 1;
    transform: scale(1);
  }
}

.hls-player video {
  width: 100%;
  height: inherit;
  border-radius: 15px; 
  object-fit: cover; /* Optional: add a border radius to the video itself */
}
`;function UL(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var AS={exports:{}};(function(r,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,o=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,u={buildAbsoluteURL:function(c,f,h){if(h=h||{},c=c.trim(),f=f.trim(),!f){if(!h.alwaysNormalize)return c;var p=u.parseURL(c);if(!p)throw new Error("Error trying to parse base URL.");return p.path=u.normalizePath(p.path),u.buildURLFromParts(p)}var g=u.parseURL(f);if(!g)throw new Error("Error trying to parse relative URL.");if(g.scheme)return h.alwaysNormalize?(g.path=u.normalizePath(g.path),u.buildURLFromParts(g)):f;var x=u.parseURL(c);if(!x)throw new Error("Error trying to parse base URL.");if(!x.netLoc&&x.path&&x.path[0]!=="/"){var y=i.exec(x.path);x.netLoc=y[1],x.path=y[2]}x.netLoc&&!x.path&&(x.path="/");var S={scheme:x.scheme,netLoc:g.netLoc,path:null,params:g.params,query:g.query,fragment:g.fragment};if(!g.netLoc&&(S.netLoc=x.netLoc,g.path[0]!=="/"))if(!g.path)S.path=x.path,g.params||(S.params=x.params,g.query||(S.query=x.query));else{var T=x.path,R=T.substring(0,T.lastIndexOf("/")+1)+g.path;S.path=u.normalizePath(R)}return S.path===null&&(S.path=h.alwaysNormalize?u.normalizePath(g.path):g.path),u.buildURLFromParts(S)},parseURL:function(c){var f=n.exec(c);return f?{scheme:f[1]||"",netLoc:f[2]||"",path:f[3]||"",params:f[4]||"",query:f[5]||"",fragment:f[6]||""}:null},normalizePath:function(c){for(c=c.split("").reverse().join("").replace(o,"");c.length!==(c=c.replace(a,"")).length;);return c.split("").reverse().join("")},buildURLFromParts:function(c){return c.scheme+c.netLoc+c.path+c.params+c.query+c.fragment}};r.exports=u})()})(AS);var Np=AS.exports;function jy(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Yt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jy(Object(t),!0).forEach(function(n){HL(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):jy(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function GL(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function jL(r){var e=GL(r,"string");return typeof e=="symbol"?e:String(e)}function HL(r,e,t){return e=jL(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ot(){return Ot=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ot.apply(this,arguments)}const Re=Number.isFinite||function(r){return typeof r=="number"&&isFinite(r)},VL=Number.isSafeInteger||function(r){return typeof r=="number"&&Math.abs(r)<=zL},zL=Number.MAX_SAFE_INTEGER||9007199254740991;let L=function(r){return r.MEDIA_ATTACHING="hlsMediaAttaching",r.MEDIA_ATTACHED="hlsMediaAttached",r.MEDIA_DETACHING="hlsMediaDetaching",r.MEDIA_DETACHED="hlsMediaDetached",r.BUFFER_RESET="hlsBufferReset",r.BUFFER_CODECS="hlsBufferCodecs",r.BUFFER_CREATED="hlsBufferCreated",r.BUFFER_APPENDING="hlsBufferAppending",r.BUFFER_APPENDED="hlsBufferAppended",r.BUFFER_EOS="hlsBufferEos",r.BUFFER_FLUSHING="hlsBufferFlushing",r.BUFFER_FLUSHED="hlsBufferFlushed",r.MANIFEST_LOADING="hlsManifestLoading",r.MANIFEST_LOADED="hlsManifestLoaded",r.MANIFEST_PARSED="hlsManifestParsed",r.LEVEL_SWITCHING="hlsLevelSwitching",r.LEVEL_SWITCHED="hlsLevelSwitched",r.LEVEL_LOADING="hlsLevelLoading",r.LEVEL_LOADED="hlsLevelLoaded",r.LEVEL_UPDATED="hlsLevelUpdated",r.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",r.LEVELS_UPDATED="hlsLevelsUpdated",r.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",r.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",r.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",r.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",r.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",r.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",r.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",r.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",r.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",r.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",r.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",r.CUES_PARSED="hlsCuesParsed",r.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",r.INIT_PTS_FOUND="hlsInitPtsFound",r.FRAG_LOADING="hlsFragLoading",r.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",r.FRAG_LOADED="hlsFragLoaded",r.FRAG_DECRYPTED="hlsFragDecrypted",r.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",r.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",r.FRAG_PARSING_METADATA="hlsFragParsingMetadata",r.FRAG_PARSED="hlsFragParsed",r.FRAG_BUFFERED="hlsFragBuffered",r.FRAG_CHANGED="hlsFragChanged",r.FPS_DROP="hlsFpsDrop",r.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",r.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",r.ERROR="hlsError",r.DESTROYING="hlsDestroying",r.KEY_LOADING="hlsKeyLoading",r.KEY_LOADED="hlsKeyLoaded",r.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",r.BACK_BUFFER_REACHED="hlsBackBufferReached",r.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",r}({}),Ne=function(r){return r.NETWORK_ERROR="networkError",r.MEDIA_ERROR="mediaError",r.KEY_SYSTEM_ERROR="keySystemError",r.MUX_ERROR="muxError",r.OTHER_ERROR="otherError",r}({}),J=function(r){return r.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",r.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",r.KEY_SYSTEM_NO_SESSION="keySystemNoSession",r.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",r.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",r.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",r.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",r.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",r.MANIFEST_LOAD_ERROR="manifestLoadError",r.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",r.MANIFEST_PARSING_ERROR="manifestParsingError",r.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",r.LEVEL_EMPTY_ERROR="levelEmptyError",r.LEVEL_LOAD_ERROR="levelLoadError",r.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",r.LEVEL_PARSING_ERROR="levelParsingError",r.LEVEL_SWITCH_ERROR="levelSwitchError",r.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",r.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",r.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",r.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",r.FRAG_LOAD_ERROR="fragLoadError",r.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",r.FRAG_DECRYPT_ERROR="fragDecryptError",r.FRAG_PARSING_ERROR="fragParsingError",r.FRAG_GAP="fragGap",r.REMUX_ALLOC_ERROR="remuxAllocError",r.KEY_LOAD_ERROR="keyLoadError",r.KEY_LOAD_TIMEOUT="keyLoadTimeOut",r.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",r.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",r.BUFFER_APPEND_ERROR="bufferAppendError",r.BUFFER_APPENDING_ERROR="bufferAppendingError",r.BUFFER_STALLED_ERROR="bufferStalledError",r.BUFFER_FULL_ERROR="bufferFullError",r.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",r.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",r.INTERNAL_EXCEPTION="internalException",r.INTERNAL_ABORTED="aborted",r.UNKNOWN="unknown",r}({});const vs=function(){},zh={trace:vs,debug:vs,log:vs,warn:vs,info:vs,error:vs};let $a=zh;function KL(r){const e=self.console[r];return e?e.bind(self.console,`[${r}] >`):vs}function WL(r,...e){e.forEach(function(t){$a[t]=r[t]?r[t].bind(r):KL(t)})}function YL(r,e){if(typeof console=="object"&&r===!0||typeof r=="object"){WL(r,"debug","log","info","warn","error");try{$a.log(`Debug logs enabled for "${e}" in hls.js version 1.5.18`)}catch{$a=zh}}else $a=zh}const j=$a,qL=/^(\d+)x(\d+)$/,Hy=/(.+?)=(".*?"|.*?)(?:,|$)/g;class wt{constructor(e){typeof e=="string"&&(e=wt.parseAttrList(e)),Ot(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const n=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(i*2,i*2+2),16);return n}else return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const t=qL.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const n={},i='"';for(Hy.lastIndex=0;(t=Hy.exec(e))!==null;){let o=t[2];o.indexOf(i)===0&&o.lastIndexOf(i)===o.length-1&&(o=o.slice(1,-1));const a=t[1].trim();n[a]=o}return n}}function XL(r){return r!=="ID"&&r!=="CLASS"&&r!=="START-DATE"&&r!=="DURATION"&&r!=="END-DATE"&&r!=="END-ON-NEXT"}function QL(r){return r==="SCTE35-OUT"||r==="SCTE35-IN"}class LS{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const n=t.attr;for(const i in n)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==n[i]){j.warn(`DATERANGE tag attribute: "${i}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=i;break}e=Ot(new wt({}),n,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const n=new Date(this.attr["END-DATE"]);Re(n.getTime())&&(this._endDate=n)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Re(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&Re(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class jc{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var st={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class bS{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[st.AUDIO]:null,[st.VIDEO]:null,[st.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,t){const n=e.split("@",2);let i;n.length===1?i=(t==null?void 0:t.byteRangeEndOffset)||0:i=parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Np.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class nh extends bS{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new jc,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const n=Object.keys(this.levelkeys);if(n.length===1)return this._decryptdata=this.levelkeys[n[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!Re(this.programDateTime))return null;const e=Re(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),n=t.length;if(n>1||n===1&&this.levelkeys[t[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,n,i,o,a=!1){const{elementaryStreams:u}=this,c=u[e];if(!c){u[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:o,partial:a};return}c.startPTS=Math.min(c.startPTS,t),c.endPTS=Math.max(c.endPTS,n),c.startDTS=Math.min(c.startDTS,i),c.endDTS=Math.max(c.endDTS,o)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[st.AUDIO]=null,e[st.VIDEO]=null,e[st.AUDIOVIDEO]=null}}class JL extends bS{constructor(e,t,n,i,o){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new jc,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,o),o&&(this.fragOffset=o.fragOffset+o.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const ZL=10;class eb{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?Re(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||ZL}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function Bp(r){return Uint8Array.from(atob(r),e=>e.charCodeAt(0))}function tb(r){const e=Kh(r).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function rb(r){const e=function(n,i,o){const a=n[i];n[i]=n[o],n[o]=a};e(r,0,3),e(r,1,2),e(r,4,5),e(r,6,7)}function nb(r){const e=r.split(":");let t=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),i=n[n.length-1].split(",");if(i.length===2){const o=i[0]==="base64",a=i[1];o?(n.splice(-1,1),t=Bp(a)):t=tb(a)}}return t}function Kh(r){return Uint8Array.from(unescape(encodeURIComponent(r)),e=>e.charCodeAt(0))}const _o=typeof self<"u"?self:void 0;var pt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Er={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Vy(r){switch(r){case Er.FAIRPLAY:return pt.FAIRPLAY;case Er.PLAYREADY:return pt.PLAYREADY;case Er.WIDEVINE:return pt.WIDEVINE;case Er.CLEARKEY:return pt.CLEARKEY}}var Fa={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",FAIRPLAY:"94ce86fb07ff4f43adb893d2fa968ca2",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function zy(r){if(r===Fa.WIDEVINE)return pt.WIDEVINE;if(r===Fa.PLAYREADY)return pt.PLAYREADY;if(r===Fa.CENC||r===Fa.CLEARKEY)return pt.CLEARKEY}function Ky(r){switch(r){case pt.FAIRPLAY:return Er.FAIRPLAY;case pt.PLAYREADY:return Er.PLAYREADY;case pt.WIDEVINE:return Er.WIDEVINE;case pt.CLEARKEY:return Er.CLEARKEY}}function ih(r){const{drmSystems:e,widevineLicenseUrl:t}=r,n=e?[pt.FAIRPLAY,pt.WIDEVINE,pt.PLAYREADY,pt.CLEARKEY].filter(i=>!!e[i]):[];return!n[pt.WIDEVINE]&&t&&n.push(pt.WIDEVINE),n}const CS=function(r){return _o!=null&&(r=_o.navigator)!=null&&r.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function ib(r,e,t,n){let i;switch(r){case pt.FAIRPLAY:i=["cenc","sinf"];break;case pt.WIDEVINE:case pt.PLAYREADY:i=["cenc"];break;case pt.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${r}`)}return sb(i,e,t,n)}function sb(r,e,t,n){return[{initDataTypes:r,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(o=>({contentType:`audio/mp4; codecs="${o}"`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:t.map(o=>({contentType:`video/mp4; codecs="${o}"`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function bs(r,e,t){return Uint8Array.prototype.slice?r.slice(e,t):new Uint8Array(Array.prototype.slice.call(r,e,t))}const $p=(r,e)=>e+10<=r.length&&r[e]===73&&r[e+1]===68&&r[e+2]===51&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128,kS=(r,e)=>e+10<=r.length&&r[e]===51&&r[e+1]===68&&r[e+2]===73&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128,Ha=(r,e)=>{const t=e;let n=0;for(;$p(r,e);){n+=10;const i=Hc(r,e+6);n+=i,kS(r,e+10)&&(n+=10),e+=n}if(n>0)return r.subarray(t,t+n)},Hc=(r,e)=>{let t=0;return t=(r[e]&127)<<21,t|=(r[e+1]&127)<<14,t|=(r[e+2]&127)<<7,t|=r[e+3]&127,t},ob=(r,e)=>$p(r,e)&&Hc(r,e+6)+10<=r.length-e,Up=r=>{const e=DS(r);for(let t=0;t<e.length;t++){const n=e[t];if(IS(n))return fb(n)}},IS=r=>r&&r.key==="PRIV"&&r.info==="com.apple.streaming.transportStreamTimestamp",ab=r=>{const e=String.fromCharCode(r[0],r[1],r[2],r[3]),t=Hc(r,4),n=10;return{type:e,size:t,data:r.subarray(n,n+t)}},DS=r=>{let e=0;const t=[];for(;$p(r,e);){const n=Hc(r,e+6);e+=10;const i=e+n;for(;e+8<i;){const o=ab(r.subarray(e)),a=lb(o);a&&t.push(a),e+=o.size+10}kS(r,e)&&(e+=10)}return t},lb=r=>r.type==="PRIV"?ub(r):r.type[0]==="W"?db(r):cb(r),ub=r=>{if(r.size<2)return;const e=Gn(r.data,!0),t=new Uint8Array(r.data.subarray(e.length+1));return{key:r.type,info:e,data:t.buffer}},cb=r=>{if(r.size<2)return;if(r.type==="TXXX"){let t=1;const n=Gn(r.data.subarray(t),!0);t+=n.length+1;const i=Gn(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=Gn(r.data.subarray(1));return{key:r.type,data:e}},db=r=>{if(r.type==="WXXX"){if(r.size<2)return;let t=1;const n=Gn(r.data.subarray(t),!0);t+=n.length+1;const i=Gn(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=Gn(r.data);return{key:r.type,data:e}},fb=r=>{if(r.data.byteLength===8){const e=new Uint8Array(r.data),t=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,t&&(n+=4772185884e-2),Math.round(n)}},Gn=(r,e=!1)=>{const t=hb();if(t){const f=t.decode(r);if(e){const h=f.indexOf("\0");return h!==-1?f.substring(0,h):f}return f.replace(/\0/g,"")}const n=r.length;let i,o,a,u="",c=0;for(;c<n;){if(i=r[c++],i===0&&e)return u;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(i);break;case 12:case 13:o=r[c++],u+=String.fromCharCode((i&31)<<6|o&63);break;case 14:o=r[c++],a=r[c++],u+=String.fromCharCode((i&15)<<12|(o&63)<<6|(a&63)<<0);break}}return u};let sh;function hb(){if(!navigator.userAgent.includes("PlayStation 4"))return!sh&&typeof self.TextDecoder<"u"&&(sh=new self.TextDecoder("utf-8")),sh}const Pn={hexDump:function(r){let e="";for(let t=0;t<r.length;t++){let n=r[t].toString(16);n.length<2&&(n="0"+n),e+=n}return e}},hc=Math.pow(2,32)-1,pb=[].push,PS={video:1,audio:2,id3:3,text:4};function Ut(r){return String.fromCharCode.apply(null,r)}function _S(r,e){const t=r[e]<<8|r[e+1];return t<0?65536+t:t}function Oe(r,e){const t=OS(r,e);return t<0?4294967296+t:t}function Wy(r,e){let t=Oe(r,e);return t*=Math.pow(2,32),t+=Oe(r,e+4),t}function OS(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}function oh(r,e,t){r[e]=t>>24,r[e+1]=t>>16&255,r[e+2]=t>>8&255,r[e+3]=t&255}function mb(r){const e=r.byteLength;for(let t=0;t<e;){const n=Oe(r,t);if(n>8&&r[t+4]===109&&r[t+5]===111&&r[t+6]===111&&r[t+7]===102)return!0;t=n>1?t+n:e}return!1}function je(r,e){const t=[];if(!e.length)return t;const n=r.byteLength;for(let i=0;i<n;){const o=Oe(r,i),a=Ut(r.subarray(i+4,i+8)),u=o>1?i+o:n;if(a===e[0])if(e.length===1)t.push(r.subarray(i+8,u));else{const c=je(r.subarray(i+8,u),e.slice(1));c.length&&pb.apply(t,c)}i=u}return t}function gb(r){const e=[],t=r[0];let n=8;const i=Oe(r,n);n+=4;let o=0,a=0;t===0?(o=Oe(r,n),a=Oe(r,n+4),n+=8):(o=Wy(r,n),a=Wy(r,n+8),n+=16),n+=2;let u=r.length+a;const c=_S(r,n);n+=2;for(let f=0;f<c;f++){let h=n;const p=Oe(r,h);h+=4;const g=p&2147483647;if((p&2147483648)>>>31===1)return j.warn("SIDX has hierarchical references (not supported)"),null;const y=Oe(r,h);h+=4,e.push({referenceSize:g,subsegmentDuration:y,info:{duration:y/i,start:u,end:u+g-1}}),u+=g,h+=4,n=h}return{earliestPresentationTime:o,timescale:i,version:t,referencesCount:c,references:e}}function FS(r){const e=[],t=je(r,["moov","trak"]);for(let i=0;i<t.length;i++){const o=t[i],a=je(o,["tkhd"])[0];if(a){let u=a[0];const c=Oe(a,u===0?12:20),f=je(o,["mdia","mdhd"])[0];if(f){u=f[0];const h=Oe(f,u===0?12:20),p=je(o,["mdia","hdlr"])[0];if(p){const g=Ut(p.subarray(8,12)),x={soun:st.AUDIO,vide:st.VIDEO}[g];if(x){const y=je(o,["mdia","minf","stbl","stsd"])[0],S=yb(y);e[c]={timescale:h,type:x},e[x]=Yt({timescale:h,id:c},S)}}}}}return je(r,["moov","mvex","trex"]).forEach(i=>{const o=Oe(i,4),a=e[o];a&&(a.default={duration:Oe(i,12),flags:Oe(i,20)})}),e}function yb(r){const e=r.subarray(8),t=e.subarray(86),n=Ut(e.subarray(4,8));let i=n;const o=n==="enca"||n==="encv";if(o){const u=je(e,[n])[0].subarray(n==="enca"?28:78);je(u,["sinf"]).forEach(f=>{const h=je(f,["schm"])[0];if(h){const p=Ut(h.subarray(4,8));if(p==="cbcs"||p==="cenc"){const g=je(f,["frma"])[0];g&&(i=Ut(g))}}})}switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const a=je(t,["avcC"])[0];i+="."+Tu(a[1])+Tu(a[2])+Tu(a[3]);break}case"mp4a":{const a=je(e,[n])[0],u=je(a.subarray(28),["esds"])[0];if(u&&u.length>12){let c=4;if(u[c++]!==3)break;c=ah(u,c),c+=2;const f=u[c++];if(f&128&&(c+=2),f&64&&(c+=u[c++]),u[c++]!==4)break;c=ah(u,c);const h=u[c++];if(h===64)i+="."+Tu(h);else break;if(c+=12,u[c++]!==5)break;c=ah(u,c);const p=u[c++];let g=(p&248)>>3;g===31&&(g+=1+((p&7)<<3)+((u[c]&224)>>5)),i+="."+g}break}case"hvc1":case"hev1":{const a=je(t,["hvcC"])[0],u=a[1],c=["","A","B","C"][u>>6],f=u&31,h=Oe(a,2),p=(u&32)>>5?"H":"L",g=a[12],x=a.subarray(6,12);i+="."+c+f,i+="."+h.toString(16).toUpperCase(),i+="."+p+g;let y="";for(let S=x.length;S--;){const T=x[S];(T||y)&&(y="."+T.toString(16).toUpperCase()+y)}i+=y;break}case"dvh1":case"dvhe":{const a=je(t,["dvcC"])[0],u=a[2]>>1&127,c=a[2]<<5&32|a[3]>>3&31;i+="."+kn(u)+"."+kn(c);break}case"vp09":{const a=je(t,["vpcC"])[0],u=a[4],c=a[5],f=a[6]>>4&15;i+="."+kn(u)+"."+kn(c)+"."+kn(f);break}case"av01":{const a=je(t,["av1C"])[0],u=a[1]>>>5,c=a[1]&31,f=a[2]>>>7?"H":"M",h=(a[2]&64)>>6,p=(a[2]&32)>>5,g=u===2&&h?p?12:10:h?10:8,x=(a[2]&16)>>4,y=(a[2]&8)>>3,S=(a[2]&4)>>2,T=a[2]&3;i+="."+u+"."+kn(c)+f+"."+kn(g)+"."+x+"."+y+S+T+"."+kn(1)+"."+kn(1)+"."+kn(1)+"."+0;break}}return{codec:i,encrypted:o}}function ah(r,e){const t=e+5;for(;r[e++]&128&&e<t;);return e}function Tu(r){return("0"+r.toString(16).toUpperCase()).slice(-2)}function kn(r){return(r<10?"0":"")+r}function vb(r,e){if(!r||!e)return r;const t=e.keyId;return t&&e.isCommonEncryption&&je(r,["moov","trak"]).forEach(i=>{const a=je(i,["mdia","minf","stbl","stsd"])[0].subarray(8);let u=je(a,["enca"]);const c=u.length>0;c||(u=je(a,["encv"])),u.forEach(f=>{const h=c?f.subarray(28):f.subarray(78);je(h,["sinf"]).forEach(g=>{const x=MS(g);if(x){const y=x.subarray(8,24);y.some(S=>S!==0)||(j.log(`[eme] Patching keyId in 'enc${c?"a":"v"}>sinf>>tenc' box: ${Pn.hexDump(y)} -> ${Pn.hexDump(t)}`),x.set(t,8))}})})}),r}function MS(r){const e=je(r,["schm"])[0];if(e){const t=Ut(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return je(r,["schi","tenc"])[0]}return null}function xb(r,e){return je(e,["moof","traf"]).reduce((t,n)=>{const i=je(n,["tfdt"])[0],o=i[0],a=je(n,["tfhd"]).reduce((u,c)=>{const f=Oe(c,4),h=r[f];if(h){let p=Oe(i,4);if(o===1){if(p===hc)return j.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),u;p*=hc+1,p+=Oe(i,8)}const g=h.timescale||9e4,x=p/g;if(Re(x)&&(u===null||x<u))return x}return u},null);return a!==null&&Re(a)&&(t===null||a<t)?a:t},null)}function Sb(r,e){let t=0,n=0,i=0;const o=je(r,["moof","traf"]);for(let a=0;a<o.length;a++){const u=o[a],c=je(u,["tfhd"])[0],f=Oe(c,4),h=e[f];if(!h)continue;const p=h.default,g=Oe(c,0)|(p==null?void 0:p.flags);let x=p==null?void 0:p.duration;g&8&&(g&2?x=Oe(c,12):x=Oe(c,8));const y=h.timescale||9e4,S=je(u,["trun"]);for(let T=0;T<S.length;T++){if(t=Eb(S[T]),!t&&x){const R=Oe(S[T],4);t=x*R}h.type===st.VIDEO?n+=t/y:h.type===st.AUDIO&&(i+=t/y)}}if(n===0&&i===0){let a=1/0,u=0,c=0;const f=je(r,["sidx"]);for(let h=0;h<f.length;h++){const p=gb(f[h]);if(p!=null&&p.references){a=Math.min(a,p.earliestPresentationTime/p.timescale);const g=p.references.reduce((x,y)=>x+y.info.duration||0,0);u=Math.max(u,g+p.earliestPresentationTime/p.timescale),c=u-a}}if(c&&Re(c))return c}return n||i}function Eb(r){const e=Oe(r,0);let t=8;e&1&&(t+=4),e&4&&(t+=4);let n=0;const i=Oe(r,4);for(let o=0;o<i;o++){if(e&256){const a=Oe(r,t);n+=a,t+=4}e&512&&(t+=4),e&1024&&(t+=4),e&2048&&(t+=4)}return n}function Tb(r,e,t){je(e,["moof","traf"]).forEach(n=>{je(n,["tfhd"]).forEach(i=>{const o=Oe(i,4),a=r[o];if(!a)return;const u=a.timescale||9e4;je(n,["tfdt"]).forEach(c=>{const f=c[0],h=t*u;if(h){let p=Oe(c,4);if(f===0)p-=h,p=Math.max(p,0),oh(c,4,p);else{p*=Math.pow(2,32),p+=Oe(c,8),p-=h,p=Math.max(p,0);const g=Math.floor(p/(hc+1)),x=Math.floor(p%(hc+1));oh(c,4,g),oh(c,8,x)}}})})})}function wb(r){const e={valid:null,remainder:null},t=je(r,["moof"]);if(t.length<2)return e.remainder=r,e;const n=t[t.length-1];return e.valid=bs(r,0,n.byteOffset-8),e.remainder=bs(r,n.byteOffset-8),e}function nn(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function Yy(r,e){const t=[],n=e.samples,i=e.timescale,o=e.id;let a=!1;return je(n,["moof"]).map(c=>{const f=c.byteOffset-8;je(c,["traf"]).map(p=>{const g=je(p,["tfdt"]).map(x=>{const y=x[0];let S=Oe(x,4);return y===1&&(S*=Math.pow(2,32),S+=Oe(x,8)),S/i})[0];return g!==void 0&&(r=g),je(p,["tfhd"]).map(x=>{const y=Oe(x,4),S=Oe(x,0)&16777215,T=(S&1)!==0,R=(S&2)!==0,k=(S&8)!==0;let C=0;const I=(S&16)!==0;let w=0;const P=(S&32)!==0;let D=8;y===o&&(T&&(D+=8),R&&(D+=4),k&&(C=Oe(x,D),D+=4),I&&(w=Oe(x,D),D+=4),P&&(D+=4),e.type==="video"&&(a=Rb(e.codec)),je(p,["trun"]).map(U=>{const Q=U[0],A=Oe(U,0)&16777215,$=(A&1)!==0;let ie=0;const te=(A&4)!==0,fe=(A&256)!==0;let de=0;const pe=(A&512)!==0;let ge=0;const ne=(A&1024)!==0,Y=(A&2048)!==0;let q=0;const F=Oe(U,4);let H=8;$&&(ie=Oe(U,H),H+=4),te&&(H+=4);let me=ie+f;for(let ve=0;ve<F;ve++){if(fe?(de=Oe(U,H),H+=4):de=C,pe?(ge=Oe(U,H),H+=4):ge=w,ne&&(H+=4),Y&&(Q===0?q=Oe(U,H):q=OS(U,H),H+=4),e.type===st.VIDEO){let Se=0;for(;Se<ge;){const be=Oe(n,me);if(me+=4,Ab(a,n[me])){const Me=n.subarray(me,me+be);NS(Me,a?2:1,r+q/i,t)}me+=be,Se+=be+4}}r+=de/i}}))})})}),t}function Rb(r){if(!r)return!1;const e=r.indexOf("."),t=e<0?r:r.substring(0,e);return t==="hvc1"||t==="hev1"||t==="dvh1"||t==="dvhe"}function Ab(r,e){if(r){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function NS(r,e,t,n){const i=BS(r);let o=0;o+=e;let a=0,u=0,c=0;for(;o<i.length;){a=0;do{if(o>=i.length)break;c=i[o++],a+=c}while(c===255);u=0;do{if(o>=i.length)break;c=i[o++],u+=c}while(c===255);const f=i.length-o;let h=o;if(u<f)o+=u;else if(u>f){j.error(`Malformed SEI payload. ${u} is too small, only ${f} bytes left to parse.`);break}if(a===4){if(i[h++]===181){const g=_S(i,h);if(h+=2,g===49){const x=Oe(i,h);if(h+=4,x===1195456820){const y=i[h++];if(y===3){const S=i[h++],T=31&S,R=64&S,k=R?2+T*3:0,C=new Uint8Array(k);if(R){C[0]=S;for(let I=1;I<k;I++)C[I]=i[h++]}n.push({type:y,payloadType:a,pts:t,bytes:C})}}}}}else if(a===5&&u>16){const p=[];for(let y=0;y<16;y++){const S=i[h++].toString(16);p.push(S.length==1?"0"+S:S),(y===3||y===5||y===7||y===9)&&p.push("-")}const g=u-16,x=new Uint8Array(g);for(let y=0;y<g;y++)x[y]=i[h++];n.push({payloadType:a,pts:t,uuid:p.join(""),userData:Gn(x),userDataBytes:x})}}}function BS(r){const e=r.byteLength,t=[];let n=1;for(;n<e-2;)r[n]===0&&r[n+1]===0&&r[n+2]===3?(t.push(n+2),n+=2):n++;if(t.length===0)return r;const i=e-t.length,o=new Uint8Array(i);let a=0;for(n=0;n<i;a++,n++)a===t[0]&&(a++,t.shift()),o[n]=r[a];return o}function Lb(r){const e=r[0];let t="",n="",i=0,o=0,a=0,u=0,c=0,f=0;if(e===0){for(;Ut(r.subarray(f,f+1))!=="\0";)t+=Ut(r.subarray(f,f+1)),f+=1;for(t+=Ut(r.subarray(f,f+1)),f+=1;Ut(r.subarray(f,f+1))!=="\0";)n+=Ut(r.subarray(f,f+1)),f+=1;n+=Ut(r.subarray(f,f+1)),f+=1,i=Oe(r,12),o=Oe(r,16),u=Oe(r,20),c=Oe(r,24),f=28}else if(e===1){f+=4,i=Oe(r,f),f+=4;const p=Oe(r,f);f+=4;const g=Oe(r,f);for(f+=4,a=2**32*p+g,VL(a)||(a=Number.MAX_SAFE_INTEGER,j.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),u=Oe(r,f),f+=4,c=Oe(r,f),f+=4;Ut(r.subarray(f,f+1))!=="\0";)t+=Ut(r.subarray(f,f+1)),f+=1;for(t+=Ut(r.subarray(f,f+1)),f+=1;Ut(r.subarray(f,f+1))!=="\0";)n+=Ut(r.subarray(f,f+1)),f+=1;n+=Ut(r.subarray(f,f+1)),f+=1}const h=r.subarray(f,r.byteLength);return{schemeIdUri:t,value:n,timeScale:i,presentationTime:a,presentationTimeDelta:o,eventDuration:u,id:c,payload:h}}function bb(r,...e){const t=e.length;let n=8,i=t;for(;i--;)n+=e[i].byteLength;const o=new Uint8Array(n);for(o[0]=n>>24&255,o[1]=n>>16&255,o[2]=n>>8&255,o[3]=n&255,o.set(r,4),i=0,n=8;i<t;i++)o.set(e[i],n),n+=e[i].byteLength;return o}function Cb(r,e,t){if(r.byteLength!==16)throw new RangeError("Invalid system id");let n,i;n=0,i=new Uint8Array;let o;n>0?(o=new Uint8Array(4),e.length>0&&new DataView(o.buffer).setUint32(0,e.length,!1)):o=new Uint8Array;const a=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),bb([112,115,115,104],new Uint8Array([n,0,0,0]),r,o,i,a,t||new Uint8Array)}function kb(r){const e=[];if(r instanceof ArrayBuffer){const t=r.byteLength;let n=0;for(;n+32<t;){const i=new DataView(r,n),o=Ib(i);e.push(o),n+=o.size}}return e}function Ib(r){const e=r.getUint32(0),t=r.byteOffset,n=r.byteLength;if(n<e)return{offset:t,size:n};if(r.getUint32(4)!==1886614376)return{offset:t,size:e};const o=r.getUint32(8)>>>24;if(o!==0&&o!==1)return{offset:t,size:e};const a=r.buffer,u=Pn.hexDump(new Uint8Array(a,t+12,16)),c=r.getUint32(28);let f=null,h=null;if(o===0){if(e-32<c||c<22)return{offset:t,size:e};h=new Uint8Array(a,t+32,c)}else if(o===1){if(!c||n<t+32+c*16+16)return{offset:t,size:e};f=[];for(let p=0;p<c;p++)f.push(new Uint8Array(a,t+32+p*16,16))}return{version:o,systemId:u,kids:f,data:h,offset:t,size:e}}let wu={};class Va{static clearKeyUriToKeyIdMap(){wu={}}constructor(e,t,n,i=[1],o=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=o,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Er.FAIRPLAY:case Er.WIDEVINE:case Er.PLAYREADY:case Er.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&j.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const n=Db(e);return new Va(this.method,this.uri,"identity",this.keyFormatVersions,n)}const t=nb(this.uri);if(t)switch(this.keyFormat){case Er.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case Er.PLAYREADY:{const n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Cb(n,null,t);const i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),o=String.fromCharCode.apply(null,Array.from(i)),a=o.substring(o.indexOf("<"),o.length),f=new DOMParser().parseFromString(a,"text/xml").getElementsByTagName("KID")[0];if(f){const h=f.childNodes[0]?f.childNodes[0].nodeValue:f.getAttribute("VALUE");if(h){const p=Bp(h).subarray(0,16);rb(p),this.keyId=p}}break}default:{let n=t.subarray(0,16);if(n.length!==16){const i=new Uint8Array(16);i.set(n,16-n.length),n=i}this.keyId=n;break}}if(!this.keyId||this.keyId.byteLength!==16){let n=wu[this.uri];if(!n){const i=Object.keys(wu).length%Number.MAX_SAFE_INTEGER;n=new Uint8Array(16),new DataView(n.buffer,12,4).setUint32(0,i),wu[this.uri]=n}this.keyId=n}return this}}function Db(r){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=r>>8*(15-t)&255;return e}const $S=/\{\$([a-zA-Z0-9-_]+)\}/g;function qy(r){return $S.test(r)}function Sr(r,e,t){if(r.variableList!==null||r.hasVariableRefs)for(let n=t.length;n--;){const i=t[n],o=e[i];o&&(e[i]=Wh(r,o))}}function Wh(r,e){if(r.variableList!==null||r.hasVariableRefs){const t=r.variableList;return e.replace($S,n=>{const i=n.substring(2,n.length-1),o=t==null?void 0:t[i];return o===void 0?(r.playlistParsingError||(r.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),n):o})}return e}function Xy(r,e,t){let n=r.variableList;n||(r.variableList=n={});let i,o;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const a=new self.URL(t).searchParams;if(a.has(i))o=a.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(a){r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else i=e.NAME,o=e.VALUE;i in n?r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):n[i]=o||""}function Pb(r,e,t){const n=e.IMPORT;if(t&&n in t){let i=r.variableList;i||(r.variableList=i={}),i[n]=t[n]}else r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}function ks(r=!0){return typeof self>"u"?void 0:(r||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function _b(r){return typeof self<"u"&&r===self.ManagedMediaSource}const pc={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Ob(r,e){const t=pc[e];return!!t&&!!t[r.slice(0,4)]}function lh(r,e,t=!0){return!r.split(",").some(n=>!US(n,e,t))}function US(r,e,t=!0){var n;const i=ks(t);return(n=i==null?void 0:i.isTypeSupported(za(r,e)))!=null?n:!1}function za(r,e){return`${e}/mp4;codecs="${r}"`}function Qy(r){if(r){const e=r.substring(0,4);return pc.video[e]}return 2}function mc(r){return r.split(",").reduce((e,t)=>{const n=pc.video[t];return n?(n*2+e)/(e?3:2):(pc.audio[t]+e)/(e?2:1)},0)}const uh={};function Fb(r,e=!0){if(uh[r])return uh[r];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[r];for(let n=0;n<t.length;n++)if(US(t[n],"audio",e))return uh[r]=t[n],t[n];return r}const Mb=/flac|opus/i;function gc(r,e=!0){return r.replace(Mb,t=>Fb(t.toLowerCase(),e))}function Jy(r,e){return r&&r!=="mp4a"?r:e&&e.split(",")[0]}function Nb(r){const e=r.split(",");for(let t=0;t<e.length;t++){const n=e[t].split(".");if(n.length>2){let i=n.shift()+".";i+=parseInt(n.shift()).toString(16),i+=("000"+parseInt(n.shift()).toString(16)).slice(-4),e[t]=i}}return e.join(",")}const Zy=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,ev=/#EXT-X-MEDIA:(.*)/g,Bb=/^#EXT(?:INF|-X-TARGETDURATION):/m,tv=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),$b=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Bn{static findGroup(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===t)return i}}static resolve(e,t){return Np.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return Bb.test(e)}static parseMasterPlaylist(e,t){const n=qy(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},o=[];Zy.lastIndex=0;let a;for(;(a=Zy.exec(e))!=null;)if(a[1]){var u;const f=new wt(a[1]);Sr(i,f,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const h=Wh(i,a[2]),p={attrs:f,bitrate:f.decimalInteger("BANDWIDTH")||f.decimalInteger("AVERAGE-BANDWIDTH"),name:f.NAME,url:Bn.resolve(h,t)},g=f.decimalResolution("RESOLUTION");g&&(p.width=g.width,p.height=g.height),Ub(f.CODECS,p),(u=p.unknownCodecs)!=null&&u.length||o.push(p),i.levels.push(p)}else if(a[3]){const f=a[3],h=a[4];switch(f){case"SESSION-DATA":{const p=new wt(h);Sr(i,p,["DATA-ID","LANGUAGE","VALUE","URI"]);const g=p["DATA-ID"];g&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[g]=p);break}case"SESSION-KEY":{const p=rv(h,t,i);p.encrypted&&p.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(p)):j.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${h}"`);break}case"DEFINE":{{const p=new wt(h);Sr(i,p,["NAME","VALUE","QUERYPARAM"]),Xy(i,p,t)}break}case"CONTENT-STEERING":{const p=new wt(h);Sr(i,p,["SERVER-URI","PATHWAY-ID"]),i.contentSteering={uri:Bn.resolve(p["SERVER-URI"],t),pathwayId:p["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=nv(h);break}}}const c=o.length>0&&o.length<i.levels.length;return i.levels=c?o:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,n){let i;const o={},a=n.levels,u={AUDIO:a.map(f=>({id:f.attrs.AUDIO,audioCodec:f.audioCodec})),SUBTITLES:a.map(f=>({id:f.attrs.SUBTITLES,textCodec:f.textCodec})),"CLOSED-CAPTIONS":[]};let c=0;for(ev.lastIndex=0;(i=ev.exec(e))!==null;){const f=new wt(i[1]),h=f.TYPE;if(h){const p=u[h],g=o[h]||[];o[h]=g,Sr(n,f,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const x=f.LANGUAGE,y=f["ASSOC-LANGUAGE"],S=f.CHANNELS,T=f.CHARACTERISTICS,R=f["INSTREAM-ID"],k={attrs:f,bitrate:0,id:c++,groupId:f["GROUP-ID"]||"",name:f.NAME||x||"",type:h,default:f.bool("DEFAULT"),autoselect:f.bool("AUTOSELECT"),forced:f.bool("FORCED"),lang:x,url:f.URI?Bn.resolve(f.URI,t):""};if(y&&(k.assocLang=y),S&&(k.channels=S),T&&(k.characteristics=T),R&&(k.instreamId=R),p!=null&&p.length){const C=Bn.findGroup(p,k.groupId)||p[0];iv(k,C,"audioCodec"),iv(k,C,"textCodec")}g.push(k)}}return o}static parseLevelPlaylist(e,t,n,i,o,a){const u=new eb(t),c=u.fragments;let f=null,h=0,p=0,g=0,x=0,y=null,S=new nh(i,t),T,R,k,C=-1,I=!1,w=null;for(tv.lastIndex=0,u.m3u8=e,u.hasVariableRefs=qy(e);(T=tv.exec(e))!==null;){I&&(I=!1,S=new nh(i,t),S.start=g,S.sn=h,S.cc=x,S.level=n,f&&(S.initSegment=f,S.rawProgramDateTime=f.rawProgramDateTime,f.rawProgramDateTime=null,w&&(S.setByteRange(w),w=null)));const Q=T[1];if(Q){S.duration=parseFloat(Q);const A=(" "+T[2]).slice(1);S.title=A||null,S.tagList.push(A?["INF",Q,A]:["INF",Q])}else if(T[3]){if(Re(S.duration)){S.start=g,k&&av(S,k,u),S.sn=h,S.level=n,S.cc=x,c.push(S);const A=(" "+T[3]).slice(1);S.relurl=Wh(u,A),sv(S,y),y=S,g+=S.duration,h++,p=0,I=!0}}else if(T[4]){const A=(" "+T[4]).slice(1);y?S.setByteRange(A,y):S.setByteRange(A)}else if(T[5])S.rawProgramDateTime=(" "+T[5]).slice(1),S.tagList.push(["PROGRAM-DATE-TIME",S.rawProgramDateTime]),C===-1&&(C=c.length);else{if(T=T[0].match($b),!T){j.warn("No matches on slow regex match for level playlist!");continue}for(R=1;R<T.length&&!(typeof T[R]<"u");R++);const A=(" "+T[R]).slice(1),$=(" "+T[R+1]).slice(1),ie=T[R+2]?(" "+T[R+2]).slice(1):"";switch(A){case"PLAYLIST-TYPE":u.type=$.toUpperCase();break;case"MEDIA-SEQUENCE":h=u.startSN=parseInt($);break;case"SKIP":{const te=new wt($);Sr(u,te,["RECENTLY-REMOVED-DATERANGES"]);const fe=te.decimalInteger("SKIPPED-SEGMENTS");if(Re(fe)){u.skippedSegments=fe;for(let pe=fe;pe--;)c.unshift(null);h+=fe}const de=te.enumeratedString("RECENTLY-REMOVED-DATERANGES");de&&(u.recentlyRemovedDateranges=de.split("	"));break}case"TARGETDURATION":u.targetduration=Math.max(parseInt($),1);break;case"VERSION":u.version=parseInt($);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"#":($||ie)&&S.tagList.push(ie?[$,ie]:[$]);break;case"DISCONTINUITY":x++,S.tagList.push(["DIS"]);break;case"GAP":S.gap=!0,S.tagList.push([A]);break;case"BITRATE":S.tagList.push([A,$]);break;case"DATERANGE":{const te=new wt($);Sr(u,te,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Sr(u,te,te.clientAttrs);const fe=new LS(te,u.dateRanges[te.ID]);fe.isValid||u.skippedSegments?u.dateRanges[fe.id]=fe:j.warn(`Ignoring invalid DATERANGE tag: "${$}"`),S.tagList.push(["EXT-X-DATERANGE",$]);break}case"DEFINE":{{const te=new wt($);Sr(u,te,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in te?Pb(u,te,a):Xy(u,te,t)}break}case"DISCONTINUITY-SEQUENCE":x=parseInt($);break;case"KEY":{const te=rv($,t,u);if(te.isSupported()){if(te.method==="NONE"){k=void 0;break}k||(k={}),k[te.keyFormat]&&(k=Ot({},k)),k[te.keyFormat]=te}else j.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${$}"`);break}case"START":u.startTimeOffset=nv($);break;case"MAP":{const te=new wt($);if(Sr(u,te,["BYTERANGE","URI"]),S.duration){const fe=new nh(i,t);ov(fe,te,n,k),f=fe,S.initSegment=f,f.rawProgramDateTime&&!S.rawProgramDateTime&&(S.rawProgramDateTime=f.rawProgramDateTime)}else{const fe=S.byteRangeEndOffset;if(fe){const de=S.byteRangeStartOffset;w=`${fe-de}@${de}`}else w=null;ov(S,te,n,k),f=S,I=!0}break}case"SERVER-CONTROL":{const te=new wt($);u.canBlockReload=te.bool("CAN-BLOCK-RELOAD"),u.canSkipUntil=te.optionalFloat("CAN-SKIP-UNTIL",0),u.canSkipDateRanges=u.canSkipUntil>0&&te.bool("CAN-SKIP-DATERANGES"),u.partHoldBack=te.optionalFloat("PART-HOLD-BACK",0),u.holdBack=te.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const te=new wt($);u.partTarget=te.decimalFloatingPoint("PART-TARGET");break}case"PART":{let te=u.partList;te||(te=u.partList=[]);const fe=p>0?te[te.length-1]:void 0,de=p++,pe=new wt($);Sr(u,pe,["BYTERANGE","URI"]);const ge=new JL(pe,S,t,de,fe);te.push(ge),S.duration+=ge.duration;break}case"PRELOAD-HINT":{const te=new wt($);Sr(u,te,["URI"]),u.preloadHint=te;break}case"RENDITION-REPORT":{const te=new wt($);Sr(u,te,["URI"]),u.renditionReports=u.renditionReports||[],u.renditionReports.push(te);break}default:j.warn(`line parsed but not handled: ${T}`);break}}}y&&!y.relurl?(c.pop(),g-=y.duration,u.partList&&(u.fragmentHint=y)):u.partList&&(sv(S,y),S.cc=x,u.fragmentHint=S,k&&av(S,k,u));const P=c.length,D=c[0],U=c[P-1];if(g+=u.skippedSegments*u.targetduration,g>0&&P&&U){u.averagetargetduration=g/P;const Q=U.sn;u.endSN=Q!=="initSegment"?Q:0,u.live||(U.endList=!0),D&&(u.startCC=D.cc)}else u.endSN=0,u.startCC=0;return u.fragmentHint&&(g+=u.fragmentHint.duration),u.totalduration=g,u.endCC=x,C>0&&Gb(c,C),u}}function rv(r,e,t){var n,i;const o=new wt(r);Sr(t,o,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=(n=o.METHOD)!=null?n:"",u=o.URI,c=o.hexadecimalInteger("IV"),f=o.KEYFORMATVERSIONS,h=(i=o.KEYFORMAT)!=null?i:"identity";u&&o.IV&&!c&&j.error(`Invalid IV: ${o.IV}`);const p=u?Bn.resolve(u,e):"",g=(f||"1").split("/").map(Number).filter(Number.isFinite);return new Va(a,p,h,g,c)}function nv(r){const t=new wt(r).decimalFloatingPoint("TIME-OFFSET");return Re(t)?t:null}function Ub(r,e){let t=(r||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const i=t.filter(o=>Ob(o,n));i.length&&(e[`${n}Codec`]=i.join(","),t=t.filter(o=>i.indexOf(o)===-1))}),e.unknownCodecs=t}function iv(r,e,t){const n=e[t];n&&(r[t]=n)}function Gb(r,e){let t=r[e];for(let n=e;n--;){const i=r[n];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function sv(r,e){r.rawProgramDateTime?r.programDateTime=Date.parse(r.rawProgramDateTime):e!=null&&e.programDateTime&&(r.programDateTime=e.endProgramDateTime),Re(r.programDateTime)||(r.programDateTime=null,r.rawProgramDateTime=null)}function ov(r,e,t,n){r.relurl=e.URI,e.BYTERANGE&&r.setByteRange(e.BYTERANGE),r.level=t,r.sn="initSegment",n&&(r.levelkeys=n),r.initSegment=null}function av(r,e,t){r.levelkeys=e;const{encryptedFragments:n}=t;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&n.push(r)}var Ye={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Fe={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function lv(r){const{type:e}=r;switch(e){case Ye.AUDIO_TRACK:return Fe.AUDIO;case Ye.SUBTITLE_TRACK:return Fe.SUBTITLE;default:return Fe.MAIN}}function ch(r,e){let t=r.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class jb{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.LEVEL_LOADING,this.onLevelLoading,this),e.on(L.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(L.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.LEVEL_LOADING,this.onLevelLoading,this),e.off(L.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(L.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,i=t.loader,o=n||i,a=new o(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Ye.MANIFEST,url:n,deliveryDirectives:null})}onLevelLoading(e,t){const{id:n,level:i,pathwayId:o,url:a,deliveryDirectives:u}=t;this.load({id:n,level:i,pathwayId:o,responseType:"text",type:Ye.LEVEL,url:a,deliveryDirectives:u})}onAudioTrackLoading(e,t){const{id:n,groupId:i,url:o,deliveryDirectives:a}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:Ye.AUDIO_TRACK,url:o,deliveryDirectives:a})}onSubtitleTrackLoading(e,t){const{id:n,groupId:i,url:o,deliveryDirectives:a}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:Ye.SUBTITLE_TRACK,url:o,deliveryDirectives:a})}load(e){var t;const n=this.hls.config;let i=this.getInternalLoader(e);if(i){const f=i.context;if(f&&f.url===e.url&&f.level===e.level){j.trace("[playlist-loader]: playlist request ongoing");return}j.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let o;if(e.type===Ye.MANIFEST?o=n.manifestLoadPolicy.default:o=Ot({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),Re((t=e.deliveryDirectives)==null?void 0:t.part)){let f;if(e.type===Ye.LEVEL&&e.level!==null?f=this.hls.levels[e.level].details:e.type===Ye.AUDIO_TRACK&&e.id!==null?f=this.hls.audioTracks[e.id].details:e.type===Ye.SUBTITLE_TRACK&&e.id!==null&&(f=this.hls.subtitleTracks[e.id].details),f){const h=f.partTarget,p=f.targetduration;if(h&&p){const g=Math.max(h*3,p*.8)*1e3;o=Ot({},o,{maxTimeToFirstByteMs:Math.min(g,o.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(g,o.maxTimeToFirstByteMs)})}}}const a=o.errorRetry||o.timeoutRetry||{},u={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},c={onSuccess:(f,h,p,g)=>{const x=this.getInternalLoader(p);this.resetInternalLoader(p.type);const y=f.data;if(y.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(f,p,new Error("no EXTM3U delimiter"),g||null,h);return}h.parsing.start=performance.now(),Bn.isMediaPlaylist(y)?this.handleTrackOrLevelPlaylist(f,h,p,g||null,x):this.handleMasterPlaylist(f,h,p,g)},onError:(f,h,p,g)=>{this.handleNetworkError(h,p,!1,f,g)},onTimeout:(f,h,p)=>{this.handleNetworkError(h,p,!0,void 0,f)}};i.load(e,u,c)}handleMasterPlaylist(e,t,n,i){const o=this.hls,a=e.data,u=ch(e,n),c=Bn.parseMasterPlaylist(a,u);if(c.playlistParsingError){this.handleManifestParsingError(e,n,c.playlistParsingError,i,t);return}const{contentSteering:f,levels:h,sessionData:p,sessionKeys:g,startTimeOffset:x,variableList:y}=c;this.variableList=y;const{AUDIO:S=[],SUBTITLES:T,"CLOSED-CAPTIONS":R}=Bn.parseMasterPlaylistMedia(a,u,c);S.length&&!S.some(C=>!C.url)&&h[0].audioCodec&&!h[0].attrs.AUDIO&&(j.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),S.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new wt({}),bitrate:0,url:""})),o.trigger(L.MANIFEST_LOADED,{levels:h,audioTracks:S,subtitles:T,captions:R,contentSteering:f,url:u,stats:t,networkDetails:i,sessionData:p,sessionKeys:g,startTimeOffset:x,variableList:y})}handleTrackOrLevelPlaylist(e,t,n,i,o){const a=this.hls,{id:u,level:c,type:f}=n,h=ch(e,n),p=0,g=Re(c)?c:Re(u)?u:0,x=lv(n),y=Bn.parseLevelPlaylist(e.data,h,g,x,p,this.variableList);if(f===Ye.MANIFEST){const S={attrs:new wt({}),bitrate:0,details:y,name:"",url:h};a.trigger(L.MANIFEST_LOADED,{levels:[S],audioTracks:[],url:h,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=y,this.handlePlaylistLoaded(y,e,t,n,i,o)}handleManifestParsingError(e,t,n,i,o){this.hls.trigger(L.ERROR,{type:Ne.NETWORK_ERROR,details:J.MANIFEST_PARSING_ERROR,fatal:t.type===Ye.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:i,stats:o})}handleNetworkError(e,t,n=!1,i,o){let a=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===Ye.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===Ye.AUDIO_TRACK||e.type===Ye.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const u=new Error(a);j.warn(`[playlist-loader]: ${a}`);let c=J.UNKNOWN,f=!1;const h=this.getInternalLoader(e);switch(e.type){case Ye.MANIFEST:c=n?J.MANIFEST_LOAD_TIMEOUT:J.MANIFEST_LOAD_ERROR,f=!0;break;case Ye.LEVEL:c=n?J.LEVEL_LOAD_TIMEOUT:J.LEVEL_LOAD_ERROR,f=!1;break;case Ye.AUDIO_TRACK:c=n?J.AUDIO_TRACK_LOAD_TIMEOUT:J.AUDIO_TRACK_LOAD_ERROR,f=!1;break;case Ye.SUBTITLE_TRACK:c=n?J.SUBTITLE_TRACK_LOAD_TIMEOUT:J.SUBTITLE_LOAD_ERROR,f=!1;break}h&&this.resetInternalLoader(e.type);const p={type:Ne.NETWORK_ERROR,details:c,fatal:f,url:e.url,loader:h,context:e,error:u,networkDetails:t,stats:o};if(i){const g=(t==null?void 0:t.url)||e.url;p.response=Yt({url:g,data:void 0},i)}this.hls.trigger(L.ERROR,p)}handlePlaylistLoaded(e,t,n,i,o,a){const u=this.hls,{type:c,level:f,id:h,groupId:p,deliveryDirectives:g}=i,x=ch(t,i),y=lv(i),S=typeof i.level=="number"&&y===Fe.MAIN?f:void 0;if(!e.fragments.length){const R=new Error("No Segments found in Playlist");u.trigger(L.ERROR,{type:Ne.NETWORK_ERROR,details:J.LEVEL_EMPTY_ERROR,fatal:!1,url:x,error:R,reason:R.message,response:t,context:i,level:S,parent:y,networkDetails:o,stats:n});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const T=e.playlistParsingError;if(T){u.trigger(L.ERROR,{type:Ne.NETWORK_ERROR,details:J.LEVEL_PARSING_ERROR,fatal:!1,url:x,error:T,reason:T.message,response:t,context:i,level:S,parent:y,networkDetails:o,stats:n});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),c){case Ye.MANIFEST:case Ye.LEVEL:u.trigger(L.LEVEL_LOADED,{details:e,level:S||0,id:h||0,stats:n,networkDetails:o,deliveryDirectives:g});break;case Ye.AUDIO_TRACK:u.trigger(L.AUDIO_TRACK_LOADED,{details:e,id:h||0,groupId:p||"",stats:n,networkDetails:o,deliveryDirectives:g});break;case Ye.SUBTITLE_TRACK:u.trigger(L.SUBTITLE_TRACK_LOADED,{details:e,id:h||0,groupId:p||"",stats:n,networkDetails:o,deliveryDirectives:g});break}}}function GS(r,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=r,e.dispatchEvent(t)}function jS(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues&&!r.cues.getCueById(e.id))try{if(r.addCue(e),!r.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){j.debug(`[texttrack-utils]: ${n}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,r.addCue(i)}catch(i){j.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}t==="disabled"&&(r.mode=t)}function wo(r){const e=r.mode;if(e==="disabled"&&(r.mode="hidden"),r.cues)for(let t=r.cues.length;t--;)r.removeCue(r.cues[t]);e==="disabled"&&(r.mode=e)}function Yh(r,e,t,n){const i=r.mode;if(i==="disabled"&&(r.mode="hidden"),r.cues&&r.cues.length>0){const o=Vb(r.cues,e,t);for(let a=0;a<o.length;a++)(!n||n(o[a]))&&r.removeCue(o[a])}i==="disabled"&&(r.mode=i)}function Hb(r,e){if(e<r[0].startTime)return 0;const t=r.length-1;if(e>r[t].endTime)return-1;let n=0,i=t;for(;n<=i;){const o=Math.floor((i+n)/2);if(e<r[o].startTime)i=o-1;else if(e>r[o].startTime&&n<t)n=o+1;else return o}return r[n].startTime-e<e-r[i].startTime?n:i}function Vb(r,e,t){const n=[],i=Hb(r,e);if(i>-1)for(let o=i,a=r.length;o<a;o++){const u=r[o];if(u.startTime>=e&&u.endTime<=t)n.push(u);else if(u.startTime>t)return n}return n}function Vu(r){const e=[];for(let t=0;t<r.length;t++){const n=r[t];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(r[t])}return e}var xn={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const zb=.25;function qh(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function uv(r,e,t,n,i){let o=new r(e,t,"");try{o.value=n,i&&(o.type=i)}catch{o=new r(e,t,JSON.stringify(i?Yt({type:i},n):n))}return o}const Ru=(()=>{const r=qh();try{r&&new r(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function dh(r,e){return r.getTime()/1e3-e}function Kb(r){return Uint8Array.from(r.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class Wb{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(wo(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="metadata"&&n.label==="id3")return GS(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:i}}}=this;if(!n&&!i)return;const{samples:o}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=qh();if(a)for(let u=0;u<o.length;u++){const c=o[u].type;if(c===xn.emsg&&!n||!i)continue;const f=DS(o[u].data);if(f){const h=o[u].pts;let p=h+o[u].duration;p>Ru&&(p=Ru),p-h<=0&&(p=h+zb);for(let x=0;x<f.length;x++){const y=f[x];if(!IS(y)){this.updateId3CueEnds(h,c);const S=uv(a,h,p,y,c);S&&this.id3Track.addCue(S)}}}}}updateId3CueEnds(e,t){var n;const i=(n=this.id3Track)==null?void 0:n.cues;if(i)for(let o=i.length;o--;){const a=i[o];a.type===t&&a.startTime<e&&a.endTime===Ru&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:i}){const{id3Track:o,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:u,enableID3MetadataCues:c}}=a;if(o&&(u||c)){let f;i==="audio"?f=h=>h.type===xn.audioId3&&c:i==="video"?f=h=>h.type===xn.emsg&&u:f=h=>h.type===xn.audioId3&&c||h.type===xn.emsg&&u,Yh(o,t,n,f)}}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:n,id3Track:i}=this,{dateRanges:o}=t,a=Object.keys(o);if(i){const h=Object.keys(n).filter(p=>!a.includes(p));for(let p=h.length;p--;){const g=h[p];Object.keys(n[g].cues).forEach(x=>{i.removeCue(n[g].cues[x])}),delete n[g]}}const u=t.fragments[t.fragments.length-1];if(a.length===0||!Re(u==null?void 0:u.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const c=u.programDateTime/1e3-u.start,f=qh();for(let h=0;h<a.length;h++){const p=a[h],g=o[p],x=dh(g.startDate,c),y=n[p],S=(y==null?void 0:y.cues)||{};let T=(y==null?void 0:y.durationKnown)||!1,R=Ru;const k=g.endDate;if(k)R=dh(k,c),T=!0;else if(g.endOnNext&&!T){const I=a.reduce((w,P)=>{if(P!==g.id){const D=o[P];if(D.class===g.class&&D.startDate>g.startDate&&(!w||g.startDate<w.startDate))return D}return w},null);I&&(R=dh(I.startDate,c),T=!0)}const C=Object.keys(g.attr);for(let I=0;I<C.length;I++){const w=C[I];if(!XL(w))continue;const P=S[w];if(P)T&&!y.durationKnown&&(P.endTime=R);else if(f){let D=g.attr[w];QL(w)&&(D=Kb(D));const U=uv(f,x,R,{key:w,data:D},xn.dateRange);U&&(U.id=p,this.id3Track.addCue(U),S[w]=U)}}n[p]={cues:S,dateRange:g,durationKnown:T}}}}class Yb{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:t,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:o,liveSyncDurationCount:a,lowLatencyMode:u}=this.config,c=this.hls.userConfig;let f=u&&n||t;(c.liveSyncDuration||c.liveSyncDurationCount||f===0)&&(f=o!==void 0?o:a*i);const h=i;return f+Math.min(this.stallCount*1,h)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(e===null||t===null||n===null)return null;const i=n.edge,o=e-t-this.edgeStalled,a=i-n.totalduration,u=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,o),u)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(L.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(L.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(L.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(L.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(L.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(L.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var n;t.details===J.BUFFER_STALLED_ERROR&&(this.stallCount++,(n=this.levelDetails)!=null&&n.live&&j.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(n===null)return;this._latency=n;const{lowLatencyMode:i,maxLiveSyncPlaybackRate:o}=this.config;if(!i||o===1||!t.live)return;const a=this.targetLatency;if(a===null)return;const u=n-a,c=Math.min(this.maxLatency,a+t.targetduration);if(u<c&&u>.05&&this.forwardBufferLength>1){const h=Math.min(2,Math.max(1,o)),p=Math.round(2/(1+Math.exp(-.75*u-this.edgeStalled))*20)/20;e.playbackRate=Math.min(h,Math.max(1,p))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const Xh=["NONE","TYPE-0","TYPE-1",null];function qb(r){return Xh.indexOf(r)>-1}const yc=["SDR","PQ","HLG"];function Xb(r){return!!r&&yc.indexOf(r)>-1}var zu={No:"",Yes:"YES",v2:"v2"};function cv(r){const{canSkipUntil:e,canSkipDateRanges:t,age:n}=r,i=n<e/2;return e&&i?t?zu.v2:zu.Yes:zu.No}class dv{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Oo{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(t=>!!t).map(t=>t.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return fv(this._audioGroups,e)}hasSubtitleGroup(e){return fv(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(t)===-1&&n.push(t)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(t)===-1&&n.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function fv(r,e){return!e||!r?!1:r.indexOf(e)!==-1}function fh(r,e){const t=e.startPTS;if(Re(t)){let n=0,i;e.sn>r.sn?(n=t-r.start,i=r):(n=r.start-t,i=e),i.duration!==n&&(i.duration=n)}else e.sn>r.sn?r.cc===e.cc&&r.minEndPTS?e.start=r.start+(r.minEndPTS-r.start):e.start=r.start+r.duration:e.start=Math.max(r.start-e.duration,0)}function HS(r,e,t,n,i,o){n-t<=0&&(j.warn("Fragment should have a positive duration",e),n=t+e.duration,o=i+e.duration);let u=t,c=n;const f=e.startPTS,h=e.endPTS;if(Re(f)){const T=Math.abs(f-t);Re(e.deltaPTS)?e.deltaPTS=Math.max(T,e.deltaPTS):e.deltaPTS=T,u=Math.max(t,f),t=Math.min(t,f),i=Math.min(i,e.startDTS),c=Math.min(n,h),n=Math.max(n,h),o=Math.max(o,e.endDTS)}const p=t-e.start;e.start!==0&&(e.start=t),e.duration=n-e.start,e.startPTS=t,e.maxStartPTS=u,e.startDTS=i,e.endPTS=n,e.minEndPTS=c,e.endDTS=o;const g=e.sn;if(!r||g<r.startSN||g>r.endSN)return 0;let x;const y=g-r.startSN,S=r.fragments;for(S[y]=e,x=y;x>0;x--)fh(S[x],S[x-1]);for(x=y;x<S.length-1;x++)fh(S[x],S[x+1]);return r.fragmentHint&&fh(S[S.length-1],r.fragmentHint),r.PTSKnown=r.alignedSliding=!0,p}function Qb(r,e){let t=null;const n=r.fragments;for(let c=n.length-1;c>=0;c--){const f=n[c].initSegment;if(f){t=f;break}}r.fragmentHint&&delete r.fragmentHint.endPTS;let i=0,o;if(eC(r,e,(c,f)=>{c.relurl&&(i=c.cc-f.cc),Re(c.startPTS)&&Re(c.endPTS)&&(f.start=f.startPTS=c.startPTS,f.startDTS=c.startDTS,f.maxStartPTS=c.maxStartPTS,f.endPTS=c.endPTS,f.endDTS=c.endDTS,f.minEndPTS=c.minEndPTS,f.duration=c.endPTS-c.startPTS,f.duration&&(o=f),e.PTSKnown=e.alignedSliding=!0),f.elementaryStreams=c.elementaryStreams,f.loader=c.loader,f.stats=c.stats,c.initSegment&&(f.initSegment=c.initSegment,t=c.initSegment)}),t&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach(f=>{var h;f&&(!f.initSegment||f.initSegment.relurl===((h=t)==null?void 0:h.relurl))&&(f.initSegment=t)}),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some(c=>!c),e.deltaUpdateFailed){j.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let c=e.skippedSegments;c--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=Jb(r.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));const a=e.fragments;if(i){j.warn("discontinuity sliding from playlist, take drift into account");for(let c=0;c<a.length;c++)a[c].cc+=i}e.skippedSegments&&(e.startCC=e.fragments[0].cc),Zb(r.partList,e.partList,(c,f)=>{f.elementaryStreams=c.elementaryStreams,f.stats=c.stats}),o?HS(e,o,o.startPTS,o.endPTS,o.startDTS,o.endDTS):VS(r,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=r.driftStartTime,e.driftStart=r.driftStart;const u=e.advancedDateTime;if(e.advanced&&u){const c=e.edge;e.driftStart||(e.driftStartTime=u,e.driftStart=c),e.driftEndTime=u,e.driftEnd=c}else e.driftEndTime=r.driftEndTime,e.driftEnd=r.driftEnd,e.advancedDateTime=r.advancedDateTime}function Jb(r,e,t){const n=Ot({},r);return t&&t.forEach(i=>{delete n[i]}),Object.keys(e).forEach(i=>{const o=new LS(e[i].attr,n[i]);o.isValid?n[i]=o:j.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[i].attr)}"`)}),n}function Zb(r,e,t){if(r&&e){let n=0;for(let i=0,o=r.length;i<=o;i++){const a=r[i],u=e[i+n];a&&u&&a.index===u.index&&a.fragment.sn===u.fragment.sn?t(a,u):n--}}}function eC(r,e,t){const n=e.skippedSegments,i=Math.max(r.startSN,e.startSN)-e.startSN,o=(r.fragmentHint?1:0)+(n?e.endSN:Math.min(r.endSN,e.endSN))-e.startSN,a=e.startSN-r.startSN,u=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,c=r.fragmentHint?r.fragments.concat(r.fragmentHint):r.fragments;for(let f=i;f<=o;f++){const h=c[a+f];let p=u[f];n&&!p&&f<n&&(p=e.fragments[f]=h),h&&p&&t(h,p)}}function VS(r,e){const t=e.startSN+e.skippedSegments-r.startSN,n=r.fragments;t<0||t>=n.length||Qh(e,n[t].start)}function Qh(r,e){if(e){const t=r.fragments;for(let n=r.skippedSegments;n<t.length;n++)t[n].start+=e;r.fragmentHint&&(r.fragmentHint.start+=e)}}function tC(r,e=1/0){let t=1e3*r.targetduration;if(r.updated){const n=r.fragments;if(n.length&&t*4>e){const o=n[n.length-1].duration*1e3;o<t&&(t=o)}}else t/=2;return Math.round(t)}function rC(r,e,t){if(!(r!=null&&r.details))return null;const n=r.details;let i=n.fragments[e-n.startSN];return i||(i=n.fragmentHint,i&&i.sn===e)?i:e<n.startSN&&t&&t.sn===e?t:null}function hv(r,e,t){var n;return r!=null&&r.details?zS((n=r.details)==null?void 0:n.partList,e,t):null}function zS(r,e,t){if(r)for(let n=r.length;n--;){const i=r[n];if(i.index===t&&i.fragment.sn===e)return i}return null}function KS(r){r.forEach((e,t)=>{const{details:n}=e;n!=null&&n.fragments&&n.fragments.forEach(i=>{i.level=t})})}function vc(r){switch(r.details){case J.FRAG_LOAD_TIMEOUT:case J.KEY_LOAD_TIMEOUT:case J.LEVEL_LOAD_TIMEOUT:case J.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function pv(r,e){const t=vc(e);return r.default[`${t?"timeout":"error"}Retry`]}function Gp(r,e){const t=r.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*r.retryDelayMs,r.maxRetryDelayMs)}function mv(r){return Yt(Yt({},r),{errorRetry:null,timeoutRetry:null})}function xc(r,e,t,n){if(!r)return!1;const i=n==null?void 0:n.code,o=e<r.maxNumRetry&&(nC(i)||!!t);return r.shouldRetry?r.shouldRetry(r,e,t,n,o):o}function nC(r){return r===0&&navigator.onLine===!1||!!r&&(r<400||r>499)}const WS={search:function(r,e){let t=0,n=r.length-1,i=null,o=null;for(;t<=n;){i=(t+n)/2|0,o=r[i];const a=e(o);if(a>0)t=i+1;else if(a<0)n=i-1;else return o}return null}};function iC(r,e,t){if(e===null||!Array.isArray(r)||!r.length||!Re(e))return null;const n=r[0].programDateTime;if(e<(n||0))return null;const i=r[r.length-1].endProgramDateTime;if(e>=(i||0))return null;t=t||0;for(let o=0;o<r.length;++o){const a=r[o];if(oC(e,t,a))return a}return null}function Sc(r,e,t=0,n=0,i=.005){let o=null;if(r){o=e[r.sn-e[0].sn+1]||null;const u=r.endDTS-t;u>0&&u<15e-7&&(t+=15e-7)}else t===0&&e[0].start===0&&(o=e[0]);if(o&&((!r||r.level===o.level)&&Jh(t,n,o)===0||sC(o,r,Math.min(i,n))))return o;const a=WS.search(e,Jh.bind(null,t,n));return a&&(a!==r||!o)?a:o}function sC(r,e,t){if(e&&e.start===0&&e.level<r.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((i,o)=>(o[0]==="INF"&&(i+=parseFloat(o[1])),i),t);return r.start<=n}return!1}function Jh(r=0,e=0,t){if(t.start<=r&&t.start+t.duration>r)return 0;const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-n<=r?1:t.start-n>r&&t.start?-1:0}function oC(r,e,t){const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-n>r}function aC(r,e){return WS.search(r,t=>t.cc<e?1:t.cc>e?-1:0)}var Jt={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},gn={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class lC{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=j.log.bind(j,"[info]:"),this.warn=j.warn.bind(j,"[warning]:"),this.error=j.error.bind(j,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(L.ERROR,this.onError,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(L.ERROR,this.onError,this),e.off(L.ERROR,this.onErrorOut,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===Fe.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var n,i;if(t.fatal)return;const o=this.hls,a=t.context;switch(t.details){case J.FRAG_LOAD_ERROR:case J.FRAG_LOAD_TIMEOUT:case J.KEY_LOAD_ERROR:case J.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case J.FRAG_PARSING_ERROR:if((n=t.frag)!=null&&n.gap){t.errorAction={action:Jt.DoNothing,flags:gn.None};return}case J.FRAG_GAP:case J.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=Jt.SendAlternateToPenaltyBox;return}case J.LEVEL_EMPTY_ERROR:case J.LEVEL_PARSING_ERROR:{var u,c;const f=t.parent===Fe.MAIN?t.level:o.loadLevel;t.details===J.LEVEL_EMPTY_ERROR&&((u=t.context)!=null&&(c=u.levelDetails)!=null&&c.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,f):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,f))}return;case J.LEVEL_LOAD_ERROR:case J.LEVEL_LOAD_TIMEOUT:typeof(a==null?void 0:a.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a.level));return;case J.AUDIO_TRACK_LOAD_ERROR:case J.AUDIO_TRACK_LOAD_TIMEOUT:case J.SUBTITLE_LOAD_ERROR:case J.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const f=o.levels[o.loadLevel];if(f&&(a.type===Ye.AUDIO_TRACK&&f.hasAudioGroup(a.groupId)||a.type===Ye.SUBTITLE_TRACK&&f.hasSubtitleGroup(a.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o.loadLevel),t.errorAction.action=Jt.SendAlternateToPenaltyBox,t.errorAction.flags=gn.MoveAllAlternatesMatchingHost;return}}return;case J.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const f=o.levels[o.loadLevel],h=f==null?void 0:f.attrs["HDCP-LEVEL"];h?t.errorAction={action:Jt.SendAlternateToPenaltyBox,flags:gn.MoveAllAlternatesMatchingHDCP,hdcpLevel:h}:this.keySystemError(t)}return;case J.BUFFER_ADD_CODEC_ERROR:case J.REMUX_ALLOC_ERROR:case J.BUFFER_APPEND_ERROR:t.errorAction=this.getLevelSwitchAction(t,(i=t.level)!=null?i:o.loadLevel);return;case J.INTERNAL_EXCEPTION:case J.BUFFER_APPENDING_ERROR:case J.BUFFER_FULL_ERROR:case J.LEVEL_SWITCH_ERROR:case J.BUFFER_STALLED_ERROR:case J.BUFFER_SEEK_OVER_HOLE:case J.BUFFER_NUDGE_ON_STALL:t.errorAction={action:Jt.DoNothing,flags:gn.None};return}t.type===Ne.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const n=this.hls,i=pv(n.config.playlistLoadPolicy,e),o=this.playlistError++;if(xc(i,o,vc(e),e.response))return{action:Jt.RetryRequest,flags:gn.None,retryConfig:i,retryCount:o};const u=this.getLevelSwitchAction(e,t);return i&&(u.retryConfig=i,u.retryCount=o),u}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),i=t.levels[n],{fragLoadPolicy:o,keyLoadPolicy:a}=t.config,u=pv(e.details.startsWith("key")?a:o,e),c=t.levels.reduce((h,p)=>h+p.fragmentError,0);if(i&&(e.details!==J.FRAG_GAP&&i.fragmentError++,xc(u,c,vc(e),e.response)))return{action:Jt.RetryRequest,flags:gn.None,retryConfig:u,retryCount:c};const f=this.getLevelSwitchAction(e,n);return u&&(f.retryConfig=u,f.retryCount=c),f}getLevelSwitchAction(e,t){const n=this.hls;t==null&&(t=n.loadLevel);const i=this.hls.levels[t];if(i){var o,a;const f=e.details;i.loadError++,f===J.BUFFER_APPEND_ERROR&&i.fragmentError++;let h=-1;const{levels:p,loadLevel:g,minAutoLevel:x,maxAutoLevel:y}=n;n.autoLevelEnabled||(n.loadLevel=-1);const S=(o=e.frag)==null?void 0:o.type,R=(S===Fe.AUDIO&&f===J.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(f===J.BUFFER_ADD_CODEC_ERROR||f===J.BUFFER_APPEND_ERROR))&&p.some(({audioCodec:P})=>i.audioCodec!==P),C=e.sourceBufferName==="video"&&(f===J.BUFFER_ADD_CODEC_ERROR||f===J.BUFFER_APPEND_ERROR)&&p.some(({codecSet:P,audioCodec:D})=>i.codecSet!==P&&i.audioCodec===D),{type:I,groupId:w}=(a=e.context)!=null?a:{};for(let P=p.length;P--;){const D=(P+g)%p.length;if(D!==g&&D>=x&&D<=y&&p[D].loadError===0){var u,c;const U=p[D];if(f===J.FRAG_GAP&&S===Fe.MAIN&&e.frag){const Q=p[D].details;if(Q){const A=Sc(e.frag,Q.fragments,e.frag.start);if(A!=null&&A.gap)continue}}else{if(I===Ye.AUDIO_TRACK&&U.hasAudioGroup(w)||I===Ye.SUBTITLE_TRACK&&U.hasSubtitleGroup(w))continue;if(S===Fe.AUDIO&&(u=i.audioGroups)!=null&&u.some(Q=>U.hasAudioGroup(Q))||S===Fe.SUBTITLE&&(c=i.subtitleGroups)!=null&&c.some(Q=>U.hasSubtitleGroup(Q))||R&&i.audioCodec===U.audioCodec||!R&&i.audioCodec!==U.audioCodec||C&&i.codecSet===U.codecSet)continue}h=D;break}}if(h>-1&&n.loadLevel!==h)return e.levelRetry=!0,this.playlistError=0,{action:Jt.SendAlternateToPenaltyBox,flags:gn.None,nextAutoLevel:h}}return{action:Jt.SendAlternateToPenaltyBox,flags:gn.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var n;switch((n=t.errorAction)==null?void 0:n.action){case Jt.DoNothing:break;case Jt.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==J.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:i,hdcpLevel:o,nextAutoLevel:a}=n;switch(i){case gn.None:this.switchLevel(e,a);break;case gn.MoveAllAlternatesMatchingHDCP:o&&(t.maxHdcpLevel=Xh[Xh.indexOf(o)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}n.resolved||this.switchLevel(e,a)}switchLevel(e,t){t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class jp{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=j.log.bind(j,`${t}:`),this.warn=j.warn.bind(j,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const i=t==null?void 0:t.renditionReports;if(i){let o=-1;for(let a=0;a<i.length;a++){const u=i[a];let c;try{c=new self.URL(u.URI,t.url).href}catch(f){j.warn(`Could not construct new URL for Rendition Report: ${f}`),c=u.URI||""}if(c===e){o=a;break}else c===e.substring(0,c.length)&&(o=a)}if(o!==-1){const a=i[o],u=parseInt(a["LAST-MSN"])||(t==null?void 0:t.lastPartSn);let c=parseInt(a["LAST-PART"])||(t==null?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const h=Math.min(t.age-t.partTarget,t.targetduration);c>=0&&h>t.partTarget&&(c+=1)}const f=n&&cv(n);return new dv(u,c>=0?c:void 0,f)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,n){const{details:i,stats:o}=t,a=self.performance.now(),u=o.loading.first?Math.max(0,a-o.loading.first):0;if(i.advancedDateTime=Date.now()-u,i.live||n!=null&&n.live){if(i.reloaded(n),n&&this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),n&&i.fragments.length>0&&Qb(n,i),!this.canLoad||!i.live)return;let c,f,h;if(i.canBlockReload&&i.endSN&&i.advanced){const T=this.hls.config.lowLatencyMode,R=i.lastPartSn,k=i.endSN,C=i.lastPartIndex,I=C!==-1,w=R===k,P=T?0:C;I?(f=w?k+1:R,h=w?P:C+1):f=k+1;const D=i.age,U=D+i.ageHeader;let Q=Math.min(U-i.partTarget,i.targetduration*1.5);if(Q>0){if(n&&Q>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${Q} with playlist age: ${i.age}`),Q=0;else{const A=Math.floor(Q/i.targetduration);if(f+=A,h!==void 0){const $=Math.round(Q%i.targetduration/i.partTarget);h+=$}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${D.toFixed(2)}s goal: ${Q} skip sn ${A} to part ${h}`)}i.tuneInGoal=Q}if(c=this.getDeliveryDirectives(i,t.deliveryDirectives,f,h),T||!w){this.loadPlaylist(c);return}}else(i.canBlockReload||i.canSkipUntil)&&(c=this.getDeliveryDirectives(i,t.deliveryDirectives,f,h));const p=this.hls.mainForwardBufferInfo,g=p?p.end-p.len:0,x=(i.edge-g)*1e3,y=tC(i,x);i.updated&&a>this.requestScheduled+y&&(this.requestScheduled=o.loading.start),f!==void 0&&i.canBlockReload?this.requestScheduled=o.loading.first+y-(i.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+y<a?this.requestScheduled=a:this.requestScheduled-a<=0&&(this.requestScheduled+=y);let S=this.requestScheduled-a;S=Math.max(0,S),this.log(`reload live playlist ${e} in ${Math.round(S)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(c),S)}else this.clearTimer()}getDeliveryDirectives(e,t,n,i){let o=cv(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,o=zu.No),new dv(n,i,o)}checkRetry(e){const t=e.details,n=vc(e),i=e.errorAction,{action:o,retryCount:a=0,retryConfig:u}=i||{},c=!!i&&!!u&&(o===Jt.RetryRequest||!i.resolved&&o===Jt.SendAlternateToPenaltyBox);if(c){var f;if(this.requestScheduled=-1,a>=u.maxNumRetry)return!1;if(n&&(f=e.context)!=null&&f.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${u.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const h=Gp(u,a);this.timer=self.setTimeout(()=>this.loadPlaylist(),h),this.warn(`Retrying playlist loading ${a+1}/${u.maxNumRetry} after "${t}" in ${h}ms`)}e.levelRetry=!0,i.resolved=!0}return c}}class co{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class uC{constructor(e,t,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new co(e),this.fast_=new co(t),this.defaultTTFB_=i,this.ttfb_=new co(e)}update(e,t){const{slow_:n,fast_:i,ttfb_:o}=this;n.halfLife!==e&&(this.slow_=new co(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.fast_=new co(t,i.getEstimate(),i.getTotalWeight())),o.halfLife!==e&&(this.ttfb_=new co(e,o.getEstimate(),o.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const n=8*t,i=e/1e3,o=n/i;this.fast_.sample(i,o),this.slow_.sample(i,o)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const YS={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},gv={};function cC(r,e,t,n,i,o){const a=r.audioCodec?r.audioGroups:null,u=o==null?void 0:o.audioCodec,c=o==null?void 0:o.channels,f=c?parseInt(c):u?1/0:2;let h=null;if(a!=null&&a.length)try{a.length===1&&a[0]?h=e.groups[a[0]].channels:h=a.reduce((p,g)=>{if(g){const x=e.groups[g];if(!x)throw new Error(`Audio track group ${g} not found`);Object.keys(x.channels).forEach(y=>{p[y]=(p[y]||0)+x.channels[y]})}return p},{2:0})}catch{return!0}return r.videoCodec!==void 0&&(r.width>1920&&r.height>1088||r.height>1920&&r.width>1088||r.frameRate>Math.max(n,30)||r.videoRange!=="SDR"&&r.videoRange!==t||r.bitrate>Math.max(i,8e6))||!!h&&Re(f)&&Object.keys(h).some(p=>parseInt(p)>f)}function dC(r,e,t){const n=r.videoCodec,i=r.audioCodec;if(!n||!i||!t)return Promise.resolve(YS);const o={width:r.width,height:r.height,bitrate:Math.ceil(Math.max(r.bitrate*.9,r.averageBitrate)),framerate:r.frameRate||30},a=r.videoRange;a!=="SDR"&&(o.transferFunction=a.toLowerCase());const u=n.split(",").map(c=>({type:"media-source",video:Yt(Yt({},o),{},{contentType:za(c,"video")})}));return i&&r.audioGroups&&r.audioGroups.forEach(c=>{var f;c&&((f=e.groups[c])==null||f.tracks.forEach(h=>{if(h.groupId===c){const p=h.channels||"",g=parseFloat(p);Re(g)&&g>2&&u.push.apply(u,i.split(",").map(x=>({type:"media-source",audio:{contentType:za(x,"audio"),channels:""+g}})))}}))}),Promise.all(u.map(c=>{const f=fC(c);return gv[f]||(gv[f]=t.decodingInfo(c))})).then(c=>({supported:!c.some(f=>!f.supported),configurations:u,decodingInfoResults:c})).catch(c=>({supported:!1,configurations:u,decodingInfoResults:[],error:c}))}function fC(r){const{audio:e,video:t}=r,n=t||e;if(n){const i=n.contentType.split('"')[1];if(t)return`r${t.height}x${t.width}f${Math.ceil(t.framerate)}${t.transferFunction||"sd"}_${i}_${Math.ceil(t.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${i}`}return""}function hC(){if(typeof matchMedia=="function"){const r=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(r.media!==e.media)return r.matches===!0}return!1}function pC(r,e){let t=!1,n=[];return r&&(t=r!=="SDR",n=[r]),e&&(n=e.allowedVideoRanges||yc.slice(0),t=e.preferHDR!==void 0?e.preferHDR:hC(),t?n=n.filter(i=>i!=="SDR"):n=["SDR"]),{preferHDR:t,allowedVideoRanges:n}}function mC(r,e,t,n,i){const o=Object.keys(r),a=n==null?void 0:n.channels,u=n==null?void 0:n.audioCodec,c=a&&parseInt(a)===2;let f=!0,h=!1,p=1/0,g=1/0,x=1/0,y=0,S=[];const{preferHDR:T,allowedVideoRanges:R}=pC(e,i);for(let w=o.length;w--;){const P=r[o[w]];f=P.channels[2]>0,p=Math.min(p,P.minHeight),g=Math.min(g,P.minFramerate),x=Math.min(x,P.minBitrate);const D=R.filter(U=>P.videoRanges[U]>0);D.length>0&&(h=!0,S=D)}p=Re(p)?p:0,g=Re(g)?g:0;const k=Math.max(1080,p),C=Math.max(30,g);return x=Re(x)?x:t,t=Math.max(x,t),h||(e=void 0,S=[]),{codecSet:o.reduce((w,P)=>{const D=r[P];if(P===w)return w;if(D.minBitrate>t)return ii(P,`min bitrate of ${D.minBitrate} > current estimate of ${t}`),w;if(!D.hasDefaultAudio)return ii(P,"no renditions with default or auto-select sound found"),w;if(u&&P.indexOf(u.substring(0,4))%5!==0)return ii(P,`audio codec preference "${u}" not found`),w;if(a&&!c){if(!D.channels[a])return ii(P,`no renditions with ${a} channel sound found (channels options: ${Object.keys(D.channels)})`),w}else if((!u||c)&&f&&D.channels[2]===0)return ii(P,"no renditions with stereo sound found"),w;return D.minHeight>k?(ii(P,`min resolution of ${D.minHeight} > maximum of ${k}`),w):D.minFramerate>C?(ii(P,`min framerate of ${D.minFramerate} > maximum of ${C}`),w):S.some(U=>D.videoRanges[U]>0)?D.maxScore<y?(ii(P,`max score of ${D.maxScore} < selected max of ${y}`),w):w&&(mc(P)>=mc(w)||D.fragmentError>r[w].fragmentError)?w:(y=D.maxScore,P):(ii(P,`no variants with VIDEO-RANGE of ${JSON.stringify(S)} found`),w)},void 0),videoRanges:S,preferHDR:T,minFramerate:g,minBitrate:x}}function ii(r,e){j.log(`[abr] start candidates with "${r}" ignored because ${e}`)}function gC(r){return r.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const i=t.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function yC(r,e,t,n){return r.slice(t,n+1).reduce((i,o)=>{if(!o.codecSet)return i;const a=o.audioGroups;let u=i[o.codecSet];u||(i[o.codecSet]=u={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!a,fragmentError:0}),u.minBitrate=Math.min(u.minBitrate,o.bitrate);const c=Math.min(o.height,o.width);return u.minHeight=Math.min(u.minHeight,c),u.minFramerate=Math.min(u.minFramerate,o.frameRate),u.maxScore=Math.max(u.maxScore,o.score),u.fragmentError+=o.fragmentError,u.videoRanges[o.videoRange]=(u.videoRanges[o.videoRange]||0)+1,a&&a.forEach(f=>{if(!f)return;const h=e.groups[f];h&&(u.hasDefaultAudio=u.hasDefaultAudio||e.hasDefaultAudio?h.hasDefault:h.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(h.channels).forEach(p=>{u.channels[p]=(u.channels[p]||0)+h.channels[p]}))}),i},{})}function $n(r,e,t){if("attrs"in r){const n=e.indexOf(r);if(n!==-1)return n}for(let n=0;n<e.length;n++){const i=e[n];if(Ro(r,i,t))return n}return-1}function Ro(r,e,t){const{groupId:n,name:i,lang:o,assocLang:a,characteristics:u,default:c}=r,f=r.forced;return(n===void 0||e.groupId===n)&&(i===void 0||e.name===i)&&(o===void 0||e.lang===o)&&(o===void 0||e.assocLang===a)&&(c===void 0||e.default===c)&&(f===void 0||e.forced===f)&&(u===void 0||vC(u,e.characteristics))&&(t===void 0||t(r,e))}function vC(r,e=""){const t=r.split(","),n=e.split(",");return t.length===n.length&&!t.some(i=>n.indexOf(i)===-1)}function fo(r,e){const{audioCodec:t,channels:n}=r;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function xC(r,e,t,n,i){const o=e[n],u=e.reduce((g,x,y)=>{const S=x.uri;return(g[S]||(g[S]=[])).push(y),g},{})[o.uri];u.length>1&&(n=Math.max.apply(Math,u));const c=o.videoRange,f=o.frameRate,h=o.codecSet.substring(0,4),p=yv(e,n,g=>{if(g.videoRange!==c||g.frameRate!==f||g.codecSet.substring(0,4)!==h)return!1;const x=g.audioGroups,y=t.filter(S=>!x||x.indexOf(S.groupId)!==-1);return $n(r,y,i)>-1});return p>-1?p:yv(e,n,g=>{const x=g.audioGroups,y=t.filter(S=>!x||x.indexOf(S.groupId)!==-1);return $n(r,y,i)>-1})}function yv(r,e,t){for(let n=e;n>-1;n--)if(t(r[n]))return n;for(let n=e+1;n<r.length;n++)if(t(r[n]))return n;return-1}class SC{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:t,partCurrent:n,hls:i}=this,{autoLevelEnabled:o,media:a}=i;if(!t||!a)return;const u=performance.now(),c=n?n.stats:t.stats,f=n?n.duration:t.duration,h=u-c.loading.start,p=i.minAutoLevel;if(c.aborted||c.loaded&&c.loaded===c.total||t.level<=p){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o||a.paused||!a.playbackRate||!a.readyState)return;const g=i.mainForwardBufferInfo;if(g===null)return;const x=this.bwEstimator.getEstimateTTFB(),y=Math.abs(a.playbackRate);if(h<=Math.max(x,1e3*(f/(y*2))))return;const S=g.len/y,T=c.loading.first?c.loading.first-c.loading.start:-1,R=c.loaded&&T>-1,k=this.getBwEstimate(),C=i.levels,I=C[t.level],w=c.total||Math.max(c.loaded,Math.round(f*I.averageBitrate/8));let P=R?h-T:h;P<1&&R&&(P=Math.min(h,c.loaded*8/k));const D=R?c.loaded*1e3/P:0,U=D?(w-c.loaded)/D:w*8/k+x/1e3;if(U<=S)return;const Q=D?D*8:k;let A=Number.POSITIVE_INFINITY,$;for($=t.level-1;$>p;$--){const te=C[$].maxBitrate;if(A=this.getTimeToLoadFrag(x/1e3,Q,f*te,!C[$].details),A<S)break}if(A>=U||A>f*10)return;i.nextLoadLevel=i.nextAutoLevel=$,R?this.bwEstimator.sample(h-Math.min(x,T),c.loaded):this.bwEstimator.sampleTTFB(h);const ie=C[$].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>ie&&this.resetEstimator(ie),this.clearTimer(),j.warn(`[abr] Fragment ${t.sn}${n?" part "+n.index:""} of level ${t.level} is loading too slowly;
      Time to underbuffer: ${S.toFixed(3)} s
      Estimated load time for current fragment: ${U.toFixed(3)} s
      Estimated load time for down switch fragment: ${A.toFixed(3)} s
      TTFB estimate: ${T|0} ms
      Current BW estimate: ${Re(k)?k|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${$} @ ${ie|0} bps`),i.trigger(L.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:n,stats:c})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(j.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new uC(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.FRAG_LOADING,this.onFragLoading,this),e.on(L.FRAG_LOADED,this.onFragLoaded,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this),e.on(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(L.LEVEL_LOADED,this.onLevelLoaded,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(L.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(L.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.FRAG_LOADING,this.onFragLoading,this),e.off(L.FRAG_LOADED,this.onFragLoaded,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this),e.off(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(L.LEVEL_LOADED,this.onLevelLoaded,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(L.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(L.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var i;this.fragCurrent=n,this.partCurrent=(i=t.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case J.BUFFER_ADD_CODEC_ERROR:case J.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case J.FRAG_LOAD_TIMEOUT:{const n=t.frag,{fragCurrent:i,partCurrent:o}=this;if(n&&i&&n.sn===i.sn&&n.level===i.level){const a=performance.now(),u=o?o.stats:n.stats,c=a-u.loading.start,f=u.loading.first?u.loading.first-u.loading.start:-1;if(u.loaded&&f>-1){const p=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(c-Math.min(p,f),u.loaded)}else this.bwEstimator.sampleTTFB(c)}break}}}getTimeToLoadFrag(e,t,n,i){const o=e+n/t,a=i?this.lastLevelLoadSec:0;return o+a}onLevelLoaded(e,t){const n=this.hls.config,{loading:i}=t.stats,o=i.end-i.start;Re(o)&&(this.lastLevelLoadSec=o/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)}onFragLoaded(e,{frag:t,part:n}){const i=n?n.stats:t.stats;if(t.type===Fe.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const o=n?n.duration:t.duration,a=this.hls.levels[t.level],u=(a.loaded?a.loaded.bytes:0)+i.loaded,c=(a.loaded?a.loaded.duration:0)+o;a.loaded={bytes:u,duration:c},a.realBitrate=Math.round(8*u/c)}if(t.bitrateTest){const o={stats:i,frag:t,part:n,id:t.type};this.onFragBuffered(L.FRAG_BUFFERED,o),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:i}=t,o=i!=null&&i.stats.loaded?i.stats:n.stats;if(o.aborted||this.ignoreFragment(n))return;const a=o.parsing.end-o.loading.start-Math.min(o.loading.first-o.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,o.loaded),o.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Fe.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,o=this.findBestLevel(n,t,e,0,i,1,1);if(o>-1)return o;const a=this.hls.firstLevel,u=Math.min(Math.max(a,t),e);return j.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${u}`),u}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const o=n&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,o)&&a[e].loadError<=a[o].loadError)return e}return this._nextAutoLevel=o,this.nextAutoLevelKey=this.getAutoLevelKey(),o}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this,{maxAutoLevel:i,config:o,minAutoLevel:a}=n,u=t?t.duration:e?e.duration:0,c=this.getBwEstimate(),f=this.getStarvationDelay();let h=o.abrBandWidthFactor,p=o.abrBandWidthUpFactor;if(f){const T=this.findBestLevel(c,a,i,f,0,h,p);if(T>=0)return T}let g=u?Math.min(u,o.maxStarvationDelay):o.maxStarvationDelay;if(!f){const T=this.bitrateTestDelay;T&&(g=(u?Math.min(u,o.maxLoadingDelay):o.maxLoadingDelay)-T,j.info(`[abr] bitrate test took ${Math.round(1e3*T)}ms, set first fragment max fetchDuration to ${Math.round(1e3*g)} ms`),h=p=1)}const x=this.findBestLevel(c,a,i,f,g,h,p);if(j.info(`[abr] ${f?"rebuffering expected":"buffer is empty"}, optimal quality level ${x}`),x>-1)return x;const y=n.levels[a],S=n.levels[n.loadLevel];return(y==null?void 0:y.bitrate)<(S==null?void 0:S.bitrate)?a:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,i,o,a,u){var c;const f=i+o,h=this.lastLoadedFragLevel,p=h===-1?this.hls.firstLevel:h,{fragCurrent:g,partCurrent:x}=this,{levels:y,allAudioTracks:S,loadLevel:T,config:R}=this.hls;if(y.length===1)return 0;const k=y[p],C=!!(k!=null&&(c=k.details)!=null&&c.live),I=T===-1||h===-1;let w,P="SDR",D=(k==null?void 0:k.frameRate)||0;const{audioPreference:U,videoPreference:Q}=R,A=this.audioTracksByGroup||(this.audioTracksByGroup=gC(S));if(I){if(this.firstSelection!==-1)return this.firstSelection;const de=this.codecTiers||(this.codecTiers=yC(y,A,t,n)),pe=mC(de,P,e,U,Q),{codecSet:ge,videoRanges:ne,minFramerate:Y,minBitrate:q,preferHDR:F}=pe;w=ge,P=F?ne[ne.length-1]:ne[0],D=Y,e=Math.max(e,q),j.log(`[abr] picked start tier ${JSON.stringify(pe)}`)}else w=k==null?void 0:k.codecSet,P=k==null?void 0:k.videoRange;const $=x?x.duration:g?g.duration:0,ie=this.bwEstimator.getEstimateTTFB()/1e3,te=[];for(let de=n;de>=t;de--){var fe;const pe=y[de],ge=de>p;if(!pe)continue;if(R.useMediaCapabilities&&!pe.supportedResult&&!pe.supportedPromise){const ve=navigator.mediaCapabilities;typeof(ve==null?void 0:ve.decodingInfo)=="function"&&cC(pe,A,P,D,e,U)?(pe.supportedPromise=dC(pe,A,ve),pe.supportedPromise.then(Se=>{if(!this.hls)return;pe.supportedResult=Se;const be=this.hls.levels,Me=be.indexOf(pe);Se.error?j.warn(`[abr] MediaCapabilities decodingInfo error: "${Se.error}" for level ${Me} ${JSON.stringify(Se)}`):Se.supported||(j.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${Me} ${JSON.stringify(Se)}`),Me>-1&&be.length>1&&(j.log(`[abr] Removing unsupported level ${Me}`),this.hls.removeLevel(Me)))})):pe.supportedResult=YS}if(w&&pe.codecSet!==w||P&&pe.videoRange!==P||ge&&D>pe.frameRate||!ge&&D>0&&D<pe.frameRate||pe.supportedResult&&!((fe=pe.supportedResult.decodingInfoResults)!=null&&fe[0].smooth)){te.push(de);continue}const ne=pe.details,Y=(x?ne==null?void 0:ne.partTarget:ne==null?void 0:ne.averagetargetduration)||$;let q;ge?q=u*e:q=a*e;const F=$&&i>=$*2&&o===0?y[de].averageBitrate:y[de].maxBitrate,H=this.getTimeToLoadFrag(ie,q,F*Y,ne===void 0);if(q>=F&&(de===h||pe.loadError===0&&pe.fragmentError===0)&&(H<=ie||!Re(H)||C&&!this.bitrateTestDelay||H<f)){const ve=this.forcedAutoLevel;return de!==T&&(ve===-1||ve!==T)&&(te.length&&j.trace(`[abr] Skipped level(s) ${te.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${y[te[0]].codecs}" ${y[te[0]].videoRange}; not compatible with "${k.codecs}" ${P}`),j.info(`[abr] switch candidate:${p}->${de} adjustedbw(${Math.round(q)})-bitrate=${Math.round(q-F)} ttfb:${ie.toFixed(1)} avgDuration:${Y.toFixed(1)} maxFetchDuration:${f.toFixed(1)} fetchDuration:${H.toFixed(1)} firstSelection:${I} codecSet:${w} videoRange:${P} hls.loadLevel:${T}`)),I&&(this.firstSelection=de),de}}return-1}set nextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls,i=Math.min(Math.max(e,n),t);this._nextAutoLevel!==i&&(this.nextAutoLevelKey="",this._nextAutoLevel=i)}}class EC{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var Wt={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class TC{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(L.BUFFER_APPENDED,this.onBufferAppended,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this),e.on(L.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(L.BUFFER_APPENDED,this.onBufferAppended,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this),e.off(L.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let i=n.length;i--;){const o=n[i];if(!o)break;const a=o.end;if(o.start<=e&&a!==null&&e<=a)return o}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:n}=this,i=Object.keys(n);for(let o=i.length;o--;){const a=n[i[o]];if((a==null?void 0:a.body.type)===t&&a.buffered){const u=a.body;if(u.start<=e&&e<=u.end)return u}}return null}detectEvictedFragments(e,t,n,i){this.timeRanges&&(this.timeRanges[e]=t);const o=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(a=>{const u=this.fragments[a];if(!u||o>=u.body.sn)return;if(!u.buffered&&!u.loaded){u.body.type===n&&this.removeFragment(u.body);return}const c=u.range[e];c&&c.time.some(f=>{const h=!this.isTimeBuffered(f.startPTS,f.endPTS,t);return h&&this.removeFragment(u.body),h})})}detectPartialFragments(e){const t=this.timeRanges,{frag:n,part:i}=e;if(!t||n.sn==="initSegment")return;const o=ho(n),a=this.fragments[o];if(!a||a.buffered&&n.gap)return;const u=!n.relurl;Object.keys(t).forEach(c=>{const f=n.elementaryStreams[c];if(!f)return;const h=t[c],p=u||f.partial===!0;a.range[c]=this.getBufferedTimes(n,i,p,h)}),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,(a.body.endList=n.endList||a.body.endList)&&(this.endListFragments[a.body.type]=a),Au(a)||this.removeParts(n.sn-1,n.type)):this.removeFragment(a.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=n.filter(i=>i.fragment.sn>=e))}fragBuffered(e,t){const n=ho(e);let i=this.fragments[n];!i&&t&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,t,n,i){const o={time:[],partial:n},a=e.start,u=e.end,c=e.minEndPTS||u,f=e.maxStartPTS||a;for(let h=0;h<i.length;h++){const p=i.start(h)-this.bufferPadding,g=i.end(h)+this.bufferPadding;if(f>=p&&c<=g){o.time.push({startPTS:Math.max(a,i.start(h)),endPTS:Math.min(u,i.end(h))});break}else if(a<g&&u>p){const x=Math.max(a,i.start(h)),y=Math.min(u,i.end(h));y>x&&(o.partial=!0,o.time.push({startPTS:x,endPTS:y}))}else if(u<=p)break}return o}getPartialFragment(e){let t=null,n,i,o,a=0;const{bufferPadding:u,fragments:c}=this;return Object.keys(c).forEach(f=>{const h=c[f];h&&Au(h)&&(i=h.body.start-u,o=h.body.end+u,e>=i&&e<=o&&(n=Math.min(e-i,o-e),a<=n&&(t=h.body,a=n)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||Au(t))}getState(e){const t=ho(e),n=this.fragments[t];return n?n.buffered?Au(n)?Wt.PARTIAL:Wt.OK:Wt.APPENDING:Wt.NOT_LOADED}isTimeBuffered(e,t,n){let i,o;for(let a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,o=n.end(a)+this.bufferPadding,e>=i&&t<=o)return!0;if(t<=i)return!1}return!1}onFragLoaded(e,t){const{frag:n,part:i}=t;if(n.sn==="initSegment"||n.bitrateTest)return;const o=i?null:t,a=ho(n);this.fragments[a]={body:n,appendedPTS:null,loaded:o,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:i,timeRanges:o}=t;if(n.sn==="initSegment")return;const a=n.type;if(i){let u=this.activePartLists[a];u||(this.activePartLists[a]=u=[]),u.push(i)}this.timeRanges=o,Object.keys(o).forEach(u=>{const c=o[u];this.detectEvictedFragments(u,c,a,i)})}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=ho(e);return!!this.fragments[t]}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,n,i,o){i&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const u=this.fragments[a];if(!u)return;const c=u.body;c.type!==n||i&&!c.gap||c.start<t&&c.end>e&&(u.buffered||o)&&this.removeFragment(c)})}removeFragment(e){const t=ho(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const i=e.sn;this.activePartLists[e.type]=n.filter(o=>o.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function Au(r){var e,t,n;return r.buffered&&(r.body.gap||((e=r.range.video)==null?void 0:e.partial)||((t=r.range.audio)==null?void 0:t.partial)||((n=r.range.audiovideo)==null?void 0:n.partial))}function ho(r){return`${r.type}_${r.level}_${r.sn}`}const wC={length:0,start:()=>0,end:()=>0};class ht{static isBuffered(e,t){try{if(e){const n=ht.getBuffered(e);for(let i=0;i<n.length;i++)if(t>=n.start(i)&&t<=n.end(i))return!0}}catch{}return!1}static bufferInfo(e,t,n){try{if(e){const i=ht.getBuffered(e),o=[];let a;for(a=0;a<i.length;a++)o.push({start:i.start(a),end:i.end(a)});return this.bufferedInfo(o,t,n)}}catch{}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.sort(function(f,h){const p=f.start-h.start;return p||h.end-f.end});let i=[];if(n)for(let f=0;f<e.length;f++){const h=i.length;if(h){const p=i[h-1].end;e[f].start-p<n?e[f].end>p&&(i[h-1].end=e[f].end):i.push(e[f])}else i.push(e[f])}else i=e;let o=0,a,u=t,c=t;for(let f=0;f<i.length;f++){const h=i[f].start,p=i[f].end;if(t+n>=h&&t<p)u=h,c=p,o=c-t;else if(t+n<h){a=h;break}}return{len:o,start:u||0,end:c||0,nextStart:a}}static getBuffered(e){try{return e.buffered}catch(t){return j.log("failed to get media.buffered",t),wC}}}class Hp{constructor(e,t,n,i=0,o=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Lu(),this.buffering={audio:Lu(),video:Lu(),audiovideo:Lu()},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=o,this.partial=a}}function Lu(){return{start:0,executeStart:0,executeEnd:0,end:0}}function Ku(r,e){for(let n=0,i=r.length;n<i;n++){var t;if(((t=r[n])==null?void 0:t.cc)===e)return r[n]}return null}function RC(r,e,t){return!!(e&&(t.endCC>t.startCC||r&&r.cc<t.startCC))}function AC(r,e){const t=r.fragments,n=e.fragments;if(!n.length||!t.length){j.log("No fragments to align");return}const i=Ku(t,n[0].cc);if(!i||i&&!i.startPTS){j.log("No frag in previous level to align on");return}return i}function vv(r,e){if(r){const t=r.start+e;r.start=r.startPTS=t,r.endPTS=t+r.duration}}function qS(r,e){const t=e.fragments;for(let n=0,i=t.length;n<i;n++)vv(t[n],r);e.fragmentHint&&vv(e.fragmentHint,r),e.alignedSliding=!0}function LC(r,e,t){e&&(bC(r,t,e),!t.alignedSliding&&e&&Ec(t,e),!t.alignedSliding&&e&&!t.skippedSegments&&VS(e,t))}function bC(r,e,t){if(RC(r,t,e)){const n=AC(t,e);n&&Re(n.start)&&(j.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),qS(n.start,e))}}function Ec(r,e){if(!r.hasProgramDateTime||!e.hasProgramDateTime)return;const t=r.fragments,n=e.fragments;if(!t.length||!n.length)return;let i,o;const a=Math.min(e.endCC,r.endCC);e.startCC<a&&r.startCC<a&&(i=Ku(n,a),o=Ku(t,a)),(!i||!o)&&(i=n[Math.floor(n.length/2)],o=Ku(t,i.cc)||t[Math.floor(t.length/2)]);const u=i.programDateTime,c=o.programDateTime;if(!u||!c)return;const f=(c-u)/1e3-(o.start-i.start);qS(f,r)}const xv=Math.pow(2,17);class CC{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new ui({type:Ne.NETWORK_ERROR,details:J.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,o=i.fLoader,a=i.loader;return new Promise((u,c)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(x=>x[0]==="GAP")){c(Ev(e));return}else e.gap=!1;const f=this.loader=e.loader=o?new o(i):new a(i),h=Sv(e),p=mv(i.fragLoadPolicy.default),g={loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:xv};e.stats=f.stats,f.load(h,g,{onSuccess:(x,y,S,T)=>{this.resetLoader(e,f);let R=x.data;S.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(R.slice(0,16)),R=R.slice(16)),u({frag:e,part:null,payload:R,networkDetails:T})},onError:(x,y,S,T)=>{this.resetLoader(e,f),c(new ui({type:Ne.NETWORK_ERROR,details:J.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Yt({url:n,data:void 0},x),error:new Error(`HTTP Error ${x.code} ${x.text}`),networkDetails:S,stats:T}))},onAbort:(x,y,S)=>{this.resetLoader(e,f),c(new ui({type:Ne.NETWORK_ERROR,details:J.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:S,stats:x}))},onTimeout:(x,y,S)=>{this.resetLoader(e,f),c(new ui({type:Ne.NETWORK_ERROR,details:J.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:S,stats:x}))},onProgress:(x,y,S,T)=>{t&&t({frag:e,part:null,payload:S,networkDetails:T})}})})}loadPart(e,t,n){this.abort();const i=this.config,o=i.fLoader,a=i.loader;return new Promise((u,c)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){c(Ev(e,t));return}const f=this.loader=e.loader=o?new o(i):new a(i),h=Sv(e,t),p=mv(i.fragLoadPolicy.default),g={loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:xv};t.stats=f.stats,f.load(h,g,{onSuccess:(x,y,S,T)=>{this.resetLoader(e,f),this.updateStatsFromPart(e,t);const R={frag:e,part:t,payload:x.data,networkDetails:T};n(R),u(R)},onError:(x,y,S,T)=>{this.resetLoader(e,f),c(new ui({type:Ne.NETWORK_ERROR,details:J.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Yt({url:h.url,data:void 0},x),error:new Error(`HTTP Error ${x.code} ${x.text}`),networkDetails:S,stats:T}))},onAbort:(x,y,S)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,f),c(new ui({type:Ne.NETWORK_ERROR,details:J.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:S,stats:x}))},onTimeout:(x,y,S)=>{this.resetLoader(e,f),c(new ui({type:Ne.NETWORK_ERROR,details:J.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:S,stats:x}))}})})}updateStatsFromPart(e,t){const n=e.stats,i=t.stats,o=i.total;if(n.loaded+=i.loaded,o){const c=Math.round(e.duration/t.duration),f=Math.min(Math.round(n.loaded/o),c),p=(c-f)*Math.round(n.loaded/f);n.total=n.loaded+p}else n.total=Math.max(n.loaded,n.total);const a=n.loading,u=i.loading;a.start?a.first+=u.first-u.start:(a.start=u.start,a.first=u.first),a.end=u.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function Sv(r,e=null){const t=e||r,n={frag:r,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,o=t.byteRangeEndOffset;if(Re(i)&&Re(o)){var a;let u=i,c=o;if(r.sn==="initSegment"&&((a=r.decryptdata)==null?void 0:a.method)==="AES-128"){const f=o-i;f%16&&(c=o+(16-f%16)),i!==0&&(n.resetIV=!0,u=i-16)}n.rangeStart=u,n.rangeEnd=c}return n}function Ev(r,e){const t=new Error(`GAP ${r.gap?"tag":"attribute"} found`),n={type:Ne.MEDIA_ERROR,details:J.FRAG_GAP,fatal:!1,frag:r,error:t,networkDetails:null};return e&&(n.part=e),(e||r).stats.aborted=!0,new ui(n)}class ui extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class kC{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class IC{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function DC(r){const e=r.byteLength,t=e&&new DataView(r.buffer).getUint8(e-1);return t?bs(r,0,e-t):r}class PC{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let i=0;i<4;i++)n[i]=t.getUint32(i*4);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],o=n[1],a=n[2],u=n[3],c=this.invSubMix,f=c[0],h=c[1],p=c[2],g=c[3],x=new Uint32Array(256);let y=0,S=0,T=0;for(T=0;T<256;T++)T<128?x[T]=T<<1:x[T]=T<<1^283;for(T=0;T<256;T++){let R=S^S<<1^S<<2^S<<3^S<<4;R=R>>>8^R&255^99,e[y]=R,t[R]=y;const k=x[y],C=x[k],I=x[C];let w=x[R]*257^R*16843008;i[y]=w<<24|w>>>8,o[y]=w<<16|w>>>16,a[y]=w<<8|w>>>24,u[y]=w,w=I*16843009^C*65537^k*257^y*16843008,f[R]=w<<24|w>>>8,h[R]=w<<16|w>>>16,p[R]=w<<8|w>>>24,g[R]=w,y?(y=k^x[x[x[I^k]]],S^=x[x[S]]):y=S=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<t.length&&n;)n=t[i]===this.key[i],i++;if(n)return;this.key=t;const o=this.keySize=t.length;if(o!==4&&o!==6&&o!==8)throw new Error("Invalid aes key size="+o);const a=this.ksRows=(o+6+1)*4;let u,c;const f=this.keySchedule=new Uint32Array(a),h=this.invKeySchedule=new Uint32Array(a),p=this.sBox,g=this.rcon,x=this.invSubMix,y=x[0],S=x[1],T=x[2],R=x[3];let k,C;for(u=0;u<a;u++){if(u<o){k=f[u]=t[u];continue}C=k,u%o===0?(C=C<<8|C>>>24,C=p[C>>>24]<<24|p[C>>>16&255]<<16|p[C>>>8&255]<<8|p[C&255],C^=g[u/o|0]<<24):o>6&&u%o===4&&(C=p[C>>>24]<<24|p[C>>>16&255]<<16|p[C>>>8&255]<<8|p[C&255]),f[u]=k=(f[u-o]^C)>>>0}for(c=0;c<a;c++)u=a-c,c&3?C=f[u]:C=f[u-4],c<4||u<=4?h[c]=C:h[c]=y[p[C>>>24]]^S[p[C>>>16&255]]^T[p[C>>>8&255]]^R[p[C&255]],h[c]=h[c]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,n){const i=this.keySize+6,o=this.invKeySchedule,a=this.invSBox,u=this.invSubMix,c=u[0],f=u[1],h=u[2],p=u[3],g=this.uint8ArrayToUint32Array_(n);let x=g[0],y=g[1],S=g[2],T=g[3];const R=new Int32Array(e),k=new Int32Array(R.length);let C,I,w,P,D,U,Q,A,$,ie,te,fe,de,pe;const ge=this.networkToHostOrderSwap;for(;t<R.length;){for($=ge(R[t]),ie=ge(R[t+1]),te=ge(R[t+2]),fe=ge(R[t+3]),D=$^o[0],U=fe^o[1],Q=te^o[2],A=ie^o[3],de=4,pe=1;pe<i;pe++)C=c[D>>>24]^f[U>>16&255]^h[Q>>8&255]^p[A&255]^o[de],I=c[U>>>24]^f[Q>>16&255]^h[A>>8&255]^p[D&255]^o[de+1],w=c[Q>>>24]^f[A>>16&255]^h[D>>8&255]^p[U&255]^o[de+2],P=c[A>>>24]^f[D>>16&255]^h[U>>8&255]^p[Q&255]^o[de+3],D=C,U=I,Q=w,A=P,de=de+4;C=a[D>>>24]<<24^a[U>>16&255]<<16^a[Q>>8&255]<<8^a[A&255]^o[de],I=a[U>>>24]<<24^a[Q>>16&255]<<16^a[A>>8&255]<<8^a[D&255]^o[de+1],w=a[Q>>>24]<<24^a[A>>16&255]<<16^a[D>>8&255]<<8^a[U&255]^o[de+2],P=a[A>>>24]<<24^a[D>>16&255]<<16^a[U>>8&255]<<8^a[Q&255]^o[de+3],k[t]=ge(C^x),k[t+1]=ge(P^y),k[t+2]=ge(w^S),k[t+3]=ge(I^T),x=$,y=ie,S=te,T=fe,t=t+4}return k.buffer}}const _C=16;class Vp{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?DC(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n){return this.useSoftware?new Promise((i,o)=>{this.softwareDecrypt(new Uint8Array(e),t,n);const a=this.flush();a?i(a.buffer):o(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n)}softwareDecrypt(e,t,n){const{currentIV:i,currentResult:o,remainderData:a}=this;this.logOnce("JS AES decrypt"),a&&(e=nn(a,e),this.remainderData=null);const u=this.getValidChunk(e);if(!u.length)return null;i&&(n=i);let c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new PC),c.expandKey(t);const f=o;return this.currentResult=c.decrypt(u.buffer,0,n),this.currentIV=bs(u,-16).buffer,f||null}webCryptoDecrypt(e,t,n){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n));this.key=t,this.fastAesKey=new IC(this.subtle,t)}return this.fastAesKey.expandKey().then(i=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new kC(this.subtle,new Uint8Array(n)).decrypt(e.buffer,i)):Promise.reject(new Error("web crypto not initialized"))).catch(i=>(j.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,t,n)))}onWebCryptoError(e,t,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n);const i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%_C;return n!==e.length&&(t=bs(e,0,n),this.remainderData=bs(e,n)),t}logOnce(e){this.logEnabled&&(j.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const OC={toString:function(r){let e="";const t=r.length;for(let n=0;n<t;n++)e+=`[${r.start(n).toFixed(3)}-${r.end(n).toFixed(3)}]`;return e}},se={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class zp extends EC{constructor(e,t,n,i,o){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=se.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=o,this.logPrefix=i,this.log=j.log.bind(j,`${i}:`),this.warn=j.warn.bind(j,`${i}:`),this.hls=e,this.fragmentLoader=new CC(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new Vp(e.config),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=se.STOPPED}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const n=t.partList;if(n!=null&&n.length){const o=n[n.length-1];return ht.isBuffered(this.media,o.start+o.duration/2)}const i=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(i)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);const i=this.config;this.levels&&i.autoStartLoad&&this.state===se.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:n,mediaBuffer:i,state:o}=this,a=n?n.currentTime:0,u=ht.bufferInfo(i||n,a,e.maxBufferHole);if(this.log(`media seeking to ${Re(a)?a.toFixed(3):a}, state: ${o}`),this.state===se.ENDED)this.resetLoadingState();else if(t){const c=e.maxFragLookUpTolerance,f=t.start-c,h=t.start+t.duration+c;if(!u.len||h<u.start||f>u.end){const p=a>h;(a<f||p)&&(p&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}n&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),!this.loadedmetadata&&!u.len&&(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=se.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){const i=o=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${o.part?" p: "+o.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(o)};this._doFragLoad(e,t,n,i).then(o=>{if(!o)return;const a=this.state;if(this.fragContextChanged(e)){(a===se.FRAG_LOADING||!this.fragCurrent&&a===se.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=se.IDLE);return}"payload"in o&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(L.FRAG_LOADED,o)),this._handleFragmentLoadComplete(o)}).catch(o=>{this.state===se.STOPPED||this.state===se.ERROR||(this.warn(`Frag error: ${(o==null?void 0:o.message)||o}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===Wt.APPENDING){const o=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,o),u=Math.max(e.duration,a?a.len:this.config.maxBufferLength),c=this.backtrackFragment;((c?e.sn-c.sn:0)===1||this.reduceMaxBufferLength(u,e.duration))&&n.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Wt.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:n};this.hls.trigger(L.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(n=>{if(!n||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:i}=this,{payload:o}=n,a=e.decryptdata;if(o&&o.byteLength>0&&a!=null&&a.key&&a.iv&&a.method==="AES-128"){const u=self.performance.now();return this.decrypter.decrypt(new Uint8Array(o),a.key.buffer,a.iv.buffer).catch(c=>{throw i.trigger(L.ERROR,{type:Ne.MEDIA_ERROR,details:J.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:e}),c}).then(c=>{const f=self.performance.now();return i.trigger(L.FRAG_DECRYPTED,{frag:e,payload:c,stats:{tstart:u,tdecrypt:f}}),n.payload=c,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===se.STOPPED||this.state===se.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state=se.IDLE,e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){var n,i,o,a;const u=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===Fe.MAIN?"level":"track"} ${e.level} (frag:[${((n=e.startPTS)!=null?n:NaN).toFixed(3)}-${((i=e.endPTS)!=null?i:NaN).toFixed(3)}] > buffer:${u?OC.toString(ht.getBuffered(u)):"(detached)"})`),e.sn!=="initSegment"){var c;if(e.type!==Fe.SUBTITLE){const h=e.elementaryStreams;if(!Object.keys(h).some(p=>!!h[p])){this.state=se.IDLE;return}}const f=(c=this.levels)==null?void 0:c[e.level];f!=null&&f.fragmentError&&(this.log(`Resetting level fragment error count of ${f.fragmentError} on frag buffered`),f.fragmentError=0)}this.state=se.IDLE,u&&(!this.loadedmetadata&&e.type==Fe.MAIN&&u.buffered.length&&((o=this.fragCurrent)==null?void 0:o.sn)===((a=this.fragPrevious)==null?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:i,partsLoaded:o}=e,a=!o||o.length===0||o.some(c=>!c),u=new Hp(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!a);t.flush(u)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,i){var o;const a=t==null?void 0:t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let u=null;if(e.encrypted&&!((o=e.decryptdata)!=null&&o.key)?(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=se.KEY_LOADING,this.fragCurrent=e,u=this.keyLoader.load(e).then(h=>{if(!this.fragContextChanged(h.frag))return this.hls.trigger(L.KEY_LOADED,h),this.state===se.KEY_LOADING&&(this.state=se.IDLE),h}),this.hls.trigger(L.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(u=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(e,a.encryptedFragments),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const h=a.partList;if(h&&i){n>e.end&&a.fragmentHint&&(e=a.fragmentHint);const p=this.getNextPart(h,e,n);if(p>-1){const g=h[p];this.log(`Loading part sn: ${e.sn} p: ${g.index} cc: ${e.cc} of playlist [${a.startSN}-${a.endSN}] parts [0-${p}-${h.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=g.start+g.duration,this.state=se.FRAG_LOADING;let x;return u?x=u.then(y=>!y||this.fragContextChanged(y.frag)?null:this.doFragPartsLoad(e,g,t,i)).catch(y=>this.handleFragLoadError(y)):x=this.doFragPartsLoad(e,g,t,i).catch(y=>this.handleFragLoadError(y)),this.hls.trigger(L.FRAG_LOADING,{frag:e,part:g,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):x}else if(!e.url||this.loadedEndOfParts(h,n))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${a?"of ["+a.startSN+"-"+a.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),Re(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=se.FRAG_LOADING;const c=this.config.progressive;let f;return c&&u?f=u.then(h=>!h||this.fragContextChanged(h==null?void 0:h.frag)?null:this.fragmentLoader.load(e,i)).catch(h=>this.handleFragLoadError(h)):f=Promise.all([this.fragmentLoader.load(e,c?i:void 0),u]).then(([h])=>(!c&&h&&i&&i(h),h)).catch(h=>this.handleFragLoadError(h)),this.hls.trigger(L.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):f}doFragPartsLoad(e,t,n,i){return new Promise((o,a)=>{var u;const c=[],f=(u=n.details)==null?void 0:u.partList,h=p=>{this.fragmentLoader.loadPart(e,p,i).then(g=>{c[p.index]=g;const x=g.part;this.hls.trigger(L.FRAG_LOADED,g);const y=hv(n,e.sn,p.index+1)||zS(f,e.sn,p.index+1);if(y)h(y);else return o({frag:e,part:x,partsLoaded:c})}).catch(a)};h(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===J.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(L.ERROR,t)}else this.hls.trigger(L.ERROR,{type:Ne.OTHER_ERROR,details:J.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==se.PARSING){!this.fragCurrent&&this.state!==se.STOPPED&&this.state!==se.ERROR&&(this.state=se.IDLE);return}const{frag:n,part:i,level:o}=t,a=self.performance.now();n.stats.parsing.end=a,i&&(i.stats.parsing.end=a),this.updateLevelTiming(n,i,o,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:i,sn:o,part:a}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${o} of level ${i}. The current chunk will not be buffered.`),null;const u=t[i],c=a>-1?hv(u,o,a):null,f=c?c.fragment:rC(u,o,n);return f?(n&&n!==f&&(f.stats=n.stats),{frag:f,part:c,level:u}):null}bufferFragmentData(e,t,n,i,o){var a;if(!e||this.state!==se.PARSING)return;const{data1:u,data2:c}=e;let f=u;if(u&&c&&(f=nn(u,c)),!((a=f)!=null&&a.length))return;const h={type:e.type,frag:t,part:n,chunkMeta:i,parent:t.type,data:f};if(this.hls.trigger(L.BUFFER_APPENDING,h),e.dropped&&e.independent&&!n){if(o)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!ht.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const n=t.currentTime,i=ht.bufferInfo(t,n,0),o=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,o*.25),u=Math.max(Math.min(e.start-a,i.end-a),n+a);e.start-u>a&&this.flushMainBuffer(u,e.start)}getFwdBufferInfo(e,t){const n=this.getLoadPosition();return Re(n)?this.getFwdBufferInfoAtPos(e,n,t):null}getFwdBufferInfoAtPos(e,t,n){const{config:{maxBufferHole:i}}=this,o=ht.bufferInfo(e,t,i);if(o.len===0&&o.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(t,n);if(a&&o.nextStart<a.end)return ht.bufferInfo(e,t,Math.max(o.nextStart,i))}return o}getMaxBufferLength(e){const{config:t}=this;let n;return e?n=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):n=t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,i=Math.max(Math.min(e-t,n.maxBufferLength),t),o=Math.max(e-t*3,n.maxMaxBufferLength/2,i);return o>=i?(n.maxMaxBufferLength=o,this.warn(`Reduce max buffer length to ${o}s`),!0):!1}getAppendedFrag(e,t=Fe.MAIN){const n=this.fragmentTracker.getAppendedFrag(e,Fe.MAIN);return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,i=n.length;if(!i)return null;const{config:o}=this,a=n[0].start;let u;if(t.live){const c=o.initialLiveManifestSize;if(i<c)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${c})`),null;(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a)&&(u=this.getInitialLiveFragment(t,n),this.startPosition=this.nextLoadPosition=u?this.hls.liveSyncPosition||u.start:e)}else e<=a&&(u=n[0]);if(!u){const c=o.lowLatencyMode?t.partEnd:t.fragmentEnd;u=this.getFragmentAtPosition(e,c,t)}return this.mapToInitFragWhenRequired(u)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===Wt.OK||n===Wt.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,i,o){const a=e.gap,u=this.getNextFragment(this.nextLoadPosition,t);if(u===null)return u;if(e=u,a&&e&&!e.gap&&n.nextStart){const c=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i);if(c!==null&&n.len+c.len>=o)return this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,n){let i=-1,o=!1,a=!0;for(let u=0,c=e.length;u<c;u++){const f=e[u];if(a=a&&!f.independent,i>-1&&n<f.start)break;const h=f.loaded;h?i=-1:(o||f.independent||a)&&f.fragment===t&&(i=u),o=h}return i}loadedEndOfParts(e,t){const n=e[e.length-1];return n&&t>n.start&&n.loaded}getInitialLiveFragment(e,t){const n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=iC(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const o=n.sn+1;if(o>=e.startSN&&o<=e.endSN){const a=t[o-e.startSN];n.cc===a.cc&&(i=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=aC(t,n.cc),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const o=this.hls.liveSyncPosition;o!==null&&(i=this.getFragmentAtPosition(o,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,n){const{config:i}=this;let{fragPrevious:o}=this,{fragments:a,endSN:u}=n;const{fragmentHint:c}=n,{maxFragLookUpTolerance:f}=i,h=n.partList,p=!!(i.lowLatencyMode&&h!=null&&h.length&&c);p&&c&&!this.bitrateTest&&(a=a.concat(c),u=c.sn);let g;if(e<t){const x=e>t-f?0:f;g=Sc(o,a,e,x)}else g=a[a.length-1];if(g){const x=g.sn-n.startSN,y=this.fragmentTracker.getState(g);if((y===Wt.OK||y===Wt.PARTIAL&&g.gap)&&(o=g),o&&g.sn===o.sn&&(!p||h[0].fragment.sn>g.sn)&&o&&g.level===o.level){const T=a[x+1];g.sn<u&&this.fragmentTracker.getState(T)!==Wt.OK?g=T:g=null}}return g}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,o=n.currentTime,a=e.fragments[0].start,u=e.edge,c=o>=a-t.maxFragLookUpTolerance&&o<=u;if(i!==null&&n.duration>i&&(o<i||!c)){const f=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!c&&n.readyState<4||o<u-f)&&(this.loadedmetadata||(this.nextLoadPosition=i),n.readyState&&(this.warn(`Playback: ${o.toFixed(3)} is located too far from the end of live sliding playlist: ${u}, reset currentTime to : ${i.toFixed(3)}`),n.currentTime=i))}}alignPlaylists(e,t,n){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const o=e.fragments[0].start,a=!t,u=e.alignedSliding&&Re(o);if(a||!u&&!o){const{fragPrevious:c}=this;LC(c,n,e);const f=e.fragments[0].start;return this.log(`Live playlist sliding: ${f.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${c?c.sn:"na"} fragments: ${i}`),f}return o}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let n=this.startPosition;if(n<t&&(n=-1),n===-1||this.lastCurrentTime===-1){const i=this.startTimeOffset!==null,o=i?this.startTimeOffset:e.startTimeOffset;o!==null&&Re(o)?(n=t+o,o<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Start time offset ${o} found in ${i?"multivariant":"media"} playlist, adjust startPosition to ${n}`),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==se.FRAG_LOADING_WAITING_RETRY)&&(this.state=se.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const h=this.getCurrentContext(t.chunkMeta);h&&(t.frag=h.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;if(this.fragContextChanged(n)){var i;this.warn(`Frag load error must match current frag to retry ${n.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const o=t.details===J.FRAG_GAP;o&&this.fragmentTracker.fragBuffered(n,!0);const a=t.errorAction,{action:u,retryCount:c=0,retryConfig:f}=a||{};if(a&&u===Jt.RetryRequest&&f){this.resetStartWhenNotLoaded(this.levelLastLoaded);const h=Gp(f,c);this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${c+1}/${f.maxNumRetry} in ${h}ms`),a.resolved=!0,this.retryDate=self.performance.now()+h,this.state=se.FRAG_LOADING_WAITING_RETRY}else if(f&&a)if(this.resetFragmentErrors(e),c<f.maxNumRetry)!o&&u!==Jt.RemoveAlternatePermanently&&(a.resolved=!0);else{j.warn(`${t.details} reached or exceeded max retry (${c})`);return}else(a==null?void 0:a.action)===Jt.SendAlternateToPenaltyBox?this.state=se.WAITING_LEVEL:this.state=se.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===se.PARSING||this.state===se.PARSED){const t=e.frag,n=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,n),o=i&&i.len>.5;o&&this.reduceMaxBufferLength(i.len,(t==null?void 0:t.duration)||10);const a=!o;return a&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===Fe.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==se.STOPPED&&(this.state=se.IDLE)}afterBufferFlushed(e,t,n){if(!e)return;const i=ht.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===se.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=se.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=e?e.details:null;t!=null&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,i){var o;const a=n.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((c,f)=>{const h=e.elementaryStreams[f];if(h){const p=h.endPTS-h.startPTS;if(p<=0)return this.warn(`Could not parse fragment ${e.sn} ${f} duration reliably (${p})`),c||!1;const g=i?0:HS(a,e,h.startPTS,h.endPTS,h.startDTS,h.endDTS);return this.hls.trigger(L.LEVEL_PTS_UPDATED,{details:a,level:n,drift:g,type:f,frag:e,start:h.startPTS,end:h.endPTS}),!0}return c},!1)&&((o=this.transmuxer)==null?void 0:o.error)===null){const c=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(n.fragmentError===0&&(n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(c.message),this.hls.trigger(L.ERROR,{type:Ne.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,fatal:!1,error:c,frag:e,reason:`Found no media in msn ${e.sn} of level "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=se.PARSED,this.hls.trigger(L.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}class XS{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;if(e.length)e.length===1?n=e[0]:n=FC(e,t);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function FC(r,e){const t=new Uint8Array(e);let n=0;for(let i=0;i<r.length;i++){const o=r[i];t.set(o,n),n+=o.length}return t}function MC(){return typeof __HLS_WORKER_BUNDLE__=="function"}function NC(){const r=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(r);return{worker:new self.Worker(e),objectURL:e}}function BC(r){const e=new self.URL(r,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function On(r="",e=9e4){return{type:r,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Kp{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=nn(this.cachedData,e),this.cachedData=null);let n=Ha(e,0),i=n?n.length:0,o;const a=this._audioTrack,u=this._id3Track,c=n?Up(n):void 0,f=e.length;for((this.basePTS===null||this.frameIndex===0&&Re(c))&&(this.basePTS=$C(c,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&u.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:xn.audioId3,duration:Number.POSITIVE_INFINITY});i<f;){if(this.canParse(e,i)){const h=this.appendFrame(a,e,i);h?(this.frameIndex++,this.lastPTS=h.sample.pts,i+=h.length,o=i):i=f}else ob(e,i)?(n=Ha(e,i),u.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:xn.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,o=i):i++;if(i===f&&o!==f){const h=bs(e,o);this.cachedData?this.cachedData=nn(this.cachedData,h):this.cachedData=h}}return{audioTrack:a,videoTrack:On(),id3Track:u,textTrack:On()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:On(),id3Track:this._id3Track,textTrack:On()}}destroy(){}}const $C=(r,e,t)=>{if(Re(r))return r*90;const n=t?t.baseTime*9e4/t.timescale:0;return e*9e4+n};function UC(r,e,t,n){let i,o,a,u;const c=navigator.userAgent.toLowerCase(),f=n,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=((e[t+2]&192)>>>6)+1;const p=(e[t+2]&60)>>>2;if(p>h.length-1){const g=new Error(`invalid ADTS sampling index:${p}`);r.emit(L.ERROR,L.ERROR,{type:Ne.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,fatal:!0,error:g,reason:g.message});return}return a=(e[t+2]&1)<<2,a|=(e[t+3]&192)>>>6,j.log(`manifest codec:${n}, ADTS type:${i}, samplingIndex:${p}`),/firefox/i.test(c)?p>=6?(i=5,u=new Array(4),o=p-3):(i=2,u=new Array(2),o=p):c.indexOf("android")!==-1?(i=2,u=new Array(2),o=p):(i=5,u=new Array(4),n&&(n.indexOf("mp4a.40.29")!==-1||n.indexOf("mp4a.40.5")!==-1)||!n&&p>=6?o=p-3:((n&&n.indexOf("mp4a.40.2")!==-1&&(p>=6&&a===1||/vivaldi/i.test(c))||!n&&a===1)&&(i=2,u=new Array(2)),o=p)),u[0]=i<<3,u[0]|=(p&14)>>1,u[1]|=(p&1)<<7,u[1]|=a<<3,i===5&&(u[1]|=(o&14)>>1,u[2]=(o&1)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:h[p],channelCount:a,codec:"mp4a.40."+i,manifestCodec:f}}function QS(r,e){return r[e]===255&&(r[e+1]&246)===240}function JS(r,e){return r[e+1]&1?7:9}function Wp(r,e){return(r[e+3]&3)<<11|r[e+4]<<3|(r[e+5]&224)>>>5}function GC(r,e){return e+5<r.length}function Tc(r,e){return e+1<r.length&&QS(r,e)}function jC(r,e){return GC(r,e)&&QS(r,e)&&Wp(r,e)<=r.length-e}function HC(r,e){if(Tc(r,e)){const t=JS(r,e);if(e+t>=r.length)return!1;const n=Wp(r,e);if(n<=t)return!1;const i=e+n;return i===r.length||Tc(r,i)}return!1}function ZS(r,e,t,n,i){if(!r.samplerate){const o=UC(e,t,n,i);if(!o)return;r.config=o.config,r.samplerate=o.samplerate,r.channelCount=o.channelCount,r.codec=o.codec,r.manifestCodec=o.manifestCodec,j.log(`parsed codec:${r.codec}, rate:${o.samplerate}, channels:${o.channelCount}`)}}function e1(r){return 1024*9e4/r}function VC(r,e){const t=JS(r,e);if(e+t<=r.length){const n=Wp(r,e)-t;if(n>0)return{headerLength:t,frameLength:n}}}function t1(r,e,t,n,i){const o=e1(r.samplerate),a=n+i*o,u=VC(e,t);let c;if(u){const{frameLength:p,headerLength:g}=u,x=g+p,y=Math.max(0,t+x-e.length);y?(c=new Uint8Array(x-g),c.set(e.subarray(t+g,e.length),0)):c=e.subarray(t+g,t+x);const S={unit:c,pts:a};return y||r.samples.push(S),{sample:S,length:x,missing:y}}const f=e.length-t;return c=new Uint8Array(f),c.set(e.subarray(t,e.length),0),{sample:{unit:c,pts:a},length:f,missing:-1}}let bu=null;const zC=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],KC=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],WC=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],YC=[0,1,1,4];function r1(r,e,t,n,i){if(t+24>e.length)return;const o=n1(e,t);if(o&&t+o.frameLength<=e.length){const a=o.samplesPerFrame*9e4/o.sampleRate,u=n+i*a,c={unit:e.subarray(t,t+o.frameLength),pts:u,dts:u};return r.config=[],r.channelCount=o.channelCount,r.samplerate=o.sampleRate,r.samples.push(c),{sample:c,length:o.frameLength,missing:0}}}function n1(r,e){const t=r[e+1]>>3&3,n=r[e+1]>>1&3,i=r[e+2]>>4&15,o=r[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&o!==3){const a=r[e+2]>>1&1,u=r[e+3]>>6,c=t===3?3-n:n===3?3:4,f=zC[c*14+i-1]*1e3,p=KC[(t===3?0:t===2?1:2)*3+o],g=u===3?1:2,x=WC[t][n],y=YC[n],S=x*8*y,T=Math.floor(x*f/p+a)*y;if(bu===null){const C=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);bu=C?parseInt(C[1]):0}return!!bu&&bu<=87&&n===2&&f>=224e3&&u===0&&(r[e+3]=r[e+3]|128),{sampleRate:p,channelCount:g,frameLength:T,samplesPerFrame:S}}}function Yp(r,e){return r[e]===255&&(r[e+1]&224)===224&&(r[e+1]&6)!==0}function i1(r,e){return e+1<r.length&&Yp(r,e)}function qC(r,e){return Yp(r,e)&&4<=r.length-e}function s1(r,e){if(e+1<r.length&&Yp(r,e)){const n=n1(r,e);let i=4;n!=null&&n.frameLength&&(i=n.frameLength);const o=e+i;return o===r.length||i1(r,o)}return!1}class XC extends Kp{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=Ha(e,0);let n=(t==null?void 0:t.length)||0;if(s1(e,n))return!1;for(let i=e.length;n<i;n++)if(HC(e,n))return j.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return jC(e,t)}appendFrame(e,t,n){ZS(e,this.observer,t,n,e.manifestCodec);const i=t1(e,t,n,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const QC=/\/emsg[-/]ID3/i;class JC{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,i){const o=this.videoTrack=On("video",1),a=this.audioTrack=On("audio",1),u=this.txtTrack=On("text",1);if(this.id3Track=On("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const c=FS(e);if(c.video){const{id:f,timescale:h,codec:p}=c.video;o.id=f,o.timescale=u.timescale=h,o.codec=p}if(c.audio){const{id:f,timescale:h,codec:p}=c.audio;a.id=f,a.timescale=h,a.codec=p}u.id=PS.text,o.sampleDuration=0,o.duration=a.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return mb(e)}demux(e,t){this.timeOffset=t;let n=e;const i=this.videoTrack,o=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=nn(this.remainderData,e));const u=wb(n);this.remainderData=u.remainder,i.samples=u.valid||new Uint8Array}else i.samples=n;const a=this.extractID3Track(i,t);return o.samples=Yy(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return n.samples=Yy(e,t),{videoTrack:t,audioTrack:On(),id3Track:i,textTrack:On()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const i=je(e.samples,["emsg"]);i&&i.forEach(o=>{const a=Lb(o);if(QC.test(a.schemeIdUri)){const u=Re(a.presentationTime)?a.presentationTime/a.timeScale:t+a.presentationTimeDelta/a.timeScale;let c=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;c<=.001&&(c=Number.POSITIVE_INFINITY);const f=a.payload;n.samples.push({data:f,len:f.byteLength,dts:u,pts:u,type:xn.emsg,duration:c})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const o1=(r,e)=>{let t=0,n=5;e+=n;const i=new Uint32Array(1),o=new Uint32Array(1),a=new Uint8Array(1);for(;n>0;){a[0]=r[e];const u=Math.min(n,8),c=8-u;o[0]=4278190080>>>24+c<<c,i[0]=(a[0]&o[0])>>c,t=t?t<<u|i[0]:i[0],e+=1,n-=u}return t};class ZC extends Kp{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const i=a1(e,t,n,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const t=Ha(e,0);if(!t)return!1;const n=t.length;return e[n]===11&&e[n+1]===119&&Up(t)!==void 0&&o1(e,n)<16}}function a1(r,e,t,n,i){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const o=e[t+4]>>6;if(o>=3)return-1;const u=[48e3,44100,32e3][o],c=e[t+4]&63,h=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][c*3+o]*2;if(t+h>e.length)return-1;const p=e[t+6]>>5;let g=0;p===2?g+=2:(p&1&&p!==1&&(g+=2),p&4&&(g+=2));const x=(e[t+6]<<8|e[t+7])>>12-g&1,S=[2,1,2,3,3,4,4,5][p]+x,T=e[t+5]>>3,R=e[t+5]&7,k=new Uint8Array([o<<6|T<<1|R>>2,(R&3)<<6|p<<3|x<<2|c>>4,c<<4&224]),C=1536/u*9e4,I=n+i*C,w=e.subarray(t,t+h);return r.config=k,r.channelCount=S,r.samplerate=u,r.samples.push({unit:w,pts:I}),h}class ek{constructor(){this.VideoSample=null}createVideoSample(e,t,n,i){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:i,length:0}}getLastNalUnit(e){var t;let n=this.VideoSample,i;if((!n||n.units.length===0)&&(n=e[e.length-1]),(t=n)!=null&&t.units){const o=n.units;i=o[o.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const n=t.samples,i=n.length;if(i){const o=n[i-1];e.pts=o.pts,e.dts=o.dts}else{t.dropped++;return}}t.samples.push(e)}e.debug.length&&j.log(e.pts+"/"+e.dts+":"+e.debug)}}class Tv{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),o=Math.min(4,t);if(o===0)throw new Error("no bytes available");i.set(e.subarray(n,n+o)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=o*8,this.bytesAvailable-=o}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&j.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t=8,n=8,i;for(let o=0;o<e;o++)n!==0&&(i=this.readEG(),n=(t+i+256)%256),t=n===0?t:n}readSPS(){let e=0,t=0,n=0,i=0,o,a,u;const c=this.readUByte.bind(this),f=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),x=this.skipEG.bind(this),y=this.skipUEG.bind(this),S=this.skipScalingList.bind(this);c();const T=c();if(f(5),g(3),c(),y(),T===100||T===110||T===122||T===244||T===44||T===83||T===86||T===118||T===128){const P=h();if(P===3&&g(1),y(),y(),g(1),p())for(a=P!==3?8:12,u=0;u<a;u++)p()&&(u<6?S(16):S(64))}y();const R=h();if(R===0)h();else if(R===1)for(g(1),x(),x(),o=h(),u=0;u<o;u++)x();y(),g(1);const k=h(),C=h(),I=f(1);I===0&&g(1),g(1),p()&&(e=h(),t=h(),n=h(),i=h());let w=[1,1];if(p()&&p())switch(c()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:{w=[c()<<8|c(),c()<<8|c()];break}}return{width:Math.ceil((k+1)*16-e*2-t*2),height:(2-I)*(C+1)*16-(I?2:4)*(n+i),pixelRatio:w}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class tk extends ek{parseAVCPES(e,t,n,i,o){const a=this.parseAVCNALu(e,n.data);let u=this.VideoSample,c,f=!1;n.data=null,u&&a.length&&!e.audFound&&(this.pushAccessUnit(u,e),u=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"")),a.forEach(h=>{var p;switch(h.type){case 1:{let S=!1;c=!0;const T=h.data;if(f&&T.length>4){const R=new Tv(T).readSliceType();(R===2||R===4||R===7||R===9)&&(S=!0)}if(S){var g;(g=u)!=null&&g.frame&&!u.key&&(this.pushAccessUnit(u,e),u=this.VideoSample=null)}u||(u=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),u.frame=!0,u.key=S;break}case 5:c=!0,(p=u)!=null&&p.frame&&!u.key&&(this.pushAccessUnit(u,e),u=this.VideoSample=null),u||(u=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),u.key=!0,u.frame=!0;break;case 6:{c=!0,NS(h.data,1,n.pts,t.samples);break}case 7:{var x,y;c=!0,f=!0;const S=h.data,R=new Tv(S).readSPS();if(!e.sps||e.width!==R.width||e.height!==R.height||((x=e.pixelRatio)==null?void 0:x[0])!==R.pixelRatio[0]||((y=e.pixelRatio)==null?void 0:y[1])!==R.pixelRatio[1]){e.width=R.width,e.height=R.height,e.pixelRatio=R.pixelRatio,e.sps=[S],e.duration=o;const k=S.subarray(1,4);let C="avc1.";for(let I=0;I<3;I++){let w=k[I].toString(16);w.length<2&&(w="0"+w),C+=w}e.codec=C}break}case 8:c=!0,e.pps=[h.data];break;case 9:c=!0,e.audFound=!0,u&&this.pushAccessUnit(u,e),u=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"");break;case 12:c=!0;break;default:c=!1,u&&(u.debug+="unknown NAL "+h.type+" ");break}u&&c&&u.units.push(h)}),i&&u&&(this.pushAccessUnit(u,e),this.VideoSample=null)}parseAVCNALu(e,t){const n=t.byteLength;let i=e.naluState||0;const o=i,a=[];let u=0,c,f,h,p=-1,g=0;for(i===-1&&(p=0,g=t[0]&31,i=0,u=1);u<n;){if(c=t[u++],!i){i=c?0:1;continue}if(i===1){i=c?0:2;continue}if(!c)i=3;else if(c===1){if(f=u-i-1,p>=0){const x={data:t.subarray(p,f),type:g};a.push(x)}else{const x=this.getLastNalUnit(e.samples);x&&(o&&u<=4-o&&x.state&&(x.data=x.data.subarray(0,x.data.byteLength-o)),f>0&&(x.data=nn(x.data,t.subarray(0,f)),x.state=0))}u<n?(h=t[u]&31,p=u,g=h,i=0):i=-1}else i=0}if(p>=0&&i>=0){const x={data:t.subarray(p,n),type:g,state:i};a.push(x)}if(a.length===0){const x=this.getLastNalUnit(e.samples);x&&(x.data=nn(x.data,t))}return e.naluState=i,a}}class rk{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new Vp(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,n){const i=e[t].unit;if(i.length<=16)return;const o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length);this.decryptBuffer(a).then(u=>{const c=new Uint8Array(u);i.set(c,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)})}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length){n();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(t);let i=0;for(let o=32;o<e.length-16;o+=160,i+=16)n.set(e.subarray(o,o+16),i);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let i=0;for(let o=32;o<e.length-16;o+=160,i+=16)e.set(n.subarray(i,i+16),o);return e}decryptAvcSample(e,t,n,i,o){const a=BS(o.data),u=this.getAvcEncryptedData(a);this.decryptBuffer(u.buffer).then(c=>{o.data=this.getAvcDecryptedUnit(a,c),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,i)})}decryptAvcSamples(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length){i();return}const o=e[t].units;for(;!(n>=o.length);n++){const a=o[n];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,n,i,a),!this.decrypter.isSync()))return}}}}const zt=188;class Wi{constructor(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.videoParser=new tk}static probe(e){const t=Wi.syncOffset(e);return t>0&&j.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),t!==-1}static syncOffset(e){const t=e.length;let n=Math.min(zt*5,t-zt)+1,i=0;for(;i<n;){let o=!1,a=-1,u=0;for(let c=i;c<t;c+=zt)if(e[c]===71&&(t-c===zt||e[c+zt]===71)){if(u++,a===-1&&(a=c,a!==0&&(n=Math.min(a+zt*99,e.length-zt)+1)),o||(o=Zh(e,c)===0),o&&u>1&&(a===0&&u>2||c+zt>n))return a}else{if(u)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:PS[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Wi.createTrack("video"),this._audioTrack=Wi.createTrack("audio",i),this._id3Track=Wi.createTrack("id3"),this._txtTrack=Wi.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n,this._duration=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,i=!1){n||(this.sampleAes=null);let o;const a=this._videoTrack,u=this._audioTrack,c=this._id3Track,f=this._txtTrack;let h=a.pid,p=a.pesData,g=u.pid,x=c.pid,y=u.pesData,S=c.pesData,T=null,R=this.pmtParsed,k=this._pmtId,C=e.length;if(this.remainderData&&(e=nn(this.remainderData,e),C=e.length,this.remainderData=null),C<zt&&!i)return this.remainderData=e,{audioTrack:u,videoTrack:a,id3Track:c,textTrack:f};const I=Math.max(0,Wi.syncOffset(e));C-=(C-I)%zt,C<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,C,e.buffer.byteLength-C));let w=0;for(let D=I;D<C;D+=zt)if(e[D]===71){const U=!!(e[D+1]&64),Q=Zh(e,D),A=(e[D+3]&48)>>4;let $;if(A>1){if($=D+5+e[D+4],$===D+zt)continue}else $=D+4;switch(Q){case h:U&&(p&&(o=po(p))&&this.videoParser.parseAVCPES(a,f,o,!1,this._duration),p={data:[],size:0}),p&&(p.data.push(e.subarray($,D+zt)),p.size+=D+zt-$);break;case g:if(U){if(y&&(o=po(y)))switch(u.segmentCodec){case"aac":this.parseAACPES(u,o);break;case"mp3":this.parseMPEGPES(u,o);break;case"ac3":this.parseAC3PES(u,o);break}y={data:[],size:0}}y&&(y.data.push(e.subarray($,D+zt)),y.size+=D+zt-$);break;case x:U&&(S&&(o=po(S))&&this.parseID3PES(c,o),S={data:[],size:0}),S&&(S.data.push(e.subarray($,D+zt)),S.size+=D+zt-$);break;case 0:U&&($+=e[$]+1),k=this._pmtId=nk(e,$);break;case k:{U&&($+=e[$]+1);const ie=ik(e,$,this.typeSupported,n,this.observer);h=ie.videoPid,h>0&&(a.pid=h,a.segmentCodec=ie.segmentVideoCodec),g=ie.audioPid,g>0&&(u.pid=g,u.segmentCodec=ie.segmentAudioCodec),x=ie.id3Pid,x>0&&(c.pid=x),T!==null&&!R&&(j.warn(`MPEG-TS PMT found at ${D} after unknown PID '${T}'. Backtracking to sync byte @${I} to parse all TS packets.`),T=null,D=I-188),R=this.pmtParsed=!0;break}case 17:case 8191:break;default:T=Q;break}}else w++;w>0&&wc(this.observer,new Error(`Found ${w} TS packet/s that do not start with 0x47`)),a.pesData=p,u.pesData=y,c.pesData=S;const P={audioTrack:u,videoTrack:a,id3Track:c,textTrack:f};return i&&this.extractRemainingSamples(P),P}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:i,textTrack:o}=e,a=n.pesData,u=t.pesData,c=i.pesData;let f;if(a&&(f=po(a))?(this.videoParser.parseAVCPES(n,o,f,!0,this._duration),n.pesData=null):n.pesData=a,u&&(f=po(u))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,f);break;case"mp3":this.parseMPEGPES(t,f);break;case"ac3":this.parseAC3PES(t,f);break}t.pesData=null}else u!=null&&u.size&&j.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=u;c&&(f=po(c))?(this.parseID3PES(i,f),i.pesData=null):i.pesData=c}demuxSampleAes(e,t,n){const i=this.demux(e,n,!0,!this.config.progressive),o=this.sampleAes=new rk(this.observer,this.config,t);return this.decrypt(i,o)}decrypt(e,t){return new Promise(n=>{const{audioTrack:i,videoTrack:o}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{o.samples?t.decryptAvcSamples(o.samples,0,0,()=>{n(e)}):n(e)}):o.samples&&t.decryptAvcSamples(o.samples,0,0,()=>{n(e)})})}destroy(){this._duration=0}parseAACPES(e,t){let n=0;const i=this.aacOverFlow;let o=t.data;if(i){this.aacOverFlow=null;const p=i.missing,g=i.sample.unit.byteLength;if(p===-1)o=nn(i.sample.unit,o);else{const x=g-p;i.sample.unit.set(o.subarray(0,p),x),e.samples.push(i.sample),n=i.missing}}let a,u;for(a=n,u=o.length;a<u-1&&!Tc(o,a);a++);if(a!==n){let p;const g=a<u-1;if(g?p=`AAC PES did not start with ADTS header,offset:${a}`:p="No ADTS header found in AAC PES",wc(this.observer,new Error(p),g),!g)return}ZS(e,this.observer,o,a,this.audioCodec);let c;if(t.pts!==void 0)c=t.pts;else if(i){const p=e1(e.samplerate);c=i.sample.pts+p}else{j.warn("[tsdemuxer]: AAC PES unknown PTS");return}let f=0,h;for(;a<u;)if(h=t1(e,o,a,c,f),a+=h.length,h.missing){this.aacOverFlow=h;break}else for(f++;a<u-1&&!Tc(o,a);a++);}parseMPEGPES(e,t){const n=t.data,i=n.length;let o=0,a=0;const u=t.pts;if(u===void 0){j.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<i;)if(i1(n,a)){const c=r1(e,n,a,u,o);if(c)a+=c.length,o++;else break}else a++}parseAC3PES(e,t){{const n=t.data,i=t.pts;if(i===void 0){j.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const o=n.length;let a=0,u=0,c;for(;u<o&&(c=a1(e,n,u,i,a++))>0;)u+=c}}parseID3PES(e,t){if(t.pts===void 0){j.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=Ot({},t,{type:this._videoTrack?xn.emsg:xn.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function Zh(r,e){return((r[e+1]&31)<<8)+r[e+2]}function nk(r,e){return(r[e+10]&31)<<8|r[e+11]}function ik(r,e,t,n,i){const o={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=(r[e+1]&15)<<8|r[e+2],u=e+3+a-4,c=(r[e+10]&15)<<8|r[e+11];for(e+=12+c;e<u;){const f=Zh(r,e),h=(r[e+3]&15)<<8|r[e+4];switch(r[e]){case 207:if(!n){hh("ADTS AAC");break}case 15:o.audioPid===-1&&(o.audioPid=f);break;case 21:o.id3Pid===-1&&(o.id3Pid=f);break;case 219:if(!n){hh("H.264");break}case 27:o.videoPid===-1&&(o.videoPid=f,o.segmentVideoCodec="avc");break;case 3:case 4:!t.mpeg&&!t.mp3?j.log("MPEG audio found, not supported in this browser"):o.audioPid===-1&&(o.audioPid=f,o.segmentAudioCodec="mp3");break;case 193:if(!n){hh("AC-3");break}case 129:t.ac3?o.audioPid===-1&&(o.audioPid=f,o.segmentAudioCodec="ac3"):j.log("AC-3 audio found, not supported in this browser");break;case 6:if(o.audioPid===-1&&h>0){let p=e+5,g=h;for(;g>2;){switch(r[p]){case 106:t.ac3!==!0?j.log("AC-3 audio found, not supported in this browser for now"):(o.audioPid=f,o.segmentAudioCodec="ac3");break}const y=r[p+1]+2;p+=y,g-=y}}break;case 194:case 135:return wc(i,new Error("Unsupported EC-3 in M2TS found")),o;case 36:return wc(i,new Error("Unsupported HEVC in M2TS found")),o}e+=h+5}return o}function wc(r,e,t){j.warn(`parsing error: ${e.message}`),r.emit(L.ERROR,L.ERROR,{type:Ne.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function hh(r){j.log(`${r} with AES-128-CBC encryption found in unencrypted stream`)}function po(r){let e=0,t,n,i,o,a;const u=r.data;if(!r||r.size===0)return null;for(;u[0].length<19&&u.length>1;)u[0]=nn(u[0],u[1]),u.splice(1,1);if(t=u[0],(t[0]<<16)+(t[1]<<8)+t[2]===1){if(n=(t[4]<<8)+t[5],n&&n>r.size-6)return null;const f=t[7];f&192&&(o=(t[9]&14)*536870912+(t[10]&255)*4194304+(t[11]&254)*16384+(t[12]&255)*128+(t[13]&254)/2,f&64?(a=(t[14]&14)*536870912+(t[15]&255)*4194304+(t[16]&254)*16384+(t[17]&255)*128+(t[18]&254)/2,o-a>60*9e4&&(j.warn(`${Math.round((o-a)/9e4)}s delta between PTS and DTS, align them`),o=a)):a=o),i=t[8];let h=i+9;if(r.size<=h)return null;r.size-=h;const p=new Uint8Array(r.size);for(let g=0,x=u.length;g<x;g++){t=u[g];let y=t.byteLength;if(h)if(h>y){h-=y;continue}else t=t.subarray(h),y-=h,h=0;p.set(t,e),e+=y}return n&&(n-=i+3),{data:p,pts:o,dts:a,len:n}}return null}class sk extends Kp{resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=Ha(e,0);let n=(t==null?void 0:t.length)||0;if(t&&e[n]===11&&e[n+1]===119&&Up(t)!==void 0&&o1(e,n)<=16)return!1;for(let i=e.length;n<i;n++)if(s1(e,n))return j.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return qC(e,t)}appendFrame(e,t,n){if(this.basePTS!==null)return r1(e,t,n,this.basePTS,this.frameIndex)}}class wv{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Vi=Math.pow(2,32)-1;class z{static init(){z.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in z.types)z.types.hasOwnProperty(e)&&(z.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);z.HDLR_TYPES={video:t,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);z.STTS=z.STSC=z.STCO=o,z.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),z.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),z.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),z.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),u=new Uint8Array([97,118,99,49]),c=new Uint8Array([0,0,0,1]);z.FTYP=z.box(z.types.ftyp,a,c,a,u),z.DINF=z.box(z.types.dinf,z.box(z.types.dref,i))}static box(e,...t){let n=8,i=t.length;const o=i;for(;i--;)n+=t[i].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=n&255,a.set(e,4),i=0,n=8;i<o;i++)a.set(t[i],n),n+=t[i].byteLength;return a}static hdlr(e){return z.box(z.types.hdlr,z.HDLR_TYPES[e])}static mdat(e){return z.box(z.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Vi+1)),i=Math.floor(t%(Vi+1));return z.box(z.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return z.box(z.types.mdia,z.mdhd(e.timescale,e.duration),z.hdlr(e.type),z.minf(e))}static mfhd(e){return z.box(z.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?z.box(z.types.minf,z.box(z.types.smhd,z.SMHD),z.DINF,z.stbl(e)):z.box(z.types.minf,z.box(z.types.vmhd,z.VMHD),z.DINF,z.stbl(e))}static moof(e,t,n){return z.box(z.types.moof,z.mfhd(e),z.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=z.trak(e[t]);return z.box.apply(null,[z.types.moov,z.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(z.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=z.trex(e[t]);return z.box.apply(null,[z.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Vi+1)),i=Math.floor(t%(Vi+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return z.box(z.types.mvhd,o)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let i,o;for(i=0;i<t.length;i++)o=t[i].flags,n[i+4]=o.dependsOn<<4|o.isDependedOn<<2|o.hasRedundancy;return z.box(z.types.sdtp,n)}static stbl(e){return z.box(z.types.stbl,z.stsd(e),z.box(z.types.stts,z.STTS),z.box(z.types.stsc,z.STSC),z.box(z.types.stsz,z.STSZ),z.box(z.types.stco,z.STCO))}static avc1(e){let t=[],n=[],i,o,a;for(i=0;i<e.sps.length;i++)o=e.sps[i],a=o.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(o));for(i=0;i<e.pps.length;i++)o=e.pps[i],a=o.byteLength,n.push(a>>>8&255),n.push(a&255),n=n.concat(Array.prototype.slice.call(o));const u=z.box(z.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),c=e.width,f=e.height,h=e.pixelRatio[0],p=e.pixelRatio[1];return z.box(z.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,f>>8&255,f&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u,z.box(z.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),z.box(z.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,p>>24,p>>16&255,p>>8&255,p&255])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return z.box(z.types.mp4a,z.audioStsd(e),z.box(z.types.esds,z.esds(e)))}static mp3(e){return z.box(z.types[".mp3"],z.audioStsd(e))}static ac3(e){return z.box(z.types["ac-3"],z.audioStsd(e),z.box(z.types.dac3,e.config))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?z.box(z.types.stsd,z.STSD,z.mp3(e)):e.segmentCodec==="ac3"?z.box(z.types.stsd,z.STSD,z.ac3(e)):z.box(z.types.stsd,z.STSD,z.mp4a(e)):z.box(z.types.stsd,z.STSD,z.avc1(e))}static tkhd(e){const t=e.id,n=e.duration*e.timescale,i=e.width,o=e.height,a=Math.floor(n/(Vi+1)),u=Math.floor(n%(Vi+1));return z.box(z.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,u>>24,u>>16&255,u>>8&255,u&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,o>>8&255,o&255,0,0]))}static traf(e,t){const n=z.sdtp(e),i=e.id,o=Math.floor(t/(Vi+1)),a=Math.floor(t%(Vi+1));return z.box(z.types.traf,z.box(z.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),z.box(z.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,a>>24,a>>16&255,a>>8&255,a&255])),z.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,z.box(z.types.trak,z.tkhd(e),z.mdia(e))}static trex(e){const t=e.id;return z.box(z.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],i=n.length,o=12+16*i,a=new Uint8Array(o);let u,c,f,h,p,g;for(t+=8+o,a.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),u=0;u<i;u++)c=n[u],f=c.duration,h=c.size,p=c.flags,g=c.cts,a.set([f>>>24&255,f>>>16&255,f>>>8&255,f&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255,p.isLeading<<2|p.dependsOn,p.isDependedOn<<6|p.hasRedundancy<<4|p.paddingValue<<1|p.isNonSync,p.degradPrio&61440,p.degradPrio&15,g>>>24&255,g>>>16&255,g>>>8&255,g&255],12+16*u);return z.box(z.types.trun,a)}static initSegment(e){z.types||z.init();const t=z.moov(e);return nn(z.FTYP,t)}}z.types=void 0;z.HDLR_TYPES=void 0;z.STTS=void 0;z.STSC=void 0;z.STCO=void 0;z.STSZ=void 0;z.VMHD=void 0;z.SMHD=void 0;z.STSD=void 0;z.FTYP=void 0;z.DINF=void 0;const l1=9e4;function qp(r,e,t=1,n=!1){const i=r*e*t;return n?Math.round(i):i}function ok(r,e,t=1,n=!1){return qp(r,e,1/t,n)}function ka(r,e=!1){return qp(r,1e3,1/l1,e)}function ak(r,e=1){return qp(r,l1,1/e)}const lk=10*1e3,Rv=1024,uk=1152,ck=1536;let mo=null,ph=null;class Wu{constructor(e,t,n,i=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,mo===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);mo=a?parseInt(a[1]):0}if(ph===null){const o=navigator.userAgent.match(/Safari\/(\d+)/i);ph=o?parseInt(o[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){j.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){j.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){j.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,i=e.reduce((o,a)=>{let u=a.pts,c=u-o;return c<-4294967296&&(t=!0,u=Zr(u,n),c=u-o),c>0?o:u},n);return t&&j.debug("PTS rollover detected"),i}remux(e,t,n,i,o,a,u,c){let f,h,p,g,x,y,S=o,T=o;const R=e.pid>-1,k=t.pid>-1,C=t.samples.length,I=e.samples.length>0,w=u&&C>0||C>1;if((!R||I)&&(!k||w)||this.ISGenerated||u){if(this.ISGenerated){var D,U,Q,A;const fe=this.videoTrackConfig;fe&&(t.width!==fe.width||t.height!==fe.height||((D=t.pixelRatio)==null?void 0:D[0])!==((U=fe.pixelRatio)==null?void 0:U[0])||((Q=t.pixelRatio)==null?void 0:Q[1])!==((A=fe.pixelRatio)==null?void 0:A[1]))&&this.resetInitSegment()}else p=this.generateIS(e,t,o,a);const $=this.isVideoContiguous;let ie=-1,te;if(w&&(ie=dk(t.samples),!$&&this.config.forceKeyFrameOnDiscontinuity))if(y=!0,ie>0){j.warn(`[mp4-remuxer]: Dropped ${ie} out of ${C} video samples due to a missing keyframe`);const fe=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(ie),t.dropped+=ie,T+=(t.samples[0].pts-fe)/t.inputTimeScale,te=T}else ie===-1&&(j.warn(`[mp4-remuxer]: No keyframe found out of ${C} video samples`),y=!1);if(this.ISGenerated){if(I&&w){const fe=this.getVideoStartPts(t.samples),pe=(Zr(e.samples[0].pts,fe)-fe)/t.inputTimeScale;S+=Math.max(0,pe),T+=Math.max(0,-pe)}if(I){if(e.samplerate||(j.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),p=this.generateIS(e,t,o,a)),h=this.remuxAudio(e,S,this.isAudioContiguous,a,k||w||c===Fe.AUDIO?T:void 0),w){const fe=h?h.endPTS-h.startPTS:0;t.inputTimeScale||(j.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),p=this.generateIS(e,t,o,a)),f=this.remuxVideo(t,T,$,fe)}}else w&&(f=this.remuxVideo(t,T,$,0));f&&(f.firstKeyFrame=ie,f.independent=ie!==-1,f.firstKeyFramePTS=te)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(x=u1(n,o,this._initPTS,this._initDTS)),i.samples.length&&(g=c1(i,o,this._initPTS))),{audio:h,video:f,initSegment:p,independent:y,text:g,id3:x}}generateIS(e,t,n,i){const o=e.samples,a=t.samples,u=this.typeSupported,c={},f=this._initPTS;let h=!f||i,p="audio/mp4",g,x,y;if(h&&(g=x=1/0),e.config&&o.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":u.mpeg?(p="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}c.audio={id:"audio",container:p,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&u.mpeg?new Uint8Array(0):z.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(y=e.inputTimeScale,!f||y!==f.timescale?g=x=o[0].pts-Math.round(y*n):h=!1)}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,c.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:z.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(y=t.inputTimeScale,!f||y!==f.timescale){const S=this.getVideoStartPts(a),T=Math.round(y*n);x=Math.min(x,Zr(a[0].dts,S)-T),g=Math.min(g,S-T)}else h=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(c).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:g,timescale:y},this._initDTS={baseTime:x,timescale:y}):g=y=void 0,{tracks:c,initPTS:g,timescale:y}}remuxVideo(e,t,n,i){const o=e.inputTimeScale,a=e.samples,u=[],c=a.length,f=this._initPTS;let h=this.nextAvcDts,p=8,g=this.videoSampleDuration,x,y,S=Number.POSITIVE_INFINITY,T=Number.NEGATIVE_INFINITY,R=!1;if(!n||h===null){const Y=t*o,q=a[0].pts-Zr(a[0].dts,a[0].pts);mo&&h!==null&&Math.abs(Y-q-h)<15e3?n=!0:h=Y-q}const k=f.baseTime*o/f.timescale;for(let Y=0;Y<c;Y++){const q=a[Y];q.pts=Zr(q.pts-k,h),q.dts=Zr(q.dts-k,h),q.dts<a[Y>0?Y-1:Y].dts&&(R=!0)}R&&a.sort(function(Y,q){const F=Y.dts-q.dts,H=Y.pts-q.pts;return F||H}),x=a[0].dts,y=a[a.length-1].dts;const C=y-x,I=C?Math.round(C/(c-1)):g||e.inputTimeScale/30;if(n){const Y=x-h,q=Y>I,F=Y<-1;if((q||F)&&(q?j.warn(`AVC: ${ka(Y,!0)} ms (${Y}dts) hole between fragments detected at ${t.toFixed(3)}`):j.warn(`AVC: ${ka(-Y,!0)} ms (${Y}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!F||h>=a[0].pts||mo)){x=h;const H=a[0].pts-Y;if(q)a[0].dts=x,a[0].pts=H;else for(let me=0;me<a.length&&!(a[me].dts>H);me++)a[me].dts-=Y,a[me].pts-=Y;j.log(`Video: Initial PTS/DTS adjusted: ${ka(H,!0)}/${ka(x,!0)}, delta: ${ka(Y,!0)} ms`)}}x=Math.max(0,x);let w=0,P=0,D=x;for(let Y=0;Y<c;Y++){const q=a[Y],F=q.units,H=F.length;let me=0;for(let ve=0;ve<H;ve++)me+=F[ve].data.length;P+=me,w+=H,q.length=me,q.dts<D?(q.dts=D,D+=I/4|0||1):D=q.dts,S=Math.min(q.pts,S),T=Math.max(q.pts,T)}y=a[c-1].dts;const U=P+4*w+8;let Q;try{Q=new Uint8Array(U)}catch(Y){this.observer.emit(L.ERROR,L.ERROR,{type:Ne.MUX_ERROR,details:J.REMUX_ALLOC_ERROR,fatal:!1,error:Y,bytes:U,reason:`fail allocating video mdat ${U}`});return}const A=new DataView(Q.buffer);A.setUint32(0,U),Q.set(z.types.mdat,4);let $=!1,ie=Number.POSITIVE_INFINITY,te=Number.POSITIVE_INFINITY,fe=Number.NEGATIVE_INFINITY,de=Number.NEGATIVE_INFINITY;for(let Y=0;Y<c;Y++){const q=a[Y],F=q.units;let H=0;for(let Se=0,be=F.length;Se<be;Se++){const Me=F[Se],Be=Me.data,De=Me.data.byteLength;A.setUint32(p,De),p+=4,Q.set(Be,p),p+=De,H+=4+De}let me;if(Y<c-1)g=a[Y+1].dts-q.dts,me=a[Y+1].pts-q.pts;else{const Se=this.config,be=Y>0?q.dts-a[Y-1].dts:I;if(me=Y>0?q.pts-a[Y-1].pts:I,Se.stretchShortVideoTrack&&this.nextAudioPts!==null){const Me=Math.floor(Se.maxBufferHole*o),Be=(i?S+i*o:this.nextAudioPts)-q.pts;Be>Me?(g=Be-be,g<0?g=be:$=!0,j.log(`[mp4-remuxer]: It is approximately ${Be/90} ms to the next segment; using duration ${g/90} ms for the last video frame.`)):g=be}else g=be}const ve=Math.round(q.pts-q.dts);ie=Math.min(ie,g),fe=Math.max(fe,g),te=Math.min(te,me),de=Math.max(de,me),u.push(new Av(q.key,g,H,ve))}if(u.length){if(mo){if(mo<70){const Y=u[0].flags;Y.dependsOn=2,Y.isNonSync=0}}else if(ph&&de-te<fe-ie&&I/fe<.025&&u[0].cts===0){j.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let Y=x;for(let q=0,F=u.length;q<F;q++){const H=Y+u[q].duration,me=Y+u[q].cts;if(q<F-1){const ve=H+u[q+1].cts;u[q].duration=ve-me}else u[q].duration=q?u[q-1].duration:I;u[q].cts=0,Y=H}}}g=$||!g?I:g,this.nextAvcDts=h=y+g,this.videoSampleDuration=g,this.isVideoContiguous=!0;const ne={data1:z.moof(e.sequenceNumber++,x,Ot({},e,{samples:u})),data2:Q,startPTS:S/o,endPTS:(T+g)/o,startDTS:x/o,endDTS:h/o,type:"video",hasAudio:!1,hasVideo:!0,nb:u.length,dropped:e.dropped};return e.samples=[],e.dropped=0,ne}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return uk;case"ac3":return ck;default:return Rv}}remuxAudio(e,t,n,i,o){const a=e.inputTimeScale,u=e.samplerate?e.samplerate:a,c=a/u,f=this.getSamplesPerFrame(e),h=f*c,p=this._initPTS,g=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,x=[],y=o!==void 0;let S=e.samples,T=g?0:8,R=this.nextAudioPts||-1;const k=t*a,C=p.baseTime*a/p.timescale;if(this.isAudioContiguous=n=n||S.length&&R>0&&(i&&Math.abs(k-R)<9e3||Math.abs(Zr(S[0].pts-C,k)-R)<20*h),S.forEach(function(pe){pe.pts=Zr(pe.pts-C,k)}),!n||R<0){if(S=S.filter(pe=>pe.pts>=0),!S.length)return;o===0?R=0:i&&!y?R=Math.max(0,k):R=S[0].pts}if(e.segmentCodec==="aac"){const pe=this.config.maxAudioFramesDrift;for(let ge=0,ne=R;ge<S.length;ge++){const Y=S[ge],q=Y.pts,F=q-ne,H=Math.abs(1e3*F/a);if(F<=-pe*h&&y)ge===0&&(j.warn(`Audio frame @ ${(q/a).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*F/a)} ms.`),this.nextAudioPts=R=ne=q);else if(F>=pe*h&&H<lk&&y){let me=Math.round(F/h);ne=q-me*h,ne<0&&(me--,ne+=h),ge===0&&(this.nextAudioPts=R=ne),j.warn(`[mp4-remuxer]: Injecting ${me} audio frame @ ${(ne/a).toFixed(3)}s due to ${Math.round(1e3*F/a)} ms gap.`);for(let ve=0;ve<me;ve++){const Se=Math.max(ne,0);let be=wv.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);be||(j.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),be=Y.unit.subarray()),S.splice(ge,0,{unit:be,pts:Se}),ne+=h,ge++}}Y.pts=ne,ne+=h}}let I=null,w=null,P,D=0,U=S.length;for(;U--;)D+=S[U].unit.byteLength;for(let pe=0,ge=S.length;pe<ge;pe++){const ne=S[pe],Y=ne.unit;let q=ne.pts;if(w!==null){const H=x[pe-1];H.duration=Math.round((q-w)/c)}else if(n&&e.segmentCodec==="aac"&&(q=R),I=q,D>0){D+=T;try{P=new Uint8Array(D)}catch(H){this.observer.emit(L.ERROR,L.ERROR,{type:Ne.MUX_ERROR,details:J.REMUX_ALLOC_ERROR,fatal:!1,error:H,bytes:D,reason:`fail allocating audio mdat ${D}`});return}g||(new DataView(P.buffer).setUint32(0,D),P.set(z.types.mdat,4))}else return;P.set(Y,T);const F=Y.byteLength;T+=F,x.push(new Av(!0,f,F,0)),w=q}const Q=x.length;if(!Q)return;const A=x[x.length-1];this.nextAudioPts=R=w+c*A.duration;const $=g?new Uint8Array(0):z.moof(e.sequenceNumber++,I/c,Ot({},e,{samples:x}));e.samples=[];const ie=I/a,te=R/a,de={data1:$,data2:P,startPTS:ie,endPTS:te,startDTS:ie,endDTS:te,type:"audio",hasAudio:!0,hasVideo:!1,nb:Q};return this.isAudioContiguous=!0,de}remuxEmptyAudio(e,t,n,i){const o=e.inputTimeScale,a=e.samplerate?e.samplerate:o,u=o/a,c=this.nextAudioPts,f=this._initDTS,h=f.baseTime*9e4/f.timescale,p=(c!==null?c:i.startDTS*o)+h,g=i.endDTS*o+h,x=u*Rv,y=Math.ceil((g-p)/x),S=wv.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(j.warn("[mp4-remuxer]: remux empty Audio"),!S){j.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const T=[];for(let R=0;R<y;R++){const k=p+R*x;T.push({unit:S,pts:k,dts:k})}return e.samples=T,this.remuxAudio(e,t,n,!1)}}function Zr(r,e){let t;if(e===null)return r;for(e<r?t=-8589934592:t=8589934592;Math.abs(r-e)>4294967296;)r+=t;return r}function dk(r){for(let e=0;e<r.length;e++)if(r[e].key)return e;return-1}function u1(r,e,t,n){const i=r.samples.length;if(!i)return;const o=r.inputTimeScale;for(let u=0;u<i;u++){const c=r.samples[u];c.pts=Zr(c.pts-t.baseTime*o/t.timescale,e*o)/o,c.dts=Zr(c.dts-n.baseTime*o/n.timescale,e*o)/o}const a=r.samples;return r.samples=[],{samples:a}}function c1(r,e,t){const n=r.samples.length;if(!n)return;const i=r.inputTimeScale;for(let a=0;a<n;a++){const u=r.samples[a];u.pts=Zr(u.pts-t.baseTime*i/t.timescale,e*i)/i}r.samples.sort((a,u)=>a.pts-u.pts);const o=r.samples;return r.samples=[],{samples:o}}class Av{constructor(e,t,n,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=i,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class fk{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,n,i){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(vb(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:n}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const i=this.initData=FS(e);i.audio&&(t=Lv(i.audio,st.AUDIO)),i.video&&(n=Lv(i.video,st.VIDEO));const o={};i.audio&&i.video?o.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:i.audio?o.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?o.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:j.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=o}remux(e,t,n,i,o,a){var u,c;let{initPTS:f,lastEndTime:h}=this;const p={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};Re(h)||(h=this.lastEndTime=o||0);const g=t.samples;if(!(g!=null&&g.length))return p;const x={initPTS:void 0,timescale:1};let y=this.initData;if((u=y)!=null&&u.length||(this.generateInitSegment(g),y=this.initData),!((c=y)!=null&&c.length))return j.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),p;this.emitInitSegment&&(x.tracks=this.initTracks,this.emitInitSegment=!1);const S=Sb(g,y),T=xb(y,g),R=T===null?o:T;(hk(f,R,o,S)||x.timescale!==f.timescale&&a)&&(x.initPTS=R-o,f&&f.timescale===1&&j.warn(`Adjusting initPTS by ${x.initPTS-f.baseTime}`),this.initPTS=f={baseTime:x.initPTS,timescale:1});const k=e?R-f.baseTime/f.timescale:h,C=k+S;Tb(y,g,f.baseTime/f.timescale),S>0?this.lastEndTime=C:(j.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const I=!!y.audio,w=!!y.video;let P="";I&&(P+="audio"),w&&(P+="video");const D={data1:g,startPTS:k,startDTS:k,endPTS:C,endDTS:C,type:P,hasAudio:I,hasVideo:w,nb:1,dropped:0};return p.audio=D.type==="audio"?D:void 0,p.video=D.type!=="audio"?D:void 0,p.initSegment=x,p.id3=u1(n,o,f,f),i.samples.length&&(p.text=c1(i,o,f)),p}}function hk(r,e,t,n){if(r===null)return!0;const i=Math.max(n,1),o=e-r.baseTime/r.timescale;return Math.abs(o-t)>i}function Lv(r,e){const t=r==null?void 0:r.codec;if(t&&t.length>4)return t;if(e===st.AUDIO){if(t==="ec-3"||t==="ac-3"||t==="alac")return t;if(t==="fLaC"||t==="Opus")return gc(t,!1);const n="mp4a.40.5";return j.info(`Parsed audio codec "${t}" or audio object type not handled. Using "${n}"`),n}return j.warn(`Unhandled video codec "${t}"`),t==="hvc1"||t==="hev1"?"hvc1.1.6.L120.90":t==="av01"?"av01.0.04M.08":"avc1.42e01e"}let ci;try{ci=self.performance.now.bind(self.performance)}catch{j.debug("Unable to use Performance API on this environment"),ci=_o==null?void 0:_o.Date.now}const Yu=[{demux:JC,remux:fk},{demux:Wi,remux:Wu},{demux:XC,remux:Wu},{demux:sk,remux:Wu}];Yu.splice(2,0,{demux:ZC,remux:Wu});class bv{constructor(e,t,n,i,o){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=i,this.id=o}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,i){const o=n.transmuxing;o.executeStart=ci();let a=new Uint8Array(e);const{currentTransmuxState:u,transmuxConfig:c}=this;i&&(this.currentTransmuxState=i);const{contiguous:f,discontinuity:h,trackSwitch:p,accurateTimeOffset:g,timeOffset:x,initSegmentChange:y}=i||u,{audioCodec:S,videoCodec:T,defaultInitPts:R,duration:k,initSegmentData:C}=c,I=pk(a,t);if(I&&I.method==="AES-128"){const U=this.getDecrypter();if(U.isSync()){let Q=U.softwareDecrypt(a,I.key.buffer,I.iv.buffer);if(n.part>-1&&(Q=U.flush()),!Q)return o.executeEnd=ci(),mh(n);a=new Uint8Array(Q)}else return this.decryptionPromise=U.webCryptoDecrypt(a,I.key.buffer,I.iv.buffer).then(Q=>{const A=this.push(Q,null,n);return this.decryptionPromise=null,A}),this.decryptionPromise}const w=this.needsProbing(h,p);if(w){const U=this.configureTransmuxer(a);if(U)return j.warn(`[transmuxer] ${U.message}`),this.observer.emit(L.ERROR,L.ERROR,{type:Ne.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,fatal:!1,error:U,reason:U.message}),o.executeEnd=ci(),mh(n)}(h||p||y||w)&&this.resetInitSegment(C,S,T,k,t),(h||y||w)&&this.resetInitialTimestamp(R),f||this.resetContiguity();const P=this.transmux(a,I,x,g,n),D=this.currentTransmuxState;return D.contiguous=!0,D.discontinuity=!1,D.trackSwitch=!1,o.executeEnd=ci(),P}flush(e){const t=e.transmuxing;t.executeStart=ci();const{decrypter:n,currentTransmuxState:i,decryptionPromise:o}=this;if(o)return o.then(()=>this.flush(e));const a=[],{timeOffset:u}=i;if(n){const p=n.flush();p&&a.push(this.push(p,null,e))}const{demuxer:c,remuxer:f}=this;if(!c||!f)return t.executeEnd=ci(),[mh(e)];const h=c.flush(u);return qu(h)?h.then(p=>(this.flushRemux(a,p,e),a)):(this.flushRemux(a,h,e),a)}flushRemux(e,t,n){const{audioTrack:i,videoTrack:o,id3Track:a,textTrack:u}=t,{accurateTimeOffset:c,timeOffset:f}=this.currentTransmuxState;j.log(`[transmuxer.ts]: Flushed fragment ${n.sn}${n.part>-1?" p: "+n.part:""} of level ${n.level}`);const h=this.remuxer.remux(i,o,a,u,f,c,!0,this.id);e.push({remuxResult:h,chunkMeta:n}),n.transmuxing.executeEnd=ci()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;!t||!n||(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,i,o){const{demuxer:a,remuxer:u}=this;!a||!u||(a.resetInitSegment(e,t,n,i),u.resetInitSegment(e,t,n,o))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,i,o){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,n,i,o):a=this.transmuxUnencrypted(e,n,i,o),a}transmuxUnencrypted(e,t,n,i){const{audioTrack:o,videoTrack:a,id3Track:u,textTrack:c}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(o,a,u,c,t,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,n,i,o){return this.demuxer.demuxSampleAes(e,t,n).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,n,i,!1,this.id),chunkMeta:o}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:i,vendor:o}=this;let a;for(let g=0,x=Yu.length;g<x;g++){var u;if((u=Yu[g].demux)!=null&&u.probe(e)){a=Yu[g];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const c=this.demuxer,f=this.remuxer,h=a.remux,p=a.demux;(!f||!(f instanceof h))&&(this.remuxer=new h(n,t,i,o)),(!c||!(c instanceof p))&&(this.demuxer=new p(n,t,i),this.probe=p.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Vp(this.config)),e}}function pk(r,e){let t=null;return r.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const mh=r=>({remuxResult:{},chunkMeta:r});function qu(r){return"then"in r&&r.then instanceof Function}class mk{constructor(e,t,n,i,o){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=o||null}}class gk{constructor(e,t,n,i,o,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=o,this.initSegmentChange=a}}var d1={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(c,f,h){this.fn=c,this.context=f,this.once=h||!1}function o(c,f,h,p,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new i(h,p||c,g),y=t?t+f:f;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],x]:c._events[y].push(x):(c._events[y]=x,c._eventsCount++),c}function a(c,f){--c._eventsCount===0?c._events=new n:delete c._events[f]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],h,p;if(this._eventsCount===0)return f;for(p in h=this._events)e.call(h,p)&&f.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},u.prototype.listeners=function(f){var h=t?t+f:f,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,y=new Array(x);g<x;g++)y[g]=p[g].fn;return y},u.prototype.listenerCount=function(f){var h=t?t+f:f,p=this._events[h];return p?p.fn?1:p.length:0},u.prototype.emit=function(f,h,p,g,x,y){var S=t?t+f:f;if(!this._events[S])return!1;var T=this._events[S],R=arguments.length,k,C;if(T.fn){switch(T.once&&this.removeListener(f,T.fn,void 0,!0),R){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,h),!0;case 3:return T.fn.call(T.context,h,p),!0;case 4:return T.fn.call(T.context,h,p,g),!0;case 5:return T.fn.call(T.context,h,p,g,x),!0;case 6:return T.fn.call(T.context,h,p,g,x,y),!0}for(C=1,k=new Array(R-1);C<R;C++)k[C-1]=arguments[C];T.fn.apply(T.context,k)}else{var I=T.length,w;for(C=0;C<I;C++)switch(T[C].once&&this.removeListener(f,T[C].fn,void 0,!0),R){case 1:T[C].fn.call(T[C].context);break;case 2:T[C].fn.call(T[C].context,h);break;case 3:T[C].fn.call(T[C].context,h,p);break;case 4:T[C].fn.call(T[C].context,h,p,g);break;default:if(!k)for(w=1,k=new Array(R-1);w<R;w++)k[w-1]=arguments[w];T[C].fn.apply(T[C].context,k)}}return!0},u.prototype.on=function(f,h,p){return o(this,f,h,p,!1)},u.prototype.once=function(f,h,p){return o(this,f,h,p,!0)},u.prototype.removeListener=function(f,h,p,g){var x=t?t+f:f;if(!this._events[x])return this;if(!h)return a(this,x),this;var y=this._events[x];if(y.fn)y.fn===h&&(!g||y.once)&&(!p||y.context===p)&&a(this,x);else{for(var S=0,T=[],R=y.length;S<R;S++)(y[S].fn!==h||g&&!y[S].once||p&&y[S].context!==p)&&T.push(y[S]);T.length?this._events[x]=T.length===1?T[0]:T:a(this,x)}return this},u.prototype.removeAllListeners=function(f){var h;return f?(h=t?t+f:f,this._events[h]&&a(this,h)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=t,u.EventEmitter=u,r.exports=u})(d1);var yk=d1.exports,Xp=UL(yk);class f1{constructor(e,t,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const o=e.config;this.hls=e,this.id=t,this.useWorker=!!o.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const a=(f,h)=>{h=h||{},h.frag=this.frag,h.id=this.id,f===L.ERROR&&(this.error=h.error),this.hls.trigger(f,h)};this.observer=new Xp,this.observer.on(L.FRAG_DECRYPTED,a),this.observer.on(L.ERROR,a);const u=ks(o.preferManagedMediaSource)||{isTypeSupported:()=>!1},c={mpeg:u.isTypeSupported("audio/mpeg"),mp3:u.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:u.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&typeof Worker<"u"&&(o.workerPath||MC())){try{o.workerPath?(j.log(`loading Web Worker ${o.workerPath} for "${t}"`),this.workerContext=BC(o.workerPath)):(j.log(`injecting Web Worker for "${t}"`),this.workerContext=NC()),this.onwmsg=p=>this.onWorkerMessage(p);const{worker:h}=this.workerContext;h.addEventListener("message",this.onwmsg),h.onerror=p=>{const g=new Error(`${p.message}  (${p.filename}:${p.lineno})`);o.enableWorker=!1,j.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(L.ERROR,{type:Ne.OTHER_ERROR,details:J.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:g})},h.postMessage({cmd:"init",typeSupported:c,vendor:"",id:t,config:JSON.stringify(o)})}catch(h){j.warn(`Error setting up "${t}" Web Worker, fallback to inline`,h),this.resetWorker(),this.error=null,this.transmuxer=new bv(this.observer,c,o,"",t)}return}this.transmuxer=new bv(this.observer,c,o,"",t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,n,i,o,a,u,c,f,h){var p,g;f.transmuxing.start=self.performance.now();const{transmuxer:x}=this,y=a?a.start:o.start,S=o.decryptdata,T=this.frag,R=!(T&&o.cc===T.cc),k=!(T&&f.level===T.level),C=T?f.sn-T.sn:-1,I=this.part?f.part-this.part.index:-1,w=C===0&&f.id>1&&f.id===(T==null?void 0:T.stats.chunkCount),P=!k&&(C===1||C===0&&(I===1||w&&I<=0)),D=self.performance.now();(k||C||o.stats.parsing.start===0)&&(o.stats.parsing.start=D),a&&(I||!P)&&(a.stats.parsing.start=D);const U=!(T&&((p=o.initSegment)==null?void 0:p.url)===((g=T.initSegment)==null?void 0:g.url)),Q=new gk(R,P,c,k,y,U);if(!P||R||U){j.log(`[transmuxer-interface, ${o.type}]: Starting new transmux session for sn: ${f.sn} p: ${f.part} level: ${f.level} id: ${f.id}
        discontinuity: ${R}
        trackSwitch: ${k}
        contiguous: ${P}
        accurateTimeOffset: ${c}
        timeOffset: ${y}
        initSegmentChange: ${U}`);const A=new mk(n,i,t,u,h);this.configureTransmuxer(A)}if(this.frag=o,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:S,chunkMeta:f,state:Q},e instanceof ArrayBuffer?[e]:[]);else if(x){const A=x.push(e,S,f,Q);qu(A)?(x.async=!0,A.then($=>{this.handleTransmuxComplete($)}).catch($=>{this.transmuxerError($,f,"transmuxer-interface push error")})):(x.async=!1,this.handleTransmuxComplete(A))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let n=t.flush(e);qu(n)||t.async?(qu(n)||(n=Promise.resolve(n)),n.then(o=>{this.handleFlushResult(o,e)}).catch(o=>{this.transmuxerError(o,e,"transmuxer-interface flush error")})):this.handleFlushResult(n,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(L.ERROR,{type:Ne.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(t)}onWorkerMessage(e){const t=e.data;if(!(t!=null&&t.event)){j.warn(`worker message received with no ${t?"event name":"data"}`);return}const n=this.hls;if(this.hls)switch(t.event){case"init":{var i;const o=(i=this.workerContext)==null?void 0:i.objectURL;o&&self.URL.revokeObjectURL(o);break}case"transmuxComplete":{this.handleTransmuxComplete(t.data);break}case"flush":{this.onFlush(t.data);break}case"workerLog":j[t.data.logType]&&j[t.data.logType](t.data.message);break;default:{t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data);break}}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function h1(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(!Fo(r[t].attrs,e[t].attrs))return!1;return!0}function Fo(r,e,t){const n=r["STABLE-RENDITION-ID"];return n&&!t?n===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>r[i]!==e[i])}function ep(r,e){return e.label.toLowerCase()===r.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(r.lang||"").toLowerCase())}const Cv=100;class vk extends zp{constructor(e,t,n){super(e,t,n,"[audio-stream-controller]",Fe.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.LEVEL_LOADED,this.onLevelLoaded,this),e.on(L.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(L.ERROR,this.onError,this),e.on(L.BUFFER_RESET,this.onBufferReset,this),e.on(L.BUFFER_CREATED,this.onBufferCreated,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(L.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(L.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.LEVEL_LOADED,this.onLevelLoaded,this),e.off(L.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(L.ERROR,this.onError,this),e.off(L.BUFFER_RESET,this.onBufferReset,this),e.off(L.BUFFER_CREATED,this.onBufferCreated,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(L.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(L.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:o}){if(n==="main"){const a=t.cc;this.initPTS[t.cc]={baseTime:i,timescale:o},this.log(`InitPTS for cc: ${a} found from main: ${i}`),this.videoTrackCC=a,this.state===se.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=se.STOPPED;return}const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(Cv),t>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=se.IDLE):(this.loadedmetadata=!1,this.state=se.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case se.IDLE:this.doTickIdle();break;case se.WAITING_TRACK:{var e;const{levels:n,trackId:i}=this,o=n==null||(e=n[i])==null?void 0:e.details;if(o){if(this.waitForCdnTuneIn(o))break;this.state=se.WAITING_INIT_PTS}break}case se.FRAG_LOADING_WAITING_RETRY:{var t;const n=performance.now(),i=this.retryDate;if(!i||n>=i||(t=this.media)!=null&&t.seeking){const{levels:o,trackId:a}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((o==null?void 0:o[a])||null),this.state=se.IDLE}break}case se.WAITING_INIT_PTS:{const n=this.waitingData;if(n){const{frag:i,part:o,cache:a,complete:u}=n;if(this.initPTS[i.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=se.FRAG_LOADING;const c=a.flush(),f={frag:i,part:o,payload:c,networkDetails:null};this._handleFragmentLoadProgress(f),u&&super._handleFragmentLoadComplete(f)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${i.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const c=this.getLoadPosition(),f=ht.bufferInfo(this.mediaBuffer,c,this.config.maxBufferHole);Jh(f.end,this.config.maxFragLookUpTolerance,i)<0&&(this.log(`Waiting fragment cc (${i.cc}) @ ${i.start} cancelled because another fragment at ${f.end} is needed`),this.clearWaitingFragment())}}else this.state=se.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=se.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:n,trackId:i}=this,o=e.config;if(!this.buffering||!n&&(this.startFragRequested||!o.startFragPrefetch)||!(t!=null&&t[i]))return;const a=t[i],u=a.details;if(!u||u.live&&this.levelLastLoaded!==a||this.waitForCdnTuneIn(u)){this.state=se.WAITING_TRACK;return}const c=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&c&&(this.bufferFlushed=!1,this.afterBufferFlushed(c,st.AUDIO,Fe.AUDIO));const f=this.getFwdBufferInfo(c,Fe.AUDIO);if(f===null)return;const{bufferedTrack:h,switchingTrack:p}=this;if(!p&&this._streamEnded(f,u)){e.trigger(L.BUFFER_EOS,{type:"audio"}),this.state=se.ENDED;return}const g=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,Fe.MAIN),x=f.len,y=this.getMaxBufferLength(g==null?void 0:g.len),S=u.fragments,T=S[0].start;let R=this.flushing?this.getLoadPosition():f.end;if(p&&n){const w=this.getLoadPosition();h&&!Fo(p.attrs,h.attrs)&&(R=w),u.PTSKnown&&w<T&&(f.end>T||f.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=T+.05)}if(x>=y&&!p&&R<S[S.length-1].start)return;let k=this.getNextFragment(R,u),C=!1;if(k&&this.isLoopLoading(k,R)&&(C=!!k.gap,k=this.getNextFragmentLoopLoading(k,u,f,Fe.MAIN,y)),!k){this.bufferFlushed=!0;return}const I=g&&k.start>g.end+u.targetduration;if(I||!(g!=null&&g.len)&&f.len){const w=this.getAppendedFrag(k.start,Fe.MAIN);if(w===null||(C||(C=!!w.gap||!!I&&g.len===0),I&&!C||C&&f.nextStart&&f.nextStart<w.end))return}this.loadFragment(k,a,R)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(n=>new Oo(n))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?this.setInterval(Cv):this.resetTransmuxer(),n?(this.switchingTrack=t,this.state=se.IDLE,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=se.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(L.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var n;if(this.mainDetails==null){this.cachedTrackLoadedData=t;return}const{levels:i}=this,{details:o,id:a}=t;if(!i){this.warn(`Audio tracks were reset while loading level ${a}`);return}this.log(`Audio track ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`);const u=i[a];let c=0;if(o.live||(n=u.details)!=null&&n.live){this.checkLiveUpdate(o);const h=this.mainDetails;if(o.deltaUpdateFailed||!h)return;if(!u.details&&o.hasProgramDateTime&&h.hasProgramDateTime)Ec(o,h),c=o.fragments[0].start;else{var f;c=this.alignPlaylists(o,u.details,(f=this.levelLastLoaded)==null?void 0:f.details)}}u.details=o,this.levelLastLoaded=u,!this.startFragRequested&&(this.mainDetails||!o.live)&&this.setStartPosition(this.mainDetails||o,c),this.state===se.WAITING_TRACK&&!this.waitForCdnTuneIn(o)&&(this.state=se.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:i,payload:o}=e,{config:a,trackId:u,levels:c}=this;if(!c){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const f=c[u];if(!f){this.warn("Audio track is undefined on fragment load progress");return}const h=f.details;if(!h){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const p=a.defaultAudioCodec||f.audioCodec||"mp4a.40.2";let g=this.transmuxer;g||(g=this.transmuxer=new f1(this.hls,Fe.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const x=this.initPTS[n.cc],y=(t=n.initSegment)==null?void 0:t.data;if(x!==void 0){const T=i?i.index:-1,R=T!==-1,k=new Hp(n.level,n.sn,n.stats.chunkCount,o.byteLength,T,R);g.push(o,y,p,"",n,i,h.totalduration,!1,k,x)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${h.startSN} ,${h.endSN}],track ${u}`);const{cache:S}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new XS,complete:!1};S.push(new Uint8Array(o)),this.waitingVideoCC=this.videoTrackCC,this.state=se.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n.type!==Fe.AUDIO){if(!this.loadedmetadata&&n.type===Fe.MAIN){const o=this.videoBuffer||this.media;o&&ht.getBuffered(o).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(n.sn!=="initSegment"){this.fragPrevious=n;const o=this.switchingTrack;o&&(this.bufferedTrack=o,this.switchingTrack=null,this.hls.trigger(L.AUDIO_TRACK_SWITCHED,Yt({},o)))}this.fragBufferedComplete(n,i)}onError(e,t){var n;if(t.fatal){this.state=se.ERROR;return}switch(t.details){case J.FRAG_GAP:case J.FRAG_PARSING_ERROR:case J.FRAG_DECRYPT_ERROR:case J.FRAG_LOAD_ERROR:case J.FRAG_LOAD_TIMEOUT:case J.KEY_LOAD_ERROR:case J.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Fe.AUDIO,t);break;case J.AUDIO_TRACK_LOAD_ERROR:case J.AUDIO_TRACK_LOAD_TIMEOUT:case J.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===se.WAITING_TRACK&&((n=t.context)==null?void 0:n.type)===Ye.AUDIO_TRACK&&(this.state=se.IDLE);break;case J.BUFFER_APPEND_ERROR:case J.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="audio")return;if(t.details===J.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case J.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==st.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==st.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===se.ENDED&&(this.state=se.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,t,Fe.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:i}=this,{remuxResult:o,chunkMeta:a}=e,u=this.getCurrentContext(a);if(!u){this.resetWhenMissingContext(a);return}const{frag:c,part:f,level:h}=u,{details:p}=h,{audio:g,text:x,id3:y,initSegment:S}=o;if(this.fragContextChanged(c)||!p){this.fragmentTracker.removeFragment(c);return}if(this.state=se.PARSING,this.switchingTrack&&g&&this.completeAudioSwitch(this.switchingTrack),S!=null&&S.tracks){const T=c.initSegment||c;this._bufferInitSegment(h,S.tracks,T,a),i.trigger(L.FRAG_PARSING_INIT_SEGMENT,{frag:T,id:n,tracks:S.tracks})}if(g){const{startPTS:T,endPTS:R,startDTS:k,endDTS:C}=g;f&&(f.elementaryStreams[st.AUDIO]={startPTS:T,endPTS:R,startDTS:k,endDTS:C}),c.setElementaryStreamInfo(st.AUDIO,T,R,k,C),this.bufferFragmentData(g,c,f,a)}if(y!=null&&(t=y.samples)!=null&&t.length){const T=Ot({id:n,frag:c,details:p},y);i.trigger(L.FRAG_PARSING_METADATA,T)}if(x){const T=Ot({id:n,frag:c,details:p},x);i.trigger(L.FRAG_PARSING_USERDATA,T)}}_bufferInitSegment(e,t,n,i){if(this.state!==se.PARSING)return;t.video&&delete t.video;const o=t.audio;if(!o)return;o.id="audio";const a=e.audioCodec;this.log(`Init audio buffer, container:${o.container}, codecs[level/parsed]=[${a}/${o.codec}]`),a&&a.split(",").length===1&&(o.levelCodec=a),this.hls.trigger(L.BUFFER_CODECS,t);const u=o.initSegment;if(u!=null&&u.byteLength){const c={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:u};this.hls.trigger(L.BUFFER_APPENDING,c)}this.tickImmediate()}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||i===Wt.NOT_LOADED||i===Wt.PARTIAL){var o;if(e.sn==="initSegment")this._loadInitSegment(e,t);else if((o=t.details)!=null&&o.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=se.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragments[0].start!==t.details.fragments[0].start&&Ec(t.details,a)}else this.startFragRequested=!0,super.loadFragment(e,t,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){const{media:t,bufferedTrack:n}=this,i=n==null?void 0:n.attrs,o=e.attrs;t&&i&&(i.CHANNELS!==o.CHANNELS||n.name!==e.name||n.lang!==e.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(L.AUDIO_TRACK_SWITCHED,Yt({},e))}}class xk extends jp{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.LEVEL_LOADING,this.onLevelLoading,this),e.on(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(L.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.LEVEL_LOADING,this.onLevelLoading,this),e.off(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(L.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:i,details:o}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==i){this.warn(`Audio track with id:${n} and group:${i} not found in active group ${a==null?void 0:a.groupId}`);return}const u=a.details;a.details=t.details,this.log(`Audio track ${n} "${a.name}" lang:${a.lang} group:${i} loaded [${o.startSN}-${o.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,u)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,i=this.groupIds;let o=this.currentTrack;if(!n||(i==null?void 0:i.length)!==(n==null?void 0:n.length)||n!=null&&n.some(u=>(i==null?void 0:i.indexOf(u))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const u=this.tracks.filter(g=>!n||n.indexOf(g.groupId)!==-1);if(u.length)this.selectDefaultTrack&&!u.some(g=>g.default)&&(this.selectDefaultTrack=!1),u.forEach((g,x)=>{g.id=x});else if(!o&&!this.tracksInGroup.length)return;this.tracksInGroup=u;const c=this.hls.config.audioPreference;if(!o&&c){const g=$n(c,u,fo);if(g>-1)o=u[g];else{const x=$n(c,this.tracks);o=this.tracks[x]}}let f=this.findTrackId(o);f===-1&&o&&(f=this.findTrackId(null));const h={audioTracks:u};this.log(`Updating audio tracks, ${u.length} track(s) found in group(s): ${n==null?void 0:n.join(",")}`),this.hls.trigger(L.AUDIO_TRACKS_UPDATED,h);const p=this.trackId;if(f!==-1&&p===-1)this.setAudioTrack(f);else if(u.length&&p===-1){var a;const g=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${u.length}`);this.warn(g.message),this.hls.trigger(L.ERROR,{type:Ne.MEDIA_ERROR,details:J.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:g})}}else this.shouldReloadPlaylist(o)&&this.setAudioTrack(this.trackId)}onError(e,t){t.fatal||!t.context||t.context.type===Ye.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&Ro(e,i,fo))return i;const o=$n(e,this.tracksInGroup,fo);if(o>-1){const a=this.tracksInGroup[o];return this.setAudioTrack(o),a}else if(i){let a=t.loadLevel;a===-1&&(a=t.firstAutoLevel);const u=xC(e,t.levels,n,a,fo);if(u===-1)return null;t.nextLoadLevel=u}if(e.channels||e.audioCodec){const a=$n(e,n);if(a>-1)return n[a]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e],o=i.details&&!i.details.live;if(e===this.trackId&&i===n&&o||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(L.AUDIO_TRACK_SWITCHING,Yt({},i)),o))return;const a=this.switchParams(i.url,n==null?void 0:n.details,i.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(!(this.selectDefaultTrack&&!i.default)&&(!e||Ro(e,i,fo)))return n}if(e){const{name:n,lang:i,assocLang:o,characteristics:a,audioCodec:u,channels:c}=e;for(let f=0;f<t.length;f++){const h=t[f];if(Ro({name:n,lang:i,assocLang:o,characteristics:a,audioCodec:u,channels:c},h,fo))return f}for(let f=0;f<t.length;f++){const h=t[f];if(Fo(e.attrs,h.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return f}for(let f=0;f<t.length;f++){const h=t[f];if(Fo(e.attrs,h.attrs,["LANGUAGE"]))return f}}return-1}loadPlaylist(e){const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){super.loadPlaylist();const n=t.id,i=t.groupId;let o=t.url;if(e)try{o=e.addDirectives(o)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`loading audio-track playlist ${n} "${t.name}" lang:${t.lang} group:${i}`),this.clearTimer(),this.hls.trigger(L.AUDIO_TRACK_LOADING,{url:o,id:n,groupId:i,deliveryDirectives:e||null})}}}const kv=500;class Sk extends zp{constructor(e,t,n){super(e,t,n,"[subtitle-stream-controller]",Fe.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.LEVEL_LOADED,this.onLevelLoaded,this),e.on(L.ERROR,this.onError,this),e.on(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(L.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(L.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.LEVEL_LOADED,this.onLevelLoaded,this),e.off(L.ERROR,this.onError,this),e.off(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(L.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(L.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=se.IDLE,this.setInterval(kv),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:i}=t;if(this.fragPrevious=n,this.state=se.IDLE,!i)return;const o=this.tracksBuffered[this.currentTrackId];if(!o)return;let a;const u=n.start;for(let f=0;f<o.length;f++)if(u>=o[f].start&&u<=o[f].end){a=o[f];break}const c=n.start+n.duration;a?a.end=c:(a={start:u,end:c},o.push(a)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null)}onBufferFlushing(e,t){const{startOffset:n,endOffset:i}=t;if(n===0&&i!==Number.POSITIVE_INFINITY){const o=i-1;if(o<=0)return;t.endOffsetSubtitles=Math.max(0,o),this.tracksBuffered.forEach(a=>{for(let u=0;u<a.length;){if(a[u].end<=o){a.shift();continue}else if(a[u].start<o)a[u].start=o;else break;u++}}),this.fragmentTracker.removeFragmentsInRange(n,o,Fe.SUBTITLE)}}onFragBuffered(e,t){if(!this.loadedmetadata&&t.frag.type===Fe.MAIN){var n;(n=this.media)!=null&&n.buffered.length&&(this.loadedmetadata=!0)}}onError(e,t){const n=t.frag;(n==null?void 0:n.type)===Fe.SUBTITLE&&(t.details===J.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==se.STOPPED&&(this.state=se.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&h1(this.levels,t)){this.levels=t.map(n=>new Oo(n));return}this.tracksBuffered=[],this.levels=t.map(n=>{const i=new Oo(n);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Fe.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.setInterval(kv)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:i,levels:o}=this,{details:a,id:u}=t;if(!o){this.warn(`Subtitle tracks were reset while loading level ${u}`);return}const c=o[u];if(u>=o.length||!c)return;this.log(`Subtitle track ${u} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let f=0;if(a.live||(n=c.details)!=null&&n.live){const p=this.mainDetails;if(a.deltaUpdateFailed||!p)return;const g=p.fragments[0];if(!c.details)a.hasProgramDateTime&&p.hasProgramDateTime?(Ec(a,p),f=a.fragments[0].start):g&&(f=g.start,Qh(a,f));else{var h;f=this.alignPlaylists(a,c.details,(h=this.levelLastLoaded)==null?void 0:h.details),f===0&&g&&(f=g.start,Qh(a,f))}}c.details=a,this.levelLastLoaded=c,u===i&&(!this.startFragRequested&&(this.mainDetails||!a.live)&&this.setStartPosition(this.mainDetails||a,f),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===se.IDLE&&(Sc(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),c.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,i=t.decryptdata,o=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&i!=null&&i.key&&i.iv&&i.method==="AES-128"){const a=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer).catch(u=>{throw o.trigger(L.ERROR,{type:Ne.MEDIA_ERROR,details:J.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:t}),u}).then(u=>{const c=performance.now();o.trigger(L.FRAG_DECRYPTED,{frag:t,payload:u,stats:{tstart:a,tdecrypt:c}})}).catch(u=>{this.warn(`${u.name}: ${u.message}`),this.state=se.IDLE})}}doTick(){if(!this.media){this.state=se.IDLE;return}if(this.state===se.IDLE){const{currentTrackId:e,levels:t}=this,n=t==null?void 0:t[e];if(!n||!t.length||!n.details)return;const{config:i}=this,o=this.getLoadPosition(),a=ht.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],o,i.maxBufferHole),{end:u,len:c}=a,f=this.getFwdBufferInfo(this.media,Fe.MAIN),h=n.details,p=this.getMaxBufferLength(f==null?void 0:f.len)+h.levelTargetDuration;if(c>p)return;const g=h.fragments,x=g.length,y=h.edge;let S=null;const T=this.fragPrevious;if(u<y){const R=i.maxFragLookUpTolerance,k=u>y-R?0:R;S=Sc(T,g,Math.max(g[0].start,u),k),!S&&T&&T.start<g[0].start&&(S=g[0])}else S=g[x-1];if(!S)return;if(S=this.mapToInitFragWhenRequired(S),S.sn!=="initSegment"){const R=S.sn-h.startSN,k=g[R-1];k&&k.cc===S.cc&&this.fragmentTracker.getState(k)===Wt.NOT_LOADED&&(S=k)}this.fragmentTracker.getState(S)===Wt.NOT_LOADED&&this.loadFragment(S,n,u)}}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,n){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,n))}get mediaBufferTimeRanges(){return new Ek(this.tracksBuffered[this.currentTrackId]||[])}}class Ek{constructor(e){this.buffered=void 0;const t=(n,i,o)=>{if(i=i>>>0,i>o-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${o})`);return e[i][n]};this.buffered={get length(){return e.length},end(n){return t("end",n,e.length)},start(n){return t("start",n,e.length)}}}}class Tk extends jp{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const n=Vu(this.media.textTracks);for(let o=0;o<n.length;o++)if(n[o].mode==="hidden")t=n[o];else if(n[o].mode==="showing"){t=n[o];break}const i=this.findTrackForTextTrack(t);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.LEVEL_LOADING,this.onLevelLoading,this),e.on(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(L.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.LEVEL_LOADING,this.onLevelLoading,this),e.off(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(L.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),Vu(this.media.textTracks).forEach(t=>{wo(t)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:i,details:o}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==i){this.warn(`Subtitle track with id:${n} and group:${i} not found in active group ${a==null?void 0:a.groupId}`);return}const u=a.details;a.details=t.details,this.log(`Subtitle track ${n} "${a.name}" lang:${a.lang} group:${i} loaded [${o.startSN}-${o.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,u)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,i=this.groupIds;let o=this.currentTrack;if(!n||(i==null?void 0:i.length)!==(n==null?void 0:n.length)||n!=null&&n.some(a=>(i==null?void 0:i.indexOf(a))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(h=>!n||n.indexOf(h.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(h=>h.default)&&(this.selectDefaultTrack=!1),a.forEach((h,p)=>{h.id=p});else if(!o&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const u=this.hls.config.subtitlePreference;if(!o&&u){this.selectDefaultTrack=!1;const h=$n(u,a);if(h>-1)o=a[h];else{const p=$n(u,this.tracks);o=this.tracks[p]}}let c=this.findTrackId(o);c===-1&&o&&(c=this.findTrackId(null));const f={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${n==null?void 0:n.join(",")}" group-id`),this.hls.trigger(L.SUBTITLE_TRACKS_UPDATED,f),c!==-1&&this.trackId===-1&&this.setSubtitleTrack(c)}else this.shouldReloadPlaylist(o)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let i=0;i<t.length;i++){const o=t[i];if(!(n&&!o.default||!n&&!e)&&(!e||Ro(o,e)))return i}if(e){for(let i=0;i<t.length;i++){const o=t[i];if(Fo(e.attrs,o.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const o=t[i];if(Fo(e.attrs,o.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(ep(i,e))return n}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Ye.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&Ro(e,n))return n;const i=$n(e,this.tracksInGroup);if(i>-1){const o=this.tracksInGroup[i];return this.setSubtitleTrack(i),o}else{if(n)return null;{const o=$n(e,t);if(o>-1)return t[o]}}}}return null}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){const n=t.id,i=t.groupId;let o=t.url;if(e)try{o=e.addDirectives(o)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`Loading subtitle playlist for id ${n}`),this.hls.trigger(L.SUBTITLE_TRACK_LOADING,{url:o,id:n,groupId:i,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=Vu(e.textTracks),n=this.currentTrack;let i;if(n&&(i=t.filter(o=>ep(n,o))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(o=>{o.mode!=="disabled"&&o!==i&&(o.mode="disabled")}),i){const o=this.subtitleDisplay?"showing":"hidden";i.mode!==o&&(i.mode=o)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Re(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(L.SUBTITLE_TRACK_SWITCH,{id:e});return}const o=!!i.details&&!i.details.live;if(e===this.trackId&&i===n&&o)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:a,groupId:u="",name:c,type:f,url:h}=i;this.hls.trigger(L.SUBTITLE_TRACK_SWITCH,{id:a,groupId:u,name:c,type:f,url:h});const p=this.switchParams(i.url,n==null?void 0:n.details,i.details);this.loadPlaylist(p)}}class wk{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t,n){const i=this.queues[t];i.push(e),i.length===1&&!n&&this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const n=new Promise(o=>{t=o}),i={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(i,e),n}executeNext(e){const t=this.queues[e];if(t.length){const n=t[0];try{n.execute()}catch(i){j.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${i}`),n.onError(i);const o=this.buffers[e];o!=null&&o.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const Iv=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class Rk{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=n=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:n,mediaSource:i}=this;this.log("Media source opened"),n&&(n.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(L.MEDIA_ATTACHED,{media:n,mediaSource:i})),i&&i.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:i}=this;n!==i&&j.error(`Media element src was set while attaching MediaSource (${i} > ${n})`)},this.hls=e;const t="[buffer-controller]";this.appendSource=_b(ks(e.config.preferManagedMediaSource)),this.log=j.log.bind(j,t),this.warn=j.warn.bind(j,t),this.error=j.error.bind(j,t),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.BUFFER_RESET,this.onBufferReset,this),e.on(L.BUFFER_APPENDING,this.onBufferAppending,this),e.on(L.BUFFER_CODECS,this.onBufferCodecs,this),e.on(L.BUFFER_EOS,this.onBufferEos,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(L.FRAG_PARSED,this.onFragParsed,this),e.on(L.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.BUFFER_RESET,this.onBufferReset,this),e.off(L.BUFFER_APPENDING,this.onBufferAppending,this),e.off(L.BUFFER_CODECS,this.onBufferCodecs,this),e.off(L.BUFFER_EOS,this.onBufferEos,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(L.FRAG_PARSED,this.onFragParsed,this),e.off(L.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new wk(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const n=this.media=t.media,i=ks(this.appendSource);if(n&&i){var o;const a=this.mediaSource=new i;this.log(`created media source: ${(o=a.constructor)==null?void 0:o.name}`),a.addEventListener("sourceopen",this._onMediaSourceOpen),a.addEventListener("sourceended",this._onMediaSourceEnded),a.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.addEventListener("startstreaming",this._onStartStreaming),a.addEventListener("endstreaming",this._onEndStreaming));const u=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{n.removeAttribute("src");const c=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||c&&a instanceof c,Dv(n),Ak(n,u),n.load()}catch{n.src=u}else n.src=u;n.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:n}=this;if(t){if(this.log("media source detaching"),t.readyState==="open")try{t.endOfStream()}catch(i){this.warn(`onMediaDetaching: ${i.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),this.mediaSrc===n?(e.removeAttribute("src"),this.appendSource&&Dv(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(L.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer(),this.hls.resumeBuffering()}resetBuffer(e){const t=this.sourceBuffer[e];try{if(t){var n;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,(n=this.mediaSource)!=null&&n.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t)}}catch(i){this.warn(`onBufferReset ${e}`,i)}}onBufferCodecs(e,t){const n=this.getSourceBufferTypes().length,i=Object.keys(t);if(i.forEach(a=>{if(n){const c=this.tracks[a];if(c&&typeof c.buffer.changeType=="function"){var u;const{id:f,codec:h,levelCodec:p,container:g,metadata:x}=t[a],y=Jy(c.codec,c.levelCodec),S=y==null?void 0:y.replace(Iv,"$1");let T=Jy(h,p);const R=(u=T)==null?void 0:u.replace(Iv,"$1");if(T&&S!==R){a.slice(0,5)==="audio"&&(T=gc(T,this.appendSource));const k=`${g};codecs=${T}`;this.appendChangeType(a,k),this.log(`switching codec ${y} to ${T}`),this.tracks[a]={buffer:c.buffer,codec:h,container:g,levelCodec:p,metadata:x,id:f}}}}else this.pendingTracks[a]=t[a]}),n)return;const o=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==o&&(this.log(`${o} bufferCodec event(s) expected ${i.join(",")}`),this.bufferCodecEventsExpected=o),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(e,t){const{operationQueue:n}=this,i={execute:()=>{const o=this.sourceBuffer[e];o&&(this.log(`changing ${e} sourceBuffer type to ${t}`),o.changeType(t)),n.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn(`Failed to change ${e} SourceBuffer type`,o)}};n.append(i,e,!!this.pendingTracks[e])}onBufferAppending(e,t){const{hls:n,operationQueue:i,tracks:o}=this,{data:a,type:u,frag:c,part:f,chunkMeta:h}=t,p=h.buffering[u],g=self.performance.now();p.start=g;const x=c.stats.buffering,y=f?f.stats.buffering:null;x.start===0&&(x.start=g),y&&y.start===0&&(y.start=g);const S=o.audio;let T=!1;u==="audio"&&(S==null?void 0:S.container)==="audio/mpeg"&&(T=!this.lastMpegAudioChunk||h.id===1||this.lastMpegAudioChunk.sn!==h.sn,this.lastMpegAudioChunk=h);const R=c.start,k={execute:()=>{if(p.executeStart=self.performance.now(),T){const C=this.sourceBuffer[u];if(C){const I=R-C.timestampOffset;Math.abs(I)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${R} (delta: ${I}) sn: ${c.sn})`),C.timestampOffset=R)}}this.appendExecutor(a,u)},onStart:()=>{},onComplete:()=>{const C=self.performance.now();p.executeEnd=p.end=C,x.first===0&&(x.first=C),y&&y.first===0&&(y.first=C);const{sourceBuffer:I}=this,w={};for(const P in I)w[P]=ht.getBuffered(I[P]);this.appendErrors[u]=0,u==="audio"||u==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(L.BUFFER_APPENDED,{type:u,frag:c,part:f,chunkMeta:h,parent:c.type,timeRanges:w})},onError:C=>{const I={type:Ne.MEDIA_ERROR,parent:c.type,details:J.BUFFER_APPEND_ERROR,sourceBufferName:u,frag:c,part:f,chunkMeta:h,error:C,err:C,fatal:!1};if(C.code===DOMException.QUOTA_EXCEEDED_ERR)I.details=J.BUFFER_FULL_ERROR;else{const w=++this.appendErrors[u];I.details=J.BUFFER_APPEND_ERROR,this.warn(`Failed ${w}/${n.config.appendErrorMaxRetry} times to append segment in "${u}" sourceBuffer`),w>=n.config.appendErrorMaxRetry&&(I.fatal=!0)}n.trigger(L.ERROR,I)}};i.append(k,u,!!this.pendingTracks[u])}onBufferFlushing(e,t){const{operationQueue:n}=this,i=o=>({execute:this.removeExecutor.bind(this,o,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(L.BUFFER_FLUSHED,{type:o})},onError:a=>{this.warn(`Failed to remove from ${o} SourceBuffer`,a)}});t.type?n.append(i(t.type),t.type):this.getSourceBufferTypes().forEach(o=>{n.append(i(o),o)})}onFragParsed(e,t){const{frag:n,part:i}=t,o=[],a=i?i.elementaryStreams:n.elementaryStreams;a[st.AUDIOVIDEO]?o.push("audiovideo"):(a[st.AUDIO]&&o.push("audio"),a[st.VIDEO]&&o.push("video"));const u=()=>{const c=self.performance.now();n.stats.buffering.end=c,i&&(i.stats.buffering.end=c);const f=i?i.stats:n.stats;this.hls.trigger(L.FRAG_BUFFERED,{frag:n,part:i,stats:f,id:n.type})};o.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(u,o)}onFragChanged(e,t){this.trimBuffers()}onBufferEos(e,t){this.getSourceBufferTypes().reduce((i,o)=>{const a=this.sourceBuffer[o];return a&&(!t.type||t.type===o)&&(a.ending=!0,a.ended||(a.ended=!0,this.log(`${o} sourceBuffer now EOS`))),i&&!!(!a||a.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(o=>{const a=this.sourceBuffer[o];a&&(a.ending=!1)});const{mediaSource:i}=this;if(!i||i.readyState!=="open"){i&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${i.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),i.endOfStream()}))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||t===null||!this.getSourceBufferTypes().length)return;const o=e.config,a=n.currentTime,u=t.levelTargetDuration,c=t.live&&o.liveBackBufferLength!==null?o.liveBackBufferLength:o.backBufferLength;if(Re(c)&&c>0){const f=Math.max(c,u),h=Math.floor(a/u)*u-f;this.flushBackBuffer(a,u,h)}if(Re(o.frontBufferFlushThreshold)&&o.frontBufferFlushThreshold>0){const f=Math.max(o.maxBufferLength,o.frontBufferFlushThreshold),h=Math.max(f,u),p=Math.floor(a/u)*u+h;this.flushFrontBuffer(a,u,p)}}flushBackBuffer(e,t,n){const{details:i,sourceBuffer:o}=this;this.getSourceBufferTypes().forEach(u=>{const c=o[u];if(c){const f=ht.getBuffered(c);if(f.length>0&&n>f.start(0)){if(this.hls.trigger(L.BACK_BUFFER_REACHED,{bufferEnd:n}),i!=null&&i.live)this.hls.trigger(L.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(c.ended&&f.end(f.length-1)-e<t*2){this.log(`Cannot flush ${u} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(L.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:u})}}})}flushFrontBuffer(e,t,n){const{sourceBuffer:i}=this;this.getSourceBufferTypes().forEach(a=>{const u=i[a];if(u){const c=ht.getBuffered(u),f=c.length;if(f<2)return;const h=c.start(f-1),p=c.end(f-1);if(n>h||e>=h&&e<=p)return;if(u.ended&&e-p<2*t){this.log(`Cannot flush ${a} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(L.BUFFER_FLUSHING,{startOffset:h,endOffset:1/0,type:a})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:t,media:n,mediaSource:i}=this,o=e.fragments[0].start+e.totalduration,a=n.duration,u=Re(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(i.duration=1/0,this.updateSeekableRange(e)):(o>u&&o>a||!Re(a))&&(this.log(`Updating Media Source duration to ${o.toFixed(3)}`),i.duration=o)}updateSeekableRange(e){const t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&t!=null&&t.setLiveSeekableRange){const o=Math.max(0,n[0].start),a=Math.max(o,o+e.totalduration);this.log(`Media Source duration is set to ${t.duration}. Setting seekable range to ${o}-${a}.`),t.setLiveSeekableRange(o,a)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:n}=this,i=Object.keys(n).length;if(i&&(!e||i===2||"audiovideo"in n)){this.createSourceBuffers(n),this.pendingTracks={};const o=this.getSourceBufferTypes();if(o.length)this.hls.trigger(L.BUFFER_CREATED,{tracks:this.tracks}),o.forEach(a=>{t.executeNext(a)});else{const a=new Error("could not create source buffer for media codec(s)");this.hls.trigger(L.ERROR,{type:Ne.MEDIA_ERROR,details:J.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:a,reason:a.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:n}=this;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(const o in e)if(!t[o]){var i;const a=e[o];if(!a)throw Error(`source buffer exists for track ${o}, however track does not`);let u=((i=a.levelCodec)==null?void 0:i.indexOf(","))===-1?a.levelCodec:a.codec;u&&o.slice(0,5)==="audio"&&(u=gc(u,this.appendSource));const c=`${a.container};codecs=${u}`;this.log(`creating sourceBuffer(${c})`);try{const f=t[o]=n.addSourceBuffer(c),h=o;this.addBufferListener(h,"updatestart",this._onSBUpdateStart),this.addBufferListener(h,"updateend",this._onSBUpdateEnd),this.addBufferListener(h,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(h,"bufferedchange",(p,g)=>{const x=g.removedRanges;x!=null&&x.length&&this.hls.trigger(L.BUFFER_FLUSHED,{type:o})}),this.tracks[o]={buffer:f,codec:u,container:a.container,levelCodec:a.levelCodec,metadata:a.metadata,id:a.id}}catch(f){this.error(`error while trying to add sourceBuffer: ${f.message}`),this.hls.trigger(L.ERROR,{type:Ne.MEDIA_ERROR,details:J.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:f,sourceBufferName:o,mimeType:c})}}}get mediaSrc(){var e,t;const n=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return n==null?void 0:n.src}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const{operationQueue:n}=this;n.current(e).onComplete(),n.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){var n;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${i}`,t),this.hls.trigger(L.ERROR,{type:Ne.MEDIA_ERROR,details:J.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const o=this.operationQueue.current(e);o&&o.onError(i)}removeExecutor(e,t,n){const{media:i,mediaSource:o,operationQueue:a,sourceBuffer:u}=this,c=u[e];if(!i||!o||!c){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),a.shiftAndExecuteNext(e);return}const f=Re(i.duration)?i.duration:1/0,h=Re(o.duration)?o.duration:1/0,p=Math.max(0,t),g=Math.min(n,f,h);g>p&&(!c.ending||c.ended)?(c.ended=!1,this.log(`Removing [${p},${g}] from the ${e} SourceBuffer`),c.remove(p,g)):a.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.sourceBuffer[t];if(!n){if(!this.pendingTracks[t])throw new Error(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);return}n.ended=!1,n.appendBuffer(e)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:n}=this,i=t.map(o=>n.appendBlocker(o));Promise.all(i).then(()=>{e(),t.forEach(o=>{const a=this.sourceBuffer[o];a!=null&&a.updating||n.shiftAndExecuteNext(o)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,n){const i=this.sourceBuffer[e];if(!i)return;const o=n.bind(this,e);this.listeners[e].push({event:t,listener:o}),i.addEventListener(t,o)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach(n=>{t.removeEventListener(n.event,n.listener)})}}function Dv(r){const e=r.querySelectorAll("source");[].slice.call(e).forEach(t=>{r.removeChild(t)})}function Ak(r,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,r.appendChild(t)}const Lk={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},p1=r=>String.fromCharCode(Lk[r]||r),yn=15,si=100,bk={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Ck={17:2,18:4,21:6,22:8,23:10,19:13,20:15},kk={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ik={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Dk=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Pk{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n=typeof t=="function"?t():t;j.log(`${this.time} [${e}] ${n}`)}}}const ys=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class m1{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class _k{constructor(){this.uchar=" ",this.penState=new m1}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Ok{constructor(e){this.chars=[],this.pos=0,this.currPenState=new m1,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<si;t++)this.chars.push(new _k);this.logger=e}equals(e){for(let t=0;t<si;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<si;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<si;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>si&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=si)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=p1(e);if(this.pos>=si){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<si;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<si;n++){const i=this.chars[n].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class gh{constructor(e){this.rows=[],this.currRow=yn-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<yn;t++)this.rows.push(new Ok(e));this.logger=e}reset(){for(let e=0;e<yn;e++)this.rows[e].clear();this.currRow=yn-1}equals(e){let t=!0;for(let n=0;n<yn;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<yn;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<yn;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let u=0;u<yn;u++)this.rows[u].clear();const o=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const u=a.rows[o].cueStartTime,c=this.logger.time;if(u!==null&&c!==null&&u<c)for(let f=0;f<this.nrRollUpRows;f++)this.rows[t-this.nrRollUpRows+f+1].copy(a.rows[o+f])}}this.currRow=t;const n=this.rows[this.currRow];if(e.indent!==null){const o=e.indent,a=Math.max(o-1,0);n.setCursor(e.indent),e.color=n.chars[a].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",i=-1;for(let o=0;o<yn;o++){const a=this.rows[o].getTextString();a&&(i=o+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?n="["+t.join(" | ")+"]":n=t.join(`
`)),n}getTextAndFormat(){return this.rows}}class Pv{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new gh(n),this.nonDisplayedMemory=new gh(n),this.lastOutputScreen=new gh(n),this.currRollUpRow=this.displayedMemory.rows[yn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[yn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class _v{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=Mk(),this.logger=void 0;const i=this.logger=new Pk;this.channels=[null,new Pv(e,t,i),new Pv(e+1,n,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const i=t[n]&127,o=t[n+1]&127;let a=!1,u=null;if(i===0&&o===0)continue;this.logger.log(3,()=>"["+ys([t[n],t[n+1]])+"] -> ("+ys([i,o])+")");const c=this.cmdHistory;if(i>=16&&i<=31){if(Fk(i,o,c)){Cu(null,null,c),this.logger.log(3,()=>"Repeated command ("+ys([i,o])+") is dropped");continue}Cu(i,o,this.cmdHistory),a=this.parseCmd(i,o),a||(a=this.parseMidrow(i,o)),a||(a=this.parsePAC(i,o)),a||(a=this.parseBackgroundAttributes(i,o))}else Cu(null,null,c);if(!a&&(u=this.parseChars(i,o),u)){const h=this.currentChannel;h&&h>0?this.channels[h].insertChars(u):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!u&&this.logger.log(2,()=>"Couldn't parse cleaned data "+ys([i,o])+" orig: "+ys([t[n],t[n+1]]))}}parseCmd(e,t){const n=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=33&&t<=35;if(!(n||i))return!1;const o=e===20||e===21||e===23?1:2,a=this.channels[o];return e===20||e===21||e===28||e===29?t===32?a.ccRCL():t===33?a.ccBS():t===34?a.ccAOF():t===35?a.ccAON():t===36?a.ccDER():t===37?a.ccRU(2):t===38?a.ccRU(3):t===39?a.ccRU(4):t===40?a.ccFON():t===41?a.ccRDC():t===42?a.ccTR():t===43?a.ccRTD():t===44?a.ccEDM():t===45?a.ccCR():t===46?a.ccENM():t===47&&a.ccEOC():a.ccTO(t-32),this.currentChannel=o,!0}parseMidrow(e,t){let n=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return i?(i.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+ys([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let n;const i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,o=(e===16||e===24)&&t>=64&&t<=95;if(!(i||o))return!1;const a=e<=23?1:2;t>=64&&t<=95?n=a===1?bk[e]:kk[e]:n=a===1?Ck[e]:Ik[e];const u=this.channels[a];return u?(u.setPAC(this.interpretPAC(n,t)),this.currentChannel=a,!0):!1}interpretPAC(e,t){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?n=t-96:n=t-64,i.underline=(n&1)===1,n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((n-16)/2)*4,i}parseChars(e,t){let n,i=null,o=null;if(e>=25?(n=2,o=e-8):(n=1,o=e),o>=17&&o<=19){let a;o===17?a=t+80:o===18?a=t+112:a=t+144,this.logger.log(2,()=>"Special char '"+p1(a)+"' in channel "+n),i=[a]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);return i&&this.logger.log(3,()=>"Char codes =  "+ys(i).join(",")),i}parseBackgroundAttributes(e,t){const n=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(n||i))return!1;let o;const a={};e===16||e===24?(o=Math.floor((t-32)/2),a.background=Dk[o],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));const u=e<=23?1:2;return this.channels[u].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Cu(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function Cu(r,e,t){t.a=r,t.b=e}function Fk(r,e,t){return t.a===r&&t.b===e}function Mk(){return{a:null,b:null}}class ku{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var Qp=function(){if(_o!=null&&_o.VTTCue)return self.VTTCue;const r=["","lr","rl"],e=["start","middle","end","left","right"];function t(u,c){if(typeof c!="string"||!Array.isArray(u))return!1;const f=c.toLowerCase();return~u.indexOf(f)?f:!1}function n(u){return t(r,u)}function i(u){return t(e,u)}function o(u,...c){let f=1;for(;f<arguments.length;f++){const h=arguments[f];for(const p in h)u[p]=h[p]}return u}function a(u,c,f){const h=this,p={enumerable:!0};h.hasBeenReset=!1;let g="",x=!1,y=u,S=c,T=f,R=null,k="",C=!0,I="auto",w="start",P=50,D="middle",U=50,Q="middle";Object.defineProperty(h,"id",o({},p,{get:function(){return g},set:function(A){g=""+A}})),Object.defineProperty(h,"pauseOnExit",o({},p,{get:function(){return x},set:function(A){x=!!A}})),Object.defineProperty(h,"startTime",o({},p,{get:function(){return y},set:function(A){if(typeof A!="number")throw new TypeError("Start time must be set to a number.");y=A,this.hasBeenReset=!0}})),Object.defineProperty(h,"endTime",o({},p,{get:function(){return S},set:function(A){if(typeof A!="number")throw new TypeError("End time must be set to a number.");S=A,this.hasBeenReset=!0}})),Object.defineProperty(h,"text",o({},p,{get:function(){return T},set:function(A){T=""+A,this.hasBeenReset=!0}})),Object.defineProperty(h,"region",o({},p,{get:function(){return R},set:function(A){R=A,this.hasBeenReset=!0}})),Object.defineProperty(h,"vertical",o({},p,{get:function(){return k},set:function(A){const $=n(A);if($===!1)throw new SyntaxError("An invalid or illegal string was specified.");k=$,this.hasBeenReset=!0}})),Object.defineProperty(h,"snapToLines",o({},p,{get:function(){return C},set:function(A){C=!!A,this.hasBeenReset=!0}})),Object.defineProperty(h,"line",o({},p,{get:function(){return I},set:function(A){if(typeof A!="number"&&A!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");I=A,this.hasBeenReset=!0}})),Object.defineProperty(h,"lineAlign",o({},p,{get:function(){return w},set:function(A){const $=i(A);if(!$)throw new SyntaxError("An invalid or illegal string was specified.");w=$,this.hasBeenReset=!0}})),Object.defineProperty(h,"position",o({},p,{get:function(){return P},set:function(A){if(A<0||A>100)throw new Error("Position must be between 0 and 100.");P=A,this.hasBeenReset=!0}})),Object.defineProperty(h,"positionAlign",o({},p,{get:function(){return D},set:function(A){const $=i(A);if(!$)throw new SyntaxError("An invalid or illegal string was specified.");D=$,this.hasBeenReset=!0}})),Object.defineProperty(h,"size",o({},p,{get:function(){return U},set:function(A){if(A<0||A>100)throw new Error("Size must be between 0 and 100.");U=A,this.hasBeenReset=!0}})),Object.defineProperty(h,"align",o({},p,{get:function(){return Q},set:function(A){const $=i(A);if(!$)throw new SyntaxError("An invalid or illegal string was specified.");Q=$,this.hasBeenReset=!0}})),h.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class Nk{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function g1(r){function e(n,i,o,a){return(n|0)*3600+(i|0)*60+(o|0)+parseFloat(a||0)}const t=r.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class Bk{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function y1(r,e,t,n){const i=n?r.split(n):[r];for(const o in i){if(typeof i[o]!="string")continue;const a=i[o].split(t);if(a.length!==2)continue;const u=a[0],c=a[1];e(u,c)}}const tp=new Qp(0,0,""),Iu=tp.align==="middle"?"middle":"center";function $k(r,e,t){const n=r;function i(){const u=g1(r);if(u===null)throw new Error("Malformed timestamp: "+n);return r=r.replace(/^[^\sa-zA-Z-]+/,""),u}function o(u,c){const f=new Bk;y1(u,function(g,x){let y;switch(g){case"region":for(let S=t.length-1;S>=0;S--)if(t[S].id===x){f.set(g,t[S].region);break}break;case"vertical":f.alt(g,x,["rl","lr"]);break;case"line":y=x.split(","),f.integer(g,y[0]),f.percent(g,y[0])&&f.set("snapToLines",!1),f.alt(g,y[0],["auto"]),y.length===2&&f.alt("lineAlign",y[1],["start",Iu,"end"]);break;case"position":y=x.split(","),f.percent(g,y[0]),y.length===2&&f.alt("positionAlign",y[1],["start",Iu,"end","line-left","line-right","auto"]);break;case"size":f.percent(g,x);break;case"align":f.alt(g,x,["start",Iu,"end","left","right"]);break}},/:/,/\s/),c.region=f.get("region",null),c.vertical=f.get("vertical","");let h=f.get("line","auto");h==="auto"&&tp.line===-1&&(h=-1),c.line=h,c.lineAlign=f.get("lineAlign","start"),c.snapToLines=f.get("snapToLines",!0),c.size=f.get("size",100),c.align=f.get("align",Iu);let p=f.get("position","auto");p==="auto"&&tp.position===50&&(p=c.align==="start"||c.align==="left"?0:c.align==="end"||c.align==="right"?100:50),c.position=p}function a(){r=r.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),r.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);r=r.slice(3),a(),e.endTime=i(),a(),o(r,e)}function v1(r){return r.replace(/<br(?: \/)?>/gi,`
`)}class Uk{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Nk,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function n(){let o=t.buffer,a=0;for(o=v1(o);a<o.length&&o[a]!=="\r"&&o[a]!==`
`;)++a;const u=o.slice(0,a);return o[a]==="\r"&&++a,o[a]===`
`&&++a,t.buffer=o.slice(a),u}function i(o){y1(o,function(a,u){},/:/)}try{let o="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;o=n();const u=o.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(u!=null&&u[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:o=n(),t.state){case"HEADER":/:/.test(o)?i(o):o||(t.state="ID");continue;case"NOTE":o||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){t.state="NOTE";break}if(!o)continue;if(t.cue=new Qp(0,0,""),t.state="CUE",o.indexOf("-->")===-1){t.cue.id=o;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{$k(o,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const u=o.indexOf("-->")!==-1;if(!o||u&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=o}continue;case"BADCUE":o||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const Gk=/\r\n|\n\r|\n|\r/g,yh=function(e,t,n=0){return e.slice(n,n+t.length)===t},jk=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),o=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Re(t)||!Re(n)||!Re(i)||!Re(o))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=60*1e3*i,t+=60*60*1e3*o,t},vh=function(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0).toString()};function Jp(r,e,t){return vh(r.toString())+vh(e.toString())+vh(t)}const Hk=function(e,t,n){let i=e[t],o=e[i.prevCC];if(!o||!o.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(a=o)!=null&&a.new;){var a;e.ccOffset+=i.start-o.start,i.new=!1,i=o,o=e[i.prevCC]}e.presentationOffset=n};function Vk(r,e,t,n,i,o,a){const u=new Uk,c=Gn(new Uint8Array(r)).trim().replace(Gk,`
`).split(`
`),f=[],h=e?ak(e.baseTime,e.timescale):0;let p="00:00.000",g=0,x=0,y,S=!0;u.oncue=function(T){const R=t[n];let k=t.ccOffset;const C=(g-h)/9e4;if(R!=null&&R.new&&(x!==void 0?k=t.ccOffset=R.start:Hk(t,n,C)),C){if(!e){y=new Error("Missing initPTS for VTT MPEGTS");return}k=C-t.presentationOffset}const I=T.endTime-T.startTime,w=Zr((T.startTime+k-x)*9e4,i*9e4)/9e4;T.startTime=Math.max(w,0),T.endTime=Math.max(w+I,0);const P=T.text.trim();T.text=decodeURIComponent(encodeURIComponent(P)),T.id||(T.id=Jp(T.startTime,T.endTime,P)),T.endTime>0&&f.push(T)},u.onparsingerror=function(T){y=T},u.onflush=function(){if(y){a(y);return}o(f)},c.forEach(T=>{if(S)if(yh(T,"X-TIMESTAMP-MAP=")){S=!1,T.slice(16).split(",").forEach(R=>{yh(R,"LOCAL:")?p=R.slice(6):yh(R,"MPEGTS:")&&(g=parseInt(R.slice(7)))});try{x=jk(p)/1e3}catch(R){y=R}return}else T===""&&(S=!1);u.parse(T+`
`)}),u.flush()}const xh="stpp.ttml.im1t",x1=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,S1=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,zk={left:"start",center:"center",right:"end",start:"start",end:"end"};function Ov(r,e,t,n){const i=je(new Uint8Array(r),["mdat"]);if(i.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const o=i.map(u=>Gn(u)),a=ok(e.baseTime,1,e.timescale);try{o.forEach(u=>t(Kk(u,a)))}catch(u){n(u)}}function Kk(r,e){const i=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const o={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(o).reduce((p,g)=>(p[g]=i.getAttribute(`ttp:${g}`)||o[g],p),{}),u=i.getAttribute("xml:space")!=="preserve",c=Fv(Sh(i,"styling","style")),f=Fv(Sh(i,"layout","region")),h=Sh(i,"body","[begin]");return[].map.call(h,p=>{const g=E1(p,u);if(!g||!p.hasAttribute("begin"))return null;const x=Th(p.getAttribute("begin"),a),y=Th(p.getAttribute("dur"),a);let S=Th(p.getAttribute("end"),a);if(x===null)throw Mv(p);if(S===null){if(y===null)throw Mv(p);S=x+y}const T=new Qp(x-e,S-e,g);T.id=Jp(T.startTime,T.endTime,T.text);const R=f[p.getAttribute("region")],k=c[p.getAttribute("style")],C=Wk(R,k,c),{textAlign:I}=C;if(I){const w=zk[I];w&&(T.lineAlign=w),T.align=I}return Ot(T,C),T}).filter(p=>p!==null)}function Sh(r,e,t){const n=r.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(t)):[]}function Fv(r){return r.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function E1(r,e){return[].slice.call(r.childNodes).reduce((t,n,i)=>{var o;return n.nodeName==="br"&&i?t+`
`:(o=n.childNodes)!=null&&o.length?E1(n,e):e?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent},"")}function Wk(r,e,t){const n="http://www.w3.org/ns/ttml#styling";let i=null;const o=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=r!=null&&r.hasAttribute("style")?r.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(i=t[a]),o.reduce((u,c)=>{const f=Eh(e,n,c)||Eh(r,n,c)||Eh(i,n,c);return f&&(u[c]=f),u},{})}function Eh(r,e,t){return r&&r.hasAttributeNS(e,t)?r.getAttributeNS(e,t):null}function Mv(r){return new Error(`Could not parse ttml timestamp ${r}`)}function Th(r,e){if(!r)return null;let t=g1(r);return t===null&&(x1.test(r)?t=Yk(r,e):S1.test(r)&&(t=qk(r,e))),t}function Yk(r,e){const t=x1.exec(r),n=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+n/e.frameRate}function qk(r,e){const t=S1.exec(r),n=Number(t[1]);switch(t[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class Xk{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Bv(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(L.FRAG_LOADING,this.onFragLoading,this),e.on(L.FRAG_LOADED,this.onFragLoaded,this),e.on(L.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(L.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(L.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(L.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(L.FRAG_LOADING,this.onFragLoading,this),e.off(L.FRAG_LOADED,this.onFragLoaded,this),e.off(L.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(L.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(L.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(L.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new ku(this,"textTrack1"),t=new ku(this,"textTrack2"),n=new ku(this,"textTrack3"),i=new ku(this,"textTrack4");this.cea608Parser1=new _v(1,e,t),this.cea608Parser2=new _v(3,n,i)}}addCues(e,t,n,i,o){let a=!1;for(let u=o.length;u--;){const c=o[u],f=Qk(c[0],c[1],t,n);if(f>=0&&(c[0]=Math.min(c[0],t),c[1]=Math.max(c[1],n),a=!0,f/(n-t)>.5))return}if(a||o.push([t,n]),this.config.renderTextTracksNatively){const u=this.captionsTracks[e];this.Cues.newCue(u,t,n,i)}else{const u=this.Cues.newCue(null,t,n,i);this.hls.trigger(L.CUES_PARSED,{type:"captions",cues:u,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:o}){const{unparsedVttFrags:a}=this;n==="main"&&(this.initPTS[t.cc]={baseTime:i,timescale:o}),a.length&&(this.unparsedVttFrags=[],a.forEach(u=>{this.onFragLoaded(L.FRAG_LOADED,u)}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let i=0;i<n.textTracks.length;i++){const o=n.textTracks[i];if(Nv(o,{name:e,lang:t,attrs:{}}))return o}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:i}=this,{label:o,languageCode:a}=t[e],u=this.getExistingTrack(o,a);if(u)n[e]=u,wo(n[e]),GS(n[e],i);else{const c=this.createTextTrack("captions",o,a);c&&(c[e]=!0,n[e]=c)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n=t.label,i={_id:e,label:n,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(L.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,n){const i=this.media;if(i)return i.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(t=>{wo(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Bv(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)wo(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],i=n.some(o=>o.textCodec===xh);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(h1(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const a=this.media,u=a?Vu(a.textTracks):null;if(this.tracks.forEach((c,f)=>{let h;if(u){let p=null;for(let g=0;g<u.length;g++)if(u[g]&&Nv(u[g],c)){p=u[g],u[g]=null;break}p&&(h=p)}if(h)wo(h);else{const p=T1(c);h=this.createTextTrack(p,c.name,c.lang),h&&(h.mode="disabled")}h&&this.textTracks.push(h)}),u!=null&&u.length){const c=u.filter(f=>f!==null).map(f=>f.label);c.length&&j.warn(`Media element contains unused subtitle tracks: ${c.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(u=>({label:u.name,kind:u.type.toLowerCase(),default:u.default,subtitleTrack:u}));this.hls.trigger(L.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(n=>{const i=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!i)return;const o=`textTrack${i[1]}`,a=this.captionsProperties[o];a&&(a.label=n.name,n.lang&&(a.languageCode=n.lang),a.media=n)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Fe.MAIN){var n,i;const{cea608Parser1:o,cea608Parser2:a,lastSn:u}=this,{cc:c,sn:f}=t.frag,h=(n=(i=t.part)==null?void 0:i.index)!=null?n:-1;o&&a&&(f!==u+1||f===u&&h!==this.lastPartIndex+1||c!==this.lastCc)&&(o.reset(),a.reset()),this.lastCc=c,this.lastSn=f,this.lastPartIndex=h}}onFragLoaded(e,t){const{frag:n,payload:i}=t;if(n.type===Fe.SUBTITLE)if(i.byteLength){const o=n.decryptdata,a="stats"in t;if(o==null||!o.encrypted||a){const u=this.tracks[n.level],c=this.vttCCs;c[n.cc]||(c[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),u&&u.textCodec===xh?this._parseIMSC1(n,i):this._parseVTTs(t)}}else this.hls.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;Ov(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),n.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{j.log(`Failed to parse IMSC1: ${i}`),n.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var t;const{frag:n,payload:i}=e,{initPTS:o,unparsedVttFrags:a}=this,u=o.length-1;if(!o[n.cc]&&u===-1){a.push(e);return}const c=this.hls,f=(t=n.initSegment)!=null&&t.data?nn(n.initSegment.data,new Uint8Array(i)):i;Vk(f,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,h=>{this._appendCues(h,n.level),c.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},h=>{const p=h.message==="Missing initPTS for VTT MPEGTS";p?a.push(e):this._fallbackToIMSC1(n,i),j.log(`Failed to parse VTT cue: ${h}`),!(p&&u>n.cc)&&c.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:h})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||Ov(t,this.initPTS[e.cc],()=>{n.textCodec=xh,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(o=>jS(i,o))}else{const i=this.tracks[t];if(!i)return;const o=i.default?"default":"subtitles"+t;n.trigger(L.CUES_PARSED,{type:"subtitles",cues:e,track:o})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===Fe.SUBTITLE&&this.onFragLoaded(L.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){this.initCea608Parsers();const{cea608Parser1:n,cea608Parser2:i}=this;if(!this.enabled||!n||!i)return;const{frag:o,samples:a}=t;if(!(o.type===Fe.MAIN&&this.closedCaptionsForLevel(o)==="NONE"))for(let u=0;u<a.length;u++){const c=a[u].bytes;if(c){const f=this.extractCea608Data(c);n.addData(a[u].pts,f[0]),i.addData(a[u].pts,f[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:i,type:o}){const{media:a}=this;if(!(!a||a.currentTime<n)){if(!o||o==="video"){const{captionsTracks:u}=this;Object.keys(u).forEach(c=>Yh(u[c],t,n))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:u}=this;Object.keys(u).forEach(c=>Yh(u[c],t,i))}}}extractCea608Data(e){const t=[[],[]],n=e[0]&31;let i=2;for(let o=0;o<n;o++){const a=e[i++],u=127&e[i++],c=127&e[i++];if(u===0&&c===0)continue;if((4&a)!==0){const h=3&a;(h===0||h===1)&&(t[h].push(u),t[h].push(c))}}return t}}function T1(r){return r.characteristics&&/transcribes-spoken-dialog/gi.test(r.characteristics)&&/describes-music-and-sound/gi.test(r.characteristics)?"captions":"subtitles"}function Nv(r,e){return!!r&&r.kind===T1(e)&&ep(e,r)}function Qk(r,e,t,n){return Math.min(e,n)-Math.max(r,t)}function Bv(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class Zp{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(L.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(L.BUFFER_CODECS,this.onBufferCodecs,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(L.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(L.BUFFER_CODECS,this.onBufferCodecs,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Re(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&j.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((i,o)=>this.isLevelAllowed(i)&&o<=e);return this.clientRect=null,Zp.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,!t.width&&!t.height&&(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,t,n){if(!(e!=null&&e.length))return-1;const i=(u,c)=>c?u.width!==c.width||u.height!==c.height:!0;let o=e.length-1;const a=Math.max(t,n);for(let u=0;u<e.length;u+=1){const c=e[u];if((c.width>=a||c.height>=a)&&i(c,e[u+1])){o=u;break}}return o}}class Jk{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,n){const i=performance.now();if(t){if(this.lastTime){const o=i-this.lastTime,a=n-this.lastDroppedFrames,u=t-this.lastDecodedFrames,c=1e3*a/o,f=this.hls;if(f.trigger(L.FPS_DROP,{currentDropped:a,currentDecoded:u,totalDroppedFrames:n}),c>0&&a>f.config.fpsDroppedMonitoringThreshold*u){let h=f.currentLevel;j.warn("drop FPS ratio greater than max allowed value for currentLevel: "+h),h>0&&(f.autoLevelCapping===-1||f.autoLevelCapping>=h)&&(h=h-1,f.trigger(L.FPS_DROP_LEVEL_CAPPING,{level:h,droppedLevel:f.currentLevel}),f.autoLevelCapping=h,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const Du="[eme]";class Ao{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Ao.CDMCleanupPromise?[Ao.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=j.debug.bind(j,Du),this.log=j.log.bind(j,Du),this.warn=j.warn.bind(j,Du),this.error=j.error.bind(j,Du),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(L.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(L.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(L.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(L.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(L.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(L.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,i=t[e];if(i)return i.licenseUrl;if(e===pt.WIDEVINE&&n)return n;throw new Error(`no license server URL configured for key-system "${e}"`)}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(a,u,c)=>!!a&&c.indexOf(a)===u,i=t.map(a=>a.audioCodec).filter(n),o=t.map(a=>a.videoCodec).filter(n);return i.length+o.length===0&&o.push("avc1.42e01e"),new Promise((a,u)=>{const c=f=>{const h=f.shift();this.getMediaKeysPromise(h,i,o).then(p=>a({keySystem:h,mediaKeys:p})).catch(p=>{f.length?c(f):p instanceof Qr?u(p):u(new Qr({type:Ne.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_NO_ACCESS,error:p,fatal:!0},p.message))})};c(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${n}`;return CS===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return n(e,t)}getMediaKeysPromise(e,t,n){const i=ib(e,t,n,this.config.drmSystemOptions),o=this.keySystemAccessPromises[e];let a=o==null?void 0:o.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(i)}`),a=this.requestMediaKeySystemAccess(e,i);const u=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(c=>{this.log(`Failed to obtain access to key-system "${e}": ${c}`)}),a.then(c=>{this.log(`Access for key-system "${c.keySystem}" obtained`);const f=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),u.mediaKeys=c.createMediaKeys().then(h=>(this.log(`Media-keys created for "${e}"`),f.then(p=>p?this.setMediaKeysServerCertificate(h,e,p):h))),u.mediaKeys.catch(h=>{this.error(`Failed to create media-keys for "${e}"}: ${h}`)}),u.mediaKeys})}return a.then(()=>o.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${Pn.hexDump(e.keyId||[])}`);const i=n.createSession(),o={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(o),o}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t),o="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,o,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Pn.hexDump(e.keyId)}updateKeySession(e,t){var n;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${Pn.hexDump(((n=e.decryptdata)==null?void 0:n.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),i.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((t,n)=>{const i=ih(this.config),o=e.map(Vy).filter(a=>!!a&&i.indexOf(a)!==-1);return this.getKeySystemSelectionPromise(o).then(({keySystem:a})=>{const u=Ky(a);u?t(u):n(new Error(`Unable to find format for key-system "${a}"`))}).catch(n)})}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),i=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);let o=this.keyIdToKeySessionPromise[n];return o||(o=this.keyIdToKeySessionPromise[n]=this.getKeySystemForKeyPromise(t).then(({keySystem:a,mediaKeys:u})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(a,u).then(()=>{this.throwIfDestroyed();const c=this.createMediaKeySessionContext({keySystem:a,mediaKeys:u,decryptdata:t});return this.generateRequestWithPreferredKeySession(c,"cenc",t.pssh,"playlist-key")}))),o.catch(a=>this.handleError(a))),o}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Qr?this.hls.trigger(L.ERROR,e.data):this.hls.trigger(L.ERROR,{type:Ne.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const i=Vy(e.keyFormat),o=i?[i]:ih(this.config);return this.attemptKeySystemAccess(o)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=ih(this.config)),e.length===0)throw new Qr({type:Ne.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:t,initData:n}=e,i=`"${e.type}" event: init data type: "${t}"`;if(this.debug(i),n===null)return;let o,a;if(t==="sinf"&&this.config.drmSystems[pt.FAIRPLAY]){const p=Ut(new Uint8Array(n));try{const g=Bp(JSON.parse(p).sinf),x=MS(new Uint8Array(g));if(!x)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");o=x.subarray(8,24),a=pt.FAIRPLAY}catch(g){this.warn(`${i} Failed to parse sinf: ${g}`);return}}else{const p=kb(n),g=p.filter(x=>x.systemId===Fa.WIDEVINE)[0];if(!g){p.length===0||p.some(x=>!x.systemId)?this.warn(`${i} contains incomplete or invalid pssh data`):this.log(`ignoring ${i} for ${p.map(x=>zy(x.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(a=zy(g.systemId),g.version===0&&g.data){const x=g.data.length-22;o=g.data.subarray(x,x+16)}}if(!a||!o)return;const u=Pn.hexDump(o),{keyIdToKeySessionPromise:c,mediaKeySessions:f}=this;let h=c[u];for(let p=0;p<f.length;p++){const g=f[p],x=g.decryptdata;if(!x.keyId)continue;const y=Pn.hexDump(x.keyId);if(u===y||x.uri.replace(/-/g,"").indexOf(u)!==-1){if(h=c[y],x.pssh)break;delete c[y],x.pssh=new Uint8Array(n),x.keyId=o,h=c[u]=h.then(()=>this.generateRequestWithPreferredKeySession(g,t,n,"encrypted-event-key-match"));break}}h||(h=c[u]=this.getKeySystemSelectionPromise([a]).then(({keySystem:p,mediaKeys:g})=>{var x;this.throwIfDestroyed();const y=new Va("ISO-23001-7",u,(x=Ky(p))!=null?x:"");return y.pssh=new Uint8Array(n),y.keyId=o,this.attemptSetMediaKeys(p,g).then(()=>{this.throwIfDestroyed();const S=this.createMediaKeySessionContext({decryptdata:y,keySystem:p,mediaKeys:g});return this.generateRequestWithPreferredKeySession(S,t,n,"encrypted-event-no-match")})})),h.catch(p=>this.handleError(p))}_onWaitingForKey(e){this.log(`"${e.type}" event`)}attemptSetMediaKeys(e,t){const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(o=>n.indexOf(o)===-1)})}generateRequestWithPreferredKeySession(e,t,n,i){var o,a;const u=(o=this.config.drmSystems)==null||(a=o[e.keySystem])==null?void 0:a.generateRequest;if(u)try{const y=u.call(this.hls,t,n,e);if(!y)throw new Error("Invalid response from configured generateRequest filter");t=y.initDataType,n=e.decryptdata.pssh=y.initData?new Uint8Array(y.initData):null}catch(y){var c;if(this.warn(y.message),(c=this.hls)!=null&&c.config.debug)throw y}if(n===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const f=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${f} (init data type: ${t} length: ${n?n.byteLength:null})`);const h=new Xp,p=e._onmessage=y=>{const S=e.mediaKeysSession;if(!S){h.emit("error",new Error("invalid state"));return}const{messageType:T,message:R}=y;this.log(`"${T}" message event for session "${S.sessionId}" message size: ${R.byteLength}`),T==="license-request"||T==="license-renewal"?this.renewLicense(e,R).catch(k=>{this.handleError(k),h.emit("error",k)}):T==="license-release"?e.keySystem===pt.FAIRPLAY&&(this.updateKeySession(e,Kh("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${T}"`)},g=e._onkeystatuseschange=y=>{if(!e.mediaKeysSession){h.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const T=e.keyStatus;h.emit("keyStatus",T),T==="expired"&&(this.warn(`${e.keySystem} expired for key ${f}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",p),e.mediaKeysSession.addEventListener("keystatuseschange",g);const x=new Promise((y,S)=>{h.on("error",S),h.on("keyStatus",T=>{T.startsWith("usable")?y():T==="output-restricted"?S(new Qr({type:Ne.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):T==="internal-error"?S(new Qr({type:Ne.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${T}"`)):T==="expired"?S(new Error("key expired while generating request")):this.warn(`unhandled key status change "${T}"`)})});return e.mediaKeysSession.generateRequest(t,n).then(()=>{var y;this.log(`Request generated for key-session "${(y=e.mediaKeysSession)==null?void 0:y.sessionId}" keyId: ${f}`)}).catch(y=>{throw new Qr({type:Ne.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_NO_SESSION,error:y,fatal:!1},`Error generating key-session request: ${y}`)}).then(()=>x).catch(y=>{throw h.removeAllListeners(),this.removeSession(e),y}).then(()=>(h.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,n)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${Pn.hexDump("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${Pn.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,n=t.loader,i=new n(t),o=this.getServerCertificateUrl(e);return o?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,u)=>{const c={responseType:"arraybuffer",url:o},f=t.certLoadPolicy.default,h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(g,x,y,S)=>{a(g.data)},onError:(g,x,y,S)=>{u(new Qr({type:Ne.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:Yt({url:c.url,data:void 0},g)},`"${e}" certificate request failed (${o}). Status: ${g.code} (${g.text})`))},onTimeout:(g,x,y)=>{u(new Qr({type:Ne.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:{url:c.url,data:void 0}},`"${e}" certificate request timed out (${o})`))},onAbort:(g,x,y)=>{u(new Error("aborted"))}};i.load(c,h,p)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((i,o)=>{e.setServerCertificate(n).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${n==null?void 0:n.byteLength}) on "${t}"`),i(e)}).catch(a=>{o(new Qr({type:Ne.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(i=>{throw new Qr({type:Ne.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const i=new DOMParser().parseFromString(n,"application/xml"),o=i.querySelectorAll("HttpHeader");if(o.length>0){let h;for(let p=0,g=o.length;p<g;p++){var a,u;h=o[p];const x=(a=h.querySelector("name"))==null?void 0:a.textContent,y=(u=h.querySelector("value"))==null?void 0:u.textContent;x&&y&&e.setRequestHeader(x,y)}}const c=i.querySelector("Challenge"),f=c==null?void 0:c.textContent;if(!f)throw new Error("Cannot find <Challenge> in key message");return Kh(atob(f))}setupLicenseXHR(e,t,n,i){const o=this.config.licenseXhrSetup;return o?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return o.call(this.hls,e,t,n,i)}).catch(a=>{if(!n.decryptdata)throw a;return e.open("POST",t,!0),o.call(this.hls,e,t,n,i)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((i,o)=>{const a=this.getLicenseServerUrl(e.keySystem);this.log(`Sending license request to URL: ${a}`);const u=new XMLHttpRequest;u.responseType="arraybuffer",u.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return o(new Error("invalid state"));if(u.readyState===4)if(u.status===200){this._requestLicenseFailureCount=0;let c=u.response;this.log(`License received ${c instanceof ArrayBuffer?c.byteLength:c}`);const f=this.config.licenseResponseCallback;if(f)try{c=f.call(this.hls,u,a,e)}catch(h){this.error(h)}i(c)}else{const c=n.errorRetry,f=c?c.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>f||u.status>=400&&u.status<500)o(new Qr({type:Ne.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:u,response:{url:a,data:void 0,code:u.status,text:u.statusText}},`License Request XHR failed (${a}). Status: ${u.status} (${u.statusText})`));else{const h=f-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${h} attempts left`),this.requestLicense(e,t).then(i,o)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=u,this.setupLicenseXHR(u,a,e,t).then(({xhr:c,licenseChallenge:f})=>{e.keySystem==pt.PLAYREADY&&(f=this.unpackPlayReadyKeyMessage(c,f)),c.send(f)})})}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Va.clearKeyUriToKeyIdMap();const n=t.length;Ao.CDMCleanupPromise=Promise.all(t.map(i=>this.removeSession(i)).concat(e==null?void 0:e.setMediaKeys(null).catch(i=>{this.log(`Could not clear media keys: ${i}`)}))).then(()=>{n&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)}).catch(i=>{this.log(`Could not close sessions and clear media keys: ${i}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=t.reduce((i,o)=>(i.indexOf(o.keyFormat)===-1&&i.push(o.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);return i>-1&&this.mediaKeySessions.splice(i,1),t.remove().catch(o=>{this.log(`Could not remove session: ${o}`)}).then(()=>t.close()).catch(o=>{this.log(`Could not close session: ${o}`)})}}}Ao.CDMCleanupPromise=void 0;class Qr extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var ur;(function(r){r.MANIFEST="m",r.AUDIO="a",r.VIDEO="v",r.MUXED="av",r.INIT="i",r.CAPTION="c",r.TIMED_TEXT="tt",r.KEY="k",r.OTHER="o"})(ur||(ur={}));var rp;(function(r){r.DASH="d",r.HLS="h",r.SMOOTH="s",r.OTHER="o"})(rp||(rp={}));var Ts;(function(r){r.OBJECT="CMCD-Object",r.REQUEST="CMCD-Request",r.SESSION="CMCD-Session",r.STATUS="CMCD-Status"})(Ts||(Ts={}));const Zk={[Ts.OBJECT]:["br","d","ot","tb"],[Ts.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[Ts.SESSION]:["cid","pr","sf","sid","st","v"],[Ts.STATUS]:["bs","rtp"]};class Mo{constructor(e,t){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(n=>n instanceof Mo?n:new Mo(n))),this.value=e,this.params=t}}class w1{constructor(e){this.description=void 0,this.description=e}}const eI="Dict";function tI(r){return Array.isArray(r)?JSON.stringify(r):r instanceof Map?"Map{}":r instanceof Set?"Set{}":typeof r=="object"?JSON.stringify(r):String(r)}function rI(r,e,t,n){return new Error(`failed to ${r} "${tI(e)}" as ${t}`,{cause:n})}const $v="Bare Item",nI="Boolean",iI="Byte Sequence",sI="Decimal",oI="Integer";function aI(r){return r<-999999999999999||999999999999999<r}const lI=/[\x00-\x1f\x7f]+/,uI="Token",cI="Key";function Hn(r,e,t){return rI("serialize",r,e,t)}function dI(r){if(typeof r!="boolean")throw Hn(r,nI);return r?"?1":"?0"}function fI(r){return btoa(String.fromCharCode(...r))}function hI(r){if(ArrayBuffer.isView(r)===!1)throw Hn(r,iI);return`:${fI(r)}:`}function R1(r){if(aI(r))throw Hn(r,oI);return r.toString()}function pI(r){return`@${R1(r.getTime()/1e3)}`}function A1(r,e){if(r<0)return-A1(-r,e);const t=Math.pow(10,e);if(Math.abs(r*t%1-.5)<Number.EPSILON){const i=Math.floor(r*t);return(i%2===0?i:i+1)/t}else return Math.round(r*t)/t}function mI(r){const e=A1(r,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Hn(r,sI);const t=e.toString();return t.includes(".")?t:`${t}.0`}const gI="String";function yI(r){if(lI.test(r))throw Hn(r,gI);return`"${r.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function vI(r){return r.description||r.toString().slice(7,-1)}function Uv(r){const e=vI(r);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Hn(e,uI);return e}function np(r){switch(typeof r){case"number":if(!Re(r))throw Hn(r,$v);return Number.isInteger(r)?R1(r):mI(r);case"string":return yI(r);case"symbol":return Uv(r);case"boolean":return dI(r);case"object":if(r instanceof Date)return pI(r);if(r instanceof Uint8Array)return hI(r);if(r instanceof w1)return Uv(r);default:throw Hn(r,$v)}}function ip(r){if(/^[a-z*][a-z0-9\-_.*]*$/.test(r)===!1)throw Hn(r,cI);return r}function em(r){return r==null?"":Object.entries(r).map(([e,t])=>t===!0?`;${ip(e)}`:`;${ip(e)}=${np(t)}`).join("")}function L1(r){return r instanceof Mo?`${np(r.value)}${em(r.params)}`:np(r)}function xI(r){return`(${r.value.map(L1).join(" ")})${em(r.params)}`}function SI(r,e={whitespace:!0}){if(typeof r!="object")throw Hn(r,eI);const t=r instanceof Map?r.entries():Object.entries(r),n=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([i,o])=>{o instanceof Mo||(o=new Mo(o));let a=ip(i);return o.value===!0?a+=em(o.params):(a+="=",Array.isArray(o.value)?a+=xI(o):a+=L1(o)),a}).join(`,${n}`)}function EI(r,e){return SI(r,e)}const TI=r=>r==="ot"||r==="sf"||r==="st",wI=r=>typeof r=="number"?Re(r):r!=null&&r!==""&&r!==!1;function RI(r,e){const t=new URL(r),n=new URL(e);if(t.origin!==n.origin)return r;const i=t.pathname.split("/").slice(1),o=n.pathname.split("/").slice(1,-1);for(;i[0]===o[0];)i.shift(),o.shift();for(;o.length;)o.shift(),i.unshift("..");return i.join("/")}function AI(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const o=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i=="x"?o:o&3|8).toString(16)})}}}const Xu=r=>Math.round(r),LI=(r,e)=>(e!=null&&e.baseUrl&&(r=RI(r,e.baseUrl)),encodeURIComponent(r)),Pu=r=>Xu(r/100)*100,bI={br:Xu,d:Xu,bl:Pu,dl:Pu,mtp:Pu,nor:LI,rtp:Pu,tb:Xu};function CI(r,e){const t={};if(r==null||typeof r!="object")return t;const n=Object.keys(r).sort(),i=Ot({},bI,e==null?void 0:e.formatters),o=e==null?void 0:e.filter;return n.forEach(a=>{if(o!=null&&o(a))return;let u=r[a];const c=i[a];c&&(u=c(u,e)),!(a==="v"&&u===1)&&(a=="pr"&&u===1||wI(u)&&(TI(a)&&typeof u=="string"&&(u=new w1(u)),t[a]=u))}),t}function b1(r,e={}){return r?EI(CI(r,e),Ot({whitespace:!1},e)):""}function kI(r,e={}){if(!r)return{};const t=Object.entries(r),n=Object.entries(Zk).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),i=t.reduce((o,a)=>{var u,c;const[f,h]=a,p=((u=n.find(g=>g[1].includes(f)))==null?void 0:u[0])||Ts.REQUEST;return(c=o[p])!=null||(o[p]={}),o[p][f]=h,o},{});return Object.entries(i).reduce((o,[a,u])=>(o[a]=b1(u,e),o),{})}function II(r,e,t){return Ot(r,kI(e,t))}const DI="CMCD";function PI(r,e={}){if(!r)return"";const t=b1(r,e);return`${DI}=${encodeURIComponent(t)}`}const Gv=/CMCD=[^&#]+/;function _I(r,e,t){const n=PI(e,t);if(!n)return r;if(Gv.test(r))return r.replace(Gv,n);const i=r.includes("?")?"&":"?";return`${r}${i}${n}`}class OI{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:ur.MANIFEST,su:!this.initialized})}catch(o){j.warn("Could not generate manifest CMCD data.",o)}},this.applyFragmentData=i=>{try{const o=i.frag,a=this.hls.levels[o.level],u=this.getObjectType(o),c={d:o.duration*1e3,ot:u};(u===ur.VIDEO||u===ur.AUDIO||u==ur.MUXED)&&(c.br=a.bitrate/1e3,c.tb=this.getTopBandwidth(u)/1e3,c.bl=this.getBufferLength(u)),this.apply(i,c)}catch(o){j.warn("Could not generate segment CMCD data.",o)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;n!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||AI(),this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHED,this.onMediaDetached,this),e.on(L.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHED,this.onMediaDetached,this),e.off(L.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,i;this.audioBuffer=(n=t.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:rp.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Ot(t,this.createData());const n=t.ot===ur.INIT||t.ot===ur.VIDEO||t.ot===ur.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:i}=this;i&&(t=Object.keys(t).reduce((o,a)=>(i.includes(a)&&(o[a]=t[a]),o),{})),this.useHeaders?(e.headers||(e.headers={}),II(e.headers,t)):e.url=_I(e.url,t)}getObjectType(e){const{type:t}=e;if(t==="subtitle")return ur.TIMED_TEXT;if(e.sn==="initSegment")return ur.INIT;if(t==="audio")return ur.AUDIO;if(t==="main")return this.hls.audioTracks.length?ur.VIDEO:ur.MUXED}getTopBandwidth(e){let t=0,n;const i=this.hls;if(e===ur.AUDIO)n=i.audioTracks;else{const o=i.maxAutoLevel,a=o>-1?o+1:i.levels.length;n=i.levels.slice(0,a)}for(const o of n)o.bitrate>t&&(t=o.bitrate);return t>0?t:NaN}getBufferLength(e){const t=this.hls.media,n=e===ur.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!t?NaN:ht.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(o){this.loader=void 0,this.loader=new n(o)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(o,a,u){t(o),this.loader.load(o,a,u)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(o){this.loader=void 0,this.loader=new n(o)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(o,a,u){t(o),this.loader.load(o,a,u)}}}}const FI=3e5;class MI{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=j.log.bind(j,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((n==null?void 0:n.action)===Jt.SendAlternateToPenaltyBox&&n.flags===gn.MoveAllAlternatesMatchingHost){const i=this.levels;let o=this.pathwayPriority,a=this.pathwayId;if(t.context){const{groupId:u,pathwayId:c,type:f}=t.context;u&&i?a=this.getPathwayForGroupId(u,f,a):c&&(a=c)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!o&&i&&(o=i.reduce((u,c)=>(u.indexOf(c.pathwayId)===-1&&u.push(c.pathwayId),u),[])),o&&o.length>1&&(this.updatePathwayPriority(o),n.resolved=this.pathwayId!==a),n.resolved||j.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${a} levels: ${i&&i.length} priorities: ${JSON.stringify(o)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let t;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(o=>{i-n[o]>FI&&delete n[o]});for(let o=0;o<e.length;o++){const a=e[o];if(a in n)continue;if(a===this.pathwayId)return;const u=this.hls.nextLoadLevel,c=this.hls.levels[u];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,KS(t),this.hls.trigger(L.LEVELS_UPDATED,{levels:t});const f=this.hls.levels[u];c&&f&&this.levels&&(f.attrs["STABLE-VARIANT-ID"]!==c.attrs["STABLE-VARIANT-ID"]&&f.bitrate!==c.bitrate&&this.log(`Unstable Pathways change from bitrate ${c.bitrate} to ${f.bitrate}`),this.hls.nextLoadLevel=u);break}}}getPathwayForGroupId(e,t,n){const i=this.getLevelsForPathway(n).concat(this.levels||[]);for(let o=0;o<i.length;o++)if(t===Ye.AUDIO_TRACK&&i[o].hasAudioGroup(e)||t===Ye.SUBTITLE_TRACK&&i[o].hasSubtitleGroup(e))return i[o].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},i={};e.forEach(o=>{const{ID:a,"BASE-ID":u,"URI-REPLACEMENT":c}=o;if(t.some(h=>h.pathwayId===a))return;const f=this.getLevelsForPathway(u).map(h=>{const p=new wt(h.attrs);p["PATHWAY-ID"]=a;const g=p.AUDIO&&`${p.AUDIO}_clone_${a}`,x=p.SUBTITLES&&`${p.SUBTITLES}_clone_${a}`;g&&(n[p.AUDIO]=g,p.AUDIO=g),x&&(i[p.SUBTITLES]=x,p.SUBTITLES=x);const y=C1(h.uri,p["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",c),S=new Oo({attrs:p,audioCodec:h.audioCodec,bitrate:h.bitrate,height:h.height,name:h.name,url:y,videoCodec:h.videoCodec,width:h.width});if(h.audioGroups)for(let T=1;T<h.audioGroups.length;T++)S.addGroupId("audio",`${h.audioGroups[T]}_clone_${a}`);if(h.subtitleGroups)for(let T=1;T<h.subtitleGroups.length;T++)S.addGroupId("text",`${h.subtitleGroups[T]}_clone_${a}`);return S});t.push(...f),jv(this.audioTracks,n,c,a),jv(this.subtitleTracks,i,c,a)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;this.loader&&this.loader.destroy(),this.loader=new n(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const h=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+h)}const o={responseType:"json",url:i.href},a=t.steeringManifestLoadPolicy.default,u=a.errorRetry||a.timeoutRetry||{},c={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:u.maxNumRetry||0,retryDelay:u.retryDelayMs||0,maxRetryDelay:u.maxRetryDelayMs||0},f={onSuccess:(h,p,g,x)=>{this.log(`Loaded steering manifest: "${i}"`);const y=h.data;if(y.VERSION!==1){this.log(`Steering VERSION ${y.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=y.TTL;const{"RELOAD-URI":S,"PATHWAY-CLONES":T,"PATHWAY-PRIORITY":R}=y;if(S)try{this.uri=new self.URL(S,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${S}`);return}this.scheduleRefresh(this.uri||g.url),T&&this.clonePathways(T);const k={steeringManifest:y,url:i.toString()};this.hls.trigger(L.STEERING_MANIFEST_LOADED,k),R&&this.updatePathwayPriority(R)},onError:(h,p,g,x)=>{if(this.log(`Error loading steering manifest: ${h.code} ${h.text} (${p.url})`),this.stopLoad(),h.code===410){this.enabled=!1,this.log(`Steering manifest ${p.url} no longer available`);return}let y=this.timeToLoad*1e3;if(h.code===429){const S=this.loader;if(typeof(S==null?void 0:S.getResponseHeader)=="function"){const T=S.getResponseHeader("Retry-After");T&&(y=parseFloat(T)*1e3)}this.log(`Steering manifest ${p.url} rate limited`);return}this.scheduleRefresh(this.uri||p.url,y)},onTimeout:(h,p,g)=>{this.log(`Timeout loading steering manifest (${p.url})`),this.scheduleRefresh(this.uri||p.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(o,c,f)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const i=(n=this.hls)==null?void 0:n.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function jv(r,e,t,n){r&&Object.keys(e).forEach(i=>{const o=r.filter(a=>a.groupId===i).map(a=>{const u=Ot({},a);return u.details=void 0,u.attrs=new wt(u.attrs),u.url=u.attrs.URI=C1(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),u.groupId=u.attrs["GROUP-ID"]=e[i],u.attrs["PATHWAY-ID"]=n,u});r.push(...o)})}function C1(r,e,t,n){const{HOST:i,PARAMS:o,[t]:a}=n;let u;e&&(u=a==null?void 0:a[e],u&&(r=u));const c=new self.URL(r);return i&&!u&&(c.host=i),o&&Object.keys(o).sort().forEach(f=>{f&&c.searchParams.set(f,o[f])}),c.href}const NI=/^age:\s*[\d.]+\s*$/im;class k1{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new jc,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const o=this.xhrSetup;o?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return o(n,t.url)}).catch(a=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",t.url,!0),o(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(a=>{this.callbacks.onError({code:n.status,text:a.message},t,n,i)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:o,maxLoadTimeMs:a}=n.loadPolicy;if(i)for(const u in i)e.setRequestHeader(u,i[u]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=o&&Re(o)?o:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const i=t.readyState,o=this.config;if(!n.aborted&&i>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),o.timeout!==o.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),o.timeout=o.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),o.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const a=t.status,u=t.responseType==="text"?t.responseText:null;if(a>=200&&a<300){const p=u??t.response;if(p!=null){n.loading.end=Math.max(self.performance.now(),n.loading.first);const g=t.responseType==="arraybuffer"?p.byteLength:p.length;if(n.loaded=n.total=g,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first),!this.callbacks)return;const x=this.callbacks.onProgress;if(x&&x(n,e,p,t),!this.callbacks)return;const y={url:t.responseURL,data:p,code:a};this.callbacks.onSuccess(y,n,e,t);return}}const c=o.loadPolicy.errorRetry,f=n.retry,h={url:e.url,data:void 0,code:a};xc(c,f,!1,h)?this.retry(c):(j.error(`${a} while loading ${e.url}`),this.callbacks.onError({code:a,text:t.statusText},e,t,n))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(xc(e,t,!0))this.retry(e);else{var n;j.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=Gp(e,n.retry),n.retry++,j.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t==null?void 0:t.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&NI.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function BI(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const $I=/(\d+)-(\d+)\/(\d+)/;class Hv{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||HI,this.controller=new self.AbortController,this.stats=new jc}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const o=UI(e,this.controller.signal),a=n.onProgress,u=e.responseType==="arraybuffer",c=u?"byteLength":"length",{maxTimeToFirstByteMs:f,maxLoadTimeMs:h}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,o),self.clearTimeout(this.requestTimeout),t.timeout=f&&Re(f)?f:h,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),n.onTimeout(i,e,this.response)},t.timeout),self.fetch(this.request).then(p=>{this.response=this.loader=p;const g=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=h,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),n.onTimeout(i,e,this.response)},h-(g-i.loading.start)),!p.ok){const{status:x,statusText:y}=p;throw new VI(y||"fetch, bad network response",x,p)}return i.loading.first=g,i.total=jI(p.headers)||i.total,a&&Re(t.highWaterMark)?this.loadProgressively(p,i,e,t.highWaterMark,a):u?p.arrayBuffer():e.responseType==="json"?p.json():p.text()}).then(p=>{const g=this.response;if(!g)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const x=p[c];x&&(i.loaded=i.total=x);const y={url:g.url,data:p,code:g.status};a&&!Re(t.highWaterMark)&&a(i,e,p,g),n.onSuccess(y,i,e,g)}).catch(p=>{if(self.clearTimeout(this.requestTimeout),i.aborted)return;const g=p&&p.code||0,x=p?p.message:null;n.onError({code:g,text:x},e,p?p.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,i=0,o){const a=new XS,u=e.body.getReader(),c=()=>u.read().then(f=>{if(f.done)return a.dataLength&&o(t,n,a.flush(),e),Promise.resolve(new ArrayBuffer(0));const h=f.value,p=h.length;return t.loaded+=p,p<i||a.dataLength?(a.push(h),a.dataLength>=i&&o(t,n,a.flush(),e)):o(t,n,h,e),c()}).catch(()=>Promise.reject());return c()}}function UI(r,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Ot({},r.headers))};return r.rangeEnd&&t.headers.set("Range","bytes="+r.rangeStart+"-"+String(r.rangeEnd-1)),t}function GI(r){const e=$I.exec(r);if(e)return parseInt(e[2])-parseInt(e[1])+1}function jI(r){const e=r.get("Content-Range");if(e){const n=GI(e);if(Re(n))return n}const t=r.get("Content-Length");if(t)return parseInt(t)}function HI(r,e){return new self.Request(r.url,e)}class VI extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const zI=/\s/,KI={newCue(r,e,t,n){const i=[];let o,a,u,c,f;const h=self.VTTCue||self.TextTrackCue;for(let g=0;g<n.rows.length;g++)if(o=n.rows[g],u=!0,c=0,f="",!o.isEmpty()){var p;for(let S=0;S<o.chars.length;S++)zI.test(o.chars[S].uchar)&&u?c++:(f+=o.chars[S].uchar,u=!1);o.cueStartTime=e,e===t&&(t+=1e-4),c>=16?c--:c++;const x=v1(f.trim()),y=Jp(e,t,x);r!=null&&(p=r.cues)!=null&&p.getCueById(y)||(a=new h(e,t,x),a.id=y,a.line=g+1,a.align="left",a.position=10+Math.min(80,Math.floor(c*8/32)*10),i.push(a))}return r&&i.length&&(i.sort((g,x)=>g.line==="auto"||x.line==="auto"?0:g.line>8&&x.line>8?x.line-g.line:g.line-x.line),i.forEach(g=>jS(r,g))),i}},WI={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},I1=Yt(Yt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:k1,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:SC,bufferController:Rk,capLevelController:Zp,errorController:lC,fpsController:Jk,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:CS,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:WI},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},YI()),{},{subtitleStreamController:Sk,subtitleTrackController:Tk,timelineController:Xk,audioStreamController:vk,audioTrackController:xk,emeController:Ao,cmcdController:OI,contentSteeringController:MI});function YI(){return{cueHandler:KI,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function qI(r,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const t=sp(r),n=["manifest","level","frag"],i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return n.forEach(o=>{const a=`${o==="level"?"playlist":o}LoadPolicy`,u=e[a]===void 0,c=[];i.forEach(f=>{const h=`${o}Loading${f}`,p=e[h];if(p!==void 0&&u){c.push(h);const g=t[a].default;switch(e[a]={default:g},f){case"TimeOut":g.maxLoadTimeMs=p,g.maxTimeToFirstByteMs=p;break;case"MaxRetry":g.errorRetry.maxNumRetry=p,g.timeoutRetry.maxNumRetry=p;break;case"RetryDelay":g.errorRetry.retryDelayMs=p,g.timeoutRetry.retryDelayMs=p;break;case"MaxRetryTimeout":g.errorRetry.maxRetryDelayMs=p,g.timeoutRetry.maxRetryDelayMs=p;break}}}),c.length&&j.warn(`hls.js config: "${c.join('", "')}" setting(s) are deprecated, use "${a}": ${JSON.stringify(e[a])}`)}),Yt(Yt({},t),e)}function sp(r){return r&&typeof r=="object"?Array.isArray(r)?r.map(sp):Object.keys(r).reduce((e,t)=>(e[t]=sp(r[t]),e),{}):r}function XI(r){const e=r.loader;e!==Hv&&e!==k1?(j.log("[config]: Custom loader detected, cannot enable progressive streaming"),r.progressive=!1):BI()&&(r.loader=Hv,r.progressive=!0,r.enableSoftwareAES=!0,j.log("[config]: Progressive streaming enabled, using FetchLoader"))}let wh;class QI extends jp{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(L.LEVEL_LOADED,this.onLevelLoaded,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this),e.on(L.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(L.LEVEL_LOADED,this.onLevelLoaded,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this),e.off(L.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,i=[],o={},a={};let u=!1,c=!1,f=!1;t.levels.forEach(h=>{var p,g;const x=h.attrs;let{audioCodec:y,videoCodec:S}=h;((p=y)==null?void 0:p.indexOf("mp4a.40.34"))!==-1&&(wh||(wh=/chrome|firefox/i.test(navigator.userAgent)),wh&&(h.audioCodec=y=void 0)),y&&(h.audioCodec=y=gc(y,n)),((g=S)==null?void 0:g.indexOf("avc1"))===0&&(S=h.videoCodec=Nb(S));const{width:T,height:R,unknownCodecs:k}=h;if(u||(u=!!(T&&R)),c||(c=!!S),f||(f=!!y),k!=null&&k.length||y&&!lh(y,"audio",n)||S&&!lh(S,"video",n))return;const{CODECS:C,"FRAME-RATE":I,"HDCP-LEVEL":w,"PATHWAY-ID":P,RESOLUTION:D,"VIDEO-RANGE":U}=x,A=`${`${P||"."}-`}${h.bitrate}-${D}-${I}-${C}-${U}-${w}`;if(o[A])if(o[A].uri!==h.url&&!h.attrs["PATHWAY-ID"]){const $=a[A]+=1;h.attrs["PATHWAY-ID"]=new Array($+1).join(".");const ie=new Oo(h);o[A]=ie,i.push(ie)}else o[A].addGroupId("audio",x.AUDIO),o[A].addGroupId("text",x.SUBTITLES);else{const $=new Oo(h);o[A]=$,a[A]=1,i.push($)}}),this.filterAndSortMediaOptions(i,t,u,c,f)}filterAndSortMediaOptions(e,t,n,i,o){let a=[],u=[],c=e;if((n||i)&&o&&(c=c.filter(({videoCodec:y,videoRange:S,width:T,height:R})=>(!!y||!!(T&&R))&&Xb(S))),c.length===0){Promise.resolve().then(()=>{if(this.hls){t.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(t.levels[0].attrs)}`);const y=new Error("no level with compatible codecs found in manifest");this.hls.trigger(L.ERROR,{type:Ne.MEDIA_ERROR,details:J.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:y,reason:y.message})}});return}if(t.audioTracks){const{preferManagedMediaSource:y}=this.hls.config;a=t.audioTracks.filter(S=>!S.audioCodec||lh(S.audioCodec,"audio",y)),Vv(a)}t.subtitles&&(u=t.subtitles,Vv(u));const f=c.slice(0);c.sort((y,S)=>{if(y.attrs["HDCP-LEVEL"]!==S.attrs["HDCP-LEVEL"])return(y.attrs["HDCP-LEVEL"]||"")>(S.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&y.height!==S.height)return y.height-S.height;if(y.frameRate!==S.frameRate)return y.frameRate-S.frameRate;if(y.videoRange!==S.videoRange)return yc.indexOf(y.videoRange)-yc.indexOf(S.videoRange);if(y.videoCodec!==S.videoCodec){const T=Qy(y.videoCodec),R=Qy(S.videoCodec);if(T!==R)return R-T}if(y.uri===S.uri&&y.codecSet!==S.codecSet){const T=mc(y.codecSet),R=mc(S.codecSet);if(T!==R)return R-T}return y.averageBitrate!==S.averageBitrate?y.averageBitrate-S.averageBitrate:0});let h=f[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==f.length)){for(let y=0;y<f.length;y++)if(f[y].pathwayId===c[0].pathwayId){h=f[y];break}}this._levels=c;for(let y=0;y<c.length;y++)if(c[y]===h){var p;this._firstLevel=y;const S=h.bitrate,T=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${S}`),((p=this.hls.userConfig)==null?void 0:p.abrEwmaDefaultEstimate)===void 0){const R=Math.min(S,this.hls.config.abrEwmaDefaultEstimateMax);R>T&&T===I1.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=R)}break}const g=o&&!i,x={levels:c,audioTracks:a,subtitleTracks:u,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:o,video:i,altAudio:!g&&a.some(y=>!!y.url)};this.hls.trigger(L.MANIFEST_PARSED,x),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const h=new Error("invalid level idx"),p=e<0;if(this.hls.trigger(L.ERROR,{type:Ne.OTHER_ERROR,details:J.LEVEL_SWITCH_ERROR,level:e,fatal:p,error:h,reason:h.message}),p)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,o=i?i.attrs["PATHWAY-ID"]:void 0,a=t[e],u=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,n===e&&a.details&&i&&o===u)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${u?" with Pathway "+u:""} from level ${n}${o?" with Pathway "+o:""}`);const c={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(L.LEVEL_SWITCHING,c);const f=a.details;if(!f||f.live){const h=this.switchParams(a.uri,i==null?void 0:i.details,f);this.loadPlaylist(h)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){t.fatal||!t.context||t.context.type===Ye.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===Fe.MAIN){const n=t.elementaryStreams;if(!Object.keys(n).some(o=>!!n[o]))return;const i=this._levels[t.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var n;const{level:i,details:o}=t,a=this._levels[i];if(!a){var u;this.warn(`Invalid level index ${i}`),(u=t.deliveryDirectives)!=null&&u.skip&&(o.deltaUpdateFailed=!0);return}i===this.currentLevelIndex?(a.fragmentError===0&&(a.loadError=0),this.playlistLoaded(i,t,a.details)):(n=t.deliveryDirectives)!=null&&n.skip&&(o.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){let i=n.uri;if(e)try{i=e.addDirectives(i)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}const o=n.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${(e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${o?" Pathway "+o:""} ${i}`),this.clearTimer(),this.hls.trigger(L.LEVEL_LOADING,{url:i,level:t,pathwayId:n.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;const n=this._levels.filter((i,o)=>o!==e?!0:(this.steering&&this.steering.removeLevel(i),i===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,i.details&&i.details.fragments.forEach(a=>a.level=-1)),!1));KS(n),this._levels=n,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(L.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(L.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function Vv(r){const e={};r.forEach(t=>{const n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++})}class JI{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[n].loader;if(i){var t;if(e&&e!==((t=i.context)==null?void 0:t.frag.type))return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=J.KEY_LOAD_ERROR,n,i,o){return new ui({type:Ne.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:o,error:n,networkDetails:i})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:n,cc:i}=e;for(let o=0;o<t.length;o++){const a=t[o];if(i<=a.cc&&(n==="initSegment"||a.sn==="initSegment"||n<a.sn)){this.emeController.selectKeySystemFormat(a).then(u=>{a.setKeyFormat(u)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,i;t&&e.setKeyFormat(t);const o=e.decryptdata;if(!o){const f=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,J.KEY_LOAD_ERROR,f))}const a=o.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,J.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let u=this.keyUriToKeyInfo[a];if((n=u)!=null&&n.decryptdata.key)return o.key=u.decryptdata.key,Promise.resolve({frag:e,keyInfo:u});if((i=u)!=null&&i.keyLoadPromise){var c;switch((c=u.mediaKeySessionContext)==null?void 0:c.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return u.keyLoadPromise.then(f=>(o.key=f.keyInfo.decryptdata.key,{frag:e,keyInfo:u}))}}switch(u=this.keyUriToKeyInfo[a]={decryptdata:o,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},o.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return o.keyFormat==="identity"?this.loadKeyHTTP(u,e):this.loadKeyEME(u,e);case"AES-128":return this.loadKeyHTTP(u,e);default:return Promise.reject(this.createKeyLoadError(e,J.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${o.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const i=this.emeController.loadKey(n);if(i)return(e.keyLoadPromise=i.then(o=>(e.mediaKeySessionContext=o,n))).catch(o=>{throw e.keyLoadPromise=null,o})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,i=n.loader,o=new i(n);return t.keyLoader=e.loader=o,e.keyLoadPromise=new Promise((a,u)=>{const c={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},f=n.keyLoadPolicy.default,h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(g,x,y,S)=>{const{frag:T,keyInfo:R,url:k}=y;if(!T.decryptdata||R!==this.keyUriToKeyInfo[k])return u(this.createKeyLoadError(T,J.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),S));R.decryptdata.key=T.decryptdata.key=new Uint8Array(g.data),T.keyLoader=null,R.loader=null,a({frag:T,keyInfo:R})},onError:(g,x,y,S)=>{this.resetLoader(x),u(this.createKeyLoadError(t,J.KEY_LOAD_ERROR,new Error(`HTTP Error ${g.code} loading key ${g.text}`),y,Yt({url:c.url,data:void 0},g)))},onTimeout:(g,x,y)=>{this.resetLoader(x),u(this.createKeyLoadError(t,J.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),y))},onAbort:(g,x,y)=>{this.resetLoader(x),u(this.createKeyLoadError(t,J.INTERNAL_ABORTED,new Error("key loading aborted"),y))}};o.load(c,h,p)})}resetLoader(e){const{frag:t,keyInfo:n,url:i}=e,o=n.loader;t.keyLoader===o&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[i],o&&o.destroy()}}function D1(){return self.SourceBuffer||self.WebKitSourceBuffer}function P1(){if(!ks())return!1;const e=D1();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function ZI(){if(!P1())return!1;const r=ks();return typeof(r==null?void 0:r.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>r.isTypeSupported(za(e,"video")))||["mp4a.40.2","fLaC"].some(e=>r.isTypeSupported(za(e,"audio"))))}function eD(){var r;const e=D1();return typeof(e==null||(r=e.prototype)==null?void 0:r.changeType)=="function"}const tD=250,Qu=2,rD=.1,nD=.05;class iD{constructor(e,t,n,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=i}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:n,media:i,stalled:o}=this;if(i===null)return;const{currentTime:a,seeking:u}=i,c=this.seeking&&!u,f=!this.seeking&&u;if(this.seeking=u,a!==e){if(this.moved=!0,u||(this.nudgeRetry=0),o!==null){if(this.stallReported){const T=self.performance.now()-o;j.warn(`playback not stuck anymore @${a}, after ${Math.round(T)}ms`),this.stallReported=!1}this.stalled=null}return}if(f||c){this.stalled=null;return}if(i.paused&&!u||i.ended||i.playbackRate===0||!ht.getBuffered(i).length){this.nudgeRetry=0;return}const h=ht.bufferInfo(i,a,0),p=h.nextStart||0;if(u){const T=h.len>Qu,R=!p||t&&t.start<=a||p-a>Qu&&!this.fragmentTracker.getPartialFragment(a);if(T||R)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var g;if(!(h.len>0)&&!p)return;const R=Math.max(p,h.start||0)-a,k=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,I=(k==null||(g=k.details)==null?void 0:g.live)?k.details.targetduration*2:Qu,w=this.fragmentTracker.getPartialFragment(a);if(R>0&&(R<=I||w)){i.paused||this._trySkipBufferHole(w);return}}const x=self.performance.now();if(o===null){this.stalled=x;return}const y=x-o;if(!u&&y>=tD&&(this._reportStall(h),!this.media))return;const S=ht.bufferInfo(i,a,n.maxBufferHole);this._tryFixBufferStall(S,y)}_tryFixBufferStall(e,t){const{config:n,fragmentTracker:i,media:o}=this;if(o===null)return;const a=o.currentTime,u=i.getPartialFragment(a);u&&(this._trySkipBufferHole(u)||!this.media)||(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-a<n.maxBufferHole)&&t>n.highBufferWatchdogPeriod*1e3&&(j.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:n,stallReported:i}=this;if(!i&&n){this.stallReported=!0;const o=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${JSON.stringify(e)})`);j.warn(o.message),t.trigger(L.ERROR,{type:Ne.MEDIA_ERROR,details:J.BUFFER_STALLED_ERROR,fatal:!1,error:o,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:n,media:i}=this;if(i===null)return 0;const o=i.currentTime,a=ht.bufferInfo(i,o,0),u=o<a.start?a.start:a.nextStart;if(u){const c=a.len<=t.maxBufferHole,f=a.len>0&&a.len<1&&i.readyState<3,h=u-o;if(h>0&&(c||f)){if(h>t.maxBufferHole){const{fragmentTracker:g}=this;let x=!1;if(o===0){const y=g.getAppendedFrag(0,Fe.MAIN);y&&u<y.end&&(x=!0)}if(!x){const y=e||g.getAppendedFrag(o,Fe.MAIN);if(y){let S=!1,T=y.end;for(;T<u;){const R=g.getPartialFragment(T);if(R)T+=R.duration;else{S=!0;break}}if(S)return 0}}}const p=Math.max(u+nD,o+rD);if(j.warn(`skipping hole, adjusting currentTime from ${o} to ${p}`),this.moved=!0,this.stalled=null,i.currentTime=p,e&&!e.gap){const g=new Error(`fragment loaded with buffer holes, seeking from ${o} to ${p}`);n.trigger(L.ERROR,{type:Ne.MEDIA_ERROR,details:J.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:g,reason:g.message,frag:e})}return p}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:n,nudgeRetry:i}=this;if(n===null)return;const o=n.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){const a=o+(i+1)*e.nudgeOffset,u=new Error(`Nudging 'currentTime' from ${o} to ${a}`);j.warn(u.message),n.currentTime=a,t.trigger(L.ERROR,{type:Ne.MEDIA_ERROR,details:J.BUFFER_NUDGE_ON_STALL,error:u,fatal:!1})}else{const a=new Error(`Playhead still not moving while enough data buffered @${o} after ${e.nudgeMaxRetry} nudges`);j.error(a.message),t.trigger(L.ERROR,{type:Ne.MEDIA_ERROR,details:J.BUFFER_STALLED_ERROR,error:a,fatal:!0})}}}const sD=100;class oD extends zp{constructor(e,t,n){super(e,t,n,"[stream-controller]",Fe.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.LEVEL_LOADING,this.onLevelLoading,this),e.on(L.LEVEL_LOADED,this.onLevelLoaded,this),e.on(L.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(L.ERROR,this.onError,this),e.on(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(L.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(L.BUFFER_CREATED,this.onBufferCreated,this),e.on(L.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.LEVEL_LOADED,this.onLevelLoaded,this),e.off(L.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(L.ERROR,this.onError,this),e.off(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(L.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(L.BUFFER_CREATED,this.onBufferCreated,this),e.off(L.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:n}=this;if(this.stopLoad(),this.setInterval(sD),this.level=-1,!this.startFragRequested){let i=n.startLevel;i===-1&&(n.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=n.firstAutoLevel),n.nextLoadLevel=i,this.level=n.loadLevel,this.loadedmetadata=!1}t>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=se.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=se.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case se.WAITING_LEVEL:{const{levels:t,level:n}=this,i=t==null?void 0:t[n],o=i==null?void 0:i.details;if(o&&(!o.live||this.levelLastLoaded===i)){if(this.waitForCdnTuneIn(o))break;this.state=se.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=se.IDLE;break}break}case se.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),n=this.retryDate;if(!n||t>=n||(e=this.media)!=null&&e.seeking){const{levels:i,level:o}=this,a=i==null?void 0:i[o];this.resetStartWhenNotLoaded(a||null),this.state=se.IDLE}}break}this.state===se.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:i}=this;if(t===null||!i&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const o=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[o]))return;const a=n[o],u=this.getMainFwdBufferInfo();if(u===null)return;const c=this.getLevelDetails();if(c&&this._streamEnded(u,c)){const S={};this.altAudio&&(S.type="video"),this.hls.trigger(L.BUFFER_EOS,S),this.state=se.ENDED;return}if(!this.buffering)return;e.loadLevel!==o&&e.manualLevel===-1&&this.log(`Adapting to level ${o} from level ${this.level}`),this.level=e.nextLoadLevel=o;const f=a.details;if(!f||this.state===se.WAITING_LEVEL||f.live&&this.levelLastLoaded!==a){this.level=o,this.state=se.WAITING_LEVEL;return}const h=u.len,p=this.getMaxBufferLength(a.maxBitrate);if(h>=p)return;this.backtrackFragment&&this.backtrackFragment.start>u.end&&(this.backtrackFragment=null);const g=this.backtrackFragment?this.backtrackFragment.start:u.end;let x=this.getNextFragment(g,f);if(this.couldBacktrack&&!this.fragPrevious&&x&&x.sn!=="initSegment"&&this.fragmentTracker.getState(x)!==Wt.OK){var y;const T=((y=this.backtrackFragment)!=null?y:x).sn-f.startSN,R=f.fragments[T-1];R&&x.cc===R.cc&&(x=R,this.fragmentTracker.removeFragment(R))}else this.backtrackFragment&&u.len&&(this.backtrackFragment=null);if(x&&this.isLoopLoading(x,g)){if(!x.gap){const T=this.audioOnly&&!this.altAudio?st.AUDIO:st.VIDEO,R=(T===st.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;R&&this.afterBufferFlushed(R,T,Fe.MAIN)}x=this.getNextFragmentLoopLoading(x,f,u,Fe.MAIN,p)}x&&(x.initSegment&&!x.initSegment.data&&!this.bitrateTest&&(x=x.initSegment),this.loadFragment(x,a,g))}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===Wt.NOT_LOADED||i===Wt.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,n)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Fe.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let n;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const o=this.getLevelDetails();if(o!=null&&o.live){const u=this.getMainFwdBufferInfo();if(!u||u.len<o.targetduration*2)return}if(!t.paused&&e){const u=this.hls.nextLoadLevel,c=e[u],f=this.fragLastKbps;f&&this.fragCurrent?n=this.fragCurrent.duration*c.maxBitrate/(1e3*f)+1:n=0}else n=0;const a=this.getBufferedFrag(t.currentTime+n);if(a){const u=this.followingBufferedFrag(a);if(u){this.abortCurrentFrag();const c=u.maxStartPTS?u.maxStartPTS:u.start,f=u.duration,h=Math.max(a.end,c+Math.min(Math.max(f-this.config.maxFragLookUpTolerance,f*(this.couldBacktrack?.5:.125)),f*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(h,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case se.KEY_LOADING:case se.FRAG_LOADING:case se.FRAG_LOADING_WAITING_RETRY:case se.PARSING:case se.PARSED:this.state=se.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),n.addEventListener("playing",this.onvplaying),n.addEventListener("seeked",this.onvseeked),this.gapController=new iD(this.config,n,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;Re(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const n=this.getMainFwdBufferInfo();if(n===null||n.len===0){this.warn(`Main forward buffer length on "seeked" event ${n?n.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(L.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,t){let n=!1,i=!1;t.levels.forEach(o=>{const a=o.audioCodec;a&&(n=n||a.indexOf("mp4a.40.2")!==-1,i=i||a.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=n&&i&&!eD(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==se.IDLE)return;const i=n[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(i.details))&&(this.state=se.WAITING_LEVEL)}onLevelLoaded(e,t){var n;const{levels:i}=this,o=t.level,a=t.details,u=a.totalduration;if(!i){this.warn(`Levels were reset while loading level ${o}`);return}this.log(`Level ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${u}`);const c=i[o],f=this.fragCurrent;f&&(this.state===se.FRAG_LOADING||this.state===se.FRAG_LOADING_WAITING_RETRY)&&f.level!==t.level&&f.loader&&this.abortCurrentFrag();let h=0;if(a.live||(n=c.details)!=null&&n.live){var p;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;h=this.alignPlaylists(a,c.details,(p=this.levelLastLoaded)==null?void 0:p.details)}if(c.details=a,this.levelLastLoaded=c,this.hls.trigger(L.LEVEL_UPDATED,{details:a,level:o}),this.state===se.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=se.IDLE}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,h),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:i,payload:o}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const u=a[n.level],c=u.details;if(!c){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const f=u.videoCodec,h=c.PTSKnown||!c.live,p=(t=n.initSegment)==null?void 0:t.data,g=this._getAudioCodec(u),x=this.transmuxer=this.transmuxer||new f1(this.hls,Fe.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),y=i?i.index:-1,S=y!==-1,T=new Hp(n.level,n.sn,n.stats.chunkCount,o.byteLength,y,S),R=this.initPTS[n.cc];x.push(o,p,g,f,n,i,c.totalduration,h,T,R)}onAudioTrackSwitching(e,t){const n=this.altAudio;if(!!!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const o=this.hls;n&&(o.trigger(L.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),o.trigger(L.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=t.id,i=!!this.hls.audioTracks[n].url;if(i){const o=this.videoBuffer;o&&this.mediaBuffer!==o&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=o)}this.altAudio=i,this.tick()}onBufferCreated(e,t){const n=t.tracks;let i,o,a=!1;for(const u in n){const c=n[u];if(c.id==="main"){if(o=u,i=c,u==="video"){const f=n[u];f&&(this.videoBuffer=f.buffer)}}else a=!0}a&&i?(this.log(`Alternate track found, use ${o}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n&&n.type!==Fe.MAIN)return;if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===se.PARSED&&(this.state=se.IDLE);return}const o=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),n.sn!=="initSegment"&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}onError(e,t){var n;if(t.fatal){this.state=se.ERROR;return}switch(t.details){case J.FRAG_GAP:case J.FRAG_PARSING_ERROR:case J.FRAG_DECRYPT_ERROR:case J.FRAG_LOAD_ERROR:case J.FRAG_LOAD_TIMEOUT:case J.KEY_LOAD_ERROR:case J.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Fe.MAIN,t);break;case J.LEVEL_LOAD_ERROR:case J.LEVEL_LOAD_TIMEOUT:case J.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===se.WAITING_LEVEL&&((n=t.context)==null?void 0:n.type)===Ye.LEVEL&&(this.state=se.IDLE);break;case J.BUFFER_APPEND_ERROR:case J.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="main")return;if(t.details===J.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case J.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}checkBuffer(){const{media:e,gapController:t}=this;if(!(!e||!t||!e.readyState)){if(this.loadedmetadata||!ht.getBuffered(e).length){const n=this.state!==se.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,n)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=se.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==st.AUDIO||this.audioOnly&&!this.altAudio){const n=(t===st.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(n,t,Fe.MAIN),this.tick()}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${t}`);return}const i=ht.getBuffered(e),a=(i.length?i.start(0):0)-n;a>0&&(a<this.config.maxBufferHole||a<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${a} to match buffer start`),n+=a,this.startPosition=n),this.log(`seek to target start position ${n} from current time ${t}`),e.currentTime=n}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(n=>{const{hls:i}=this;if(!n||this.fragContextChanged(e))return;t.fragmentError=0,this.state=se.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const o=e.stats;o.parsing.start=o.parsing.end=o.buffering.start=o.buffering.end=self.performance.now(),i.trigger(L.FRAG_LOADED,n),e.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const n="main",{hls:i}=this,{remuxResult:o,chunkMeta:a}=e,u=this.getCurrentContext(a);if(!u){this.resetWhenMissingContext(a);return}const{frag:c,part:f,level:h}=u,{video:p,text:g,id3:x,initSegment:y}=o,{details:S}=h,T=this.altAudio?void 0:o.audio;if(this.fragContextChanged(c)){this.fragmentTracker.removeFragment(c);return}if(this.state=se.PARSING,y){if(y!=null&&y.tracks){const C=c.initSegment||c;this._bufferInitSegment(h,y.tracks,C,a),i.trigger(L.FRAG_PARSING_INIT_SEGMENT,{frag:C,id:n,tracks:y.tracks})}const R=y.initPTS,k=y.timescale;Re(R)&&(this.initPTS[c.cc]={baseTime:R,timescale:k},i.trigger(L.INIT_PTS_FOUND,{frag:c,id:n,initPTS:R,timescale:k}))}if(p&&S&&c.sn!=="initSegment"){const R=S.fragments[c.sn-1-S.startSN],k=c.sn===S.startSN,C=!R||c.cc>R.cc;if(o.independent!==!1){const{startPTS:I,endPTS:w,startDTS:P,endDTS:D}=p;if(f)f.elementaryStreams[p.type]={startPTS:I,endPTS:w,startDTS:P,endDTS:D};else if(p.firstKeyFrame&&p.independent&&a.id===1&&!C&&(this.couldBacktrack=!0),p.dropped&&p.independent){const U=this.getMainFwdBufferInfo(),Q=(U?U.end:this.getLoadPosition())+this.config.maxBufferHole,A=p.firstKeyFramePTS?p.firstKeyFramePTS:I;if(!k&&Q<A-this.config.maxBufferHole&&!C){this.backtrack(c);return}else C&&(c.gap=!0);c.setElementaryStreamInfo(p.type,c.start,w,c.start,D,!0)}else k&&I>Qu&&(c.gap=!0);c.setElementaryStreamInfo(p.type,I,w,P,D),this.backtrackFragment&&(this.backtrackFragment=c),this.bufferFragmentData(p,c,f,a,k||C)}else if(k||C)c.gap=!0;else{this.backtrack(c);return}}if(T){const{startPTS:R,endPTS:k,startDTS:C,endDTS:I}=T;f&&(f.elementaryStreams[st.AUDIO]={startPTS:R,endPTS:k,startDTS:C,endDTS:I}),c.setElementaryStreamInfo(st.AUDIO,R,k,C,I),this.bufferFragmentData(T,c,f,a)}if(S&&x!=null&&(t=x.samples)!=null&&t.length){const R={id:n,frag:c,details:S,samples:x.samples};i.trigger(L.FRAG_PARSING_METADATA,R)}if(S&&g){const R={id:n,frag:c,details:S,samples:g.samples};i.trigger(L.FRAG_PARSING_USERDATA,R)}}_bufferInitSegment(e,t,n,i){if(this.state!==se.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:o,video:a,audiovideo:u}=t;if(o){let c=e.audioCodec;const f=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){c&&(c.indexOf("mp4a.40.5")!==-1?c="mp4a.40.2":c="mp4a.40.5");const h=o.metadata;h&&"channelCount"in h&&(h.channelCount||1)!==1&&f.indexOf("firefox")===-1&&(c="mp4a.40.5")}c&&c.indexOf("mp4a.40.5")!==-1&&f.indexOf("android")!==-1&&o.container!=="audio/mpeg"&&(c="mp4a.40.2",this.log(`Android: force audio codec to ${c}`)),e.audioCodec&&e.audioCodec!==c&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${c}"`),o.levelCodec=c,o.id="main",this.log(`Init audio buffer, container:${o.container}, codecs[selected/level/parsed]=[${c||""}/${e.audioCodec||""}/${o.codec}]`)}a&&(a.levelCodec=e.videoCodec,a.id="main",this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${a.codec}]`)),u&&this.log(`Init audiovideo buffer, container:${u.container}, codecs[level/parsed]=[${e.codecs}/${u.codec}]`),this.hls.trigger(L.BUFFER_CODECS,t),Object.keys(t).forEach(c=>{const h=t[c].initSegment;h!=null&&h.byteLength&&this.hls.trigger(L.BUFFER_APPENDING,{type:c,data:h,frag:n,part:null,chunkMeta:i,parent:n.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,Fe.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=se.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(ht.isBuffered(e,n)?t=this.getAppendedFrag(n):ht.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,o=t.level;(!i||t.sn!==i.sn||i.level!==o)&&(this.fragPlaying=t,this.hls.trigger(L.FRAG_CHANGED,{frag:t}),(!i||i.level!==o)&&this.hls.trigger(L.LEVEL_SWITCHED,{level:o}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,n=this.currentFrag;if(n&&Re(t)&&Re(n.programDateTime)){const i=n.programDateTime+(t-n.start)*1e3;return new Date(i)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Or{static get version(){return"1.5.18"}static isMSESupported(){return P1()}static isSupported(){return ZI()}static getMediaSource(){return ks()}static get Events(){return L}static get ErrorTypes(){return Ne}static get ErrorDetails(){return J}static get DefaultConfig(){return Or.defaultConfig?Or.defaultConfig:I1}static set DefaultConfig(e){Or.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new Xp,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,YL(e.debug||!1,"Hls instance");const t=this.config=qI(Or.DefaultConfig,e);this.userConfig=e,t.progressive&&XI(t);const{abrController:n,bufferController:i,capLevelController:o,errorController:a,fpsController:u}=t,c=new a(this),f=this.abrController=new n(this),h=this.bufferController=new i(this),p=this.capLevelController=new o(this),g=new u(this),x=new jb(this),y=new Wb(this),S=t.contentSteeringController,T=S?new S(this):null,R=this.levelController=new QI(this,T),k=new TC(this),C=new JI(this.config),I=this.streamController=new oD(this,k,C);p.setStreamController(I),g.setStreamController(I);const w=[x,R,I];T&&w.splice(1,0,T),this.networkControllers=w;const P=[f,h,p,g,y,k];this.audioTrackController=this.createController(t.audioTrackController,w);const D=t.audioStreamController;D&&w.push(new D(this,k,C)),this.subtitleTrackController=this.createController(t.subtitleTrackController,w);const U=t.subtitleStreamController;U&&w.push(new U(this,k,C)),this.createController(t.timelineController,P),C.emeController=this.emeController=this.createController(t.emeController,P),this.cmcdController=this.createController(t.cmcdController,P),this.latencyController=this.createController(Yb,P),this.coreComponents=P,w.push(c);const Q=c.onErrorOut;typeof Q=="function"&&this.on(L.ERROR,Q,c)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,i){this._emitter.off(e,t,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(j.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const i=e===L.ERROR;this.trigger(L.ERROR,{type:Ne.OTHER_ERROR,details:J.INTERNAL_EXCEPTION,fatal:i,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){j.log("destroy"),this.trigger(L.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){j.log("attachMedia"),this._media=e,this.trigger(L.MEDIA_ATTACHING,{media:e})}detachMedia(){j.log("detachMedia"),this.trigger(L.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,n=this.url,i=this.url=Np.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,j.log(`loadSource:${i}`),t&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(L.MANIFEST_LOADING,{url:e})}startLoad(e=-1){j.log(`startLoad(${e})`),this.started=!0,this.resumeBuffering();for(let t=0;t<this.networkControllers.length&&(this.networkControllers[t].startLoad(e),!(!this.started||!this.networkControllers));t++);}stopLoad(){j.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}resumeBuffering(){j.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()})}pauseBuffering(){j.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()})}swapAudioCodec(){j.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){j.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){j.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){j.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){j.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){j.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){j.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(j.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){qb(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let i;if(t===-1&&e!=null&&e.length?i=e.length-1:i=t,n)for(let o=i;o--;){const a=e[o].attrs["HDCP-LEVEL"];if(a&&a<=n)return o}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var t;return(t=this.audioTrackController)==null?void 0:t.setAudioOption(e)}setSubtitleOption(e){var t;return(t=this.subtitleTrackController)==null||t.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Or.defaultConfig=void 0;const aD=()=>{const{isPlaying:r,LiveStream:e}=gi(),t=O.useRef(null),n=O.useRef(null);return O.useEffect(()=>{if(Or.isSupported())return n.current=new Or,n.current.on(Or.Events.MANIFEST_PARSED,()=>{console.log("Manifest Parsed")}),n.current.loadSource(e),n.current.attachMedia(t.current),()=>{n.current.destroy()};console.error("HLS.js is not supported in this browser.")},[e]),O.useEffect(()=>{console.log(r),t.current&&(r?(t.current.play(),n.current.on(Or.Events.ERROR,function(i,o){switch(o.fatal){case Or.ErrorTypes.NETWORK_ERROR:console.error("Network error",o);break;case Or.ErrorTypes.MEDIA_ERROR:console.error("Media error",o);break;case Or.ErrorTypes.OTHER_ERROR:console.error("Other error",o);break;default:console.error("Unknown error",o)}})):t.current.pause())},[r]),W.jsx($L,{children:W.jsx("div",{className:"hls-player",children:W.jsx("video",{ref:t,controls:!0,autoPlay:!0,muted:!0,playsInline:!0,width:"100%"})})})};Ar.div`
    position: absolute;
    width: 250px;
    max-height: 175px;
    min-height: 50px;
    background-color: white;
    top: 60px;
    border-radius:5px;
    padding: 5px;
    box-shadow: 0px 0px 15px #B0AEAF;
    // display: ${r=>r.userOpened?"flex":"none"};
    justify-content: center;
    align-items: center; 
    transition: height 1s ease;

.container {
    display: flex;
    justify-content: center;
    height: inherit;
    align-items: center;
    width: 240px;
    flex-direction: column;
    
}

.btn {
    background-color: #42A8D3;
    border-radius: 5px;
    border: 1px solid white;
    color: white;
    width: 90%;
    height: 40px;
    
}



.user {
width: 40px;
height: 40px;
}

.buttons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    justify-content:space-around;
    width: 100%;
    gap: 3px;
}

.addVideo {
    align-items: center;
    background-color: #689B1D;
    text-align: center;
    font-size:10px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 2px;
    height:15px;
    border-radius: 5px;
    color: white;
    cursor: pointer;
}

.logout {
    background-color:#9B1D1D;
}

hr {
    color: black;
    width: 240px;
}

.showModel {
    display: flex;
}
`;const tm=Ar.div`
    /* Modal.css */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5); /* semi-transparent background */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    background-size: contain;
}

.modal-content {
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    width: 50vw;
    text-align: center;
    box-shadow: 0px 0px 15px rgba(179, 179, 179, 0.9);
    transition: box-shadow 0.2s ease;
}

.modal-content:hover {
    box-shadow: 0px 0px 30px rgba(238, 238, 238, 0.9);
}

.close-button {
    background-color: red;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 50%;
    position: absolute;
    top: 10px;
    right: 10px;
    cursor: pointer;
}

.close-button:hover {
    background-color: darkred;
}

.Form {
    width: 95%;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    margin: auto;
}

.FormRow {
    display: flex;
    width: 95%;
    flex-direction: column;
    margin: auto;
    margin-bottom: 10px !important;
    label {
        width: 95%;
        margin-bottom: 10px !important;
        margin: auto;
        text-align: left
    }
    input {
        width: 95%;
        height: 25px;
        border-radius: 5px;
        box-shadow: 0px 0px 12px rgb(168, 165, 165);
        border: transparent;
        margin: auto;
    }

}

.upload {
    height: 40px;
    width: 25vw;
    margin: auto;
    border-radius: 8px;
    border: transparent;
    box-shadow: 0px 0px 12px rgb(190, 188, 188);
    background-color: #27B795;
    font-weight: 1000;
}

`,lD=()=>{const{isVideoModal:r,AddVideoModalHandler:e,handleImageChange:t,isSubmitting:n,handleURLChange:i,handleTitleChange:o,VideoUploadAction:a,bgImage:u,backgroundImage:c}=gi();return r?W.jsx(tm,{children:W.jsx("div",{className:"modal-overlay",style:{backgroundImage:c?`url('../server/${u}')`:"url('/src/assets/images/banner-bk.png')"},onClick:()=>{e(!1)},children:W.jsxs("div",{className:"modal-content",onClick:f=>f.stopPropagation(),children:[W.jsx("button",{className:"close-button",onClick:()=>{e(!1)},children:"X"}),W.jsx("h2",{children:"Add Video"}),W.jsxs("div",{className:"Form",children:[W.jsxs("div",{className:"FormRow",children:[W.jsx("label",{htmlFor:"url",children:"Paste Video URL Here (Youtube/Vimeo)"}),W.jsx("input",{type:"url",onChange:i,name:"url",id:"url"})]}),W.jsxs("div",{className:"FormRow",children:[W.jsx("label",{htmlFor:"title",children:"Title of the Video"}),W.jsx("input",{type:"name",onChange:o,name:"title",id:"title"})]}),W.jsxs("div",{className:"FormRow",children:[W.jsx("label",{htmlFor:"image",children:"Upload Thumbnail"}),W.jsx("input",{type:"file",onChange:t,name:"image",id:"image",accept:"image/*",multiple:!1})]}),W.jsxs("button",{onClick:a,className:"upload",disabled:n,children:[" ",n?"Uploading...":"Upload"," "]})]})]})})}):null},uD=()=>{const{isLiveModal:r,AddLiveModalHandler:e,LiveVideoUploadAction:t,setSource:n,isSubmitting:i,bgImage:o,backgroundImage:a}=gi();return r?(console.log(o),W.jsx(tm,{children:W.jsx("div",{className:"modal-overlay",style:{backgroundImage:a?`url('../server/${o}')`:"url('/src/assets/images/banner-bk.png')"},onClick:()=>{e(!1)},children:W.jsxs("div",{className:"modal-content",onClick:u=>u.stopPropagation(),children:[W.jsx("button",{className:"close-button",onClick:()=>e(!1),children:"X"}),W.jsx("h2",{children:"Update Live Stream"}),W.jsxs("div",{className:"Form",children:[W.jsxs("div",{className:"FormRow",children:[W.jsx("label",{htmlFor:"url",children:"Paste Live Stream URL Here (.m3u8)"}),W.jsx("input",{onChange:u=>n(u.target.value),type:"url",name:"url",id:"url"})]}),W.jsxs("button",{onClick:t,disabled:i,className:"upload",children:[" ",i?"Uploading...":"Upload"," "]})]})]})})})):null};Ar.div`
    /* Modal.css */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5); /* semi-transparent background */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    background-color: transparent;
    padding: 20px;
    border-radius: 8px;
    width: 90vw;
    text-align: center;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
}

.close-button {
    background-color: red;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 50%;
    position: absolute;
    top: 10px;
    right: 10px;
    cursor: pointer;
}

.close-button:hover {
    background-color: darkred;
}

svg {
color: red;
}

`;const cD=Ar.div`
    /* Modal.css */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5); /* semi-transparent background */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    background-size: contain;
}

.modal-content {
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    width: 50vw;
    text-align: center;
    box-shadow: 0px 0px 15px rgba(179, 179, 179, 0.9);
    transition: box-shadow 0.2s ease;
}

.modal-content:hover {
    box-shadow: 0px 0px 30px rgba(238, 238, 238, 0.9);
}

.close-button {
    background-color: red;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 50%;
    position: absolute;
    top: 10px;
    right: 10px;
    cursor: pointer;
}

.close-button:hover {
    background-color: darkred;
}

.Form {
    width: 95%;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    margin: auto;
}

.FormRow {
    display: flex;
    width: 95%;
    flex-direction: column;
    margin: auto;
    margin-bottom: 10px !important;
    label {
        width: 95%;
        margin-bottom: 10px !important;
        margin: auto;
        text-align: left
    }
    input {
        width: 95%;
        height: 25px;
        border-radius: 5px;
        box-shadow: 0px 0px 12px rgb(168, 165, 165);
        border: transparent;
        margin: auto;
    }

}

.upload {
    height: 40px;
    width: 25vw;
    margin: auto;
    border-radius: 8px;
    border: transparent;
    box-shadow: 0px 0px 12px rgb(190, 188, 188);
    background-color:rgb(80, 183, 39);
    font-weight: 1000;
}

.banner {
    display: flex;
    justify-content: center;
    gap: 15px;
    align-items: center;
    
    img {
        width: 50px;
        height: 50px;
        animation: wave 2s linear infinite ;
    }
    
}

@keyframes wave { 
    0% {
        transform: rotate(90deg)
    }
    25% {
         transform: rotate(180deg)
    }
     50% {
         transform: rotate(270deg)
    }
     75% {
         transform: rotate(360deg)
    }
   
     100% {
         transform: rotate(450deg)
    }
   
}

@media (max-width: 1600px){
    .banner h2 {
        font-size: 22px;
        margin: auto;
        letter-spacing: 4px;
    
    }
}

@media (max-width: 1200px){
    .banner h2 {
        font-size: 21px;
        margin: auto;
        letter-spacing: 6px;
    
    }
}

@media (max-width: 1024px){
    .banner h2 {
        font-size: 20px;
        margin: auto;
        letter-spacing: 5px;
    
    }
}

@media (max-width: 786px){
    .banner h2 {
        font-size: 20px;
        margin: auto;
        letter-spacing: 4px;
    
    }
}

@media (max-width: 600px){
    .banner h2 {
        font-size: 18px;
        margin: auto;
        letter-spacing: 4px;
    
    }
}

@media (max-width: 400px){
    .banner h2 {
        font-size: 15px;
        margin: auto;
        letter-spacing: 3px;
    
    }
}

`,dD=()=>{const{isLoginModal:r,LoginModalHandler:e,handleEmail:t,handlePassword:n,LoginAction:i,isSubmitting:o}=gi();return r?W.jsx(cD,{children:W.jsx("div",{className:"modal-overlay",style:{backgroundImage:"url('/src/assets/images/banner-bk.png')"},onClick:()=>e(!1),children:W.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[W.jsx("div",{className:"banner",children:W.jsxs("h2",{children:[" ",W.jsx("span",{style:{color:"red"},children:"WWW."}),"MASSTV",W.jsx("span",{style:{color:"red"},children:".CA"})]})}),W.jsx("h4",{children:"Login"}),W.jsxs("div",{className:"Form",children:[W.jsxs("div",{className:"FormRow",children:[W.jsx("label",{htmlFor:"email",children:"Email"}),W.jsx("input",{defaultValue:"mafrid029@gmail.com",type:"email",name:"email",id:"email",onChange:a=>t(a.target.value)})]}),W.jsxs("div",{className:"FormRow",children:[W.jsx("label",{htmlFor:"password",children:"Password"}),W.jsx("input",{defaultValue:"123456",type:"password",name:"password",id:"password",onChange:a=>n(a.target.value)})]}),W.jsxs("button",{onClick:i,disabled:o,className:"upload",children:[" ",o?"Loging In..":"Login"," "]})]})]})})}):null},fD=Ar.div`

.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.86); /* semi-transparent background */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    background-color: white;
    //padding: 20px;
    border-radius: 8px;
    width: 100vw;
    text-align: center;
    height: 60vh;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
    position: relative;
}

.heading {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 10px auto;
   
}

.close-button {
   // background-color: red;
    color: black;
    border: none;
    //padding: 5px 10px;
    //border-radius: 50%;
    position: absolute;
    top: 10px;
    right: 10px;
    margin-right: 10px;
    cursor: pointer;
}

.close-button:hover {
    text-shadow: 0px 0px 10px gray;
}

.Form {
    width: 95%;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    margin: auto;
}
iframe {
width: -webkit-fill-available;
margin: 5px;
height: 50vh;
border-radius: 5px;
border: 0px;
}

   
.h4 {
    height: 46px; /* Maximum height for the container */
    overflow: hidden; /* Hide overflow */
    p {
        display: -webkit-box; /* Enable multi-line truncation */
        -webkit-box-orient: vertical; /* Set the box orientation to vertical */
        -webkit-line-clamp: 3; /* Limit text to 3 lines */
        overflow: hidden; /* Hide text that exceeds the limit */
        text-overflow: ellipsis; /* Add ellipsis (...) at the end of the last visible line */
        margin: auto;
        text-align: justify;
    }
}
`,hD=r=>{const e=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,t=r.match(e);if(t)return`https://www.youtube.com/embed/${t[1]}`;const n=/^(https?:\/\/)?(www\.)?(vimeo\.com\/)(\d+)(\?.*)?$/,i=r.match(n);return console.log(i),i?`https://player.vimeo.com/video/${i[4]}`:!1},pD=({isModalPlayer:r,localUrl:e})=>{const{setPlaying:t,PlayerHandler:n}=gi();if(console.log(r),!r)return null;const i=hD(e),o=()=>{n(!1),t(!0)};return W.jsx(fD,{children:W.jsx("div",{className:"modal-overlay",children:W.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[W.jsxs("div",{className:"heading",children:[W.jsx("h2",{style:{marginBottom:"4px",margin:"auto"},children:"Video Player"}),W.jsx("div",{className:"close-button",onClick:()=>o(),children:"Close"})]}),i?W.jsx("iframe",{src:i,title:"YouTube video",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):W.jsx("div",{style:{display:"flex",alignItems:"center",height:"inherit",justifyContent:"center"},children:W.jsx("h4",{children:"Video Not Supported"})})]})})})},mD=()=>{const{logoUpdateModal:r,handleLogoUpdateModel:e,handleLogoChange:t,isSubmitting:n,UploadLogoAction:i,bgImage:o,backgroundImage:a}=gi();return r?W.jsx(tm,{children:W.jsx("div",{className:"modal-overlay",style:{backgroundImage:a?`url('../server/${o}')`:"url('/src/assets/images/banner-bk.png')"},onClick:()=>{e(!1)},children:W.jsxs("div",{className:"modal-content",onClick:u=>u.stopPropagation(),children:[W.jsx("button",{className:"close-button",onClick:()=>{e(!1)},children:"X"}),W.jsx("h2",{children:"Update Logo"}),W.jsxs("div",{className:"Form",children:[W.jsxs("div",{className:"FormRow",children:[W.jsx("label",{htmlFor:"logo",children:"Upload Logo"}),W.jsx("input",{type:"file",onChange:t,name:"logo",id:"logo",accept:"image/*",multiple:!1})]}),W.jsxs("button",{onClick:i,disabled:n,className:"upload",children:[" ",n?"Uploading...":"Upload"," "]})]})]})})}):null},gD=Ar.div`

@media (max-width: 1600px) {
    width: 22vw;
    display: flex;
    justify-content: center;
}

@media (max-width: 1200px) {
    width: 30vw;
    display: flex;
    justify-content: center;
}

@media (max-width: 1024px) {
    width: 45vw;
    display: flex;
    justify-content: center;
}

@media (max-width: 768px) {
    width: 45vw;
}

@media (max-width: 600px) {
    width: 45vw;
    display: flex;
    justify-content: center;

}

.h4 {
    height: 46px; /* Maximum height for the container */
    overflow: hidden; /* Hide overflow */
    p {
        display: -webkit-box; /* Enable multi-line truncation */
        -webkit-box-orient: vertical; /* Set the box orientation to vertical */
        -webkit-line-clamp: 3; /* Limit text to 3 lines */
        overflow: hidden; /* Hide text that exceeds the limit */
        text-overflow: ellipsis; /* Add ellipsis (...) at the end of the last visible line */
        margin: auto;
        text-align: justify;
    }
}

.myCard{
    transition: transform 0.5 ease;
    width: inherit;
}

.myCard:hover {
        transform: scale(1.1);
        margin: 10px 0px 20px 0px;
    }


Card:hover {
    PlayCircleFilledRoundedIcon{
        color: "#34E628",
        backgroundColor: "transparent",
        border: '1px solid #34E628'
    }

   
}
`;function Nn(r){if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function _1(r){if(O.isValidElement(r)||!Nn(r))return r;const e={};return Object.keys(r).forEach(t=>{e[t]=_1(r[t])}),e}function Mr(r,e,t={clone:!0}){const n=t.clone?{...r}:r;return Nn(r)&&Nn(e)&&Object.keys(e).forEach(i=>{O.isValidElement(e[i])?n[i]=e[i]:Nn(e[i])&&Object.prototype.hasOwnProperty.call(r,i)&&Nn(r[i])?n[i]=Mr(r[i],e[i],t):t.clone?n[i]=Nn(e[i])?_1(e[i]):e[i]:n[i]=e[i]}),n}function Is(r,...e){const t=new URL(`https://mui.com/production-error/?code=${r}`);return e.forEach(n=>t.searchParams.append("args[]",n)),`Minified MUI error #${r}; visit ${t} for the full message.`}function er(r){if(typeof r!="string")throw new Error(Is(7));return r.charAt(0).toUpperCase()+r.slice(1)}function yD(r,e){typeof r=="function"?r(e):r&&(r.current=e)}const vD=typeof window<"u"?O.useLayoutEffect:O.useEffect;function Ju(r){const e=O.useRef(r);return vD(()=>{e.current=r}),O.useRef((...t)=>(0,e.current)(...t)).current}function zv(...r){return O.useMemo(()=>r.every(e=>e==null)?null:e=>{r.forEach(t=>{yD(t,e)})},r)}const Kv={};function O1(r,e){const t=O.useRef(Kv);return t.current===Kv&&(t.current=r(e)),t}const xD=[];function SD(r){O.useEffect(r,xD)}class rm{constructor(){wa(this,"currentId",null);wa(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});wa(this,"disposeEffect",()=>this.clear)}static create(){return new rm}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function ED(){const r=O1(rm.create).current;return SD(r.disposeEffect),r}function Wv(r){try{return r.matches(":focus-visible")}catch{}return!1}function Rc(r,e){const t={...e};for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)){const i=n;if(i==="components"||i==="slots")t[i]={...r[i],...t[i]};else if(i==="componentsProps"||i==="slotProps"){const o=r[i],a=e[i];if(!a)t[i]=o||{};else if(!o)t[i]=a;else{t[i]={...a};for(const u in o)if(Object.prototype.hasOwnProperty.call(o,u)){const c=u;t[i][c]=Rc(o[c],a[c])}}}else t[i]===void 0&&(t[i]=r[i])}return t}function Zi(r,e,t=void 0){const n={};for(const i in r){const o=r[i];let a="",u=!0;for(let c=0;c<o.length;c+=1){const f=o[c];f&&(a+=(u===!0?"":" ")+e(f),u=!1,t&&t[f]&&(a+=" "+t[f]))}n[i]=a}return n}const Yv=r=>r,TD=()=>{let r=Yv;return{configure(e){r=e},generate(e){return r(e)},reset(){r=Yv}}},F1=TD(),wD={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function pi(r,e,t="Mui"){const n=wD[e];return n?`${t}-${n}`:`${F1.generate(r)}-${e}`}function zn(r,e,t="Mui"){const n={};return e.forEach(i=>{n[i]=pi(r,i,t)}),n}function RD(r,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(r,t))}function M1(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=M1(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function Dt(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=M1(r))&&(n&&(n+=" "),n+=e);return n}function Ua(r,e){return e?Mr(r,e,{clone:!1}):r}function AD(r,e){if(!r.containerQueries)return e;const t=Object.keys(e).filter(n=>n.startsWith("@container")).sort((n,i)=>{var a,u;const o=/min-width:\s*([0-9.]+)/;return+(((a=n.match(o))==null?void 0:a[1])||0)-+(((u=i.match(o))==null?void 0:u[1])||0)});return t.length?t.reduce((n,i)=>{const o=e[i];return delete n[i],n[i]=o,n},{...e}):e}function LD(r,e){return e==="@"||e.startsWith("@")&&(r.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function bD(r,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,n,i]=t,o=Number.isNaN(+n)?n||0:+n;return r.containerQueries(i).up(o)}function CD(r){const e=(o,a)=>o.replace("@media",a?`@container ${a}`:"@container");function t(o,a){o.up=(...u)=>e(r.breakpoints.up(...u),a),o.down=(...u)=>e(r.breakpoints.down(...u),a),o.between=(...u)=>e(r.breakpoints.between(...u),a),o.only=(...u)=>e(r.breakpoints.only(...u),a),o.not=(...u)=>{const c=e(r.breakpoints.not(...u),a);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const n={},i=o=>(t(n,o),n);return t(i),{...r,containerQueries:i}}const Vc={xs:0,sm:600,md:900,lg:1200,xl:1536},qv={keys:["xs","sm","md","lg","xl"],up:r=>`@media (min-width:${Vc[r]}px)`},kD={containerQueries:r=>({up:e=>{let t=typeof e=="number"?e:Vc[e]||e;return typeof t=="number"&&(t=`${t}px`),r?`@container ${r} (min-width:${t})`:`@container (min-width:${t})`}})};function fi(r,e,t){const n=r.theme||{};if(Array.isArray(e)){const o=n.breakpoints||qv;return e.reduce((a,u,c)=>(a[o.up(o.keys[c])]=t(e[c]),a),{})}if(typeof e=="object"){const o=n.breakpoints||qv;return Object.keys(e).reduce((a,u)=>{if(LD(o.keys,u)){const c=bD(n.containerQueries?n:kD,u);c&&(a[c]=t(e[u],u))}else if(Object.keys(o.values||Vc).includes(u)){const c=o.up(u);a[c]=t(e[u],u)}else{const c=u;a[c]=e[c]}return a},{})}return t(e)}function ID(r={}){var t;return((t=r.keys)==null?void 0:t.reduce((n,i)=>{const o=r.up(i);return n[o]={},n},{}))||{}}function DD(r,e){return r.reduce((t,n)=>{const i=t[n];return(!i||Object.keys(i).length===0)&&delete t[n],t},e)}function zc(r,e,t=!0){if(!e||typeof e!="string")return null;if(r&&r.vars&&t){const n=`vars.${e}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,r);if(n!=null)return n}return e.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,r)}function Ac(r,e,t,n=t){let i;return typeof r=="function"?i=r(t):Array.isArray(r)?i=r[t]||n:i=zc(r,t)||n,e&&(i=e(i,n,r)),i}function kt(r){const{prop:e,cssProperty:t=r.prop,themeKey:n,transform:i}=r,o=a=>{if(a[e]==null)return null;const u=a[e],c=a.theme,f=zc(c,n)||{};return fi(a,u,p=>{let g=Ac(f,i,p);return p===g&&typeof p=="string"&&(g=Ac(f,i,`${e}${p==="default"?"":er(p)}`,p)),t===!1?g:{[t]:g}})};return o.propTypes={},o.filterProps=[e],o}function PD(r){const e={};return t=>(e[t]===void 0&&(e[t]=r(t)),e[t])}const _D={m:"margin",p:"padding"},OD={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Xv={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},FD=PD(r=>{if(r.length>2)if(Xv[r])r=Xv[r];else return[r];const[e,t]=r.split(""),n=_D[e],i=OD[t]||"";return Array.isArray(i)?i.map(o=>n+o):[n+i]}),nm=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],im=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...nm,...im];function tl(r,e,t,n){const i=zc(r,e,!0)??t;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const a=Math.abs(o),u=i[a];return o>=0?u:typeof u=="number"?-u:`-${u}`}:typeof i=="function"?i:()=>{}}function sm(r){return tl(r,"spacing",8)}function rl(r,e){return typeof e=="string"||e==null?e:r(e)}function MD(r,e){return t=>r.reduce((n,i)=>(n[i]=rl(e,t),n),{})}function ND(r,e,t,n){if(!e.includes(t))return null;const i=FD(t),o=MD(i,n),a=r[t];return fi(r,a,o)}function N1(r,e){const t=sm(r.theme);return Object.keys(r).map(n=>ND(r,e,n,t)).reduce(Ua,{})}function Lt(r){return N1(r,nm)}Lt.propTypes={};Lt.filterProps=nm;function bt(r){return N1(r,im)}bt.propTypes={};bt.filterProps=im;function Kc(...r){const e=r.reduce((n,i)=>(i.filterProps.forEach(o=>{n[o]=i}),n),{}),t=n=>Object.keys(n).reduce((i,o)=>e[o]?Ua(i,e[o](n)):i,{});return t.propTypes={},t.filterProps=r.reduce((n,i)=>n.concat(i.filterProps),[]),t}function tn(r){return typeof r!="number"?r:`${r}px solid`}function sn(r,e){return kt({prop:r,themeKey:"borders",transform:e})}const BD=sn("border",tn),$D=sn("borderTop",tn),UD=sn("borderRight",tn),GD=sn("borderBottom",tn),jD=sn("borderLeft",tn),HD=sn("borderColor"),VD=sn("borderTopColor"),zD=sn("borderRightColor"),KD=sn("borderBottomColor"),WD=sn("borderLeftColor"),YD=sn("outline",tn),qD=sn("outlineColor"),Wc=r=>{if(r.borderRadius!==void 0&&r.borderRadius!==null){const e=tl(r.theme,"shape.borderRadius",4),t=n=>({borderRadius:rl(e,n)});return fi(r,r.borderRadius,t)}return null};Wc.propTypes={};Wc.filterProps=["borderRadius"];Kc(BD,$D,UD,GD,jD,HD,VD,zD,KD,WD,Wc,YD,qD);const Yc=r=>{if(r.gap!==void 0&&r.gap!==null){const e=tl(r.theme,"spacing",8),t=n=>({gap:rl(e,n)});return fi(r,r.gap,t)}return null};Yc.propTypes={};Yc.filterProps=["gap"];const qc=r=>{if(r.columnGap!==void 0&&r.columnGap!==null){const e=tl(r.theme,"spacing",8),t=n=>({columnGap:rl(e,n)});return fi(r,r.columnGap,t)}return null};qc.propTypes={};qc.filterProps=["columnGap"];const Xc=r=>{if(r.rowGap!==void 0&&r.rowGap!==null){const e=tl(r.theme,"spacing",8),t=n=>({rowGap:rl(e,n)});return fi(r,r.rowGap,t)}return null};Xc.propTypes={};Xc.filterProps=["rowGap"];const XD=kt({prop:"gridColumn"}),QD=kt({prop:"gridRow"}),JD=kt({prop:"gridAutoFlow"}),ZD=kt({prop:"gridAutoColumns"}),eP=kt({prop:"gridAutoRows"}),tP=kt({prop:"gridTemplateColumns"}),rP=kt({prop:"gridTemplateRows"}),nP=kt({prop:"gridTemplateAreas"}),iP=kt({prop:"gridArea"});Kc(Yc,qc,Xc,XD,QD,JD,ZD,eP,tP,rP,nP,iP);function Lo(r,e){return e==="grey"?e:r}const sP=kt({prop:"color",themeKey:"palette",transform:Lo}),oP=kt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Lo}),aP=kt({prop:"backgroundColor",themeKey:"palette",transform:Lo});Kc(sP,oP,aP);function Fr(r){return r<=1&&r!==0?`${r*100}%`:r}const lP=kt({prop:"width",transform:Fr}),om=r=>{if(r.maxWidth!==void 0&&r.maxWidth!==null){const e=t=>{var i,o,a,u,c;const n=((a=(o=(i=r.theme)==null?void 0:i.breakpoints)==null?void 0:o.values)==null?void 0:a[t])||Vc[t];return n?((c=(u=r.theme)==null?void 0:u.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${n}${r.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:Fr(t)}};return fi(r,r.maxWidth,e)}return null};om.filterProps=["maxWidth"];const uP=kt({prop:"minWidth",transform:Fr}),cP=kt({prop:"height",transform:Fr}),dP=kt({prop:"maxHeight",transform:Fr}),fP=kt({prop:"minHeight",transform:Fr});kt({prop:"size",cssProperty:"width",transform:Fr});kt({prop:"size",cssProperty:"height",transform:Fr});const hP=kt({prop:"boxSizing"});Kc(lP,om,uP,cP,dP,fP,hP);const nl={border:{themeKey:"borders",transform:tn},borderTop:{themeKey:"borders",transform:tn},borderRight:{themeKey:"borders",transform:tn},borderBottom:{themeKey:"borders",transform:tn},borderLeft:{themeKey:"borders",transform:tn},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:tn},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Wc},color:{themeKey:"palette",transform:Lo},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Lo},backgroundColor:{themeKey:"palette",transform:Lo},p:{style:bt},pt:{style:bt},pr:{style:bt},pb:{style:bt},pl:{style:bt},px:{style:bt},py:{style:bt},padding:{style:bt},paddingTop:{style:bt},paddingRight:{style:bt},paddingBottom:{style:bt},paddingLeft:{style:bt},paddingX:{style:bt},paddingY:{style:bt},paddingInline:{style:bt},paddingInlineStart:{style:bt},paddingInlineEnd:{style:bt},paddingBlock:{style:bt},paddingBlockStart:{style:bt},paddingBlockEnd:{style:bt},m:{style:Lt},mt:{style:Lt},mr:{style:Lt},mb:{style:Lt},ml:{style:Lt},mx:{style:Lt},my:{style:Lt},margin:{style:Lt},marginTop:{style:Lt},marginRight:{style:Lt},marginBottom:{style:Lt},marginLeft:{style:Lt},marginX:{style:Lt},marginY:{style:Lt},marginInline:{style:Lt},marginInlineStart:{style:Lt},marginInlineEnd:{style:Lt},marginBlock:{style:Lt},marginBlockStart:{style:Lt},marginBlockEnd:{style:Lt},displayPrint:{cssProperty:!1,transform:r=>({"@media print":{display:r}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Yc},rowGap:{style:Xc},columnGap:{style:qc},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Fr},maxWidth:{style:om},minWidth:{transform:Fr},height:{transform:Fr},maxHeight:{transform:Fr},minHeight:{transform:Fr},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function pP(...r){const e=r.reduce((n,i)=>n.concat(Object.keys(i)),[]),t=new Set(e);return r.every(n=>t.size===Object.keys(n).length)}function mP(r,e){return typeof r=="function"?r(e):r}function gP(){function r(t,n,i,o){const a={[t]:n,theme:i},u=o[t];if(!u)return{[t]:n};const{cssProperty:c=t,themeKey:f,transform:h,style:p}=u;if(n==null)return null;if(f==="typography"&&n==="inherit")return{[t]:n};const g=zc(i,f)||{};return p?p(a):fi(a,n,y=>{let S=Ac(g,h,y);return y===S&&typeof y=="string"&&(S=Ac(g,h,`${t}${y==="default"?"":er(y)}`,y)),c===!1?S:{[c]:S}})}function e(t){const{sx:n,theme:i={}}=t||{};if(!n)return null;const o=i.unstable_sxConfig??nl;function a(u){let c=u;if(typeof u=="function")c=u(i);else if(typeof u!="object")return u;if(!c)return null;const f=ID(i.breakpoints),h=Object.keys(f);let p=f;return Object.keys(c).forEach(g=>{const x=mP(c[g],i);if(x!=null)if(typeof x=="object")if(o[g])p=Ua(p,r(g,x,i,o));else{const y=fi({theme:i},x,S=>({[g]:S}));pP(y,x)?p[g]=e({sx:x,theme:i}):p=Ua(p,y)}else p=Ua(p,r(g,x,i,o))}),AD(i,DD(h,p))}return Array.isArray(n)?n.map(a):a(n)}return e}const Ds=gP();Ds.filterProps=["sx"];const yP=r=>{var n;const e={systemProps:{},otherProps:{}},t=((n=r==null?void 0:r.theme)==null?void 0:n.unstable_sxConfig)??nl;return Object.keys(r).forEach(i=>{t[i]?e.systemProps[i]=r[i]:e.otherProps[i]=r[i]}),e};function vP(r){const{sx:e,...t}=r,{systemProps:n,otherProps:i}=yP(t);let o;return Array.isArray(e)?o=[n,...e]:typeof e=="function"?o=(...a)=>{const u=e(...a);return Nn(u)?{...n,...u}:n}:o={...n,...e},{...i,sx:o}}function Lc(){return Lc=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Lc.apply(null,arguments)}var xP=!1;function SP(r){if(r.sheet)return r.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===r)return document.styleSheets[e]}function EP(r){var e=document.createElement("style");return e.setAttribute("data-emotion",r.key),r.nonce!==void 0&&e.setAttribute("nonce",r.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var TP=function(){function r(t){var n=this;this._insertTag=function(i){var o;n.tags.length===0?n.insertionPoint?o=n.insertionPoint.nextSibling:n.prepend?o=n.container.firstChild:o=n.before:o=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,o),n.tags.push(i)},this.isSpeedy=t.speedy===void 0?!xP:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=r.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(EP(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=SP(i);try{o.insertRule(n,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},r}(),lr="-ms-",bc="-moz-",Ze="-webkit-",B1="comm",am="rule",lm="decl",wP="@import",$1="@keyframes",RP="@layer",AP=Math.abs,Qc=String.fromCharCode,LP=Object.assign;function bP(r,e){return Zt(r,0)^45?(((e<<2^Zt(r,0))<<2^Zt(r,1))<<2^Zt(r,2))<<2^Zt(r,3):0}function U1(r){return r.trim()}function CP(r,e){return(r=e.exec(r))?r[0]:r}function et(r,e,t){return r.replace(e,t)}function op(r,e){return r.indexOf(e)}function Zt(r,e){return r.charCodeAt(e)|0}function Ka(r,e,t){return r.slice(e,t)}function Fn(r){return r.length}function um(r){return r.length}function _u(r,e){return e.push(r),r}function kP(r,e){return r.map(e).join("")}var Jc=1,No=1,G1=0,Rr=0,_t=0,$o="";function Zc(r,e,t,n,i,o,a){return{value:r,root:e,parent:t,type:n,props:i,children:o,line:Jc,column:No,length:a,return:""}}function Ia(r,e){return LP(Zc("",null,null,"",null,null,0),r,{length:-r.length},e)}function IP(){return _t}function DP(){return _t=Rr>0?Zt($o,--Rr):0,No--,_t===10&&(No=1,Jc--),_t}function Nr(){return _t=Rr<G1?Zt($o,Rr++):0,No++,_t===10&&(No=1,Jc++),_t}function jn(){return Zt($o,Rr)}function Zu(){return Rr}function il(r,e){return Ka($o,r,e)}function Wa(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function j1(r){return Jc=No=1,G1=Fn($o=r),Rr=0,[]}function H1(r){return $o="",r}function ec(r){return U1(il(Rr-1,ap(r===91?r+2:r===40?r+1:r)))}function PP(r){for(;(_t=jn())&&_t<33;)Nr();return Wa(r)>2||Wa(_t)>3?"":" "}function _P(r,e){for(;--e&&Nr()&&!(_t<48||_t>102||_t>57&&_t<65||_t>70&&_t<97););return il(r,Zu()+(e<6&&jn()==32&&Nr()==32))}function ap(r){for(;Nr();)switch(_t){case r:return Rr;case 34:case 39:r!==34&&r!==39&&ap(_t);break;case 40:r===41&&ap(r);break;case 92:Nr();break}return Rr}function OP(r,e){for(;Nr()&&r+_t!==57;)if(r+_t===84&&jn()===47)break;return"/*"+il(e,Rr-1)+"*"+Qc(r===47?r:Nr())}function FP(r){for(;!Wa(jn());)Nr();return il(r,Rr)}function MP(r){return H1(tc("",null,null,null,[""],r=j1(r),0,[0],r))}function tc(r,e,t,n,i,o,a,u,c){for(var f=0,h=0,p=a,g=0,x=0,y=0,S=1,T=1,R=1,k=0,C="",I=i,w=o,P=n,D=C;T;)switch(y=k,k=Nr()){case 40:if(y!=108&&Zt(D,p-1)==58){op(D+=et(ec(k),"&","&\f"),"&\f")!=-1&&(R=-1);break}case 34:case 39:case 91:D+=ec(k);break;case 9:case 10:case 13:case 32:D+=PP(y);break;case 92:D+=_P(Zu()-1,7);continue;case 47:switch(jn()){case 42:case 47:_u(NP(OP(Nr(),Zu()),e,t),c);break;default:D+="/"}break;case 123*S:u[f++]=Fn(D)*R;case 125*S:case 59:case 0:switch(k){case 0:case 125:T=0;case 59+h:R==-1&&(D=et(D,/\f/g,"")),x>0&&Fn(D)-p&&_u(x>32?Jv(D+";",n,t,p-1):Jv(et(D," ","")+";",n,t,p-2),c);break;case 59:D+=";";default:if(_u(P=Qv(D,e,t,f,h,i,u,C,I=[],w=[],p),o),k===123)if(h===0)tc(D,e,P,P,I,o,p,u,w);else switch(g===99&&Zt(D,3)===110?100:g){case 100:case 108:case 109:case 115:tc(r,P,P,n&&_u(Qv(r,P,P,0,0,i,u,C,i,I=[],p),w),i,w,p,u,n?I:w);break;default:tc(D,P,P,P,[""],w,0,u,w)}}f=h=x=0,S=R=1,C=D="",p=a;break;case 58:p=1+Fn(D),x=y;default:if(S<1){if(k==123)--S;else if(k==125&&S++==0&&DP()==125)continue}switch(D+=Qc(k),k*S){case 38:R=h>0?1:(D+="\f",-1);break;case 44:u[f++]=(Fn(D)-1)*R,R=1;break;case 64:jn()===45&&(D+=ec(Nr())),g=jn(),h=p=Fn(C=D+=FP(Zu())),k++;break;case 45:y===45&&Fn(D)==2&&(S=0)}}return o}function Qv(r,e,t,n,i,o,a,u,c,f,h){for(var p=i-1,g=i===0?o:[""],x=um(g),y=0,S=0,T=0;y<n;++y)for(var R=0,k=Ka(r,p+1,p=AP(S=a[y])),C=r;R<x;++R)(C=U1(S>0?g[R]+" "+k:et(k,/&\f/g,g[R])))&&(c[T++]=C);return Zc(r,e,t,i===0?am:u,c,f,h)}function NP(r,e,t){return Zc(r,e,t,B1,Qc(IP()),Ka(r,2,-2),0)}function Jv(r,e,t,n){return Zc(r,e,t,lm,Ka(r,0,n),Ka(r,n+1,-1),n)}function bo(r,e){for(var t="",n=um(r),i=0;i<n;i++)t+=e(r[i],i,r,e)||"";return t}function BP(r,e,t,n){switch(r.type){case RP:if(r.children.length)break;case wP:case lm:return r.return=r.return||r.value;case B1:return"";case $1:return r.return=r.value+"{"+bo(r.children,n)+"}";case am:r.value=r.props.join(",")}return Fn(t=bo(r.children,n))?r.return=r.value+"{"+t+"}":""}function $P(r){var e=um(r);return function(t,n,i,o){for(var a="",u=0;u<e;u++)a+=r[u](t,n,i,o)||"";return a}}function UP(r){return function(e){e.root||(e=e.return)&&r(e)}}var GP=function(e,t,n){for(var i=0,o=0;i=o,o=jn(),i===38&&o===12&&(t[n]=1),!Wa(o);)Nr();return il(e,Rr)},jP=function(e,t){var n=-1,i=44;do switch(Wa(i)){case 0:i===38&&jn()===12&&(t[n]=1),e[n]+=GP(Rr-1,t,n);break;case 2:e[n]+=ec(i);break;case 4:if(i===44){e[++n]=jn()===58?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Qc(i)}while(i=Nr());return e},HP=function(e,t){return H1(jP(j1(e),t))},Zv=new WeakMap,VP=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!Zv.get(n))&&!i){Zv.set(e,!0);for(var o=[],a=HP(t,o),u=n.props,c=0,f=0;c<a.length;c++)for(var h=0;h<u.length;h++,f++)e.props[f]=o[c]?a[c].replace(/&\f/g,u[h]):u[h]+" "+a[c]}}},zP=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function V1(r,e){switch(bP(r,e)){case 5103:return Ze+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ze+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return Ze+r+bc+r+lr+r+r;case 6828:case 4268:return Ze+r+lr+r+r;case 6165:return Ze+r+lr+"flex-"+r+r;case 5187:return Ze+r+et(r,/(\w+).+(:[^]+)/,Ze+"box-$1$2"+lr+"flex-$1$2")+r;case 5443:return Ze+r+lr+"flex-item-"+et(r,/flex-|-self/,"")+r;case 4675:return Ze+r+lr+"flex-line-pack"+et(r,/align-content|flex-|-self/,"")+r;case 5548:return Ze+r+lr+et(r,"shrink","negative")+r;case 5292:return Ze+r+lr+et(r,"basis","preferred-size")+r;case 6060:return Ze+"box-"+et(r,"-grow","")+Ze+r+lr+et(r,"grow","positive")+r;case 4554:return Ze+et(r,/([^-])(transform)/g,"$1"+Ze+"$2")+r;case 6187:return et(et(et(r,/(zoom-|grab)/,Ze+"$1"),/(image-set)/,Ze+"$1"),r,"")+r;case 5495:case 3959:return et(r,/(image-set\([^]*)/,Ze+"$1$`$1");case 4968:return et(et(r,/(.+:)(flex-)?(.*)/,Ze+"box-pack:$3"+lr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ze+r+r;case 4095:case 3583:case 4068:case 2532:return et(r,/(.+)-inline(.+)/,Ze+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Fn(r)-1-e>6)switch(Zt(r,e+1)){case 109:if(Zt(r,e+4)!==45)break;case 102:return et(r,/(.+:)(.+)-([^]+)/,"$1"+Ze+"$2-$3$1"+bc+(Zt(r,e+3)==108?"$3":"$2-$3"))+r;case 115:return~op(r,"stretch")?V1(et(r,"stretch","fill-available"),e)+r:r}break;case 4949:if(Zt(r,e+1)!==115)break;case 6444:switch(Zt(r,Fn(r)-3-(~op(r,"!important")&&10))){case 107:return et(r,":",":"+Ze)+r;case 101:return et(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ze+(Zt(r,14)===45?"inline-":"")+"box$3$1"+Ze+"$2$3$1"+lr+"$2box$3")+r}break;case 5936:switch(Zt(r,e+11)){case 114:return Ze+r+lr+et(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return Ze+r+lr+et(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return Ze+r+lr+et(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return Ze+r+lr+r+r}return r}var KP=function(e,t,n,i){if(e.length>-1&&!e.return)switch(e.type){case lm:e.return=V1(e.value,e.length);break;case $1:return bo([Ia(e,{value:et(e.value,"@","@"+Ze)})],i);case am:if(e.length)return kP(e.props,function(o){switch(CP(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return bo([Ia(e,{props:[et(o,/:(read-\w+)/,":"+bc+"$1")]})],i);case"::placeholder":return bo([Ia(e,{props:[et(o,/:(plac\w+)/,":"+Ze+"input-$1")]}),Ia(e,{props:[et(o,/:(plac\w+)/,":"+bc+"$1")]}),Ia(e,{props:[et(o,/:(plac\w+)/,lr+"input-$1")]})],i)}return""})}},WP=[KP],YP=function(e){var t=e.key;if(t==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(S){var T=S.getAttribute("data-emotion");T.indexOf(" ")!==-1&&(document.head.appendChild(S),S.setAttribute("data-s",""))})}var i=e.stylisPlugins||WP,o={},a,u=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(S){for(var T=S.getAttribute("data-emotion").split(" "),R=1;R<T.length;R++)o[T[R]]=!0;u.push(S)});var c,f=[VP,zP];{var h,p=[BP,UP(function(S){h.insert(S)})],g=$P(f.concat(i,p)),x=function(T){return bo(MP(T),g)};c=function(T,R,k,C){h=k,x(T?T+"{"+R.styles+"}":R.styles),C&&(y.inserted[R.name]=!0)}}var y={key:t,sheet:new TP({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:c};return y.sheet.hydrate(u),y},Rh={exports:{}},rt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex;function qP(){if(ex)return rt;ex=1;var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,o=r?Symbol.for("react.profiler"):60114,a=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,c=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.suspense_list"):60120,x=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,S=r?Symbol.for("react.block"):60121,T=r?Symbol.for("react.fundamental"):60117,R=r?Symbol.for("react.responder"):60118,k=r?Symbol.for("react.scope"):60119;function C(w){if(typeof w=="object"&&w!==null){var P=w.$$typeof;switch(P){case e:switch(w=w.type,w){case c:case f:case n:case o:case i:case p:return w;default:switch(w=w&&w.$$typeof,w){case u:case h:case y:case x:case a:return w;default:return P}}case t:return P}}}function I(w){return C(w)===f}return rt.AsyncMode=c,rt.ConcurrentMode=f,rt.ContextConsumer=u,rt.ContextProvider=a,rt.Element=e,rt.ForwardRef=h,rt.Fragment=n,rt.Lazy=y,rt.Memo=x,rt.Portal=t,rt.Profiler=o,rt.StrictMode=i,rt.Suspense=p,rt.isAsyncMode=function(w){return I(w)||C(w)===c},rt.isConcurrentMode=I,rt.isContextConsumer=function(w){return C(w)===u},rt.isContextProvider=function(w){return C(w)===a},rt.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},rt.isForwardRef=function(w){return C(w)===h},rt.isFragment=function(w){return C(w)===n},rt.isLazy=function(w){return C(w)===y},rt.isMemo=function(w){return C(w)===x},rt.isPortal=function(w){return C(w)===t},rt.isProfiler=function(w){return C(w)===o},rt.isStrictMode=function(w){return C(w)===i},rt.isSuspense=function(w){return C(w)===p},rt.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===f||w===o||w===i||w===p||w===g||typeof w=="object"&&w!==null&&(w.$$typeof===y||w.$$typeof===x||w.$$typeof===a||w.$$typeof===u||w.$$typeof===h||w.$$typeof===T||w.$$typeof===R||w.$$typeof===k||w.$$typeof===S)},rt.typeOf=C,rt}var tx;function XP(){return tx||(tx=1,Rh.exports=qP()),Rh.exports}var Ah,rx;function QP(){if(rx)return Ah;rx=1;var r=XP(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[r.ForwardRef]=n,o[r.Memo]=i;function a(y){return r.isMemo(y)?i:o[y.$$typeof]||e}var u=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;function x(y,S,T){if(typeof S!="string"){if(g){var R=p(S);R&&R!==g&&x(y,R,T)}var k=c(S);f&&(k=k.concat(f(S)));for(var C=a(y),I=a(S),w=0;w<k.length;++w){var P=k[w];if(!t[P]&&!(T&&T[P])&&!(I&&I[P])&&!(C&&C[P])){var D=h(S,P);try{u(y,P,D)}catch{}}}}return y}return Ah=x,Ah}QP();var JP=!0;function z1(r,e,t){var n="";return t.split(" ").forEach(function(i){r[i]!==void 0?e.push(r[i]+";"):i&&(n+=i+" ")}),n}var cm=function(e,t,n){var i=e.key+"-"+t.name;(n===!1||JP===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},K1=function(e,t,n){cm(e,t,n);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var o=t;do e.insert(t===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function ZP(r){for(var e=0,t,n=0,i=r.length;i>=4;++n,i-=4)t=r.charCodeAt(n)&255|(r.charCodeAt(++n)&255)<<8|(r.charCodeAt(++n)&255)<<16|(r.charCodeAt(++n)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(r.charCodeAt(n+2)&255)<<16;case 2:e^=(r.charCodeAt(n+1)&255)<<8;case 1:e^=r.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var e_={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function t_(r){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=r(t)),e[t]}}var r_=!1,n_=/[A-Z]|^ms/g,i_=/_EMO_([^_]+?)_([^]*?)_EMO_/g,W1=function(e){return e.charCodeAt(1)===45},nx=function(e){return e!=null&&typeof e!="boolean"},Lh=t_(function(r){return W1(r)?r:r.replace(n_,"-$&").toLowerCase()}),ix=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(i_,function(n,i,o){return Mn={name:i,styles:o,next:Mn},i})}return e_[e]!==1&&!W1(e)&&typeof t=="number"&&t!==0?t+"px":t},s_="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Ya(r,e,t){if(t==null)return"";var n=t;if(n.__emotion_styles!==void 0)return n;switch(typeof t){case"boolean":return"";case"object":{var i=t;if(i.anim===1)return Mn={name:i.name,styles:i.styles,next:Mn},i.name;var o=t;if(o.styles!==void 0){var a=o.next;if(a!==void 0)for(;a!==void 0;)Mn={name:a.name,styles:a.styles,next:Mn},a=a.next;var u=o.styles+";";return u}return o_(r,e,t)}case"function":{if(r!==void 0){var c=Mn,f=t(r);return Mn=c,Ya(r,e,f)}break}}var h=t;if(e==null)return h;var p=e[h];return p!==void 0?p:h}function o_(r,e,t){var n="";if(Array.isArray(t))for(var i=0;i<t.length;i++)n+=Ya(r,e,t[i])+";";else for(var o in t){var a=t[o];if(typeof a!="object"){var u=a;e!=null&&e[u]!==void 0?n+=o+"{"+e[u]+"}":nx(u)&&(n+=Lh(o)+":"+ix(o,u)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&r_)throw new Error(s_);if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var c=0;c<a.length;c++)nx(a[c])&&(n+=Lh(o)+":"+ix(o,a[c])+";");else{var f=Ya(r,e,a);switch(o){case"animation":case"animationName":{n+=Lh(o)+":"+f+";";break}default:n+=o+"{"+f+"}"}}}}return n}var sx=/label:\s*([^\s;{]+)\s*(;|$)/g,Mn;function ed(r,e,t){if(r.length===1&&typeof r[0]=="object"&&r[0]!==null&&r[0].styles!==void 0)return r[0];var n=!0,i="";Mn=void 0;var o=r[0];if(o==null||o.raw===void 0)n=!1,i+=Ya(t,e,o);else{var a=o;i+=a[0]}for(var u=1;u<r.length;u++)if(i+=Ya(t,e,r[u]),n){var c=o;i+=c[u]}sx.lastIndex=0;for(var f="",h;(h=sx.exec(i))!==null;)f+="-"+h[1];var p=ZP(i)+f;return{name:p,styles:i,next:Mn}}var a_=function(e){return e()},l_=ey.useInsertionEffect?ey.useInsertionEffect:!1,Y1=l_||a_,u_=!1,q1=O.createContext(typeof HTMLElement<"u"?YP({key:"css"}):null);q1.Provider;var X1=function(e){return O.forwardRef(function(t,n){var i=O.useContext(q1);return e(t,i,n)})},dm=O.createContext({}),fm={}.hasOwnProperty,lp="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",c_=function(e,t){var n={};for(var i in t)fm.call(t,i)&&(n[i]=t[i]);return n[lp]=e,n},d_=function(e){var t=e.cache,n=e.serialized,i=e.isStringTag;return cm(t,n,i),Y1(function(){return K1(t,n,i)}),null},f_=X1(function(r,e,t){var n=r.css;typeof n=="string"&&e.registered[n]!==void 0&&(n=e.registered[n]);var i=r[lp],o=[n],a="";typeof r.className=="string"?a=z1(e.registered,o,r.className):r.className!=null&&(a=r.className+" ");var u=ed(o,void 0,O.useContext(dm));a+=e.key+"-"+u.name;var c={};for(var f in r)fm.call(r,f)&&f!=="css"&&f!==lp&&!u_&&(c[f]=r[f]);return c.className=a,t&&(c.ref=t),O.createElement(O.Fragment,null,O.createElement(d_,{cache:e,serialized:u,isStringTag:typeof i=="string"}),O.createElement(i,c))}),h_=f_,ox=function(e,t){var n=arguments;if(t==null||!fm.call(t,"css"))return O.createElement.apply(void 0,n);var i=n.length,o=new Array(i);o[0]=h_,o[1]=c_(e,t);for(var a=2;a<i;a++)o[a]=n[a];return O.createElement.apply(null,o)};(function(r){var e;e||(e=r.JSX||(r.JSX={}))})(ox||(ox={}));function p_(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return ed(e)}function hm(){var r=p_.apply(void 0,arguments),e="animation-"+r.name;return{name:e,styles:"@keyframes "+e+"{"+r.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function m_(r){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=r(t)),e[t]}}var g_=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,y_=m_(function(r){return g_.test(r)||r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)<91}),v_=!1,x_=y_,S_=function(e){return e!=="theme"},ax=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?x_:S_},lx=function(e,t,n){var i;if(t){var o=t.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(a){return e.__emotion_forwardProp(a)&&o(a)}:o}return typeof i!="function"&&n&&(i=e.__emotion_forwardProp),i},E_=function(e){var t=e.cache,n=e.serialized,i=e.isStringTag;return cm(t,n,i),Y1(function(){return K1(t,n,i)}),null},T_=function r(e,t){var n=e.__emotion_real===e,i=n&&e.__emotion_base||e,o,a;t!==void 0&&(o=t.label,a=t.target);var u=lx(e,t,n),c=u||ax(i),f=!c("as");return function(){var h=arguments,p=n&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&p.push("label:"+o+";"),h[0]==null||h[0].raw===void 0)p.push.apply(p,h);else{var g=h[0];p.push(g[0]);for(var x=h.length,y=1;y<x;y++)p.push(h[y],g[y])}var S=X1(function(T,R,k){var C=f&&T.as||i,I="",w=[],P=T;if(T.theme==null){P={};for(var D in T)P[D]=T[D];P.theme=O.useContext(dm)}typeof T.className=="string"?I=z1(R.registered,w,T.className):T.className!=null&&(I=T.className+" ");var U=ed(p.concat(w),R.registered,P);I+=R.key+"-"+U.name,a!==void 0&&(I+=" "+a);var Q=f&&u===void 0?ax(C):c,A={};for(var $ in T)f&&$==="as"||Q($)&&(A[$]=T[$]);return A.className=I,k&&(A.ref=k),O.createElement(O.Fragment,null,O.createElement(E_,{cache:R,serialized:U,isStringTag:typeof C=="string"}),O.createElement(C,A))});return S.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",S.defaultProps=e.defaultProps,S.__emotion_real=S,S.__emotion_base=i,S.__emotion_styles=p,S.__emotion_forwardProp=u,Object.defineProperty(S,"toString",{value:function(){return a===void 0&&v_?"NO_COMPONENT_SELECTOR":"."+a}}),S.withComponent=function(T,R){var k=r(T,Lc({},t,R,{shouldForwardProp:lx(S,R,!0)}));return k.apply(void 0,p)},S}},w_=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],up=T_.bind(null);w_.forEach(function(r){up[r]=up(r)});/**
 * @mui/styled-engine v6.2.1
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Q1(r,e){return up(r,e)}function R_(r,e){Array.isArray(r.__emotion_styles)&&(r.__emotion_styles=e(r.__emotion_styles))}const ux=[];function cx(r){return ux[0]=r,ed(ux)}const A_=r=>{const e=Object.keys(r).map(t=>({key:t,val:r[t]}))||[];return e.sort((t,n)=>t.val-n.val),e.reduce((t,n)=>({...t,[n.key]:n.val}),{})};function L_(r){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:n=5,...i}=r,o=A_(e),a=Object.keys(o);function u(g){return`@media (min-width:${typeof e[g]=="number"?e[g]:g}${t})`}function c(g){return`@media (max-width:${(typeof e[g]=="number"?e[g]:g)-n/100}${t})`}function f(g,x){const y=a.indexOf(x);return`@media (min-width:${typeof e[g]=="number"?e[g]:g}${t}) and (max-width:${(y!==-1&&typeof e[a[y]]=="number"?e[a[y]]:x)-n/100}${t})`}function h(g){return a.indexOf(g)+1<a.length?f(g,a[a.indexOf(g)+1]):u(g)}function p(g){const x=a.indexOf(g);return x===0?u(a[1]):x===a.length-1?c(a[x]):f(g,a[a.indexOf(g)+1]).replace("@media","@media not all and")}return{keys:a,values:o,up:u,down:c,between:f,only:h,not:p,unit:t,...i}}const b_={borderRadius:4};function J1(r=8,e=sm({spacing:r})){if(r.mui)return r;const t=(...n)=>(n.length===0?[1]:n).map(o=>{const a=e(o);return typeof a=="number"?`${a}px`:a}).join(" ");return t.mui=!0,t}function C_(r,e){var n;const t=this;if(t.vars){if(!((n=t.colorSchemes)!=null&&n[r])||typeof t.getColorSchemeSelector!="function")return{};let i=t.getColorSchemeSelector(r);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return t.palette.mode===r?e:{}}function pm(r={},...e){const{breakpoints:t={},palette:n={},spacing:i,shape:o={},...a}=r,u=L_(t),c=J1(i);let f=Mr({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:c,shape:{...b_,...o}},a);return f=CD(f),f.applyStyles=C_,f=e.reduce((h,p)=>Mr(h,p),f),f.unstable_sxConfig={...nl,...a==null?void 0:a.unstable_sxConfig},f.unstable_sx=function(p){return Ds({sx:p,theme:this})},f}function k_(r){return Object.keys(r).length===0}function I_(r=null){const e=O.useContext(dm);return!e||k_(e)?r:e}const D_=pm();function Z1(r=D_){return I_(r)}function P_(r={}){const{themeId:e,defaultTheme:t,defaultClassName:n="MuiBox-root",generateClassName:i}=r,o=Q1("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(Ds);return O.forwardRef(function(c,f){const h=Z1(t),{className:p,component:g="div",...x}=vP(c);return W.jsx(o,{as:g,ref:f,className:Dt(p,i?i(n):n),theme:e&&h[e]||h,...x})})}function eE(r){const{variants:e,...t}=r,n={variants:e,style:cx(t),isProcessed:!0};return n.style===t||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=cx(i.style))}),n}const __=pm();function bh(r){return r!=="ownerState"&&r!=="theme"&&r!=="sx"&&r!=="as"}function O_(r){return r?(e,t)=>t[r]:null}function F_(r,e,t){r.theme=B_(r.theme)?t:r.theme[e]||r.theme}function rc(r,e){const t=typeof e=="function"?e(r):e;if(Array.isArray(t))return t.flatMap(n=>rc(r,n));if(Array.isArray(t==null?void 0:t.variants)){let n;if(t.isProcessed)n=t.style;else{const{variants:i,...o}=t;n=o}return tE(r,t.variants,[n])}return t!=null&&t.isProcessed?t.style:t}function tE(r,e,t=[]){var i;let n;e:for(let o=0;o<e.length;o+=1){const a=e[o];if(typeof a.props=="function"){if(n??(n={...r,...r.ownerState,ownerState:r.ownerState}),!a.props(n))continue}else for(const u in a.props)if(r[u]!==a.props[u]&&((i=r.ownerState)==null?void 0:i[u])!==a.props[u])continue e;typeof a.style=="function"?(n??(n={...r,...r.ownerState,ownerState:r.ownerState}),t.push(a.style(n))):t.push(a.style)}return t}function M_(r={}){const{themeId:e,defaultTheme:t=__,rootShouldForwardProp:n=bh,slotShouldForwardProp:i=bh}=r;function o(u){F_(u,e,t)}return(u,c={})=>{R_(u,w=>w.filter(P=>P!==Ds));const{name:f,slot:h,skipVariantsResolver:p,skipSx:g,overridesResolver:x=O_(U_(h)),...y}=c,S=p!==void 0?p:h&&h!=="Root"&&h!=="root"||!1,T=g||!1;let R=bh;h==="Root"||h==="root"?R=n:h?R=i:$_(u)&&(R=void 0);const k=Q1(u,{shouldForwardProp:R,label:N_(),...y}),C=w=>{if(typeof w=="function"&&w.__emotion_real!==w)return function(D){return rc(D,w)};if(Nn(w)){const P=eE(w);return P.variants?function(U){return rc(U,P)}:P.style}return w},I=(...w)=>{const P=[],D=w.map(C),U=[];if(P.push(o),f&&x&&U.push(function(ie){var pe,ge;const fe=(ge=(pe=ie.theme.components)==null?void 0:pe[f])==null?void 0:ge.styleOverrides;if(!fe)return null;const de={};for(const ne in fe)de[ne]=rc(ie,fe[ne]);return x(ie,de)}),f&&!S&&U.push(function(ie){var de,pe;const te=ie.theme,fe=(pe=(de=te==null?void 0:te.components)==null?void 0:de[f])==null?void 0:pe.variants;return fe?tE(ie,fe):null}),T||U.push(Ds),Array.isArray(D[0])){const $=D.shift(),ie=new Array(P.length).fill(""),te=new Array(U.length).fill("");let fe;fe=[...ie,...$,...te],fe.raw=[...ie,...$.raw,...te],P.unshift(fe)}const Q=[...P,...D,...U],A=k(...Q);return u.muiName&&(A.muiName=u.muiName),A};return k.withConfig&&(I.withConfig=k.withConfig),I}}function N_(r,e){return void 0}function B_(r){for(const e in r)return!1;return!0}function $_(r){return typeof r=="string"&&r.charCodeAt(0)>96}function U_(r){return r&&r.charAt(0).toLowerCase()+r.slice(1)}function mm(r,e=0,t=1){return RD(r,e,t)}function G_(r){r=r.slice(1);const e=new RegExp(`.{1,${r.length>=6?2:1}}`,"g");let t=r.match(e);return t&&t[0].length===1&&(t=t.map(n=>n+n)),t?`rgb${t.length===4?"a":""}(${t.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Qi(r){if(r.type)return r;if(r.charAt(0)==="#")return Qi(G_(r));const e=r.indexOf("("),t=r.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(Is(9,r));let n=r.substring(e+1,r.length-1),i;if(t==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(Is(10,i))}else n=n.split(",");return n=n.map(o=>parseFloat(o)),{type:t,values:n,colorSpace:i}}const j_=r=>{const e=Qi(r);return e.values.slice(0,3).map((t,n)=>e.type.includes("hsl")&&n!==0?`${t}%`:t).join(" ")},Ma=(r,e)=>{try{return j_(r)}catch{return r}};function td(r){const{type:e,colorSpace:t}=r;let{values:n}=r;return e.includes("rgb")?n=n.map((i,o)=>o<3?parseInt(i,10):i):e.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),e.includes("color")?n=`${t} ${n.join(" ")}`:n=`${n.join(", ")}`,`${e}(${n})`}function rE(r){r=Qi(r);const{values:e}=r,t=e[0],n=e[1]/100,i=e[2]/100,o=n*Math.min(i,1-i),a=(f,h=(f+t/30)%12)=>i-o*Math.max(Math.min(h-3,9-h,1),-1);let u="rgb";const c=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return r.type==="hsla"&&(u+="a",c.push(e[3])),td({type:u,values:c})}function cp(r){r=Qi(r);let e=r.type==="hsl"||r.type==="hsla"?Qi(rE(r)).values:r.values;return e=e.map(t=>(r.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function H_(r,e){const t=cp(r),n=cp(e);return(Math.max(t,n)+.05)/(Math.min(t,n)+.05)}function qi(r,e){return r=Qi(r),e=mm(e),(r.type==="rgb"||r.type==="hsl")&&(r.type+="a"),r.type==="color"?r.values[3]=`/${e}`:r.values[3]=e,td(r)}function Ou(r,e,t){try{return qi(r,e)}catch{return r}}function gm(r,e){if(r=Qi(r),e=mm(e),r.type.includes("hsl"))r.values[2]*=1-e;else if(r.type.includes("rgb")||r.type.includes("color"))for(let t=0;t<3;t+=1)r.values[t]*=1-e;return td(r)}function lt(r,e,t){try{return gm(r,e)}catch{return r}}function ym(r,e){if(r=Qi(r),e=mm(e),r.type.includes("hsl"))r.values[2]+=(100-r.values[2])*e;else if(r.type.includes("rgb"))for(let t=0;t<3;t+=1)r.values[t]+=(255-r.values[t])*e;else if(r.type.includes("color"))for(let t=0;t<3;t+=1)r.values[t]+=(1-r.values[t])*e;return td(r)}function ut(r,e,t){try{return ym(r,e)}catch{return r}}function V_(r,e=.15){return cp(r)>.5?gm(r,e):ym(r,e)}function Fu(r,e,t){try{return V_(r,e)}catch{return r}}const z_=O.createContext(void 0);function K_(r){const{theme:e,name:t,props:n}=r;if(!e||!e.components||!e.components[t])return n;const i=e.components[t];return i.defaultProps?Rc(i.defaultProps,n):!i.styleOverrides&&!i.variants?Rc(i,n):n}function W_({props:r,name:e}){const t=O.useContext(z_);return K_({props:r,name:e,theme:{components:t}})}const dx={theme:void 0};function Y_(r){let e,t;return function(i){let o=e;return(o===void 0||i.theme!==t)&&(dx.theme=i.theme,o=eE(r(dx)),e=o,t=i.theme),o}}function q_(r=""){function e(...n){if(!n.length)return"";const i=n[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${r?`${r}-`:""}${i}${e(...n.slice(1))})`:`, ${i}`}return(n,...i)=>`var(--${r?`${r}-`:""}${n}${e(...i)})`}const fx=(r,e,t,n=[])=>{let i=r;e.forEach((o,a)=>{a===e.length-1?Array.isArray(i)?i[Number(o)]=t:i&&typeof i=="object"&&(i[o]=t):i&&typeof i=="object"&&(i[o]||(i[o]=n.includes(o)?[]:{}),i=i[o])})},X_=(r,e,t)=>{function n(i,o=[],a=[]){Object.entries(i).forEach(([u,c])=>{(!t||t&&!t([...o,u]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?n(c,[...o,u],Array.isArray(c)?[...a,u]:a):e([...o,u],c,a))})}n(r)},Q_=(r,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>r.includes(n))||r[r.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function Ch(r,e){const{prefix:t,shouldSkipGeneratingVar:n}=e||{},i={},o={},a={};return X_(r,(u,c,f)=>{if((typeof c=="string"||typeof c=="number")&&(!n||!n(u,c))){const h=`--${t?`${t}-`:""}${u.join("-")}`,p=Q_(u,c);Object.assign(i,{[h]:p}),fx(o,u,`var(${h})`,f),fx(a,u,`var(${h}, ${p})`,f)}},u=>u[0]==="vars"),{css:i,vars:o,varsWithDefaults:a}}function J_(r,e={}){const{getSelector:t=T,disableCssColorScheme:n,colorSchemeSelector:i}=e,{colorSchemes:o={},components:a,defaultColorScheme:u="light",...c}=r,{vars:f,css:h,varsWithDefaults:p}=Ch(c,e);let g=p;const x={},{[u]:y,...S}=o;if(Object.entries(S||{}).forEach(([C,I])=>{const{vars:w,css:P,varsWithDefaults:D}=Ch(I,e);g=Mr(g,D),x[C]={css:P,vars:w}}),y){const{css:C,vars:I,varsWithDefaults:w}=Ch(y,e);g=Mr(g,w),x[u]={css:C,vars:I}}function T(C,I){var P,D;let w=i;if(i==="class"&&(w=".%s"),i==="data"&&(w="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(w=`[${i}="%s"]`),C){if(w==="media")return r.defaultColorScheme===C?":root":{[`@media (prefers-color-scheme: ${((D=(P=o[C])==null?void 0:P.palette)==null?void 0:D.mode)||C})`]:{":root":I}};if(w)return r.defaultColorScheme===C?`:root, ${w.replace("%s",String(C))}`:w.replace("%s",String(C))}return":root"}return{vars:g,generateThemeVars:()=>{let C={...f};return Object.entries(x).forEach(([,{vars:I}])=>{C=Mr(C,I)}),C},generateStyleSheets:()=>{var U,Q;const C=[],I=r.defaultColorScheme||"light";function w(A,$){Object.keys($).length&&C.push(typeof A=="string"?{[A]:{...$}}:A)}w(t(void 0,{...h}),h);const{[I]:P,...D}=x;if(P){const{css:A}=P,$=(Q=(U=o[I])==null?void 0:U.palette)==null?void 0:Q.mode,ie=!n&&$?{colorScheme:$,...A}:{...A};w(t(I,{...ie}),ie)}return Object.entries(D).forEach(([A,{css:$}])=>{var fe,de;const ie=(de=(fe=o[A])==null?void 0:fe.palette)==null?void 0:de.mode,te=!n&&ie?{colorScheme:ie,...$}:{...$};w(t(A,{...te}),te)}),C}}}function Z_(r){return function(t){return r==="media"?`@media (prefers-color-scheme: ${t})`:r?r.startsWith("data-")&&!r.includes("%s")?`[${r}="${t}"] &`:r==="class"?`.${t} &`:r==="data"?`[data-${t}] &`:`${r.replace("%s",t)} &`:"&"}}const qa={black:"#000",white:"#fff"},eO={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},go={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},yo={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Da={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},vo={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},xo={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},So={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function nE(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:qa.white,default:qa.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const tO=nE();function iE(){return{text:{primary:qa.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:qa.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const hx=iE();function px(r,e,t,n){const i=n.light||n,o=n.dark||n*1.5;r[e]||(r.hasOwnProperty(t)?r[e]=r[t]:e==="light"?r.light=ym(r.main,i):e==="dark"&&(r.dark=gm(r.main,o)))}function rO(r="light"){return r==="dark"?{main:vo[200],light:vo[50],dark:vo[400]}:{main:vo[700],light:vo[400],dark:vo[800]}}function nO(r="light"){return r==="dark"?{main:go[200],light:go[50],dark:go[400]}:{main:go[500],light:go[300],dark:go[700]}}function iO(r="light"){return r==="dark"?{main:yo[500],light:yo[300],dark:yo[700]}:{main:yo[700],light:yo[400],dark:yo[800]}}function sO(r="light"){return r==="dark"?{main:xo[400],light:xo[300],dark:xo[700]}:{main:xo[700],light:xo[500],dark:xo[900]}}function oO(r="light"){return r==="dark"?{main:So[400],light:So[300],dark:So[700]}:{main:So[800],light:So[500],dark:So[900]}}function aO(r="light"){return r==="dark"?{main:Da[400],light:Da[300],dark:Da[700]}:{main:"#ed6c02",light:Da[500],dark:Da[900]}}function vm(r){const{mode:e="light",contrastThreshold:t=3,tonalOffset:n=.2,...i}=r,o=r.primary||rO(e),a=r.secondary||nO(e),u=r.error||iO(e),c=r.info||sO(e),f=r.success||oO(e),h=r.warning||aO(e);function p(S){return H_(S,hx.text.primary)>=t?hx.text.primary:tO.text.primary}const g=({color:S,name:T,mainShade:R=500,lightShade:k=300,darkShade:C=700})=>{if(S={...S},!S.main&&S[R]&&(S.main=S[R]),!S.hasOwnProperty("main"))throw new Error(Is(11,T?` (${T})`:"",R));if(typeof S.main!="string")throw new Error(Is(12,T?` (${T})`:"",JSON.stringify(S.main)));return px(S,"light",k,n),px(S,"dark",C,n),S.contrastText||(S.contrastText=p(S.main)),S};let x;return e==="light"?x=nE():e==="dark"&&(x=iE()),Mr({common:{...qa},mode:e,primary:g({color:o,name:"primary"}),secondary:g({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:g({color:u,name:"error"}),warning:g({color:h,name:"warning"}),info:g({color:c,name:"info"}),success:g({color:f,name:"success"}),grey:eO,contrastThreshold:t,getContrastText:p,augmentColor:g,tonalOffset:n,...x},i)}function lO(r){const e={};return Object.entries(r).forEach(n=>{const[i,o]=n;typeof o=="object"&&(e[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),e}function uO(r,e){return{toolbar:{minHeight:56,[r.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[r.up("sm")]:{minHeight:64}},...e}}function cO(r){return Math.round(r*1e5)/1e5}const mx={textTransform:"uppercase"},gx='"Roboto", "Helvetica", "Arial", sans-serif';function dO(r,e){const{fontFamily:t=gx,fontSize:n=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:u=700,htmlFontSize:c=16,allVariants:f,pxToRem:h,...p}=typeof e=="function"?e(r):e,g=n/14,x=h||(T=>`${T/c*g}rem`),y=(T,R,k,C,I)=>({fontFamily:t,fontWeight:T,fontSize:x(R),lineHeight:k,...t===gx?{letterSpacing:`${cO(C/R)}em`}:{},...I,...f}),S={h1:y(i,96,1.167,-1.5),h2:y(i,60,1.2,-.5),h3:y(o,48,1.167,0),h4:y(o,34,1.235,.25),h5:y(o,24,1.334,0),h6:y(a,20,1.6,.15),subtitle1:y(o,16,1.75,.15),subtitle2:y(a,14,1.57,.1),body1:y(o,16,1.5,.15),body2:y(o,14,1.43,.15),button:y(a,14,1.75,.4,mx),caption:y(o,12,1.66,.4),overline:y(o,12,2.66,1,mx),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Mr({htmlFontSize:c,pxToRem:x,fontFamily:t,fontSize:n,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:u,...S},p,{clone:!1})}const fO=.2,hO=.14,pO=.12;function xt(...r){return[`${r[0]}px ${r[1]}px ${r[2]}px ${r[3]}px rgba(0,0,0,${fO})`,`${r[4]}px ${r[5]}px ${r[6]}px ${r[7]}px rgba(0,0,0,${hO})`,`${r[8]}px ${r[9]}px ${r[10]}px ${r[11]}px rgba(0,0,0,${pO})`].join(",")}const mO=["none",xt(0,2,1,-1,0,1,1,0,0,1,3,0),xt(0,3,1,-2,0,2,2,0,0,1,5,0),xt(0,3,3,-2,0,3,4,0,0,1,8,0),xt(0,2,4,-1,0,4,5,0,0,1,10,0),xt(0,3,5,-1,0,5,8,0,0,1,14,0),xt(0,3,5,-1,0,6,10,0,0,1,18,0),xt(0,4,5,-2,0,7,10,1,0,2,16,1),xt(0,5,5,-3,0,8,10,1,0,3,14,2),xt(0,5,6,-3,0,9,12,1,0,3,16,2),xt(0,6,6,-3,0,10,14,1,0,4,18,3),xt(0,6,7,-4,0,11,15,1,0,4,20,3),xt(0,7,8,-4,0,12,17,2,0,5,22,4),xt(0,7,8,-4,0,13,19,2,0,5,24,4),xt(0,7,9,-4,0,14,21,2,0,5,26,4),xt(0,8,9,-5,0,15,22,2,0,6,28,5),xt(0,8,10,-5,0,16,24,2,0,6,30,5),xt(0,8,11,-5,0,17,26,2,0,6,32,5),xt(0,9,11,-5,0,18,28,2,0,7,34,6),xt(0,9,12,-6,0,19,29,2,0,7,36,6),xt(0,10,13,-6,0,20,31,3,0,8,38,7),xt(0,10,13,-6,0,21,33,3,0,8,40,7),xt(0,10,14,-6,0,22,35,3,0,8,42,7),xt(0,11,14,-7,0,23,36,3,0,9,44,8),xt(0,11,15,-7,0,24,38,3,0,9,46,8)],gO={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},yO={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function yx(r){return`${Math.round(r)}ms`}function vO(r){if(!r)return 0;const e=r/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function xO(r){const e={...gO,...r.easing},t={...yO,...r.duration};return{getAutoHeightDuration:vO,create:(i=["all"],o={})=>{const{duration:a=t.standard,easing:u=e.easeInOut,delay:c=0,...f}=o;return(Array.isArray(i)?i:[i]).map(h=>`${h} ${typeof a=="string"?a:yx(a)} ${u} ${typeof c=="string"?c:yx(c)}`).join(",")},...r,easing:e,duration:t}}const SO={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function EO(r){return Nn(r)||typeof r>"u"||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||Array.isArray(r)}function sE(r={}){const e={...r};function t(n){const i=Object.entries(n);for(let o=0;o<i.length;o++){const[a,u]=i[o];!EO(u)||a.startsWith("unstable_")?delete n[a]:Nn(u)&&(n[a]={...u},t(n[a]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function dp(r={},...e){const{breakpoints:t,mixins:n={},spacing:i,palette:o={},transitions:a={},typography:u={},shape:c,...f}=r;if(r.vars)throw new Error(Is(20));const h=vm(o),p=pm(r);let g=Mr(p,{mixins:uO(p.breakpoints,n),palette:h,shadows:mO.slice(),typography:dO(h,u),transitions:xO(a),zIndex:{...SO}});return g=Mr(g,f),g=e.reduce((x,y)=>Mr(x,y),g),g.unstable_sxConfig={...nl,...f==null?void 0:f.unstable_sxConfig},g.unstable_sx=function(y){return Ds({sx:y,theme:this})},g.toRuntimeSource=sE,g}function fp(r){let e;return r<1?e=5.11916*r**2:e=4.5*Math.log(r+1)+2,Math.round(e*10)/1e3}const TO=[...Array(25)].map((r,e)=>{if(e===0)return"none";const t=fp(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function oE(r){return{inputPlaceholder:r==="dark"?.5:.42,inputUnderline:r==="dark"?.7:.42,switchTrackDisabled:r==="dark"?.2:.12,switchTrack:r==="dark"?.3:.38}}function aE(r){return r==="dark"?TO:[]}function wO(r){const{palette:e={mode:"light"},opacity:t,overlays:n,...i}=r,o=vm(e);return{palette:o,opacity:{...oE(o.mode),...t},overlays:n||aE(o.mode),...i}}function RO(r){var e;return!!r[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!r[0].match(/sxConfig$/)||r[0]==="palette"&&!!((e=r[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const AO=r=>[...[...Array(25)].map((e,t)=>`--${r?`${r}-`:""}overlays-${t}`),`--${r?`${r}-`:""}palette-AppBar-darkBg`,`--${r?`${r}-`:""}palette-AppBar-darkColor`],LO=r=>(e,t)=>{const n=r.rootSelector||":root",i=r.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),r.defaultColorScheme===e){if(e==="dark"){const a={};return AO(r.cssVarPrefix).forEach(u=>{a[u]=t[u],delete t[u]}),o==="media"?{[n]:t,"@media (prefers-color-scheme: dark)":{[n]:a}}:o?{[o.replace("%s",e)]:a,[`${n}, ${o.replace("%s",e)}`]:t}:{[n]:{...t,...a}}}if(o&&o!=="media")return`${n}, ${o.replace("%s",String(e))}`}else if(e){if(o==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[n]:t}};if(o)return o.replace("%s",String(e))}return n};function bO(r,e){e.forEach(t=>{r[t]||(r[t]={})})}function re(r,e,t){!r[e]&&t&&(r[e]=t)}function Na(r){return typeof r!="string"||!r.startsWith("hsl")?r:rE(r)}function oi(r,e){`${e}Channel`in r||(r[`${e}Channel`]=Ma(Na(r[e]),`MUI: Can't create \`palette.${e}Channel\` because \`palette.${e}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${e}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function CO(r){return typeof r=="number"?`${r}px`:typeof r=="string"||typeof r=="function"||Array.isArray(r)?r:"8px"}const In=r=>{try{return r()}catch{}},kO=(r="mui")=>q_(r);function kh(r,e,t,n){if(!e)return;e=e===!0?{}:e;const i=n==="dark"?"dark":"light";if(!t){r[n]=wO({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:o,...a}=dp({...t,palette:{mode:i,...e==null?void 0:e.palette}});return r[n]={...e,palette:o,opacity:{...oE(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||aE(i)},a}function IO(r={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:a=RO,colorSchemeSelector:u=t.light&&t.dark?"media":void 0,rootSelector:c=":root",...f}=r,h=Object.keys(t)[0],p=n||(t.light&&h!=="light"?"light":h),g=kO(o),{[p]:x,light:y,dark:S,...T}=t,R={...T};let k=x;if((p==="dark"&&!("dark"in t)||p==="light"&&!("light"in t))&&(k=!0),!k)throw new Error(Is(21,p));const C=kh(R,k,f,p);y&&!R.light&&kh(R,y,void 0,"light"),S&&!R.dark&&kh(R,S,void 0,"dark");let I={defaultColorScheme:p,...C,cssVarPrefix:o,colorSchemeSelector:u,rootSelector:c,getCssVar:g,colorSchemes:R,font:{...lO(C.typography),...C.font},spacing:CO(f.spacing)};Object.keys(I.colorSchemes).forEach(Q=>{const A=I.colorSchemes[Q].palette,$=ie=>{const te=ie.split("-"),fe=te[1],de=te[2];return g(ie,A[fe][de])};if(A.mode==="light"&&(re(A.common,"background","#fff"),re(A.common,"onBackground","#000")),A.mode==="dark"&&(re(A.common,"background","#000"),re(A.common,"onBackground","#fff")),bO(A,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),A.mode==="light"){re(A.Alert,"errorColor",lt(A.error.light,.6)),re(A.Alert,"infoColor",lt(A.info.light,.6)),re(A.Alert,"successColor",lt(A.success.light,.6)),re(A.Alert,"warningColor",lt(A.warning.light,.6)),re(A.Alert,"errorFilledBg",$("palette-error-main")),re(A.Alert,"infoFilledBg",$("palette-info-main")),re(A.Alert,"successFilledBg",$("palette-success-main")),re(A.Alert,"warningFilledBg",$("palette-warning-main")),re(A.Alert,"errorFilledColor",In(()=>A.getContrastText(A.error.main))),re(A.Alert,"infoFilledColor",In(()=>A.getContrastText(A.info.main))),re(A.Alert,"successFilledColor",In(()=>A.getContrastText(A.success.main))),re(A.Alert,"warningFilledColor",In(()=>A.getContrastText(A.warning.main))),re(A.Alert,"errorStandardBg",ut(A.error.light,.9)),re(A.Alert,"infoStandardBg",ut(A.info.light,.9)),re(A.Alert,"successStandardBg",ut(A.success.light,.9)),re(A.Alert,"warningStandardBg",ut(A.warning.light,.9)),re(A.Alert,"errorIconColor",$("palette-error-main")),re(A.Alert,"infoIconColor",$("palette-info-main")),re(A.Alert,"successIconColor",$("palette-success-main")),re(A.Alert,"warningIconColor",$("palette-warning-main")),re(A.AppBar,"defaultBg",$("palette-grey-100")),re(A.Avatar,"defaultBg",$("palette-grey-400")),re(A.Button,"inheritContainedBg",$("palette-grey-300")),re(A.Button,"inheritContainedHoverBg",$("palette-grey-A100")),re(A.Chip,"defaultBorder",$("palette-grey-400")),re(A.Chip,"defaultAvatarColor",$("palette-grey-700")),re(A.Chip,"defaultIconColor",$("palette-grey-700")),re(A.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),re(A.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),re(A.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),re(A.LinearProgress,"primaryBg",ut(A.primary.main,.62)),re(A.LinearProgress,"secondaryBg",ut(A.secondary.main,.62)),re(A.LinearProgress,"errorBg",ut(A.error.main,.62)),re(A.LinearProgress,"infoBg",ut(A.info.main,.62)),re(A.LinearProgress,"successBg",ut(A.success.main,.62)),re(A.LinearProgress,"warningBg",ut(A.warning.main,.62)),re(A.Skeleton,"bg",`rgba(${$("palette-text-primaryChannel")} / 0.11)`),re(A.Slider,"primaryTrack",ut(A.primary.main,.62)),re(A.Slider,"secondaryTrack",ut(A.secondary.main,.62)),re(A.Slider,"errorTrack",ut(A.error.main,.62)),re(A.Slider,"infoTrack",ut(A.info.main,.62)),re(A.Slider,"successTrack",ut(A.success.main,.62)),re(A.Slider,"warningTrack",ut(A.warning.main,.62));const ie=Fu(A.background.default,.8);re(A.SnackbarContent,"bg",ie),re(A.SnackbarContent,"color",In(()=>A.getContrastText(ie))),re(A.SpeedDialAction,"fabHoverBg",Fu(A.background.paper,.15)),re(A.StepConnector,"border",$("palette-grey-400")),re(A.StepContent,"border",$("palette-grey-400")),re(A.Switch,"defaultColor",$("palette-common-white")),re(A.Switch,"defaultDisabledColor",$("palette-grey-100")),re(A.Switch,"primaryDisabledColor",ut(A.primary.main,.62)),re(A.Switch,"secondaryDisabledColor",ut(A.secondary.main,.62)),re(A.Switch,"errorDisabledColor",ut(A.error.main,.62)),re(A.Switch,"infoDisabledColor",ut(A.info.main,.62)),re(A.Switch,"successDisabledColor",ut(A.success.main,.62)),re(A.Switch,"warningDisabledColor",ut(A.warning.main,.62)),re(A.TableCell,"border",ut(Ou(A.divider,1),.88)),re(A.Tooltip,"bg",Ou(A.grey[700],.92))}if(A.mode==="dark"){re(A.Alert,"errorColor",ut(A.error.light,.6)),re(A.Alert,"infoColor",ut(A.info.light,.6)),re(A.Alert,"successColor",ut(A.success.light,.6)),re(A.Alert,"warningColor",ut(A.warning.light,.6)),re(A.Alert,"errorFilledBg",$("palette-error-dark")),re(A.Alert,"infoFilledBg",$("palette-info-dark")),re(A.Alert,"successFilledBg",$("palette-success-dark")),re(A.Alert,"warningFilledBg",$("palette-warning-dark")),re(A.Alert,"errorFilledColor",In(()=>A.getContrastText(A.error.dark))),re(A.Alert,"infoFilledColor",In(()=>A.getContrastText(A.info.dark))),re(A.Alert,"successFilledColor",In(()=>A.getContrastText(A.success.dark))),re(A.Alert,"warningFilledColor",In(()=>A.getContrastText(A.warning.dark))),re(A.Alert,"errorStandardBg",lt(A.error.light,.9)),re(A.Alert,"infoStandardBg",lt(A.info.light,.9)),re(A.Alert,"successStandardBg",lt(A.success.light,.9)),re(A.Alert,"warningStandardBg",lt(A.warning.light,.9)),re(A.Alert,"errorIconColor",$("palette-error-main")),re(A.Alert,"infoIconColor",$("palette-info-main")),re(A.Alert,"successIconColor",$("palette-success-main")),re(A.Alert,"warningIconColor",$("palette-warning-main")),re(A.AppBar,"defaultBg",$("palette-grey-900")),re(A.AppBar,"darkBg",$("palette-background-paper")),re(A.AppBar,"darkColor",$("palette-text-primary")),re(A.Avatar,"defaultBg",$("palette-grey-600")),re(A.Button,"inheritContainedBg",$("palette-grey-800")),re(A.Button,"inheritContainedHoverBg",$("palette-grey-700")),re(A.Chip,"defaultBorder",$("palette-grey-700")),re(A.Chip,"defaultAvatarColor",$("palette-grey-300")),re(A.Chip,"defaultIconColor",$("palette-grey-300")),re(A.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),re(A.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),re(A.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),re(A.LinearProgress,"primaryBg",lt(A.primary.main,.5)),re(A.LinearProgress,"secondaryBg",lt(A.secondary.main,.5)),re(A.LinearProgress,"errorBg",lt(A.error.main,.5)),re(A.LinearProgress,"infoBg",lt(A.info.main,.5)),re(A.LinearProgress,"successBg",lt(A.success.main,.5)),re(A.LinearProgress,"warningBg",lt(A.warning.main,.5)),re(A.Skeleton,"bg",`rgba(${$("palette-text-primaryChannel")} / 0.13)`),re(A.Slider,"primaryTrack",lt(A.primary.main,.5)),re(A.Slider,"secondaryTrack",lt(A.secondary.main,.5)),re(A.Slider,"errorTrack",lt(A.error.main,.5)),re(A.Slider,"infoTrack",lt(A.info.main,.5)),re(A.Slider,"successTrack",lt(A.success.main,.5)),re(A.Slider,"warningTrack",lt(A.warning.main,.5));const ie=Fu(A.background.default,.98);re(A.SnackbarContent,"bg",ie),re(A.SnackbarContent,"color",In(()=>A.getContrastText(ie))),re(A.SpeedDialAction,"fabHoverBg",Fu(A.background.paper,.15)),re(A.StepConnector,"border",$("palette-grey-600")),re(A.StepContent,"border",$("palette-grey-600")),re(A.Switch,"defaultColor",$("palette-grey-300")),re(A.Switch,"defaultDisabledColor",$("palette-grey-600")),re(A.Switch,"primaryDisabledColor",lt(A.primary.main,.55)),re(A.Switch,"secondaryDisabledColor",lt(A.secondary.main,.55)),re(A.Switch,"errorDisabledColor",lt(A.error.main,.55)),re(A.Switch,"infoDisabledColor",lt(A.info.main,.55)),re(A.Switch,"successDisabledColor",lt(A.success.main,.55)),re(A.Switch,"warningDisabledColor",lt(A.warning.main,.55)),re(A.TableCell,"border",lt(Ou(A.divider,1),.68)),re(A.Tooltip,"bg",Ou(A.grey[700],.92))}oi(A.background,"default"),oi(A.background,"paper"),oi(A.common,"background"),oi(A.common,"onBackground"),oi(A,"divider"),Object.keys(A).forEach(ie=>{const te=A[ie];ie!=="tonalOffset"&&te&&typeof te=="object"&&(te.main&&re(A[ie],"mainChannel",Ma(Na(te.main))),te.light&&re(A[ie],"lightChannel",Ma(Na(te.light))),te.dark&&re(A[ie],"darkChannel",Ma(Na(te.dark))),te.contrastText&&re(A[ie],"contrastTextChannel",Ma(Na(te.contrastText))),ie==="text"&&(oi(A[ie],"primary"),oi(A[ie],"secondary")),ie==="action"&&(te.active&&oi(A[ie],"active"),te.selected&&oi(A[ie],"selected")))})}),I=e.reduce((Q,A)=>Mr(Q,A),I);const w={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:a,getSelector:LO(I)},{vars:P,generateThemeVars:D,generateStyleSheets:U}=J_(I,w);return I.vars=P,Object.entries(I.colorSchemes[I.defaultColorScheme]).forEach(([Q,A])=>{I[Q]=A}),I.generateThemeVars=D,I.generateStyleSheets=U,I.generateSpacing=function(){return J1(f.spacing,sm(this))},I.getColorSchemeSelector=Z_(u),I.spacing=I.generateSpacing(),I.shouldSkipGeneratingVar=a,I.unstable_sxConfig={...nl,...f==null?void 0:f.unstable_sxConfig},I.unstable_sx=function(A){return Ds({sx:A,theme:this})},I.toRuntimeSource=sE,I}function vx(r,e,t){r.colorSchemes&&t&&(r.colorSchemes[e]={...t!==!0&&t,palette:vm({...t===!0?{}:t.palette,mode:e})})}function lE(r={},...e){const{palette:t,cssVariables:n=!1,colorSchemes:i=t?void 0:{light:!0},defaultColorScheme:o=t==null?void 0:t.mode,...a}=r,u=o||"light",c=i==null?void 0:i[u],f={...i,...t?{[u]:{...typeof c!="boolean"&&c,palette:t}}:void 0};if(n===!1){if(!("colorSchemes"in r))return dp(r,...e);let h=t;"palette"in r||f[u]&&(f[u]!==!0?h=f[u].palette:u==="dark"&&(h={mode:"dark"}));const p=dp({...r,palette:h},...e);return p.defaultColorScheme=u,p.colorSchemes=f,p.palette.mode==="light"&&(p.colorSchemes.light={...f.light!==!0&&f.light,palette:p.palette},vx(p,"dark",f.dark)),p.palette.mode==="dark"&&(p.colorSchemes.dark={...f.dark!==!0&&f.dark,palette:p.palette},vx(p,"light",f.light)),p}return!t&&!("light"in f)&&u==="light"&&(f.light=!0),IO({...a,colorSchemes:f,defaultColorScheme:u,...typeof n!="boolean"&&n},...e)}const uE=lE(),xm="$$material";function DO(){const r=Z1(uE);return r[xm]||r}function PO(r){return r!=="ownerState"&&r!=="theme"&&r!=="sx"&&r!=="as"}const cE=r=>PO(r)&&r!=="classes",$r=M_({themeId:xm,defaultTheme:uE,rootShouldForwardProp:cE}),sl=Y_;function mi(r){return W_(r)}function _O(r){return pi("MuiSvgIcon",r)}zn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const OO=r=>{const{color:e,fontSize:t,classes:n}=r,i={root:["root",e!=="inherit"&&`color${er(e)}`,`fontSize${er(t)}`]};return Zi(i,_O,n)},FO=$r("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.color!=="inherit"&&e[`color${er(t.color)}`],e[`fontSize${er(t.fontSize)}`]]}})(sl(({theme:r})=>{var e,t,n,i,o,a,u,c,f,h,p,g,x,y;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(e=r.transitions)==null?void 0:e.create)==null?void 0:i.call(e,"fill",{duration:(n=(t=(r.vars??r).transitions)==null?void 0:t.duration)==null?void 0:n.shorter}),variants:[{props:S=>!S.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((a=(o=r.typography)==null?void 0:o.pxToRem)==null?void 0:a.call(o,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((c=(u=r.typography)==null?void 0:u.pxToRem)==null?void 0:c.call(u,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((h=(f=r.typography)==null?void 0:f.pxToRem)==null?void 0:h.call(f,35))||"2.1875rem"}},...Object.entries((r.vars??r).palette).filter(([,S])=>S&&S.main).map(([S])=>{var T,R;return{props:{color:S},style:{color:(R=(T=(r.vars??r).palette)==null?void 0:T[S])==null?void 0:R.main}}}),{props:{color:"action"},style:{color:(g=(p=(r.vars??r).palette)==null?void 0:p.action)==null?void 0:g.active}},{props:{color:"disabled"},style:{color:(y=(x=(r.vars??r).palette)==null?void 0:x.action)==null?void 0:y.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),Cc=O.forwardRef(function(e,t){const n=mi({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:a="inherit",component:u="svg",fontSize:c="medium",htmlColor:f,inheritViewBox:h=!1,titleAccess:p,viewBox:g="0 0 24 24",...x}=n,y=O.isValidElement(i)&&i.type==="svg",S={...n,color:a,component:u,fontSize:c,instanceFontSize:e.fontSize,inheritViewBox:h,viewBox:g,hasSvgAsChild:y},T={};h||(T.viewBox=g);const R=OO(S);return W.jsxs(FO,{as:u,className:Dt(R.root,o),focusable:"false",color:f,"aria-hidden":p?void 0:!0,role:p?"img":void 0,ref:t,...T,...x,...y&&i.props,ownerState:S,children:[y?i.props.children:i,p?W.jsx("title",{children:p}):null]})});Cc&&(Cc.muiName="SvgIcon");function Sm(r,e){function t(n,i){return W.jsx(Cc,{"data-testid":`${e}Icon`,ref:i,...n,children:r})}return t.muiName=Cc.muiName,O.memo(O.forwardRef(t))}const MO=Sm(W.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 13.5v-7c0-.41.47-.65.8-.4l4.67 3.5c.27.2.27.6 0 .8l-4.67 3.5c-.33.25-.8.01-.8-.4"}),"PlayCircleFilledRounded");function NO(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}function hp(r,e){return hp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},hp(r,e)}function BO(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,hp(r,e)}const xx=Sn.createContext(null);function $O(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Em(r,e){var t=function(o){return e&&O.isValidElement(o)?e(o):o},n=Object.create(null);return r&&O.Children.map(r,function(i){return i}).forEach(function(i){n[i.key]=t(i)}),n}function UO(r,e){r=r||{},e=e||{};function t(h){return h in e?e[h]:r[h]}var n=Object.create(null),i=[];for(var o in r)o in e?i.length&&(n[o]=i,i=[]):i.push(o);var a,u={};for(var c in e){if(n[c])for(a=0;a<n[c].length;a++){var f=n[c][a];u[n[c][a]]=t(f)}u[c]=t(c)}for(a=0;a<i.length;a++)u[i[a]]=t(i[a]);return u}function ws(r,e,t){return t[e]!=null?t[e]:r.props[e]}function GO(r,e){return Em(r.children,function(t){return O.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:ws(t,"appear",r),enter:ws(t,"enter",r),exit:ws(t,"exit",r)})})}function jO(r,e,t){var n=Em(r.children),i=UO(e,n);return Object.keys(i).forEach(function(o){var a=i[o];if(O.isValidElement(a)){var u=o in e,c=o in n,f=e[o],h=O.isValidElement(f)&&!f.props.in;c&&(!u||h)?i[o]=O.cloneElement(a,{onExited:t.bind(null,a),in:!0,exit:ws(a,"exit",r),enter:ws(a,"enter",r)}):!c&&u&&!h?i[o]=O.cloneElement(a,{in:!1}):c&&u&&O.isValidElement(f)&&(i[o]=O.cloneElement(a,{onExited:t.bind(null,a),in:f.props.in,exit:ws(a,"exit",r),enter:ws(a,"enter",r)}))}}),i}var HO=Object.values||function(r){return Object.keys(r).map(function(e){return r[e]})},VO={component:"div",childFactory:function(e){return e}},Tm=function(r){BO(e,r);function e(n,i){var o;o=r.call(this,n,i)||this;var a=o.handleExited.bind($O(o));return o.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},o}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,o){var a=o.children,u=o.handleExited,c=o.firstRender;return{children:c?GO(i,u):jO(i,a,u),firstRender:!1}},t.handleExited=function(i,o){var a=Em(this.props.children);i.key in a||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(u){var c=Lc({},u.children);return delete c[i.key],{children:c}}))},t.render=function(){var i=this.props,o=i.component,a=i.childFactory,u=NO(i,["component","childFactory"]),c=this.state.contextValue,f=HO(this.state.children).map(a);return delete u.appear,delete u.enter,delete u.exit,o===null?Sn.createElement(xx.Provider,{value:c},f):Sn.createElement(xx.Provider,{value:c},Sn.createElement(o,u,f))},e}(Sn.Component);Tm.propTypes={};Tm.defaultProps=VO;function zO(r){return pi("MuiPaper",r)}zn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const KO=r=>{const{square:e,elevation:t,variant:n,classes:i}=r,o={root:["root",n,!e&&"rounded",n==="elevation"&&`elevation${t}`]};return Zi(o,zO,i)},WO=$r("div",{name:"MuiPaper",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(sl(({theme:r})=>({backgroundColor:(r.vars||r).palette.background.paper,color:(r.vars||r).palette.text.primary,transition:r.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:r.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(r.vars||r).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),YO=O.forwardRef(function(e,t){var x;const n=mi({props:e,name:"MuiPaper"}),i=DO(),{className:o,component:a="div",elevation:u=1,square:c=!1,variant:f="elevation",...h}=n,p={...n,component:a,elevation:u,square:c,variant:f},g=KO(p);return W.jsx(WO,{as:a,ownerState:p,className:Dt(g.root,o),ref:t,...h,style:{...f==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[u],...i.vars&&{"--Paper-overlay":(x=i.vars.overlays)==null?void 0:x[u]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${qi("#fff",fp(u))}, ${qi("#fff",fp(u))})`}},...h.style}})});class kc{constructor(){wa(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new kc}static use(){const e=O1(kc.create).current,[t,n]=O.useState(!1);return e.shouldMount=t,e.setShouldMount=n,O.useEffect(e.mountEffect,[t]),e}mount(){return this.mounted||(this.mounted=XO(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.start(...e)})}stop(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.stop(...e)})}pulsate(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.pulsate(...e)})}}function qO(){return kc.use()}function XO(){let r,e;const t=new Promise((n,i)=>{r=n,e=i});return t.resolve=r,t.reject=e,t}function QO(r){const{className:e,classes:t,pulsate:n=!1,rippleX:i,rippleY:o,rippleSize:a,in:u,onExited:c,timeout:f}=r,[h,p]=O.useState(!1),g=Dt(e,t.ripple,t.rippleVisible,n&&t.ripplePulsate),x={width:a,height:a,top:-(a/2)+o,left:-(a/2)+i},y=Dt(t.child,h&&t.childLeaving,n&&t.childPulsate);return!u&&!h&&p(!0),O.useEffect(()=>{if(!u&&c!=null){const S=setTimeout(c,f);return()=>{clearTimeout(S)}}},[c,u,f]),W.jsx("span",{className:g,style:x,children:W.jsx("span",{className:y})})}const en=zn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),pp=550,JO=80,ZO=hm`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,eF=hm`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,tF=hm`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,rF=$r("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),nF=$r(QO,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${en.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${ZO};
    animation-duration: ${pp}ms;
    animation-timing-function: ${({theme:r})=>r.transitions.easing.easeInOut};
  }

  &.${en.ripplePulsate} {
    animation-duration: ${({theme:r})=>r.transitions.duration.shorter}ms;
  }

  & .${en.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${en.childLeaving} {
    opacity: 0;
    animation-name: ${eF};
    animation-duration: ${pp}ms;
    animation-timing-function: ${({theme:r})=>r.transitions.easing.easeInOut};
  }

  & .${en.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${tF};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:r})=>r.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,iF=O.forwardRef(function(e,t){const n=mi({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:a,...u}=n,[c,f]=O.useState([]),h=O.useRef(0),p=O.useRef(null);O.useEffect(()=>{p.current&&(p.current(),p.current=null)},[c]);const g=O.useRef(!1),x=ED(),y=O.useRef(null),S=O.useRef(null),T=O.useCallback(I=>{const{pulsate:w,rippleX:P,rippleY:D,rippleSize:U,cb:Q}=I;f(A=>[...A,W.jsx(nF,{classes:{ripple:Dt(o.ripple,en.ripple),rippleVisible:Dt(o.rippleVisible,en.rippleVisible),ripplePulsate:Dt(o.ripplePulsate,en.ripplePulsate),child:Dt(o.child,en.child),childLeaving:Dt(o.childLeaving,en.childLeaving),childPulsate:Dt(o.childPulsate,en.childPulsate)},timeout:pp,pulsate:w,rippleX:P,rippleY:D,rippleSize:U},h.current)]),h.current+=1,p.current=Q},[o]),R=O.useCallback((I={},w={},P=()=>{})=>{const{pulsate:D=!1,center:U=i||w.pulsate,fakeElement:Q=!1}=w;if((I==null?void 0:I.type)==="mousedown"&&g.current){g.current=!1;return}(I==null?void 0:I.type)==="touchstart"&&(g.current=!0);const A=Q?null:S.current,$=A?A.getBoundingClientRect():{width:0,height:0,left:0,top:0};let ie,te,fe;if(U||I===void 0||I.clientX===0&&I.clientY===0||!I.clientX&&!I.touches)ie=Math.round($.width/2),te=Math.round($.height/2);else{const{clientX:de,clientY:pe}=I.touches&&I.touches.length>0?I.touches[0]:I;ie=Math.round(de-$.left),te=Math.round(pe-$.top)}if(U)fe=Math.sqrt((2*$.width**2+$.height**2)/3),fe%2===0&&(fe+=1);else{const de=Math.max(Math.abs((A?A.clientWidth:0)-ie),ie)*2+2,pe=Math.max(Math.abs((A?A.clientHeight:0)-te),te)*2+2;fe=Math.sqrt(de**2+pe**2)}I!=null&&I.touches?y.current===null&&(y.current=()=>{T({pulsate:D,rippleX:ie,rippleY:te,rippleSize:fe,cb:P})},x.start(JO,()=>{y.current&&(y.current(),y.current=null)})):T({pulsate:D,rippleX:ie,rippleY:te,rippleSize:fe,cb:P})},[i,T,x]),k=O.useCallback(()=>{R({},{pulsate:!0})},[R]),C=O.useCallback((I,w)=>{if(x.clear(),(I==null?void 0:I.type)==="touchend"&&y.current){y.current(),y.current=null,x.start(0,()=>{C(I,w)});return}y.current=null,f(P=>P.length>0?P.slice(1):P),p.current=w},[x]);return O.useImperativeHandle(t,()=>({pulsate:k,start:R,stop:C}),[k,R,C]),W.jsx(rF,{className:Dt(en.root,o.root,a),ref:S,...u,children:W.jsx(Tm,{component:null,exit:!0,children:c})})});function sF(r){return pi("MuiButtonBase",r)}const oF=zn("MuiButtonBase",["root","disabled","focusVisible"]),aF=r=>{const{disabled:e,focusVisible:t,focusVisibleClassName:n,classes:i}=r,a=Zi({root:["root",e&&"disabled",t&&"focusVisible"]},sF,i);return t&&n&&(a.root+=` ${n}`),a},lF=$r("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(r,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${oF.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),dE=O.forwardRef(function(e,t){const n=mi({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:a,className:u,component:c="button",disabled:f=!1,disableRipple:h=!1,disableTouchRipple:p=!1,focusRipple:g=!1,focusVisibleClassName:x,LinkComponent:y="a",onBlur:S,onClick:T,onContextMenu:R,onDragLeave:k,onFocus:C,onFocusVisible:I,onKeyDown:w,onKeyUp:P,onMouseDown:D,onMouseLeave:U,onMouseUp:Q,onTouchEnd:A,onTouchMove:$,onTouchStart:ie,tabIndex:te=0,TouchRippleProps:fe,touchRippleRef:de,type:pe,...ge}=n,ne=O.useRef(null),Y=qO(),q=zv(Y.ref,de),[F,H]=O.useState(!1);f&&F&&H(!1),O.useImperativeHandle(i,()=>({focusVisible:()=>{H(!0),ne.current.focus()}}),[]);const me=Y.shouldMount&&!h&&!f;O.useEffect(()=>{F&&g&&!h&&Y.pulsate()},[h,g,F,Y]);const ve=ai(Y,"start",D,p),Se=ai(Y,"stop",R,p),be=ai(Y,"stop",k,p),Me=ai(Y,"stop",Q,p),Be=ai(Y,"stop",ue=>{F&&ue.preventDefault(),U&&U(ue)},p),De=ai(Y,"start",ie,p),ot=ai(Y,"stop",A,p),rr=ai(Y,"stop",$,p),qt=ai(Y,"stop",ue=>{Wv(ue.target)||H(!1),S&&S(ue)},!1),nr=Ju(ue=>{ne.current||(ne.current=ue.currentTarget),Wv(ue.target)&&(H(!0),I&&I(ue)),C&&C(ue)}),on=()=>{const ue=ne.current;return c&&c!=="button"&&!(ue.tagName==="A"&&ue.href)},yi=Ju(ue=>{g&&!ue.repeat&&F&&ue.key===" "&&Y.stop(ue,()=>{Y.start(ue)}),ue.target===ue.currentTarget&&on()&&ue.key===" "&&ue.preventDefault(),w&&w(ue),ue.target===ue.currentTarget&&on()&&ue.key==="Enter"&&!f&&(ue.preventDefault(),T&&T(ue))}),Rn=Ju(ue=>{g&&ue.key===" "&&F&&!ue.defaultPrevented&&Y.stop(ue,()=>{Y.pulsate(ue)}),P&&P(ue),T&&ue.target===ue.currentTarget&&on()&&ue.key===" "&&!ue.defaultPrevented&&T(ue)});let Ur=c;Ur==="button"&&(ge.href||ge.to)&&(Ur=y);const Gr={};Ur==="button"?(Gr.type=pe===void 0?"button":pe,Gr.disabled=f):(!ge.href&&!ge.to&&(Gr.role="button"),f&&(Gr["aria-disabled"]=f));const Kn=zv(t,ne),jr={...n,centerRipple:o,component:c,disabled:f,disableRipple:h,disableTouchRipple:p,focusRipple:g,tabIndex:te,focusVisible:F},Gt=aF(jr);return W.jsxs(lF,{as:Ur,className:Dt(Gt.root,u),ownerState:jr,onBlur:qt,onClick:T,onContextMenu:Se,onFocus:nr,onKeyDown:yi,onKeyUp:Rn,onMouseDown:ve,onMouseLeave:Be,onMouseUp:Me,onDragLeave:be,onTouchEnd:ot,onTouchMove:rr,onTouchStart:De,ref:Kn,tabIndex:f?-1:te,type:pe,...Gr,...ge,children:[a,me?W.jsx(iF,{ref:q,center:o,...fe}):null]})});function ai(r,e,t,n=!1){return Ju(i=>(t&&t(i),n||r[e](i),!0))}function uF(r){return typeof r.main=="string"}function cF(r,e=[]){if(!uF(r))return!1;for(const t of e)if(!r.hasOwnProperty(t)||typeof r[t]!="string")return!1;return!0}function dF(r=[]){return([,e])=>e&&cF(e,r)}const fF=zn("MuiBox",["root"]),hF=lE(),pF=P_({themeId:xm,defaultTheme:hF,defaultClassName:fF.root,generateClassName:F1.generate});function mF(r){return pi("MuiButton",r)}const Eo=zn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),gF=O.createContext({}),yF=O.createContext(void 0),vF=r=>{const{color:e,disableElevation:t,fullWidth:n,size:i,variant:o,classes:a}=r,u={root:["root",o,`${o}${er(e)}`,`size${er(i)}`,`${o}Size${er(i)}`,`color${er(e)}`,t&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${er(i)}`],endIcon:["icon","endIcon",`iconSize${er(i)}`]},c=Zi(u,mF,a);return{...a,...c}},fE=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],xF=$r(dE,{shouldForwardProp:r=>cE(r)||r==="classes",name:"MuiButton",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],e[`${t.variant}${er(t.color)}`],e[`size${er(t.size)}`],e[`${t.variant}Size${er(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth]}})(sl(({theme:r})=>{const e=r.palette.mode==="light"?r.palette.grey[300]:r.palette.grey[800],t=r.palette.mode==="light"?r.palette.grey.A100:r.palette.grey[700];return{...r.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(r.vars||r).shape.borderRadius,transition:r.transitions.create(["background-color","box-shadow","border-color","color"],{duration:r.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Eo.disabled}`]:{color:(r.vars||r).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(r.vars||r).shadows[2],"&:hover":{boxShadow:(r.vars||r).shadows[4],"@media (hover: none)":{boxShadow:(r.vars||r).shadows[2]}},"&:active":{boxShadow:(r.vars||r).shadows[8]},[`&.${Eo.focusVisible}`]:{boxShadow:(r.vars||r).shadows[6]},[`&.${Eo.disabled}`]:{color:(r.vars||r).palette.action.disabled,boxShadow:(r.vars||r).shadows[0],backgroundColor:(r.vars||r).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Eo.disabled}`]:{border:`1px solid ${(r.vars||r).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(r.palette).filter(dF()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(r.vars||r).palette[n].main,"--variant-outlinedColor":(r.vars||r).palette[n].main,"--variant-outlinedBorder":r.vars?`rgba(${r.vars.palette[n].mainChannel} / 0.5)`:qi(r.palette[n].main,.5),"--variant-containedColor":(r.vars||r).palette[n].contrastText,"--variant-containedBg":(r.vars||r).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(r.vars||r).palette[n].dark,"--variant-textBg":r.vars?`rgba(${r.vars.palette[n].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:qi(r.palette[n].main,r.palette.action.hoverOpacity),"--variant-outlinedBorder":(r.vars||r).palette[n].main,"--variant-outlinedBg":r.vars?`rgba(${r.vars.palette[n].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:qi(r.palette[n].main,r.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":r.vars?r.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":r.vars?r.vars.palette.Button.inheritContainedHoverBg:t,"--variant-textBg":r.vars?`rgba(${r.vars.palette.text.primaryChannel} / ${r.vars.palette.action.hoverOpacity})`:qi(r.palette.text.primary,r.palette.action.hoverOpacity),"--variant-outlinedBg":r.vars?`rgba(${r.vars.palette.text.primaryChannel} / ${r.vars.palette.action.hoverOpacity})`:qi(r.palette.text.primary,r.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:r.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:r.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:r.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:r.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:r.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:r.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Eo.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Eo.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}}]}})),SF=$r("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.startIcon,e[`iconSize${er(t.size)}`]]}})({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},...fE]}),EF=$r("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.endIcon,e[`iconSize${er(t.size)}`]]}})({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},...fE]}),mp=O.forwardRef(function(e,t){const n=O.useContext(gF),i=O.useContext(yF),o=Rc(n,e),a=mi({props:o,name:"MuiButton"}),{children:u,color:c="primary",component:f="button",className:h,disabled:p=!1,disableElevation:g=!1,disableFocusRipple:x=!1,endIcon:y,focusVisibleClassName:S,fullWidth:T=!1,size:R="medium",startIcon:k,type:C,variant:I="text",...w}=a,P={...a,color:c,component:f,disabled:p,disableElevation:g,disableFocusRipple:x,fullWidth:T,size:R,type:C,variant:I},D=vF(P),U=k&&W.jsx(SF,{className:D.startIcon,ownerState:P,children:k}),Q=y&&W.jsx(EF,{className:D.endIcon,ownerState:P,children:y}),A=i||"";return W.jsxs(xF,{ownerState:P,className:Dt(n.className,D.root,h,A),component:f,disabled:p,focusRipple:!x,focusVisibleClassName:Dt(D.focusVisible,S),ref:t,type:C,...w,classes:D,children:[U,u,Q]})});function TF(r){return pi("MuiCard",r)}zn("MuiCard",["root"]);const wF=r=>{const{classes:e}=r;return Zi({root:["root"]},TF,e)},RF=$r(YO,{name:"MuiCard",slot:"Root",overridesResolver:(r,e)=>e.root})({overflow:"hidden"}),AF=O.forwardRef(function(e,t){const n=mi({props:e,name:"MuiCard"}),{className:i,raised:o=!1,...a}=n,u={...n,raised:o},c=wF(u);return W.jsx(RF,{className:Dt(c.root,i),elevation:o?8:void 0,ref:t,ownerState:u,...a})});function LF(r){return pi("MuiCardActionArea",r)}const Ih=zn("MuiCardActionArea",["root","focusVisible","focusHighlight"]),bF=r=>{const{classes:e}=r;return Zi({root:["root"],focusHighlight:["focusHighlight"]},LF,e)},CF=$r(dE,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(r,e)=>e.root})(sl(({theme:r})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${Ih.focusHighlight}`]:{opacity:(r.vars||r).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${Ih.focusVisible} .${Ih.focusHighlight}`]:{opacity:(r.vars||r).palette.action.focusOpacity}}))),kF=$r("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(r,e)=>e.focusHighlight})(sl(({theme:r})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:r.transitions.create("opacity",{duration:r.transitions.duration.short})}))),IF=O.forwardRef(function(e,t){const n=mi({props:e,name:"MuiCardActionArea"}),{children:i,className:o,focusVisibleClassName:a,...u}=n,c=n,f=bF(c);return W.jsxs(CF,{className:Dt(f.root,o),focusVisibleClassName:Dt(a,f.focusVisible),ref:t,ownerState:c,...u,children:[i,W.jsx(kF,{className:f.focusHighlight,ownerState:c})]})});function DF(r){return pi("MuiCardContent",r)}zn("MuiCardContent",["root"]);const PF=r=>{const{classes:e}=r;return Zi({root:["root"]},DF,e)},_F=$r("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(r,e)=>e.root})({padding:16,"&:last-child":{paddingBottom:24}}),OF=O.forwardRef(function(e,t){const n=mi({props:e,name:"MuiCardContent"}),{className:i,component:o="div",...a}=n,u={...n,component:o},c=PF(u);return W.jsx(_F,{as:o,className:Dt(c.root,i),ownerState:u,ref:t,...a})});function FF(r){return pi("MuiCardMedia",r)}zn("MuiCardMedia",["root","media","img"]);const MF=r=>{const{classes:e,isMediaComponent:t,isImageComponent:n}=r;return Zi({root:["root",t&&"media",n&&"img"]},FF,e)},NF=$r("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r,{isMediaComponent:n,isImageComponent:i}=t;return[e.root,n&&e.media,i&&e.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),BF=["video","audio","picture","iframe","img"],$F=["picture","img"],UF=O.forwardRef(function(e,t){const n=mi({props:e,name:"MuiCardMedia"}),{children:i,className:o,component:a="div",image:u,src:c,style:f,...h}=n,p=BF.includes(a),g=!p&&u?{backgroundImage:`url("${u}")`,...f}:f,x={...n,component:a,isMediaComponent:p,isImageComponent:$F.includes(a)},y=MF(x);return W.jsx(NF,{className:Dt(y.root,o),as:a,role:!p&&u?"img":void 0,ref:t,style:g,ownerState:x,src:p?u||c:void 0,...h,children:i})}),GF=({job:r})=>{const{setPlaying:e,PlayerHandler:t}=gi(),i=r.image.replace(/\\/g,"/").replace("public/","");return W.jsx(gD,{children:W.jsx(AF,{className:"myCard",onClick:()=>{e(!1),t(!0,r.url)},sx:{maxWidth:345,marginBottom:"10px",borderRadius:"15px",boxShadow:"0px 0px 15px #8A8887",border:"0px"},children:W.jsxs(IF,{children:[W.jsxs(pF,{sx:{position:"relative",height:140,display:"flex",justifyContent:"center",alignItems:"center"},children:[W.jsx(UF,{component:"img",height:"140",image:`${i}`,alt:"green iguana"}),W.jsx(MO,{sx:{position:"absolute",fontSize:"48px",color:"#34E628",backgroundColor:"white",borderRadius:"25px",transition:"transform 0.5s linear","&:hover":{color:"#076900",backgroundColor:"transparent",border:"1px solid white",transform:"scaleX(-1)"}}})]}),W.jsx(OF,{children:W.jsx("div",{className:"h4",children:W.jsx("p",{children:r.title})})})]})})})},jF=Ar.div`

position: relative;

@media (max-width: 1600px) {
    display: flex;
    align-items: center;
    flex-direction: row;
    justify-content: space-around;
    flex-wrap: wrap;
    top: 153px;
      h4 {
        margin-left: 20px;
        font-size: 20px;
    }

}

@media (max-width: 1200px) {
    display: flex;
    align-items: center;
    flex-direction: row;
    justify-content: space-around;
    flex-wrap: wrap;
    top: 160px;
      h4 {
        margin-left: 18px;
        font-size: 20px;
    }

}

@media (max-width: 1024px) {
    display: flex;
    align-items: center;
    flex-direction: row;
    justify-content: space-around;
    flex-wrap: wrap;
    top: 150px;
      h4 {
        margin-left: 15px;
        font-size: 18px;
    }


}

@media (max-width: 768px) {
    display: flex;
    align-items: center;
    flex-direction: row;
    justify-content: space-around;
    flex-wrap: wrap;
    top: 150px;
     h4 {
        margin-left: 10px;
        font-size: 15px;
    }


}

@media (max-width: 600px) {
    display: flex;
    align-items: center;
    flex-direction: row;
    justify-content: space-around;
    flex-wrap: wrap;
    top: 143px;
    h4 {
        margin-left: 10px;
        font-size: 12px;
    }

}

.otherVideo{
    width: 95vw;
}
h4 {
    margin-bottom: 10px;
    font-family: system-ui;
    color: #737373;
}
hr {
    border: 2px solid #DCDCDC;
    margin-bottom: 20px;
    width: 89vw;
}
`,HF=()=>{const[r,e]=O.useState(!1),{videos:t}=gi();return console.log(t),O.useEffect(()=>{t?(console.log("video there"),e(!0)):e(!1)},[t]),W.jsxs(jF,{children:[W.jsxs("div",{className:"otherVideo",children:[W.jsx("h4",{children:"Our Playlist"}),W.jsx("hr",{})]}),r?t.map(n=>W.jsx(GF,{job:n},n.id)):W.jsx("h3",{children:"No videos there"})]})};Ar.div`
.footer{
    background-color: rgb(3, 3, 3);
    height: 10px;
    padding: 5px 10px;
    position: fixed;
    bottom: 0px;
    width: 100vw;

}


`;const VF=Ar.div`

display: grid;
grid-template-columns: 30vw 30vw 30vw;
justify-content: center;
background-color: #D9DACF;
padding: 10px;
    div {
        justify-self: center;
        cursor: pointer;
        transition: margin-top 0.4s ease;
        font-weight: 600;
    }
    
    div:hover {
        margin-top: -3px;
    }

    @media (max-width: 600px) {
        .panel {
            font-size: 10px;
        }
    }
`,zF=()=>{const{AddLiveModalHandler:r,AddVideoModalHandler:e,handleLogoUpdateModel:t}=gi();return W.jsxs(VF,{children:[W.jsx("div",{className:"panel",onClick:()=>r(!0),children:"Change Live Stream"}),W.jsx("div",{className:"panel",onClick:()=>e(!0),children:"Add Video"}),W.jsx("div",{className:"panel",onClick:()=>t(!0),children:"Update Logo"})]})},KF=Ar.div`
    
  .social {
    color: white;
    position: absolute;
    margin: auto;
    display: flex;
    align-content: flex-start;
    flex-wrap: wrap;
    display: flex;
    justify-content: space-evenly;
    width: 90vw;
    animation: dropdown 2s ease-out forwards; 
    
  }

  .icon {
    transition : filter 0.3s ease;
    cursor: pointer;
  }

  .icon:hover {
    transform: scale(1.4);
    filter: drop-shadow(0px 0px 20px #C7C9AF);
  }

  
  @media (max-width: 1600px){
    svg {
        width: 25px;
    }
    .social {
        top: 22vh;
    }
    
  }

  @media (max-width: 1200px){
    svg {
        width: 22px;
    }
    .social {
        top: 22vh;
    }
    
  }

   @media (max-width: 1024px){
    svg {
        width: 21px;
    }
    .social {
        top: 21vh;
    }
    
  }

   @media (max-width: 768px){
    svg {
        width: 19px;
    }
    .social {
        top: 21vh;
    }
    
  }

  @media (max-width: 600px){
    svg {
        width: 18px;
    }
    .social {
        top: 21vh;
    }
    
  }


   @media (max-width: 450px){
    svg {
        width: 15px;
    }
    .social {
        top: 20vh;
    }
    
  }

  

  @media (max-width: 320px){
    svg {
        width: 15px;
    }
    .social {
        top: 18vh;
    }
    
  }

`,WF=()=>W.jsx(KF,{children:W.jsxs("div",{className:"social",children:[W.jsx("div",{onClick:()=>{window.open("https://www.facebook.com/share/QoSge7JJTbWeN2FU/?mibextid=LQQJ4d")},className:"icon",children:W.jsx("svg",{fill:"white",stroke:"black",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:W.jsx("path",{d:"M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"})})}),W.jsx("div",{className:"icon",children:W.jsx("svg",{fill:"white",stroke:"black",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:W.jsx("path",{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"})})}),W.jsx("div",{onClick:()=>{window.open("https://x.com/sitepad")},className:"icon",children:W.jsx("svg",{fill:"white",stroke:"black",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:W.jsx("path",{d:"M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"})})}),W.jsx("div",{className:"icon",children:W.jsx("svg",{fill:"white",stroke:"black",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512",children:W.jsx("path",{d:"M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3 .8-3.4 5-20.3 6.9-28.1 .6-2.5 .3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z"})})})]})}),YF=Sm(W.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2"}),"Circle"),qF=Sm(W.jsx("path",{d:"M21 6h-7.59l3.29-3.29L16 2l-4 4-4-4-.71.71L10.59 6H3c-1.1 0-2 .89-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.11-.9-2-2-2m0 14H3V8h18zM9 10v8l7-4z"}),"LiveTv");function hE(r,e){return function(){return r.apply(e,arguments)}}const{toString:XF}=Object.prototype,{getPrototypeOf:wm}=Object,rd=(r=>e=>{const t=XF.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),wn=r=>(r=r.toLowerCase(),e=>rd(e)===r),nd=r=>e=>typeof e===r,{isArray:Uo}=Array,Xa=nd("undefined");function QF(r){return r!==null&&!Xa(r)&&r.constructor!==null&&!Xa(r.constructor)&&Br(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const pE=wn("ArrayBuffer");function JF(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&pE(r.buffer),e}const ZF=nd("string"),Br=nd("function"),mE=nd("number"),id=r=>r!==null&&typeof r=="object",e2=r=>r===!0||r===!1,nc=r=>{if(rd(r)!=="object")return!1;const e=wm(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},t2=wn("Date"),r2=wn("File"),n2=wn("Blob"),i2=wn("FileList"),s2=r=>id(r)&&Br(r.pipe),o2=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||Br(r.append)&&((e=rd(r))==="formdata"||e==="object"&&Br(r.toString)&&r.toString()==="[object FormData]"))},a2=wn("URLSearchParams"),[l2,u2,c2,d2]=["ReadableStream","Request","Response","Headers"].map(wn),f2=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ol(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),Uo(r))for(n=0,i=r.length;n<i;n++)e.call(null,r[n],n,r);else{const o=t?Object.getOwnPropertyNames(r):Object.keys(r),a=o.length;let u;for(n=0;n<a;n++)u=o[n],e.call(null,r[u],u,r)}}function gE(r,e){e=e.toLowerCase();const t=Object.keys(r);let n=t.length,i;for(;n-- >0;)if(i=t[n],e===i.toLowerCase())return i;return null}const Rs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,yE=r=>!Xa(r)&&r!==Rs;function gp(){const{caseless:r}=yE(this)&&this||{},e={},t=(n,i)=>{const o=r&&gE(e,i)||i;nc(e[o])&&nc(n)?e[o]=gp(e[o],n):nc(n)?e[o]=gp({},n):Uo(n)?e[o]=n.slice():e[o]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&ol(arguments[n],t);return e}const h2=(r,e,t,{allOwnKeys:n}={})=>(ol(e,(i,o)=>{t&&Br(i)?r[o]=hE(i,t):r[o]=i},{allOwnKeys:n}),r),p2=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),m2=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},g2=(r,e,t,n)=>{let i,o,a;const u={};if(e=e||{},r==null)return e;do{for(i=Object.getOwnPropertyNames(r),o=i.length;o-- >0;)a=i[o],(!n||n(a,r,e))&&!u[a]&&(e[a]=r[a],u[a]=!0);r=t!==!1&&wm(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},y2=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},v2=r=>{if(!r)return null;if(Uo(r))return r;let e=r.length;if(!mE(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},x2=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&wm(Uint8Array)),S2=(r,e)=>{const n=(r&&r[Symbol.iterator]).call(r);let i;for(;(i=n.next())&&!i.done;){const o=i.value;e.call(r,o[0],o[1])}},E2=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},T2=wn("HTMLFormElement"),w2=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,i){return n.toUpperCase()+i}),Sx=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),R2=wn("RegExp"),vE=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};ol(t,(i,o)=>{let a;(a=e(i,o,r))!==!1&&(n[o]=a||i)}),Object.defineProperties(r,n)},A2=r=>{vE(r,(e,t)=>{if(Br(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(Br(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},L2=(r,e)=>{const t={},n=i=>{i.forEach(o=>{t[o]=!0})};return Uo(r)?n(r):n(String(r).split(e)),t},b2=()=>{},C2=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e,Dh="abcdefghijklmnopqrstuvwxyz",Ex="0123456789",xE={DIGIT:Ex,ALPHA:Dh,ALPHA_DIGIT:Dh+Dh.toUpperCase()+Ex},k2=(r=16,e=xE.ALPHA_DIGIT)=>{let t="";const{length:n}=e;for(;r--;)t+=e[Math.random()*n|0];return t};function I2(r){return!!(r&&Br(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const D2=r=>{const e=new Array(10),t=(n,i)=>{if(id(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const o=Uo(n)?[]:{};return ol(n,(a,u)=>{const c=t(a,i+1);!Xa(c)&&(o[u]=c)}),e[i]=void 0,o}}return n};return t(r,0)},P2=wn("AsyncFunction"),_2=r=>r&&(id(r)||Br(r))&&Br(r.then)&&Br(r.catch),SE=((r,e)=>r?setImmediate:e?((t,n)=>(Rs.addEventListener("message",({source:i,data:o})=>{i===Rs&&o===t&&n.length&&n.shift()()},!1),i=>{n.push(i),Rs.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Br(Rs.postMessage)),O2=typeof queueMicrotask<"u"?queueMicrotask.bind(Rs):typeof process<"u"&&process.nextTick||SE,ee={isArray:Uo,isArrayBuffer:pE,isBuffer:QF,isFormData:o2,isArrayBufferView:JF,isString:ZF,isNumber:mE,isBoolean:e2,isObject:id,isPlainObject:nc,isReadableStream:l2,isRequest:u2,isResponse:c2,isHeaders:d2,isUndefined:Xa,isDate:t2,isFile:r2,isBlob:n2,isRegExp:R2,isFunction:Br,isStream:s2,isURLSearchParams:a2,isTypedArray:x2,isFileList:i2,forEach:ol,merge:gp,extend:h2,trim:f2,stripBOM:p2,inherits:m2,toFlatObject:g2,kindOf:rd,kindOfTest:wn,endsWith:y2,toArray:v2,forEachEntry:S2,matchAll:E2,isHTMLForm:T2,hasOwnProperty:Sx,hasOwnProp:Sx,reduceDescriptors:vE,freezeMethods:A2,toObjectSet:L2,toCamelCase:w2,noop:b2,toFiniteNumber:C2,findKey:gE,global:Rs,isContextDefined:yE,ALPHABET:xE,generateString:k2,isSpecCompliantForm:I2,toJSONObject:D2,isAsyncFn:P2,isThenable:_2,setImmediate:SE,asap:O2};function He(r,e,t,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}ee.inherits(He,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const EE=He.prototype,TE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{TE[r]={value:r}});Object.defineProperties(He,TE);Object.defineProperty(EE,"isAxiosError",{value:!0});He.from=(r,e,t,n,i,o)=>{const a=Object.create(EE);return ee.toFlatObject(r,a,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),He.call(a,r.message,e,t,n,i),a.cause=r,a.name=r.name,o&&Object.assign(a,o),a};const F2=null;function yp(r){return ee.isPlainObject(r)||ee.isArray(r)}function wE(r){return ee.endsWith(r,"[]")?r.slice(0,-2):r}function Tx(r,e,t){return r?r.concat(e).map(function(i,o){return i=wE(i),!t&&o?"["+i+"]":i}).join(t?".":""):e}function M2(r){return ee.isArray(r)&&!r.some(yp)}const N2=ee.toFlatObject(ee,{},null,function(e){return/^is[A-Z]/.test(e)});function sd(r,e,t){if(!ee.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=ee.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,T){return!ee.isUndefined(T[S])});const n=t.metaTokens,i=t.visitor||h,o=t.dots,a=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(e);if(!ee.isFunction(i))throw new TypeError("visitor must be a function");function f(y){if(y===null)return"";if(ee.isDate(y))return y.toISOString();if(!c&&ee.isBlob(y))throw new He("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(y)||ee.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function h(y,S,T){let R=y;if(y&&!T&&typeof y=="object"){if(ee.endsWith(S,"{}"))S=n?S:S.slice(0,-2),y=JSON.stringify(y);else if(ee.isArray(y)&&M2(y)||(ee.isFileList(y)||ee.endsWith(S,"[]"))&&(R=ee.toArray(y)))return S=wE(S),R.forEach(function(C,I){!(ee.isUndefined(C)||C===null)&&e.append(a===!0?Tx([S],I,o):a===null?S:S+"[]",f(C))}),!1}return yp(y)?!0:(e.append(Tx(T,S,o),f(y)),!1)}const p=[],g=Object.assign(N2,{defaultVisitor:h,convertValue:f,isVisitable:yp});function x(y,S){if(!ee.isUndefined(y)){if(p.indexOf(y)!==-1)throw Error("Circular reference detected in "+S.join("."));p.push(y),ee.forEach(y,function(R,k){(!(ee.isUndefined(R)||R===null)&&i.call(e,R,ee.isString(k)?k.trim():k,S,g))===!0&&x(R,S?S.concat(k):[k])}),p.pop()}}if(!ee.isObject(r))throw new TypeError("data must be an object");return x(r),e}function wx(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Rm(r,e){this._pairs=[],r&&sd(r,this,e)}const RE=Rm.prototype;RE.append=function(e,t){this._pairs.push([e,t])};RE.toString=function(e){const t=e?function(n){return e.call(this,n,wx)}:wx;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function B2(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function AE(r,e,t){if(!e)return r;const n=t&&t.encode||B2;ee.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let o;if(i?o=i(e,t):o=ee.isURLSearchParams(e)?e.toString():new Rm(e,t).toString(n),o){const a=r.indexOf("#");a!==-1&&(r=r.slice(0,a)),r+=(r.indexOf("?")===-1?"?":"&")+o}return r}class Rx{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ee.forEach(this.handlers,function(n){n!==null&&e(n)})}}const LE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$2=typeof URLSearchParams<"u"?URLSearchParams:Rm,U2=typeof FormData<"u"?FormData:null,G2=typeof Blob<"u"?Blob:null,j2={isBrowser:!0,classes:{URLSearchParams:$2,FormData:U2,Blob:G2},protocols:["http","https","file","blob","url","data"]},Am=typeof window<"u"&&typeof document<"u",vp=typeof navigator=="object"&&navigator||void 0,H2=Am&&(!vp||["ReactNative","NativeScript","NS"].indexOf(vp.product)<0),V2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",z2=Am&&window.location.href||"http://localhost",K2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Am,hasStandardBrowserEnv:H2,hasStandardBrowserWebWorkerEnv:V2,navigator:vp,origin:z2},Symbol.toStringTag,{value:"Module"})),cr={...K2,...j2};function W2(r,e){return sd(r,new cr.classes.URLSearchParams,Object.assign({visitor:function(t,n,i,o){return cr.isNode&&ee.isBuffer(t)?(this.append(n,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function Y2(r){return ee.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function q2(r){const e={},t=Object.keys(r);let n;const i=t.length;let o;for(n=0;n<i;n++)o=t[n],e[o]=r[o];return e}function bE(r){function e(t,n,i,o){let a=t[o++];if(a==="__proto__")return!0;const u=Number.isFinite(+a),c=o>=t.length;return a=!a&&ee.isArray(i)?i.length:a,c?(ee.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!u):((!i[a]||!ee.isObject(i[a]))&&(i[a]=[]),e(t,n,i[a],o)&&ee.isArray(i[a])&&(i[a]=q2(i[a])),!u)}if(ee.isFormData(r)&&ee.isFunction(r.entries)){const t={};return ee.forEachEntry(r,(n,i)=>{e(Y2(n),i,t,0)}),t}return null}function X2(r,e,t){if(ee.isString(r))try{return(e||JSON.parse)(r),ee.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(r)}const al={transitional:LE,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,o=ee.isObject(e);if(o&&ee.isHTMLForm(e)&&(e=new FormData(e)),ee.isFormData(e))return i?JSON.stringify(bE(e)):e;if(ee.isArrayBuffer(e)||ee.isBuffer(e)||ee.isStream(e)||ee.isFile(e)||ee.isBlob(e)||ee.isReadableStream(e))return e;if(ee.isArrayBufferView(e))return e.buffer;if(ee.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return W2(e,this.formSerializer).toString();if((u=ee.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return sd(u?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),X2(e)):e}],transformResponse:[function(e){const t=this.transitional||al.transitional,n=t&&t.forcedJSONParsing,i=this.responseType==="json";if(ee.isResponse(e)||ee.isReadableStream(e))return e;if(e&&ee.isString(e)&&(n&&!this.responseType||i)){const a=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(a)throw u.name==="SyntaxError"?He.from(u,He.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:cr.classes.FormData,Blob:cr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],r=>{al.headers[r]={}});const Q2=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),J2=r=>{const e={};let t,n,i;return r&&r.split(`
`).forEach(function(a){i=a.indexOf(":"),t=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!t||e[t]&&Q2[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},Ax=Symbol("internals");function Pa(r){return r&&String(r).trim().toLowerCase()}function ic(r){return r===!1||r==null?r:ee.isArray(r)?r.map(ic):String(r)}function Z2(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const eM=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Ph(r,e,t,n,i){if(ee.isFunction(n))return n.call(this,e,t);if(i&&(e=t),!!ee.isString(e)){if(ee.isString(n))return e.indexOf(n)!==-1;if(ee.isRegExp(n))return n.test(e)}}function tM(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function rM(r,e){const t=ee.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(i,o,a){return this[n].call(this,e,i,o,a)},configurable:!0})})}class wr{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function o(u,c,f){const h=Pa(c);if(!h)throw new Error("header name must be a non-empty string");const p=ee.findKey(i,h);(!p||i[p]===void 0||f===!0||f===void 0&&i[p]!==!1)&&(i[p||c]=ic(u))}const a=(u,c)=>ee.forEach(u,(f,h)=>o(f,h,c));if(ee.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(ee.isString(e)&&(e=e.trim())&&!eM(e))a(J2(e),t);else if(ee.isHeaders(e))for(const[u,c]of e.entries())o(c,u,n);else e!=null&&o(t,e,n);return this}get(e,t){if(e=Pa(e),e){const n=ee.findKey(this,e);if(n){const i=this[n];if(!t)return i;if(t===!0)return Z2(i);if(ee.isFunction(t))return t.call(this,i,n);if(ee.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Pa(e),e){const n=ee.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Ph(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let i=!1;function o(a){if(a=Pa(a),a){const u=ee.findKey(n,a);u&&(!t||Ph(n,n[u],u,t))&&(delete n[u],i=!0)}}return ee.isArray(e)?e.forEach(o):o(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const o=t[n];(!e||Ph(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const t=this,n={};return ee.forEach(this,(i,o)=>{const a=ee.findKey(n,o);if(a){t[a]=ic(i),delete t[o];return}const u=e?tM(o):String(o).trim();u!==o&&delete t[o],t[u]=ic(i),n[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ee.forEach(this,(n,i)=>{n!=null&&n!==!1&&(t[i]=e&&ee.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[Ax]=this[Ax]={accessors:{}}).accessors,i=this.prototype;function o(a){const u=Pa(a);n[u]||(rM(i,a),n[u]=!0)}return ee.isArray(e)?e.forEach(o):o(e),this}}wr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(wr.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});ee.freezeMethods(wr);function _h(r,e){const t=this||al,n=e||t,i=wr.from(n.headers);let o=n.data;return ee.forEach(r,function(u){o=u.call(t,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function CE(r){return!!(r&&r.__CANCEL__)}function Go(r,e,t){He.call(this,r??"canceled",He.ERR_CANCELED,e,t),this.name="CanceledError"}ee.inherits(Go,He,{__CANCEL__:!0});function kE(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new He("Request failed with status code "+t.status,[He.ERR_BAD_REQUEST,He.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function nM(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function iM(r,e){r=r||10;const t=new Array(r),n=new Array(r);let i=0,o=0,a;return e=e!==void 0?e:1e3,function(c){const f=Date.now(),h=n[o];a||(a=f),t[i]=c,n[i]=f;let p=o,g=0;for(;p!==i;)g+=t[p++],p=p%r;if(i=(i+1)%r,i===o&&(o=(o+1)%r),f-a<e)return;const x=h&&f-h;return x?Math.round(g*1e3/x):void 0}}function sM(r,e){let t=0,n=1e3/e,i,o;const a=(f,h=Date.now())=>{t=h,i=null,o&&(clearTimeout(o),o=null),r.apply(null,f)};return[(...f)=>{const h=Date.now(),p=h-t;p>=n?a(f,h):(i=f,o||(o=setTimeout(()=>{o=null,a(i)},n-p)))},()=>i&&a(i)]}const Ic=(r,e,t=3)=>{let n=0;const i=iM(50,250);return sM(o=>{const a=o.loaded,u=o.lengthComputable?o.total:void 0,c=a-n,f=i(c),h=a<=u;n=a;const p={loaded:a,total:u,progress:u?a/u:void 0,bytes:c,rate:f||void 0,estimated:f&&u&&h?(u-a)/f:void 0,event:o,lengthComputable:u!=null,[e?"download":"upload"]:!0};r(p)},t)},Lx=(r,e)=>{const t=r!=null;return[n=>e[0]({lengthComputable:t,total:r,loaded:n}),e[1]]},bx=r=>(...e)=>ee.asap(()=>r(...e)),oM=cr.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,cr.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(cr.origin),cr.navigator&&/(msie|trident)/i.test(cr.navigator.userAgent)):()=>!0,aM=cr.hasStandardBrowserEnv?{write(r,e,t,n,i,o){const a=[r+"="+encodeURIComponent(e)];ee.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),ee.isString(n)&&a.push("path="+n),ee.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function lM(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function uM(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function IE(r,e){return r&&!lM(e)?uM(r,e):e}const Cx=r=>r instanceof wr?{...r}:r;function Ps(r,e){e=e||{};const t={};function n(f,h,p,g){return ee.isPlainObject(f)&&ee.isPlainObject(h)?ee.merge.call({caseless:g},f,h):ee.isPlainObject(h)?ee.merge({},h):ee.isArray(h)?h.slice():h}function i(f,h,p,g){if(ee.isUndefined(h)){if(!ee.isUndefined(f))return n(void 0,f,p,g)}else return n(f,h,p,g)}function o(f,h){if(!ee.isUndefined(h))return n(void 0,h)}function a(f,h){if(ee.isUndefined(h)){if(!ee.isUndefined(f))return n(void 0,f)}else return n(void 0,h)}function u(f,h,p){if(p in e)return n(f,h);if(p in r)return n(void 0,f)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(f,h,p)=>i(Cx(f),Cx(h),p,!0)};return ee.forEach(Object.keys(Object.assign({},r,e)),function(h){const p=c[h]||i,g=p(r[h],e[h],h);ee.isUndefined(g)&&p!==u||(t[h]=g)}),t}const DE=r=>{const e=Ps({},r);let{data:t,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:u}=e;e.headers=a=wr.from(a),e.url=AE(IE(e.baseURL,e.url),r.params,r.paramsSerializer),u&&a.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let c;if(ee.isFormData(t)){if(cr.hasStandardBrowserEnv||cr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[f,...h]=c?c.split(";").map(p=>p.trim()).filter(Boolean):[];a.setContentType([f||"multipart/form-data",...h].join("; "))}}if(cr.hasStandardBrowserEnv&&(n&&ee.isFunction(n)&&(n=n(e)),n||n!==!1&&oM(e.url))){const f=i&&o&&aM.read(o);f&&a.set(i,f)}return e},cM=typeof XMLHttpRequest<"u",dM=cM&&function(r){return new Promise(function(t,n){const i=DE(r);let o=i.data;const a=wr.from(i.headers).normalize();let{responseType:u,onUploadProgress:c,onDownloadProgress:f}=i,h,p,g,x,y;function S(){x&&x(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let T=new XMLHttpRequest;T.open(i.method.toUpperCase(),i.url,!0),T.timeout=i.timeout;function R(){if(!T)return;const C=wr.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),w={data:!u||u==="text"||u==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:C,config:r,request:T};kE(function(D){t(D),S()},function(D){n(D),S()},w),T=null}"onloadend"in T?T.onloadend=R:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(R)},T.onabort=function(){T&&(n(new He("Request aborted",He.ECONNABORTED,r,T)),T=null)},T.onerror=function(){n(new He("Network Error",He.ERR_NETWORK,r,T)),T=null},T.ontimeout=function(){let I=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const w=i.transitional||LE;i.timeoutErrorMessage&&(I=i.timeoutErrorMessage),n(new He(I,w.clarifyTimeoutError?He.ETIMEDOUT:He.ECONNABORTED,r,T)),T=null},o===void 0&&a.setContentType(null),"setRequestHeader"in T&&ee.forEach(a.toJSON(),function(I,w){T.setRequestHeader(w,I)}),ee.isUndefined(i.withCredentials)||(T.withCredentials=!!i.withCredentials),u&&u!=="json"&&(T.responseType=i.responseType),f&&([g,y]=Ic(f,!0),T.addEventListener("progress",g)),c&&T.upload&&([p,x]=Ic(c),T.upload.addEventListener("progress",p),T.upload.addEventListener("loadend",x)),(i.cancelToken||i.signal)&&(h=C=>{T&&(n(!C||C.type?new Go(null,r,T):C),T.abort(),T=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const k=nM(i.url);if(k&&cr.protocols.indexOf(k)===-1){n(new He("Unsupported protocol "+k+":",He.ERR_BAD_REQUEST,r));return}T.send(o||null)})},fM=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let n=new AbortController,i;const o=function(f){if(!i){i=!0,u();const h=f instanceof Error?f:this.reason;n.abort(h instanceof He?h:new Go(h instanceof Error?h.message:h))}};let a=e&&setTimeout(()=>{a=null,o(new He(`timeout ${e} of ms exceeded`,He.ETIMEDOUT))},e);const u=()=>{r&&(a&&clearTimeout(a),a=null,r.forEach(f=>{f.unsubscribe?f.unsubscribe(o):f.removeEventListener("abort",o)}),r=null)};r.forEach(f=>f.addEventListener("abort",o));const{signal:c}=n;return c.unsubscribe=()=>ee.asap(u),c}},hM=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let n=0,i;for(;n<t;)i=n+e,yield r.slice(n,i),n=i},pM=async function*(r,e){for await(const t of mM(r))yield*hM(t,e)},mM=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},kx=(r,e,t,n)=>{const i=pM(r,e);let o=0,a,u=c=>{a||(a=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:f,value:h}=await i.next();if(f){u(),c.close();return}let p=h.byteLength;if(t){let g=o+=p;t(g)}c.enqueue(new Uint8Array(h))}catch(f){throw u(f),f}},cancel(c){return u(c),i.return()}},{highWaterMark:2})},od=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",PE=od&&typeof ReadableStream=="function",gM=od&&(typeof TextEncoder=="function"?(r=>e=>r.encode(e))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),_E=(r,...e)=>{try{return!!r(...e)}catch{return!1}},yM=PE&&_E(()=>{let r=!1;const e=new Request(cr.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!e}),Ix=64*1024,xp=PE&&_E(()=>ee.isReadableStream(new Response("").body)),Dc={stream:xp&&(r=>r.body)};od&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Dc[e]&&(Dc[e]=ee.isFunction(r[e])?t=>t[e]():(t,n)=>{throw new He(`Response type '${e}' is not supported`,He.ERR_NOT_SUPPORT,n)})})})(new Response);const vM=async r=>{if(r==null)return 0;if(ee.isBlob(r))return r.size;if(ee.isSpecCompliantForm(r))return(await new Request(cr.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(r)||ee.isArrayBuffer(r))return r.byteLength;if(ee.isURLSearchParams(r)&&(r=r+""),ee.isString(r))return(await gM(r)).byteLength},xM=async(r,e)=>{const t=ee.toFiniteNumber(r.getContentLength());return t??vM(e)},SM=od&&(async r=>{let{url:e,method:t,data:n,signal:i,cancelToken:o,timeout:a,onDownloadProgress:u,onUploadProgress:c,responseType:f,headers:h,withCredentials:p="same-origin",fetchOptions:g}=DE(r);f=f?(f+"").toLowerCase():"text";let x=fM([i,o&&o.toAbortSignal()],a),y;const S=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let T;try{if(c&&yM&&t!=="get"&&t!=="head"&&(T=await xM(h,n))!==0){let w=new Request(e,{method:"POST",body:n,duplex:"half"}),P;if(ee.isFormData(n)&&(P=w.headers.get("content-type"))&&h.setContentType(P),w.body){const[D,U]=Lx(T,Ic(bx(c)));n=kx(w.body,Ix,D,U)}}ee.isString(p)||(p=p?"include":"omit");const R="credentials"in Request.prototype;y=new Request(e,{...g,signal:x,method:t.toUpperCase(),headers:h.normalize().toJSON(),body:n,duplex:"half",credentials:R?p:void 0});let k=await fetch(y);const C=xp&&(f==="stream"||f==="response");if(xp&&(u||C&&S)){const w={};["status","statusText","headers"].forEach(Q=>{w[Q]=k[Q]});const P=ee.toFiniteNumber(k.headers.get("content-length")),[D,U]=u&&Lx(P,Ic(bx(u),!0))||[];k=new Response(kx(k.body,Ix,D,()=>{U&&U(),S&&S()}),w)}f=f||"text";let I=await Dc[ee.findKey(Dc,f)||"text"](k,r);return!C&&S&&S(),await new Promise((w,P)=>{kE(w,P,{data:I,headers:wr.from(k.headers),status:k.status,statusText:k.statusText,config:r,request:y})})}catch(R){throw S&&S(),R&&R.name==="TypeError"&&/fetch/i.test(R.message)?Object.assign(new He("Network Error",He.ERR_NETWORK,r,y),{cause:R.cause||R}):He.from(R,R&&R.code,r,y)}}),Sp={http:F2,xhr:dM,fetch:SM};ee.forEach(Sp,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const Dx=r=>`- ${r}`,EM=r=>ee.isFunction(r)||r===null||r===!1,OE={getAdapter:r=>{r=ee.isArray(r)?r:[r];const{length:e}=r;let t,n;const i={};for(let o=0;o<e;o++){t=r[o];let a;if(n=t,!EM(t)&&(n=Sp[(a=String(t)).toLowerCase()],n===void 0))throw new He(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+o]=n}if(!n){const o=Object.entries(i).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?o.length>1?`since :
`+o.map(Dx).join(`
`):" "+Dx(o[0]):"as no adapter specified";throw new He("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:Sp};function Oh(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Go(null,r)}function Px(r){return Oh(r),r.headers=wr.from(r.headers),r.data=_h.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),OE.getAdapter(r.adapter||al.adapter)(r).then(function(n){return Oh(r),n.data=_h.call(r,r.transformResponse,n),n.headers=wr.from(n.headers),n},function(n){return CE(n)||(Oh(r),n&&n.response&&(n.response.data=_h.call(r,r.transformResponse,n.response),n.response.headers=wr.from(n.response.headers))),Promise.reject(n)})}const FE="1.7.9",ad={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{ad[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const _x={};ad.transitional=function(e,t,n){function i(o,a){return"[Axios v"+FE+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return(o,a,u)=>{if(e===!1)throw new He(i(a," has been removed"+(t?" in "+t:"")),He.ERR_DEPRECATED);return t&&!_x[a]&&(_x[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,a,u):!0}};ad.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function TM(r,e,t){if(typeof r!="object")throw new He("options must be an object",He.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const o=n[i],a=e[o];if(a){const u=r[o],c=u===void 0||a(u,o,r);if(c!==!0)throw new He("option "+o+" must be "+c,He.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new He("Unknown option "+o,He.ERR_BAD_OPTION)}}const sc={assertOptions:TM,validators:ad},Dn=sc.validators;class Cs{constructor(e){this.defaults=e,this.interceptors={request:new Rx,response:new Rx}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ps(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:o}=t;n!==void 0&&sc.assertOptions(n,{silentJSONParsing:Dn.transitional(Dn.boolean),forcedJSONParsing:Dn.transitional(Dn.boolean),clarifyTimeoutError:Dn.transitional(Dn.boolean)},!1),i!=null&&(ee.isFunction(i)?t.paramsSerializer={serialize:i}:sc.assertOptions(i,{encode:Dn.function,serialize:Dn.function},!0)),sc.assertOptions(t,{baseUrl:Dn.spelling("baseURL"),withXsrfToken:Dn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=o&&ee.merge(o.common,o[t.method]);o&&ee.forEach(["delete","get","head","post","put","patch","common"],y=>{delete o[y]}),t.headers=wr.concat(a,o);const u=[];let c=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(t)===!1||(c=c&&S.synchronous,u.unshift(S.fulfilled,S.rejected))});const f=[];this.interceptors.response.forEach(function(S){f.push(S.fulfilled,S.rejected)});let h,p=0,g;if(!c){const y=[Px.bind(this),void 0];for(y.unshift.apply(y,u),y.push.apply(y,f),g=y.length,h=Promise.resolve(t);p<g;)h=h.then(y[p++],y[p++]);return h}g=u.length;let x=t;for(p=0;p<g;){const y=u[p++],S=u[p++];try{x=y(x)}catch(T){S.call(this,T);break}}try{h=Px.call(this,x)}catch(y){return Promise.reject(y)}for(p=0,g=f.length;p<g;)h=h.then(f[p++],f[p++]);return h}getUri(e){e=Ps(this.defaults,e);const t=IE(e.baseURL,e.url);return AE(t,e.params,e.paramsSerializer)}}ee.forEach(["delete","get","head","options"],function(e){Cs.prototype[e]=function(t,n){return this.request(Ps(n||{},{method:e,url:t,data:(n||{}).data}))}});ee.forEach(["post","put","patch"],function(e){function t(n){return function(o,a,u){return this.request(Ps(u||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Cs.prototype[e]=t(),Cs.prototype[e+"Form"]=t(!0)});class Lm{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(u=>{n.subscribe(u),o=u}).then(i);return a.cancel=function(){n.unsubscribe(o)},a},e(function(o,a,u){n.reason||(n.reason=new Go(o,a,u),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Lm(function(i){e=i}),cancel:e}}}function wM(r){return function(t){return r.apply(null,t)}}function RM(r){return ee.isObject(r)&&r.isAxiosError===!0}const Ep={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ep).forEach(([r,e])=>{Ep[e]=r});function ME(r){const e=new Cs(r),t=hE(Cs.prototype.request,e);return ee.extend(t,Cs.prototype,e,{allOwnKeys:!0}),ee.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return ME(Ps(r,i))},t}const Ft=ME(al);Ft.Axios=Cs;Ft.CanceledError=Go;Ft.CancelToken=Lm;Ft.isCancel=CE;Ft.VERSION=FE;Ft.toFormData=sd;Ft.AxiosError=He;Ft.Cancel=Ft.CanceledError;Ft.all=function(e){return Promise.all(e)};Ft.spread=wM;Ft.isAxiosError=RM;Ft.mergeConfig=Ps;Ft.AxiosHeaders=wr;Ft.formToJSON=r=>bE(ee.isHTMLForm(r)?new FormData(r):r);Ft.getAdapter=OE.getAdapter;Ft.HttpStatusCode=Ep;Ft.default=Ft;const di=Ft.create({baseURL:"/api/"}),AM=async()=>{let r,e;return await di.get("/admin/checkuser").then(n=>{console.log(n.data.auth),n.data.auth?localStorage.setItem("auth","true"):localStorage.setItem("auth","false")}).catch(n=>{console.log(n),localStorage.setItem("auth","false")}),await di.get("/user/getlogo").then(n=>{n.data.result[0].length==1?localStorage.setItem("logo",n.data.result[0][0].image):localStorage.removeItem("logo")}).catch(n=>{console.log(n)}),await di.get("/user/getstream").then(n=>{r=n.data.results[0]}).catch(n=>{console.log(n)}),await di.get("/user/getallvideo").then(n=>{e=n.data,console.log(e)}).catch(n=>{console.log(n)}),[r,{videos:e}]},NE=O.createContext();O.createContext();const LM=()=>{const[r,e]=O.useState(!0),[t,n]=O.useState(!1),[i,o]=O.useState(!1),[a,u]=O.useState(!1),[c,f]=O.useState("mafrid029@gmail.com"),[h,p]=O.useState("123456"),[g,x]=O.useState(!1),[y,S]=O.useState(!1),[T,R]=O.useState(!1),[k,C]=O.useState(""),[I,w]=O.useState(""),[P,D]=O.useState(!1),[U,Q]=O.useState(""),A=jR(),{stream:$}=A[0],{videos:ie}=A[1];console.log($),console.log(ie),O.useEffect(()=>{let ue=localStorage.getItem("logo");if(ue){D(!0),ue=ue.replace(/\\/g,"/");const Qe=ue.replace("public/","");Q(Qe),console.log(ue)}else D(!1)},[]),O.useEffect(()=>{const ue=localStorage.getItem("auth");x(ue==="true")},[]),O.useEffect(()=>{$&&$!==k&&(console.log("Source Updated"),C($))},[$,k]);const te=ue=>{e(ue)},[fe,de]=O.useState(""),pe=(ue,Qe)=>{de(Qe),n(ue)},ge=ue=>{o(ue)},ne=ue=>{f(ue)},Y=ue=>{p(ue)},q=ue=>{S(ue)},F=ue=>{R(ue)},H=async()=>{u(!0),console.log(c);const ue={email:c,password:h};console.log(ue),await di.post("/admin/login",ue).then(Qe=>(console.log(Qe),x(!0),ge(!1),u(!1),null)).catch(Qe=>{const{data:vi}=Qe.response;return console.log("Error ",vi),u(!1),null})},me=async()=>{u(!0);const ue={stream:I};return await di.post("/admin/loadlive",ue).then(Qe=>(console.log(Qe),q(!1),u(!0),qf("/"))).catch(Qe=>{console.log(Qe),u(!0)}),null},[ve,Se]=O.useState(null),be=ue=>{const Qe=ue.target.files[0];Qe&&Se(Qe)},[Me,Be]=O.useState(""),[De,ot]=O.useState(""),rr=ue=>{Be(ue.target.value)},qt=ue=>{ot(ue.target.value)},nr=async()=>{u(!0),console.log(Me),console.log(De),console.log(ve);const ue=new FormData;ue.append("url",Me),ue.append("title",De),ue.append("image",ve),await di.post("/admin/insertvideo",ue,{headers:{"Content-Type":"multipart/form-data"}}).then(Qe=>(console.log("Upload successful",Qe.data),F(!1),u(!0),qf("/"))).catch(Qe=>{console.log(Qe),u(!0)})},[on,yi]=O.useState(!1),Rn=ue=>{yi(ue)},[Ur,Gr]=O.useState(null),Kn=ue=>{const Qe=ue.target.files[0];Qe&&Gr(Qe)},jr=async()=>{u(!0);const ue=new FormData;ue.append("logo",Ur),await di.post("/admin/uploadlogo",ue,{headers:{"Content-Type":"multipart/form-data"}}).then(Qe=>(console.log("Upload successful",Qe.data),Rn(!1),u(!0),qf("/"))).catch(Qe=>{console.log(Qe),u(!0)})},Gt=async()=>{await di.get("/admin/logout").then(ue=>(localStorage.removeItem("auth"),x(!1),null)).catch(ue=>{console.log(ue)})};return W.jsxs(NE.Provider,{value:{isPlaying:r,LiveStream:k,isLiveModal:y,isVideoModal:T,isLoginModal:i,LoginModalHandler:ge,isSubmitting:a,LoginAction:H,handleEmail:ne,handlePassword:Y,AddLiveModalHandler:q,AddVideoModalHandler:F,handleImageChange:be,setSource:w,LiveVideoUploadAction:me,VideoUploadAction:nr,handleURLChange:rr,handleTitleChange:qt,videos:ie,setPlaying:te,PlayerHandler:pe,logoUpdateModal:on,handleLogoUpdateModel:Rn,handleLogoChange:Kn,UploadLogoAction:jr,bgImage:U,backgroundImage:P},children:[W.jsxs(BL,{isLoggedin:g,children:[W.jsxs("div",{style:{backgroundImage:P?`url('${U}')`:"url('/src/assets/images/banner-bk.png')"},className:"jumbotron ",id:"banner",children:[W.jsxs("header",{children:[W.jsxs("div",{className:"row",children:[W.jsxs("div",{className:"col-2 header",children:[W.jsx("span",{style:{color:"red",fontWeight:"900"},children:"MASS"}),W.jsx(qF,{sx:{fontSize:"32px",transform:"rotate(-10deg)",alignItems:"center"}})]}),W.jsx("div",{className:"col-2 align-center",children:g?W.jsx(mp,{color:"error",onClick:Gt,sx:{borderRadius:"25px","&:hover":{backgroundColor:"#E44C4C",color:"white",border:"1px solidrgb(255, 255, 255)"}},variant:"outlined",size:"small",children:"Log Out"}):W.jsx(mp,{onClick:()=>ge(!0),sx:{borderRadius:"25px","&:hover":{backgroundColor:"#1565c0",color:"white",border:"1px solid #B8BAB9"}},variant:"outlined",size:"small",children:"Sign in"})})]}),g?W.jsx(zF,{}):""]}),W.jsx("div",{className:g?"mass":"mass isLoggedIn",children:"MASS TV . CA"}),W.jsx(WF,{}),W.jsx(aD,{})]}),W.jsxs("div",{className:"live",children:[W.jsx("h5",{children:"Live TV"}),W.jsx(YF,{className:"liveIcon",sx:{color:"red"}})]})]}),W.jsx(HF,{}),W.jsx(pD,{isModalPlayer:t,localUrl:fe}),W.jsx(dD,{}),W.jsx(uD,{}),W.jsx(lD,{}),W.jsx(mD,{})]})},gi=()=>O.useContext(NE),bM=Ar.div`
 .error {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    flex-direction: column;
    height: 90vh;
    border: 5px solid #071F54;
    margin: 10px;
    border-radius: 25px;
    animation: load 1s ease;
 }  

 @keyframes load {
    0% {
        transform : translateX(-100%);
        opacity: 0;
    }
    100% {
        transform : translateX(0%);
        opacity: 1;
    }
 }

 .foot {
    height:calc(10vh - 25px);
    background-color: #071F54;
    bottom:0px;
    position: fixed;
    width: 100vw; 
    animation: load1 1s ease;
 }  

 @keyframes load1 {
    0% {
        transform : translateY(100%);
        opacity: 0;
    }
    100% {
        transform : translateY(0%);
        opacity: 1;
    }
 }
`,CM=()=>{const r=Wx();return W.jsxs(bM,{children:[W.jsxs("div",{className:"error",children:[W.jsxs("h1",{children:[W.jsxs("span",{style:{marginRight:"10px"},children:[" ",W.jsx("img",{src:"../assets/images/file-corrupted-svgrepo-com.svg",alt:"Icon",width:24,height:24})]}),"Page Not Found"]}),W.jsx(mp,{onClick:()=>r("/"),children:"Go to Home"})]}),W.jsx("div",{className:"foot"})]})},kM=SA([{path:"/",element:W.jsx(LM,{}),errorElement:W.jsx(CM,{}),loader:AM}]),IM=()=>W.jsx(_A,{router:kM});_w.createRoot(document.getElementById("root")).render(W.jsx(O.StrictMode,{children:W.jsx(IM,{})}));
